<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">í´ë¦°ì•„í‚¤í…ì³ 02 usecaseì™€ testë¥¼ ìœ„í•œ RepoSpy, MockDto method</h1><p class="page-description">python clean architecture</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-02T00:00:00-05:00" itemprop="datePublished">
        Sep 2, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      20 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#flask">flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cleanarchitecture">cleanarchitecture</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- tocê°€ ë¨¼ì € ë‚˜ì˜¤ë¯€ë¡œ h3ë¡œ ì•ˆë‚´í•˜ê¸° -->
    <h3>ğŸ“œ ì œëª©ìœ¼ë¡œ ë³´ê¸°</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#í´ë¦°-ì•„í‚¤í…ì³-2ì¥">í´ë¦° ì•„í‚¤í…ì³ 2ì¥</a>
<ul>
<li class="toc-entry toc-h2"><a href="#1-use-cases-register-user">1 use cases (register user)</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-brë”°ì„œ-ì‘ì—…-ì„¸íŒ…í•˜ê¸°">01 brë”°ì„œ ì‘ì—… ì„¸íŒ…í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#02-scrdomain-use_casesí´ë”-ë°-initìƒì„±">02 scr&gt;domain&gt; use_casesí´ë” ë° initìƒì„±</a></li>
<li class="toc-entry toc-h3"><a href="#03-domain-layer-register_userì¸í„°í˜ì´ìŠ¤---data-layerì—ì„œ-ê°ì²´-classë¥¼-êµ¬í˜„í•œë‹¤">03 domain layer register_userì¸í„°í˜ì´ìŠ¤ -&gt; data layerì—ì„œ ê°ì²´ classë¥¼ êµ¬í˜„í•œë‹¤</a></li>
<li class="toc-entry toc-h3"><a href="#register-user-use-case-ë§Œë“¤ê¸°">register user Use Case ë§Œë“¤ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#domain-layerì—-interfaceë¡œ-ì„¤ê³„í•œë‹¤">domain layerì— interfaceë¡œ ì„¤ê³„í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#registeruser-ì˜-ë°˜í™˜íƒ€ì…ì€-dictbool-dtoí˜•íƒœì´ë‹¤">RegisterUser ì˜ ë°˜í™˜íƒ€ì…ì€ Dict[bool, DTO]í˜•íƒœì´ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#data-layerì—ì„œ-ê°œë³„-use_caseë§ˆë‹¤-ë§Œë“¤ì–´ì¤„--classí´ë”initì„-ë§Œë“¤ê³ -domain-layerì—-ë§Œë“ -use_cases--ì†-ì¸í„°í˜ì´ìŠ¤ë“¤ì„-importí•œë‹¤">data layerì—ì„œ ê°œë³„ use_caseë§ˆë‹¤ ë§Œë“¤ì–´ì¤„  classí´ë”+initì„ ë§Œë“¤ê³ , domain layerì— ë§Œë“  use_cases  ì† ì¸í„°í˜ì´ìŠ¤ë“¤ì„ importí•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#data-layerì˜-ê°œë³„use-case--classë“¤ì€-repositoryë¥¼-ìƒì„±ìì—ì„œ-ì¸ìë¡œ-ë°›ì•„-ê°ì²´ë¡œ-ìƒì„±ëœë‹¤ê°ì²´-staticì¸-clasmethod-x---typingì„-ìœ„í•´-userrepository-interfaceë¥¼-êµ¬í˜„í–ˆë˜-ê²ƒì´ë‹¤">data layerì˜ ê°œë³„use case  Classë“¤ì€ repositoryë¥¼ ìƒì„±ìì—ì„œ ì¸ìë¡œ ë°›ì•„ ê°ì²´ë¡œ ìƒì„±ëœë‹¤(ê°ì²´ staticì¸ clasmethod X) -&gt; typingì„ ìœ„í•´ UserRepository Interfaceë¥¼ êµ¬í˜„í–ˆë˜ ê²ƒì´ë‹¤!</a></li>
<li class="toc-entry toc-h4"><a href="#data-layerì˜-ê°œë³„-use-case-classë“¤ì€-ê°ì²´ë¡œ-ìƒì„±ë -ê²ƒì´ë©°-repositoryë¥¼-í•„ë“œë¡œ-ë³´ìœ í•˜ê³ -use-case-classì´ë¦„ê³¼-ìœ ì‚¬í•˜ê²Œ-ì¸ìŠ¤í„´ìŠ¤-ë©”ì„œë“œë¥¼-ë§Œë“¤ì–´-repositoryí•„ë“œì™€-ê°™ì´-ì‘ë™í•œë‹¤">data layerì˜ ê°œë³„ use case Classë“¤ì€ ê°ì²´ë¡œ ìƒì„±ë  ê²ƒì´ë©°, repositoryë¥¼ í•„ë“œë¡œ ë³´ìœ í•˜ê³ , use case Classì´ë¦„ê³¼ ìœ ì‚¬í•˜ê²Œ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ repositoryí•„ë“œì™€ ê°™ì´ ì‘ë™í•œë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ì¸ìŠ¤í„´ìŠ¤-ë©”ì„œë“œëŠ”-ì¼ë‹¨-íŒŒë¼ë¯¸í„°ë“¤ì˜-type-ìœ íš¨ì„±ë¶€í„°-ê²€ì‚¬í•œë‹¤validate_entry">ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” ì¼ë‹¨, íŒŒë¼ë¯¸í„°ë“¤ì˜ type ìœ íš¨ì„±ë¶€í„° ê²€ì‚¬í•œë‹¤.(validate_entry)</a></li>
<li class="toc-entry toc-h5"><a href="#if-validate_entry-ì„±ê³µì‹œì—ë§Œ-repositoryinsert_userë¥¼-í˜¸ì¶œí•˜ì—¬-ê°€ë³€ë³€ìˆ˜-respoonse--noneì—-ê²°ê³¼ê°’dtoë¥¼-í• ë‹¹í•´ì¤€ë‹¤-reigsterë©”ì„œë“œì˜-ë°˜í™˜íƒ€ì…ì€-success-dataì´ë‹¤">if validate_entry ì„±ê³µì‹œì—ë§Œ repository.insert_userë¥¼ í˜¸ì¶œí•˜ì—¬ ê°€ë³€ë³€ìˆ˜ respoonse = Noneì— ê²°ê³¼ê°’(DTO)ë¥¼ í• ë‹¹í•´ì¤€ë‹¤. reigsterë©”ì„œë“œì˜ ë°˜í™˜íƒ€ì…ì€ {â€œSuccessâ€, â€œdataâ€}ì´ë‹¤</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-use-case--class-test-register-user-test">04 use case  Class test (register user test)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#data-layerì˜-ê°œë³„-usecase-class-in-ê°œë³„-usecase-í´ë”ì—ì„œ-_testpyë„-ë§Œë“¤ì–´ì¤€ë‹¤">data layerì˜ ê°œë³„ usecase Class in ê°œë³„ usecase í´ë”ì—ì„œ _test.pyë„ ë§Œë“¤ì–´ì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#05-use-case-testëŠ”-mock_repo-repository-spy-ê°ì²´ê°€-í•„ìš”í•˜ë‹¤dbê´€ë ¨ëœ-infraì˜-repoë¥¼-í…ŒìŠ¤íŠ¸í• -ì—†ìŒ-inputoutput-í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-ëª©repo">05 use case testëŠ” mock_repo [Repository Spy] ê°ì²´ê°€ í•„ìš”í•˜ë‹¤(DBê´€ë ¨ëœ infraì˜ repoë¥¼ í…ŒìŠ¤íŠ¸í•  ì—†ìŒ. input/output í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ëª©repo)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#srcinfra-ì†--testí´ë”--init-ë§Œë“ ë‹¤">src&gt;infra ì†&gt;  testí´ë” + init ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#íŠ¹ì •repoì—-ëŒ€í•œ-repository_spypyë¥¼-ë§Œë“ ë‹¤">íŠ¹ì •repoì— ëŒ€í•œ repository_spy.pyë¥¼ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#input-spy-ì²˜ë¦¬-repo-spyëŠ”-repoì˜-ë©”ì„œë“œë“¤ì˜-signatureì—-ë”°ë¥¸-ì¸ìë“¤ì„-ë°›ì•˜ì„-ë•Œ-ì‹¤ì œë¡œ-ë©”ì„œë“œ-í˜¸ì¶œ-ëŒ€ì‹ -ë©”ì„œë“œë³„-ë°°ì •ëœ-param-dict-í•„ë“œì†ì—-ì €ì¥-íŒŒë¼ë¯¸í„°ë“¤ì„-ì €ì¥í•´ë†“ëŠ”ë‹¤">[input spy ì²˜ë¦¬] repo spyëŠ” repoì˜ ë©”ì„œë“œë“¤ì˜ signatureì— ë”°ë¥¸ ì¸ìë“¤ì„ ë°›ì•˜ì„ ë•Œ, ì‹¤ì œë¡œ ë©”ì„œë“œ í˜¸ì¶œ ëŒ€ì‹  ë©”ì„œë“œë³„ ë°°ì •ëœ param dict í•„ë“œì†ì— ì €ì¥ íŒŒë¼ë¯¸í„°ë“¤ì„ ì €ì¥í•´ë†“ëŠ”ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#06-repo-spyì˜-returnì—-ì‚¬ìš©ë -mock-dto-ë°˜í™˜-mock_method-ë§Œë“¤ê¸°">06 Repo Spyì˜ returnì— ì‚¬ìš©ë  Mock DTO ë°˜í™˜ mock_method ë§Œë“¤ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#output-ëª©ì²˜ë¦¬-repoë©”ì„œë“œë³„-return-typeì—-ë§ëŠ”-ì‹¤ì œdtoê°ì²´x-ëª©ê°ì²´-ì²˜ë¦¬í• -ìˆ˜-ìˆë˜ë¡-return-dtoë°˜í™˜-mock_methodê°€-í•„ìš”í•˜ë‹¤">[output ëª©ì²˜ë¦¬] repoë©”ì„œë“œë³„ return typeì— ë§ëŠ” ì‹¤ì œDTOê°ì²´(X) ëª©ê°ì²´ ì²˜ë¦¬í•  ìˆ˜ ìˆë˜ë¡ return DTOë°˜í™˜ mock_method()ê°€ í•„ìš”í•˜ë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#return-typeì¸-dtoì˜-ëª©ê°ì²´ëŠ”-dtoê°€-ìˆëŠ”-domainì—-testí´ë”-initì„-ë§Œë“ ë‹¤">return typeì¸ DTOì˜ ëª©ê°ì²´ëŠ” DTOê°€ ìˆëŠ” domainì— testí´ë”+ initì„ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#mock-methodì˜-ì´ë¦„ì€-mock_xxxpyë¡œ-ë§Œë“ ë‹¤">mock methodì˜ ì´ë¦„ì€ mock_xxx.pyë¡œ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#repo-spyí´ë˜ìŠ¤ì™€-ë‹¬ë¦¬-ì‹¤ì œdto-class--fakerë¡œ-mock-dtoë°˜í™˜-mock-methodë¥¼-ë§Œë“ ë‹¤">repo spyí´ë˜ìŠ¤ì™€ ë‹¬ë¦¬, ì‹¤ì œDTO class + fakerë¡œ mock DTOë°˜í™˜ mock methodë¥¼ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#mock-methodê°€-ë§Œë“¤ì–´ì§€ë©´-initì—-ì˜¬ë¦°ë‹¤">mock methodê°€ ë§Œë“¤ì–´ì§€ë©´, initì— ì˜¬ë¦°ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#repo-spyì—ì„œ-mock_methodë¥¼-importí•´ì„œ-mock-dtoë¥¼-ë°˜í™˜ë°›ë„ë¡-ì‚¬ìš©í•œë‹¤">Repo Spyì—ì„œ mock_methodë¥¼ importí•´ì„œ mock DTOë¥¼ ë°˜í™˜ë°›ë„ë¡ ì‚¬ìš©í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#repo-spyê°€-ì™„ì„±ë˜ì—ˆìœ¼ë©´-infratestì˜-initì—-ì˜¬ë¦°ë‹¤">repo spyê°€ ì™„ì„±ë˜ì—ˆìœ¼ë©´, infra.testì˜ initì— ì˜¬ë¦°ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#07-use-case-testregister_testë§ˆë¬´ë¦¬">07 use case test(register_test)ë§ˆë¬´ë¦¬</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-usecase-class-ì—ì„œëŠ”-ì¸ì-repository-ëŒ€ì‹ -repository-spyê°ì²´ë¥¼-importí•´ì„œ-ì‚¬ìš©í•œë‹¤">01 usecase Class ì—ì„œëŠ”, ì¸ì repository ëŒ€ì‹ , repository spyê°ì²´ë¥¼ importí•´ì„œ ì‚¬ìš©í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#02-use-caseì˜-input-testëŠ”-javascriptëª¨ì–‘ìœ¼ë¡œ-dictë¥¼-êµ¬ì„±í•˜ì—¬-use-class-methodì—-ë˜ì ¸ì¤€ë‹¤">02 use caseì˜ input testëŠ” javascriptëª¨ì–‘ìœ¼ë¡œ dictë¥¼ êµ¬ì„±í•˜ì—¬ use class methodì— ë˜ì ¸ì¤€ë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#repo-spyë¥¼-ê°€ì§„-usecase-classëŠ”-ë‚´ë¶€ì—ì„œ-repo-methodí˜¸ì¶œì‹œ-methodë³„-param-dictì—-ì†Œìœ ë§Œ-í•˜ê³ ìˆê³ -mock_methodë¡œ-dtoëª©ê°ì²´ë¥¼-responseì—-ê±´ë„¤ì¤„-ê²ƒì´ë‹¤">repo spyë¥¼ ê°€ì§„ usecase classëŠ”, ë‚´ë¶€ì—ì„œ repo methodí˜¸ì¶œì‹œ, methodë³„ param dictì— ì†Œìœ ë§Œ í•˜ê³ ìˆê³ , mock_method()ë¡œ DTOëª©ê°ì²´ë¥¼ responseì— ê±´ë„¤ì¤„ ê²ƒì´ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#03-use-case-class-testëŠ”-inputê³¼-outputì„-ë”°ë¡œ-í…ŒìŠ¤íŒ…í•œë‹¤">03 use case class testëŠ” inputê³¼ outputì„ ë”°ë¡œ í…ŒìŠ¤íŒ…í•œë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#use-case-input-testëŠ”-inputì´-usecaseê°ì²´ë¥¼-íˆ¬ì…ëœ-ë’¤-ì‚¬ìš©ëœ-repo-spy-ì†-methodë³„-param-dictì—-ì˜-ë“¤ì–´ê°”ëŠ”ì§€-ê¹Œì§€-ê²€ì‚¬">use case Input TestëŠ” inputì´ usecaseê°ì²´ë¥¼ íˆ¬ì…ëœ ë’¤, ì‚¬ìš©ëœ repo spy ì† methodë³„ param dictì— ì˜ ë“¤ì–´ê°”ëŠ”ì§€ ê¹Œì§€ ê²€ì‚¬</a></li>
<li class="toc-entry toc-h5"><a href="#use-case-output-testëŠ”-repo-spyëŠ”-mock_usersë¥¼-returní•˜ì§€ë§Œ-inputê³¼-ë³„ê°œì´ë¯€ë¡œ-inputì´-ì œëŒ€ë¡œ-ì•ˆë“¤ì–´ê°”ë‹¤ë©´-false--noneìœ¼ë¡œ-ë°˜í™˜ë -validate_entryì™€-responseì¡´ì¬ìœ ë¬´ë§Œ-ê²€ì‚¬í•œë‹¤">use case Output TestëŠ” repo spyëŠ” mock_users()ë¥¼ returní•˜ì§€ë§Œ inputê³¼ ë³„ê°œì´ë¯€ë¡œ, [inputì´ ì œëŒ€ë¡œ ì•ˆë“¤ì–´ê°”ë‹¤ë©´, False / None]ìœ¼ë¡œ ë°˜í™˜ë  [validate_entryì™€ responseì¡´ì¬ìœ ë¬´]ë§Œ ê²€ì‚¬í•œë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#pytest--vsë¥¼-ëŒë¦¬ë˜-ê²€ì¦ì•ˆí•˜ëŠ”-responseì˜-ì‹¤ì œë‚´ìš©spy-repoê°€-faker-mock_usersë¥¼-í†µí•´-ë°˜í™˜í•œ-ë°ì´í„°ë¥¼-í™•ì¸í•˜ë©´ì„œ-ëŒë ¤ë³´ì">pytest -vsë¥¼ ëŒë¦¬ë˜, ê²€ì¦ì•ˆí•˜ëŠ” responseì˜ ì‹¤ì œë‚´ìš©(spy repoê°€ faker mock_users()ë¥¼ í†µí•´ ë°˜í™˜í•œ ë°ì´í„°)ë¥¼ í™•ì¸í•˜ë©´ì„œ ëŒë ¤ë³´ì.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#04-use-case-classëŠ”-inputì—-ëŒ€í•œ-fail-testë„-í•„ìš”í•˜ë‹¤">04 use case ClassëŠ” inputì— ëŒ€í•œ fail testë„ í•„ìš”í•˜ë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ì„±ê³µtestë¥¼-ë³µì‚¬í•´ì„œ-_fail-í…ŒìŠ¤íŠ¸-ë©”ì„œë“œë¥¼-ë§Œë“ ë‹¤">ì„±ê³µtestë¥¼ ë³µì‚¬í•´ì„œ _fail í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë¥¼ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#js-input-attributesì—-invalid-typeì„-ì…ë ¥">js input attributesì— invalid typeì„ ì…ë ¥</a></li>
<li class="toc-entry toc-h5"><a href="#inputì´-ì˜ëª»ë˜ë©´-usecase---repo-spyì˜-ë©”ì„œë“œë¡œ-ì§„ì…ë„-ëª»í•˜ë¯€ë¡œ-assertì‹œ-repo-spyì˜-param-dictëŠ”-ë¹„ì–´ìˆì–´ì•¼í•œë‹¤">inputì´ ì˜ëª»ë˜ë©´, usecase -&gt; repo spyì˜ ë©”ì„œë“œë¡œ ì§„ì…ë„ ëª»í•˜ë¯€ë¡œ, assertì‹œ repo spyì˜ param dictëŠ” ë¹„ì–´ìˆì–´ì•¼í•œë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#ouput-testì—ì„œëŠ”-validate_entryì—¬ë¶€ì¸-successëŠ”-false--returnì˜-dataëŠ”-response--none-ì´ˆê¸°í™”ìƒíƒœë¥¼-ì‘ë‹µí•˜ê²Œ-ëœë‹¤">ouput testì—ì„œëŠ” validate_entryì—¬ë¶€ì¸ SuccessëŠ” False / returnì˜ DataëŠ” response = None ì´ˆê¸°í™”ìƒíƒœë¥¼ ì‘ë‹µí•˜ê²Œ ëœë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#ì°¸ê³ -pytest-íŠ¹ì •ê²½ë¡œëŠ”-í´ë”ê¹Œì§€ë§Œìœ¼ë¡œ-ì¤˜ë„-ëœë‹¤">ì°¸ê³ ) pytest íŠ¹ì •ê²½ë¡œëŠ” í´ë”ê¹Œì§€ë§Œìœ¼ë¡œ ì¤˜ë„ ëœë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#testì™„ë£Œëœ-git-ì²˜ë¦¬">testì™„ë£Œëœ git ì²˜ë¦¬</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#use-cases-2-finduser">use cases 2 FindUser</a>
<ul>
<li class="toc-entry toc-h3"><a href="#ì‘ì—…-ëë‚œ-brì˜-local-í´ë”ì—ì„œ-ìƒˆ-bríŒŒì„œ-ì‘ì—…-ì´ì–´ì„œ-í•˜ê¸°">ì‘ì—… ëë‚œ brì˜ local í´ë”ì—ì„œ ìƒˆ bríŒŒì„œ ì‘ì—… ì´ì–´ì„œ í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#01-use-case-classëŠ”-domain--use_cases-ì—-interfaceí˜•íƒœ-classë¶€í„°-ì •ì˜í•˜ë”ë¼">01 use case ClassëŠ” domain &gt; use_cases ì— [Interfaceí˜•íƒœ Class]ë¶€í„° ì •ì˜í•˜ë”ë¼</a>
<ul>
<li class="toc-entry toc-h4"><a href="#as--interfaceë¥¼-ë¶™ì—¬ì“°ë¯€ë¡œ-classëª…ì—-ì§ì ‘-interfaceë¥¼-ë¶™ì—¬ì“°ì§€-ì•Šìœ¼ë¯€ë¡œ--datainterfacesì—-ì†í•˜ì§„-ì•ŠëŠ”ë‹¤">as -Interfaceë¥¼ ë¶™ì—¬ì“°ë¯€ë¡œ, classëª…ì— ì§ì ‘ interfaceë¥¼ ë¶™ì—¬ì“°ì§€ ì•Šìœ¼ë¯€ë¡œ,  data&gt;interfacesì— ì†í•˜ì§„ ì•ŠëŠ”ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#finduserëŠ”-select_userë¥¼-ì“¸-ê²ƒì¸ë°-idunique_colfk-ì—-ë”°ë¼-ê²½ìš°ì˜-ìˆ˜ê°€-ìˆìœ¼ë¯€ë¡œ-ê·¸ë§Œí¼-by_xxë©”ì„œë“œë¥¼-ë‚˜ëˆ ì„œ-ë§Œë“ ë‹¤-use_case-classì˜-ë©”ì„œë“œ-returntypeì€-dictbool-dto-ì•„ë‹ˆë¼ë©´-dictbool-listdto-ê³ ì •ì´ë‹¤">FindUserëŠ” select_userë¥¼ ì“¸ ê²ƒì¸ë°, id/unique_col/fk ì— ë”°ë¼ ê²½ìš°ì˜ ìˆ˜ê°€ ìˆìœ¼ë¯€ë¡œ, ê·¸ë§Œí¼ by_xxë©”ì„œë“œë¥¼ ë‚˜ëˆ ì„œ ë§Œë“ ë‹¤. use_case Classì˜ ë©”ì„œë“œ returnTypeì€ Dict[bool, DTO] ì•„ë‹ˆë¼ë©´ Dict[bool, List[DTO]] ê³ ì •ì´ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-data---ê°œë³„use_caseí´ë”ëª…--init-ìƒì„±í›„-ê°œë³„use_caseë™ì‚¬ëª…pyì—ë‹¤ê°€-usecase-classë¥¼-ì •ì˜í•œë‹¤">02 data &gt;  ê°œë³„use_caseí´ë”ëª… + init ìƒì„±í›„, ê°œë³„use_caseë™ì‚¬ëª….pyì—ë‹¤ê°€ usecase Classë¥¼ ì •ì˜í•œë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#domainuse_casesì˜-pyëª…ê³¼-dataê°œë³„use_caseëª…ì€--ë™ì‚¬_ëª©ì ì–´ì§€ë§Œ-ê°œë³„use_caseí´ë”-ì†-pyíŒŒì¼ì€-ë™ì‚¬ë¡œë§Œ-êµ¬ì„±í•œë‹¤">domain&gt;use_cases&gt;ì˜ pyëª…ê³¼, data&gt;ê°œë³„use_caseëª…ì€  ë™ì‚¬_ëª©ì ì–´ì§€ë§Œ, ê°œë³„use_caseí´ë” ì† pyíŒŒì¼ì€ ë™ì‚¬ë¡œë§Œ êµ¬ì„±í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#domainuse_casesì—ì„œ-ì •ì˜í•œ-interfaceë¥¼-as--interfaceë¡œ-import-í•´ì„œ-ì‹¤ì œ-usecase-classfinduserë¥¼-êµ¬í˜„í•œë‹¤">domain&gt;use_casesì—ì„œ ì •ì˜í•œ interfaceë¥¼ as -Interfaceë¡œ import í•´ì„œ ì‹¤ì œ Usecase Class(FindUser)ë¥¼ êµ¬í˜„í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-classëŠ”-repositoryë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë°-ì´-ë•Œ-datainterfacesì—-ì •ì˜í•œ-repo-interfaceë¥¼-as-repoë¡œ-importí•´ì„œ-ì¤€ë‹¤">usecase ClassëŠ” repositoryë¥¼ ì¸ìë¡œ ë°›ëŠ”ë°, ì´ ë•Œ, data&gt;interfacesì— ì •ì˜í•œ repo interfaceë¥¼ as repoë¡œ importí•´ì„œ ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-class-methodì˜-signatureëŠ”-domainuse_casesì—-ì •ì˜í•´ë‘”-interfaceì˜-signatureë¥¼-ë³µì‚¬í•´ì„œ-ìˆ˜ì •í•œë‹¤">usecase class methodì˜ signatureëŠ” domain&gt;use_casesì— ì •ì˜í•´ë‘” interfaceì˜ signatureë¥¼ ë³µì‚¬í•´ì„œ ìˆ˜ì •í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-methodì˜-êµ¬í˜„ë¶€ëŠ”-responsenoneì´ˆê¸°í™”-vaildate_entryë¡œ-ì‹œì‘í•˜ê³ -ì‘ë‹µí˜•ì€-ê°ê°ì„-ì±„ìš´-dictë¡œ-í•œë‹¤">usecase methodì˜ êµ¬í˜„ë¶€ëŠ” response=Noneì´ˆê¸°í™”, vaildate_entryë¡œ ì‹œì‘í•˜ê³ , ì‘ë‹µí˜•ì€ ê°ê°ì„ ì±„ìš´ dictë¡œ í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-usecase-class-testfind_testpy">03 usecase Class test(find_test.py)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#testëŠ”-ë™ì¼í´ë”-ì†-ëª¨ë“ˆ--fakerë¥¼-ê¸°ë³¸ì ìœ¼ë¡œ-import">testëŠ” ë™ì¼í´ë” ì† ëª¨ë“ˆ + fakerë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ import</a></li>
<li class="toc-entry toc-h4"><a href="#repoì¸ìë¡œ-ì‚¬ìš©í•˜ëŠ”-usecase-class-testëŠ”-infrarepoë™ì¼ì„ ìƒ-testí´ë”ì˜-repospyë¥¼-importí•´ì„œ-ì¸ìë¡œ-ì‚¬ìš©í•œë‹¤">repoì¸ìë¡œ ì‚¬ìš©í•˜ëŠ” usecase Class testëŠ” infra&gt;repoë™ì¼ì„ ìƒ testí´ë”ì˜ repospyë¥¼ importí•´ì„œ ì¸ìë¡œ ì‚¬ìš©í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#usecaseëŠ”-inputì„-jsíƒ€ì…ì˜-attr-dictë¥¼-fakerë¡œ-ë§Œë“¤ê³ -usecase-methodì—-ë„£ì–´ì£¼ë©´-ë‚´ë¶€-repo-spyê°€-param-dictì—-ë¬¼ê³ -ìˆì„-ê²ƒì´ë‹¤">usecaseëŠ” inputì„ jsíƒ€ì…ì˜ attr dictë¥¼ fakerë¡œ ë§Œë“¤ê³ , usecase methodì— ë„£ì–´ì£¼ë©´, ë‚´ë¶€ repo spyê°€ param dictì— ë¬¼ê³  ìˆì„ ê²ƒì´ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-method-testëŠ”-outputdictë¥¼-successvalidate_entry-torf-ì™€-datanone-or-not-none-2ê°œë¥¼-ê²€ì‚¬í•˜ë©´-ëœë‹¤">usecase method testëŠ” output(dict)ë¥¼ Success(validate_entry TorF )ì™€ Data(None or not None) 2ê°œë¥¼ ê²€ì‚¬í•˜ë©´ ëœë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#testë©”ì„œë“œ1ê°œë§ˆë‹¤-pytestë¥¼-ëŒë¦°ë‹¤-íƒìƒ‰ê¸°í´ë”ì—-ìš°í´ë¦­-ìƒëŒ€ê²½ë¡œ-ë³µì‚¬í•´ì„œ-pytest--vsë¥¼-ëŒë¦¬ë©´-ëœë‹¤">testë©”ì„œë“œ1ê°œë§ˆë‹¤ pytestë¥¼ ëŒë¦°ë‹¤. íƒìƒ‰ê¸°í´ë”ì— ìš°í´ë¦­ ìƒëŒ€ê²½ë¡œ ë³µì‚¬í•´ì„œ pytest -vsë¥¼ ëŒë¦¬ë©´ ëœë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#spy-repoëŠ”-ë‚´ë¶€ì—ì„œ-fakerë¡œ-ì‹¤ì‹œê°„ìœ¼ë¡œ-ë§Œë“œëŠ”-mock_entityë¡œ-ê°ì²´ë¥¼-ë§Œë“¤ì–´-ë°˜í™˜í•´ì£¼ë¯€ë¡œ-printë¡œ-pytest--vsì—ì„œ-ë‚´ìš©ë¬¼ì„-í™•ì¸í• -ìˆ˜-ìˆì§€ë§Œ-ëœë¤ê°ì²´ê³ -typeë§Œ-dtoë‹¤">spy repoëŠ” ë‚´ë¶€ì—ì„œ fakerë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë§Œë“œëŠ” mock_entity()ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•´ì£¼ë¯€ë¡œ, print()ë¡œ pytest -vsì—ì„œ ë‚´ìš©ë¬¼ì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ, ëœë¤ê°ì²´ê³  Typeë§Œ DTOë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#testê¹Œì§€-ëë‚¬ìœ¼ë©´-ëª¨ë“ˆì„-initì—-ì˜¬ë ¤ì£¼ê¸°">testê¹Œì§€ ëë‚¬ìœ¼ë©´ ëª¨ë“ˆì„ initì— ì˜¬ë ¤ì£¼ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#by_id-ì´ì™¸ì—-ë©”ì„œë“œtestëŠ”-ìƒëµí•˜ê³ -need-testë¥¼-ë‹¬ì•„ì£¼ê³ -commit">by_id ì´ì™¸ì— ë©”ì„œë“œtestëŠ” ìƒëµí•˜ê³  (need test)ë¥¼ ë‹¬ì•„ì£¼ê³  commit</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#use-cases-3-findpet">use cases 3 FindPet</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-srcdomain-use_cases--find_petpy-interface-ì •ì˜í•˜ê¸°">01 src&gt;domain&gt; use_cases &gt; find_pet.py (interface) ì •ì˜í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#02-srcdatafind_petí´ë”init--findpy-usecase-class-ì •ì˜í•˜ê¸°">02 src&gt;data&gt;find_petí´ë”&gt;init + find.py (usecase Class) ì •ì˜í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#03-srcdatafind_petí´ë”-find_testpy-usecase-class-test-ì •ì˜í•˜ê¸°">03 src&gt;data&gt;find_petí´ë”&gt; find_test.py (usecase Class test) ì •ì˜í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-usecase-testëŠ”-ì¸ìë¡œ-ë“¤ì–´ê°€ëŠ”-repoì—-ëŒ€í•œ-repo-spyê°€-í•„ìš”---repo-spyì˜-ë°˜í™˜-ê°’ì¸-mock_dto-ë°˜í™˜-ë©”ì„œë“œ-mock_petê°€-ë¨¼ì €-í•„ìš”">01 usecase testëŠ” ì¸ìë¡œ ë“¤ì–´ê°€ëŠ” repoì— ëŒ€í•œ repo spyê°€ í•„ìš” -&gt; repo spyì˜ ë°˜í™˜ ê°’ì¸ mock_DTO ë°˜í™˜ [ë©”ì„œë“œ] mock_pet()ê°€ ë¨¼ì € í•„ìš”</a></li>
<li class="toc-entry toc-h4"><a href="#02-mock_petdto-ë°˜í™˜-moc_method-ë¶€í„°-ë§Œë“¤ê¸°">02 mock_pet(DTO) ë°˜í™˜ moc_method() ë¶€í„° ë§Œë“¤ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#03-srcinfratestì—-pet_repository_spypyë¥¼-ì •ì˜í•œë‹¤">03 src&gt;infra&gt;testì— pet_repository_spy.pyë¥¼ ì •ì˜í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#04-ë“œë””ì–´-use_case_testfind_testpyì—-spy-repo-ì‚¬ìš©í•´ì„œ-ì •ì˜í•˜ê¸°">04 ë“œë””ì–´ use_case_test(find_test.py)ì— spy repo ì‚¬ìš©í•´ì„œ ì •ì˜í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#usecase-methodì˜-test-ì¤‘-input-testëŠ”-repo-spyê°€-ë¨¹ì€-input-vs-attributesë¡œ-ë§Œë“ -inputì„-ë¹„êµí•œë‹¤">usecase methodì˜ test ì¤‘ input testëŠ” repo spyê°€ ë¨¹ì€ input vs attributesë¡œ ë§Œë“  inputì„ ë¹„êµí•œë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#usecase-methodì˜-test-ì¤‘-output-testëŠ”-repo-spyê°€-ë°˜í™˜í•˜ëŠ”-ëª©ê°ì²´ê°€-ì¤‘ìš”í•œê²Œ-ì•„ë‹ˆë¼-usecaseë°˜í™˜-dictì˜-success-tfìœ ë¬´--data-ì¡´ì¬ìœ ë¬´ë¥¼-í™•ì¸í•œë‹¤">usecase methodì˜ test ì¤‘ output testëŠ” repo spyê°€ ë°˜í™˜í•˜ëŠ” ëª©ê°ì²´ê°€ ì¤‘ìš”í•œê²Œ ì•„ë‹ˆë¼ usecaseë°˜í™˜ dictì˜ success T/Fìœ ë¬´ + data ì¡´ì¬ìœ ë¬´ë¥¼ í™•ì¸í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#05-1ê°œ-ë©”ì„œë“œ-ì™„ì„±ì‹œë§ˆë‹¤-pytestë¥¼-ëŒë¦°ë‹¤">05 1ê°œ ë©”ì„œë“œ ì™„ì„±ì‹œë§ˆë‹¤ pytestë¥¼ ëŒë¦°ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-ë‚˜ë¨¸ì§€-method-ìƒëµ---need-testë¡œ-ì»¤ë°‹í•˜ê¸°">04 ë‚˜ë¨¸ì§€ method ìƒëµ -&gt; (need test)ë¡œ ì»¤ë°‹í•˜ê¸°</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ì°¸ê³ ">ì°¸ê³ </a>
<ul>
<li class="toc-entry toc-h4"><a href="#gitignore">gitignore</a></li>
<li class="toc-entry toc-h4"><a href="#sqlalchemyíŒ¨í‚¤ì§€">sqlalchemyíŒ¨í‚¤ì§€</a></li>
<li class="toc-entry toc-h4"><a href="#githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#1-1-githubì—ì„œ-brìƒì„±--clone">[1-1] githubì—ì„œ brìƒì„± ~ clone</a></li>
<li class="toc-entry toc-h5"><a href="#cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h5"><a href="#1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</a></li>
<li class="toc-entry toc-h5"><a href="#2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#vscode-ì„¤ì •">vscode ì„¤ì •</a></li>
<li class="toc-entry toc-h4"><a href="#testì •ë¦¬">testì •ë¦¬</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="í´ë¦°-ì•„í‚¤í…ì³-2ì¥">
<a class="anchor" href="#%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-2%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>í´ë¦° ì•„í‚¤í…ì³ 2ì¥</h1>

<h2 id="1-use-cases-register-user">
<a class="anchor" href="#1-use-cases-register-user" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 use cases (register user)</h2>

<h3 id="01-brë”°ì„œ-ì‘ì—…-ì„¸íŒ…í•˜ê¸°">
<a class="anchor" href="#01-br%EB%94%B0%EC%84%9C-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 brë”°ì„œ ì‘ì—… ì„¸íŒ…í•˜ê¸°</h3>

<ol>
  <li>
    <p>githubì—ì„œ ì‘ì—…br ìƒì„±</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001002856072.png" alt="image-20221001002856072"></p>
  </li>
  <li>
    <p>cloneì£¼ì†Œ ë³µì‚¬ í›„ -&gt; localì— newí´ë” ìƒì„±í›„ -&gt; clone -b [branchëª…] [cloneì£¼ì†Œ]</p>

    <ul>
      <li>branchëª…ì´ ë³µì¡í•˜ë©´, viewì— ë“¤ì–´ê°€ì„œ ë³µì‚¬í•  ìˆ˜ ìˆë‹¤.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001003032736.png" alt="image-20221001003032736"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001003424553.png" alt="image-20221001003424553"></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>wt -d .
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b feat/register_user_use_case https://github.com/is2js/backend-python.git
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001003645458.png" alt="image-20221001003645458"></p>
  </li>
  <li>
    <p><strong>ì´í›„ëŠ” ì´ì „ì— ì‘ì—…í•œ ê²ƒì²˜ëŸ¼ gitignoreìƒ ë°±ì—…dbìˆìœ¼ë©´ ë³µë¶™ë¶€í„°.. ì‹œì‘í•œë‹¤</strong></p>
  </li>
</ol>

<h3 id="02-scrdomain-use_casesí´ë”-ë°-initìƒì„±">
<a class="anchor" href="#02-scrdomain-use_cases%ED%8F%B4%EB%8D%94-%EB%B0%8F-init%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 scr&gt;domain&gt; use_casesí´ë” ë° initìƒì„±</h3>

<ul>
  <li>use_casesë“¤ì€ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì´ê¸° ë•Œë¬¸ì— models(DTO)ì²˜ëŸ¼ domainì— ë°°ì†ëœë‹¤.</li>
</ul>

<h3 id="03-domain-layer-register_userì¸í„°í˜ì´ìŠ¤---data-layerì—ì„œ-ê°ì²´-classë¥¼-êµ¬í˜„í•œë‹¤">
<a class="anchor" href="#03-domain-layer-register_user%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4---data-layer%EC%97%90%EC%84%9C-%EA%B0%9D%EC%B2%B4-class%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 domain layer register_userì¸í„°í˜ì´ìŠ¤ -&gt; data layerì—ì„œ ê°ì²´ classë¥¼ êµ¬í˜„í•œë‹¤</h3>

<h3 id="register-user-use-case-ë§Œë“¤ê¸°">
<a class="anchor" href="#register-user-use-case-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>register user Use Case ë§Œë“¤ê¸°</h3>

<h4 id="domain-layerì—-interfaceë¡œ-ì„¤ê³„í•œë‹¤">
<a class="anchor" href="#domain-layer%EC%97%90-interface%EB%A1%9C-%EC%84%A4%EA%B3%84%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>domain layerì— interfaceë¡œ ì„¤ê³„í•œë‹¤.</h4>

<ol>
  <li>
    <p>src&gt;domain&gt;use_cases&gt; <code class="language-plaintext highlighter-rouge">register_user.py</code>ì„ ìƒì„±í•œë‹¤.</p>
  </li>
  <li>
    <p><strong>data layerì— ì†í•œ interfacesë„ ì•„ë‹Œë°, interfaceë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•´</strong></p>

    <ul>
      <li>
        <p>abcì˜ ëª¨ë“ˆë“¤ì„ importí•œë‹¤.</p>
      </li>
      <li>DTO Usersë„ importí•œë‹¤.</li>
      <li><strong>use_case ì˜ì—­ì€ ì•ì„œêµ¬í˜„í•œ infraì˜ entitesë“¤ì„ í¬í•¨í•˜ê³  ìˆëŠ” ë” í° ê°œë…ì´ë‹¤?!</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001004910220.png" alt="image-20221001004910220"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001005153934.png" alt="image-20221001005153934"></p>
  </li>
</ol>

<h4 id="registeruser-ì˜-ë°˜í™˜íƒ€ì…ì€-dictbool-dtoí˜•íƒœì´ë‹¤">
<a class="anchor" href="#registeruser-%EC%9D%98-%EB%B0%98%ED%99%98%ED%83%80%EC%9E%85%EC%9D%80-dictbool-dto%ED%98%95%ED%83%9C%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>RegisterUser ì˜ ë°˜í™˜íƒ€ì…ì€ Dict[bool, DTO]í˜•íƒœì´ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>


<span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to RegisterUser use case """</span>

    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Users</span><span class="p">]:</span>
        <span class="s">""" Case """</span>

        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: register"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>
    <p><strong>ì—¬ê¸°ì„œ clsë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì§ì „ì—ëŠ” selfë¡œ ì¤¬ê¸° ë•Œë¬¸ì—, ìˆ˜ì •í•´ì•¼í•  ê²ƒ ê°™ë‹¤</strong></p>
  </li>
  <li>
    <p><strong>ìƒì„±ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ initì— ì˜¬ë ¤ì¤€ë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.register_user</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="data-layerì—ì„œ-ê°œë³„-use_caseë§ˆë‹¤-ë§Œë“¤ì–´ì¤„--classí´ë”initì„-ë§Œë“¤ê³ -domain-layerì—-ë§Œë“ -use_cases--ì†-ì¸í„°í˜ì´ìŠ¤ë“¤ì„-importí•œë‹¤">
<a class="anchor" href="#data-layer%EC%97%90%EC%84%9C-%EA%B0%9C%EB%B3%84-use_case%EB%A7%88%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A4%84--class%ED%8F%B4%EB%8D%94init%EC%9D%84-%EB%A7%8C%EB%93%A4%EA%B3%A0-domain-layer%EC%97%90-%EB%A7%8C%EB%93%A0-use_cases--%EC%86%8D-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%93%A4%EC%9D%84-import%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>data layerì—ì„œ ê°œë³„ use_caseë§ˆë‹¤ ë§Œë“¤ì–´ì¤„  classí´ë”+initì„ ë§Œë“¤ê³ , domain layerì— ë§Œë“  use_cases  ì† ì¸í„°í˜ì´ìŠ¤ë“¤ì„ importí•œë‹¤.</h4>

<ol>
  <li>
    <p>data layerì— <code class="language-plaintext highlighter-rouge">register_user</code>í´ë”ì™€ <code class="language-plaintext highlighter-rouge">init</code>ì„ + <code class="language-plaintext highlighter-rouge">register.py</code>ë¥¼ ë§Œë“ ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001010236852.png" alt="image-20221001010236852"></p>
  </li>
  <li>
    <p>data layerì˜ <code class="language-plaintext highlighter-rouge">ê°œë³„_usecaseí´ë”</code>ì˜ pyë“¤ì€ domain layerì˜ <code class="language-plaintext highlighter-rouge">use_case</code>í´ë” ì† ì¸í„°í˜ì´ìŠ¤ë¥¼ as Interfaceë¡œ importí•´ì„œ ì‚¬ìš©í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterUser</span> <span class="k">as</span> <span class="n">RegisterUserInterface</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•´ì„œ ì‹¤ì œ use_caseë‚´ìš©ì„ ì •ì˜í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterUser</span> <span class="k">as</span> <span class="n">RegisterUserInterface</span>
   
<span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">RegisterUserInterface</span><span class="p">):</span>
	<span class="s">""" class to define usecase: Register User"""</span>
   
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="data-layerì˜-ê°œë³„use-case--classë“¤ì€-repositoryë¥¼-ìƒì„±ìì—ì„œ-ì¸ìë¡œ-ë°›ì•„-ê°ì²´ë¡œ-ìƒì„±ëœë‹¤ê°ì²´-staticì¸-clasmethod-x---typingì„-ìœ„í•´-userrepository-interfaceë¥¼-êµ¬í˜„í–ˆë˜-ê²ƒì´ë‹¤">
<a class="anchor" href="#data-layer%EC%9D%98-%EA%B0%9C%EB%B3%84use-case--class%EB%93%A4%EC%9D%80-repository%EB%A5%BC-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90%EC%84%9C-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EC%95%84-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%9C%EB%8B%A4%EA%B0%9D%EC%B2%B4-static%EC%9D%B8-clasmethod-x---typing%EC%9D%84-%EC%9C%84%ED%95%B4-userrepository-interface%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%96%88%EB%8D%98-%EA%B2%83%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>data layerì˜ ê°œë³„use case  Classë“¤ì€ repositoryë¥¼ ìƒì„±ìì—ì„œ ì¸ìë¡œ ë°›ì•„ ê°ì²´ë¡œ ìƒì„±ëœë‹¤(ê°ì²´ staticì¸ clasmethod X) -&gt; typingì„ ìœ„í•´ UserRepository Interfaceë¥¼ êµ¬í˜„í–ˆë˜ ê²ƒì´ë‹¤!</h4>

<ol>
  <li>
    <p>data layerì˜ use case classëŠ” <strong>í•„ìš”í•œ repositoryë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</strong></p>

    <ul>
      <li>ì¸ìë¡œ ë°›ëŠ” ê²ƒì€ importê°€ í•„ìš”ì—†ìœ¼ë‚˜, <strong>ì¸ìì˜ Typeë•Œë¬¸ì— ê·¸ê²ƒì˜ interfaceë¥¼ importí•´ì•¼í•œë‹¤</strong>
</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterUser</span> <span class="k">as</span> <span class="n">RegisterUserInterface</span>
   
<span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">RegisterUserInterface</span><span class="p">):</span>
	<span class="s">""" class to define usecase: Register User"""</span>
   
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">):</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>user_repository íŒŒë¼ë¯¸í„°ì˜ typeì„ ì •í•´ì£¼ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">user_repository interface in data layer</code> ì™€  typingíŒ¨í‚¤ì§€ì˜ <code class="language-plaintext highlighter-rouge">Type</code>ëª¨ë“ˆì„ importí•´ì„œ ì‚¬ìš©í•œë‹¤.</strong></p>

    <ul>
      <li><strong>interfaceë¥¼ typeìœ¼ë¡œ ì“¸ë ¤ë©´ <code class="language-plaintext highlighter-rouge">as </code>ì— interfaceë¥¼ ì œì™¸í•˜ê³  ë‹¬ì•„ì¤€ë‹¤.</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">UserRepositoryInterface</span> <span class="k">as</span> <span class="n">UserRepository</span>
   
<span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">RegisterUserInterface</span><span class="p">):</span>
	<span class="s">""" class to define usecase: Register User"""</span>
   
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">UserRepository</span><span class="p">]):</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="data-layerì˜-ê°œë³„-use-case-classë“¤ì€-ê°ì²´ë¡œ-ìƒì„±ë -ê²ƒì´ë©°-repositoryë¥¼-í•„ë“œë¡œ-ë³´ìœ í•˜ê³ -use-case-classì´ë¦„ê³¼-ìœ ì‚¬í•˜ê²Œ-ì¸ìŠ¤í„´ìŠ¤-ë©”ì„œë“œë¥¼-ë§Œë“¤ì–´-repositoryí•„ë“œì™€-ê°™ì´-ì‘ë™í•œë‹¤">
<a class="anchor" href="#data-layer%EC%9D%98-%EA%B0%9C%EB%B3%84-use-case-class%EB%93%A4%EC%9D%80-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%A0-%EA%B2%83%EC%9D%B4%EB%A9%B0-repository%EB%A5%BC-%ED%95%84%EB%93%9C%EB%A1%9C-%EB%B3%B4%EC%9C%A0%ED%95%98%EA%B3%A0-use-case-class%EC%9D%B4%EB%A6%84%EA%B3%BC-%EC%9C%A0%EC%82%AC%ED%95%98%EA%B2%8C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4-repository%ED%95%84%EB%93%9C%EC%99%80-%EA%B0%99%EC%9D%B4-%EC%9E%91%EB%8F%99%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>data layerì˜ ê°œë³„ use case Classë“¤ì€ ê°ì²´ë¡œ ìƒì„±ë  ê²ƒì´ë©°, repositoryë¥¼ í•„ë“œë¡œ ë³´ìœ í•˜ê³ , use case Classì´ë¦„ê³¼ ìœ ì‚¬í•˜ê²Œ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ repositoryí•„ë“œì™€ ê°™ì´ ì‘ë™í•œë‹¤.</h4>

<ol>
  <li>
    <p>register ë©”ì„œë“œë¥¼ ë§Œë“¤ ê²ƒì´ë¯€ë¡œ <strong>ì¸í„°í˜ì´ìŠ¤(<code class="language-plaintext highlighter-rouge">domain ì† register_user.py</code>)ì—ì„œ ì‹œê·¸ë‹ˆì³ë¥¼ ë³µì‚¬í•´ì˜¨ë‹¤.</strong></p>

    <ul>
      <li>cls -&gt; selfë¡œ ë°”ê¿”ì¤€ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">RegisterUserInterface</span><span class="p">):</span>
	<span class="s">""" class to define usecase: Register User"""</span>
   
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">UserRepository</span><span class="p">]):</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
   	
	<span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Users</span><span class="p">]:</span>
		<span class="s">"""REgister user use case
		:param - name: person name
		       - password: password of the person
		:return - Dictionary with informations of the process
		"""</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ê·¸ì— ë”°ë¥¸ Dict ëª¨ë“ˆ, Usersëª¨ë“ˆì„ importí•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Type</span>
<span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="ì¸ìŠ¤í„´ìŠ¤-ë©”ì„œë“œëŠ”-ì¼ë‹¨-íŒŒë¼ë¯¸í„°ë“¤ì˜-type-ìœ íš¨ì„±ë¶€í„°-ê²€ì‚¬í•œë‹¤validate_entry">
<a class="anchor" href="#%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EC%9D%BC%EB%8B%A8-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%93%A4%EC%9D%98-type-%EC%9C%A0%ED%9A%A8%EC%84%B1%EB%B6%80%ED%84%B0-%EA%B2%80%EC%82%AC%ED%95%9C%EB%8B%A4validate_entry" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” ì¼ë‹¨, íŒŒë¼ë¯¸í„°ë“¤ì˜ type ìœ íš¨ì„±ë¶€í„° ê²€ì‚¬í•œë‹¤.(validate_entry)</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Users</span><span class="p">]:</span>
		<span class="s">"""REgister user use case
		:param - name: person name
		       - password: password of the person
		:return - Dictionary with informations of the process
		"""</span>

		<span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div></div>

<h5 id="if-validate_entry-ì„±ê³µì‹œì—ë§Œ-repositoryinsert_userë¥¼-í˜¸ì¶œí•˜ì—¬-ê°€ë³€ë³€ìˆ˜-respoonse--noneì—-ê²°ê³¼ê°’dtoë¥¼-í• ë‹¹í•´ì¤€ë‹¤-reigsterë©”ì„œë“œì˜-ë°˜í™˜íƒ€ì…ì€-success-dataì´ë‹¤">
<a class="anchor" href="#if-validate_entry-%EC%84%B1%EA%B3%B5%EC%8B%9C%EC%97%90%EB%A7%8C-repositoryinsert_user%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EC%97%AC-%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98-respoonse--none%EC%97%90-%EA%B2%B0%EA%B3%BC%EA%B0%92dto%EB%A5%BC-%ED%95%A0%EB%8B%B9%ED%95%B4%EC%A4%80%EB%8B%A4-reigster%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EB%B0%98%ED%99%98%ED%83%80%EC%9E%85%EC%9D%80-success-data%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>if validate_entry ì„±ê³µì‹œì—ë§Œ repository.insert_userë¥¼ í˜¸ì¶œí•˜ì—¬ ê°€ë³€ë³€ìˆ˜ respoonse = Noneì— ê²°ê³¼ê°’(DTO)ë¥¼ í• ë‹¹í•´ì¤€ë‹¤. reigsterë©”ì„œë“œì˜ ë°˜í™˜íƒ€ì…ì€ {â€œSuccessâ€, â€œdataâ€}ì´ë‹¤</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">RegisterUser</span><span class="p">(</span><span class="n">RegisterUserInterface</span><span class="p">):</span>
    <span class="s">""" class to define usecase: Register User"""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">UserRepository</span><span class="p">]):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>

    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Users</span><span class="p">]:</span>
        <span class="s">"""REgister user use case
        :param - name: person name
               - password: password of the person
        :return - Dictionary with informations of the process
        """</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>

</code></pre></div></div>

<h3 id="04-use-case--class-test-register-user-test">
<a class="anchor" href="#04-use-case--class-test-register-user-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 use case  Class test (register user test)</h3>

<h4 id="data-layerì˜-ê°œë³„-usecase-class-in-ê°œë³„-usecase-í´ë”ì—ì„œ-_testpyë„-ë§Œë“¤ì–´ì¤€ë‹¤">
<a class="anchor" href="#data-layer%EC%9D%98-%EA%B0%9C%EB%B3%84-usecase-class-in-%EA%B0%9C%EB%B3%84-usecase-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-_testpy%EB%8F%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>data layerì˜ ê°œë³„ usecase Class in ê°œë³„ usecase í´ë”ì—ì„œ _test.pyë„ ë§Œë“¤ì–´ì¤€ë‹¤.</h4>

<ol>
  <li>
    <p>src&gt;data&gt;register_user &gt; ì— <code class="language-plaintext highlighter-rouge">reigster_test.py</code>ë¥¼ ë§Œë“ ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001015820100.png" alt="image-20221001015820100"></p>
  </li>
  <li>
    <p>fakerì™€ í…ŒìŠ¤íŠ¸í•  use case CLassë¥¼ import</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.register</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing registry method"""</span>
       
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>use case classëŠ” repositoryë¥¼ ì¸ìë¡œ ë°›ëŠ”ë°,  ì‚¬ì‹¤ìƒ repositoryëŠ” testë¡œ DBìƒì„±í›„ ì‚­ì œí•˜ë©° í…ŒìŠ¤íŠ¸ê°€ ëë‚œ ìƒí™©ì´ë‹¤</strong></p>

    <ul>
      <li>
        <p><strong>repoë¥¼ ì´ìš©í•œ useCaseì˜ testëŠ” ë¬´ì—‡ì„ í•˜ëŠ” ê²ƒì¼ê¹Œ?</strong></p>
      </li>
      <li>
        <p><strong>ë‚´ë¶€ repositoryëŠ” ê²€ì¦ì´ ëë‚¬ìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">validate_entry ê²€ì¦</code> + <code class="language-plaintext highlighter-rouge">responseê°€ ì œëŒ€ë¡œ ë“¤ì–´ì˜¤ëŠ”ì§€ë§Œ</code> ëœë‹¤.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001021341888.png" alt="image-20221001021341888"></p>
      </li>
    </ul>
  </li>
</ol>

<h3 id="05-use-case-testëŠ”-mock_repo-repository-spy-ê°ì²´ê°€-í•„ìš”í•˜ë‹¤dbê´€ë ¨ëœ-infraì˜-repoë¥¼-í…ŒìŠ¤íŠ¸í• -ì—†ìŒ-inputoutput-í…ŒìŠ¤íŠ¸ë¥¼-ìœ„í•œ-ëª©repo">
<a class="anchor" href="#05-use-case-test%EB%8A%94-mock_repo-repository-spy-%EA%B0%9D%EC%B2%B4%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4db%EA%B4%80%EB%A0%A8%EB%90%9C-infra%EC%9D%98-repo%EB%A5%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%A0-%EC%97%86%EC%9D%8C-inputoutput-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%AA%A9repo" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 use case testëŠ” mock_repo [Repository Spy] ê°ì²´ê°€ í•„ìš”í•˜ë‹¤(DBê´€ë ¨ëœ infraì˜ repoë¥¼ í…ŒìŠ¤íŠ¸í•  ì—†ìŒ. input/output í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ëª©repo)</h3>

<h4 id="srcinfra-ì†--testí´ë”--init-ë§Œë“ ë‹¤">
<a class="anchor" href="#srcinfra-%EC%86%8D--test%ED%8F%B4%EB%8D%94--init-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>src&gt;infra ì†&gt;  testí´ë” + init ë§Œë“ ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001021719040.png" alt="image-20221001021719040"></p>

<h4 id="íŠ¹ì •repoì—-ëŒ€í•œ-repository_spypyë¥¼-ë§Œë“ ë‹¤">
<a class="anchor" href="#%ED%8A%B9%EC%A0%95repo%EC%97%90-%EB%8C%80%ED%95%9C-repository_spypy%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>íŠ¹ì •repoì— ëŒ€í•œ repository_spy.pyë¥¼ ë§Œë“ ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001021844812.png" alt="image-20221001021844812"></p>

<ol>
  <li>
</ol>

<h4 id="input-spy-ì²˜ë¦¬-repo-spyëŠ”-repoì˜-ë©”ì„œë“œë“¤ì˜-signatureì—-ë”°ë¥¸-ì¸ìë“¤ì„-ë°›ì•˜ì„-ë•Œ-ì‹¤ì œë¡œ-ë©”ì„œë“œ-í˜¸ì¶œ-ëŒ€ì‹ -ë©”ì„œë“œë³„-ë°°ì •ëœ-param-dict-í•„ë“œì†ì—-ì €ì¥-íŒŒë¼ë¯¸í„°ë“¤ì„-ì €ì¥í•´ë†“ëŠ”ë‹¤">
<a class="anchor" href="#input-spy-%EC%B2%98%EB%A6%AC-repo-spy%EB%8A%94-repo%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EB%93%A4%EC%9D%98-signature%EC%97%90-%EB%94%B0%EB%A5%B8-%EC%9D%B8%EC%9E%90%EB%93%A4%EC%9D%84-%EB%B0%9B%EC%95%98%EC%9D%84-%EB%95%8C-%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C-%EB%8C%80%EC%8B%A0-%EB%A9%94%EC%84%9C%EB%93%9C%EB%B3%84-%EB%B0%B0%EC%A0%95%EB%90%9C-param-dict-%ED%95%84%EB%93%9C%EC%86%8D%EC%97%90-%EC%A0%80%EC%9E%A5-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%93%A4%EC%9D%84-%EC%A0%80%EC%9E%A5%ED%95%B4%EB%86%93%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[input spy ì²˜ë¦¬] repo spyëŠ” repoì˜ ë©”ì„œë“œë“¤ì˜ signatureì— ë”°ë¥¸ ì¸ìë“¤ì„ ë°›ì•˜ì„ ë•Œ, ì‹¤ì œë¡œ ë©”ì„œë“œ í˜¸ì¶œ ëŒ€ì‹  ë©”ì„œë“œë³„ ë°°ì •ëœ param dict í•„ë“œì†ì— ì €ì¥ íŒŒë¼ë¯¸í„°ë“¤ì„ ì €ì¥í•´ë†“ëŠ”ë‹¤.</h4>

<ul>
  <li>spy repositoryì˜ ë©”ì„œë“œë“¤ì€ randomí•œ input-&gt;outputë§Œ ë§Œë“¤ì–´ë‚´ë©° DBì—ëŠ” ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ í•œë‹¤</li>
</ul>

<ol>
  <li>
    <p>repoSpy classë¥¼ ë§Œë“ ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to User Repository """</span>
       
</code></pre></div>    </div>

    <p>â€‹</p>
  </li>
  <li>
    <p><strong>ì›ë³¸repoì˜ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ë˜, <code class="language-plaintext highlighter-rouge">ë©”ì„œë“œë³„ paramë“¤ì„ ì €ì¥í•  í•„ë“œ</code>ë¥¼ <code class="language-plaintext highlighter-rouge">ë©”ì„œë“œ ê°¯ìˆ˜ëŒ€ë¡œ</code> ë§Œë“ ë‹¤.</strong></p>

    <ul>
      <li>repoì˜ ê°ì²´staticë©”ì„œë“œì¸ cls -&gt; selfë¡œ ë°”ê¿”ì£¼ê¸°</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to User Repository """</span>
   
   
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="k">pass</span> 
   
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="k">pass</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p>ë©”ì„œë“œ ê°¯ìˆ˜ëŒ€ë¡œ <strong>ìƒì„±ìì— paramì €ì¥ìš© dictí•„ë“œ ë§Œë“¤ê¸°</strong></p>

    <ul>
      <li>ë©”ì„œë“œëª… ë’¤ì— _paramì„ ë¶™ì—¬ì„œ  = {} ì„ ì–¸í•´ì£¼ê¸°</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to User Repository """</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_user_param</span> <span class="o">=</span> <span class="p">{}</span>
           
       
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="k">pass</span> 
   
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="k">pass</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>repo ë©”ì„œë“œë“¤ì˜ return typeì€ ê±°ì˜ DTOë¼ê³  ë³´ë©´ëœë‹¤. <code class="language-plaintext highlighter-rouge">models</code>ì—ì„œ importí•´ì£¼ì</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.models.users</span> <span class="kn">import</span> <span class="n">Users</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>spy repoì˜ ë©”ì„œë“œë¡œ ë“¤ì–´ì˜¤ëŠ” ì¸ìë“¤ì„, ê° ë©”ì„œë“œë‹¹ ë°°ì •ëœ paramí•„ë“œì— ì…ë ¥í•´ì¤€ë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to User Repository """</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_user_param</span> <span class="o">=</span> <span class="p">{}</span>
           
       
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="s">""" Spy to all the attributes """</span>
   
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>
   
        <span class="k">pass</span> 
   
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="s">""" Spy to all the attributes """</span>
   
        <span class="bp">self</span><span class="p">.</span><span class="n">select_user_param</span><span class="p">[</span><span class="s">'user_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_user_param</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
           
        <span class="k">pass</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ì´ì œ ê° methodë³„ë¡œ return typeì— ë§ëŠ” mock_user()ê°€ í•„ìš”í•˜ë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="c1">#...
</span>       
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="s">""" Spy to all the attributes """</span>
   
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>
   
        <span class="c1"># return Users
</span>        <span class="k">return</span> <span class="n">mock_users</span><span class="p">()</span>
   
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="c1">#...
</span>   
        <span class="k">return</span> <span class="p">[</span><span class="n">mock_users</span><span class="p">()]</span>
   
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="06-repo-spyì˜-returnì—-ì‚¬ìš©ë -mock-dto-ë°˜í™˜-mock_method-ë§Œë“¤ê¸°">
<a class="anchor" href="#06-repo-spy%EC%9D%98-return%EC%97%90-%EC%82%AC%EC%9A%A9%EB%90%A0-mock-dto-%EB%B0%98%ED%99%98-mock_method-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>06 Repo Spyì˜ returnì— ì‚¬ìš©ë  Mock DTO ë°˜í™˜ mock_method ë§Œë“¤ê¸°</h3>

<h4 id="output-ëª©ì²˜ë¦¬-repoë©”ì„œë“œë³„-return-typeì—-ë§ëŠ”-ì‹¤ì œdtoê°ì²´x-ëª©ê°ì²´-ì²˜ë¦¬í• -ìˆ˜-ìˆë˜ë¡-return-dtoë°˜í™˜-mock_methodê°€-í•„ìš”í•˜ë‹¤">
<a class="anchor" href="#output-%EB%AA%A9%EC%B2%98%EB%A6%AC-repo%EB%A9%94%EC%84%9C%EB%93%9C%EB%B3%84-return-type%EC%97%90-%EB%A7%9E%EB%8A%94-%EC%8B%A4%EC%A0%9Cdto%EA%B0%9D%EC%B2%B4x-%EB%AA%A9%EA%B0%9D%EC%B2%B4-%EC%B2%98%EB%A6%AC%ED%95%A0-%EC%88%98-%EC%9E%88%EB%98%90%EB%A1%9D-return-dto%EB%B0%98%ED%99%98-mock_method%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[output ëª©ì²˜ë¦¬] repoë©”ì„œë“œë³„ return typeì— ë§ëŠ” ì‹¤ì œDTOê°ì²´(X) ëª©ê°ì²´ ì²˜ë¦¬í•  ìˆ˜ ìˆë˜ë¡ return DTOë°˜í™˜ mock_method()ê°€ í•„ìš”í•˜ë‹¤</h4>

<h5 id="return-typeì¸-dtoì˜-ëª©ê°ì²´ëŠ”-dtoê°€-ìˆëŠ”-domainì—-testí´ë”-initì„-ë§Œë“ ë‹¤">
<a class="anchor" href="#return-type%EC%9D%B8-dto%EC%9D%98-%EB%AA%A9%EA%B0%9D%EC%B2%B4%EB%8A%94-dto%EA%B0%80-%EC%9E%88%EB%8A%94-domain%EC%97%90-test%ED%8F%B4%EB%8D%94-init%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>return typeì¸ DTOì˜ ëª©ê°ì²´ëŠ” DTOê°€ ìˆëŠ” domainì— testí´ë”+ initì„ ë§Œë“ ë‹¤.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001031333044.png" alt="image-20221001031333044"></p>

<h5 id="mock-methodì˜-ì´ë¦„ì€-mock_xxxpyë¡œ-ë§Œë“ ë‹¤">
<a class="anchor" href="#mock-method%EC%9D%98-%EC%9D%B4%EB%A6%84%EC%9D%80-mock_xxxpy%EB%A1%9C-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>mock methodì˜ ì´ë¦„ì€ mock_xxx.pyë¡œ ë§Œë“ ë‹¤.</h5>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">mock_users.py</code>ìƒì„±</li>
</ol>

<h5 id="repo-spyí´ë˜ìŠ¤ì™€-ë‹¬ë¦¬-ì‹¤ì œdto-class--fakerë¡œ-mock-dtoë°˜í™˜-mock-methodë¥¼-ë§Œë“ ë‹¤">
<a class="anchor" href="#repo-spy%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80-%EB%8B%AC%EB%A6%AC-%EC%8B%A4%EC%A0%9Cdto-class--faker%EB%A1%9C-mock-dto%EB%B0%98%ED%99%98-mock-method%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo spyí´ë˜ìŠ¤ì™€ ë‹¬ë¦¬, ì‹¤ì œDTO class + fakerë¡œ mock DTOë°˜í™˜ mock methodë¥¼ ë§Œë“ ë‹¤.</h5>

<ol>
  <li>
    <p>ì‹¤ì œ DTO class <code class="language-plaintext highlighter-rouge">Users</code>ì™€ <code class="language-plaintext highlighter-rouge">faker</code>ë¥¼ import</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">mock_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
    <span class="s">""" Mocking Users """</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ë‚´ìš©ë¬¼ì€ ë”±íˆ ì—†ê³ , fakerë¡œ ë§Œë“¤ ì¬ë£Œë“¤ë¡œ, DTO ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•´ì£¼ë©´ ëœë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">mock_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
    <span class="s">""" Mocking Users """</span>
   
    <span class="k">return</span> <span class="n">Users</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="n">password</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="mock-methodê°€-ë§Œë“¤ì–´ì§€ë©´-initì—-ì˜¬ë¦°ë‹¤">
<a class="anchor" href="#mock-method%EA%B0%80-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%80%EB%A9%B4-init%EC%97%90-%EC%98%AC%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>mock methodê°€ ë§Œë“¤ì–´ì§€ë©´, initì— ì˜¬ë¦°ë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.mock_users</span> <span class="kn">import</span> <span class="n">mock_users</span>
</code></pre></div></div>

<h4 id="repo-spyì—ì„œ-mock_methodë¥¼-importí•´ì„œ-mock-dtoë¥¼-ë°˜í™˜ë°›ë„ë¡-ì‚¬ìš©í•œë‹¤">
<a class="anchor" href="#repo-spy%EC%97%90%EC%84%9C-mock_method%EB%A5%BC-import%ED%95%B4%EC%84%9C-mock-dto%EB%A5%BC-%EB%B0%98%ED%99%98%EB%B0%9B%EB%8F%84%EB%A1%9D-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Repo Spyì—ì„œ mock_methodë¥¼ importí•´ì„œ mock DTOë¥¼ ë°˜í™˜ë°›ë„ë¡ ì‚¬ìš©í•œë‹¤.</h4>

<ul>
  <li>
    <p>user_repsitory_spy</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.domain.test</span> <span class="kn">import</span> <span class="n">mock_users</span>
  
<span class="k">class</span> <span class="nc">UserRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to User Repository """</span>
  
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_user_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_user_param</span> <span class="o">=</span> <span class="p">{}</span>
          
      
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="c1">#...
</span>        <span class="k">return</span> <span class="n">mock_users</span><span class="p">()</span>
  
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="c1">#...
</span>        <span class="k">return</span> <span class="p">[</span><span class="n">mock_users</span><span class="p">()]</span>
  
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="repo-spyê°€-ì™„ì„±ë˜ì—ˆìœ¼ë©´-infratestì˜-initì—-ì˜¬ë¦°ë‹¤">
<a class="anchor" href="#repo-spy%EA%B0%80-%EC%99%84%EC%84%B1%EB%90%98%EC%97%88%EC%9C%BC%EB%A9%B4-infratest%EC%9D%98-init%EC%97%90-%EC%98%AC%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo spyê°€ ì™„ì„±ë˜ì—ˆìœ¼ë©´, infra.testì˜ initì— ì˜¬ë¦°ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.user_repository_spy</span> <span class="kn">import</span> <span class="n">UserRepositorySpy</span>
</code></pre></div></div>

<h3 id="07-use-case-testregister_testë§ˆë¬´ë¦¬">
<a class="anchor" href="#07-use-case-testregister_test%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>07 use case test(register_test)ë§ˆë¬´ë¦¬</h3>

<h4 id="01-usecase-class-ì—ì„œëŠ”-ì¸ì-repository-ëŒ€ì‹ -repository-spyê°ì²´ë¥¼-importí•´ì„œ-ì‚¬ìš©í•œë‹¤">
<a class="anchor" href="#01-usecase-class-%EC%97%90%EC%84%9C%EB%8A%94-%EC%9D%B8%EC%9E%90-repository-%EB%8C%80%EC%8B%A0-repository-spy%EA%B0%9D%EC%B2%B4%EB%A5%BC-import%ED%95%B4%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 usecase Class ì—ì„œëŠ”, ì¸ì repository ëŒ€ì‹ , repository spyê°ì²´ë¥¼ importí•´ì„œ ì‚¬ìš©í•œë‹¤</h4>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">register_test.py</code>ì—ì„œ repoì˜ spyê°ì²´ì¸ infra&gt;testì˜ user repository spyë¥¼ importí•˜ê³  use case classì˜ ì¸ìë¡œ spyê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë„£ì–´ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.infra.test</span> <span class="kn">import</span> <span class="n">UserRepositorySpy</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing registry method"""</span>
   
    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">register_user</span> <span class="o">=</span> <span class="n">RegisterUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="02-use-caseì˜-input-testëŠ”-javascriptëª¨ì–‘ìœ¼ë¡œ-dictë¥¼-êµ¬ì„±í•˜ì—¬-use-class-methodì—-ë˜ì ¸ì¤€ë‹¤">
<a class="anchor" href="#02-use-case%EC%9D%98-input-test%EB%8A%94-javascript%EB%AA%A8%EC%96%91%EC%9C%BC%EB%A1%9C-dict%EB%A5%BC-%EA%B5%AC%EC%84%B1%ED%95%98%EC%97%AC-use-class-method%EC%97%90-%EB%8D%98%EC%A0%B8%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 use caseì˜ input testëŠ” javascriptëª¨ì–‘ìœ¼ë¡œ dictë¥¼ êµ¬ì„±í•˜ì—¬ use class methodì— ë˜ì ¸ì¤€ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.register</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
<span class="kn">from</span> <span class="nn">src.infra.test</span> <span class="kn">import</span> <span class="n">UserRepositorySpy</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing registry method"""</span>

    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">register_user</span> <span class="o">=</span> <span class="n">RegisterUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"password"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">register_user</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"password"</span><span class="p">])</span>
    
</code></pre></div></div>

<h5 id="repo-spyë¥¼-ê°€ì§„-usecase-classëŠ”-ë‚´ë¶€ì—ì„œ-repo-methodí˜¸ì¶œì‹œ-methodë³„-param-dictì—-ì†Œìœ ë§Œ-í•˜ê³ ìˆê³ -mock_methodë¡œ-dtoëª©ê°ì²´ë¥¼-responseì—-ê±´ë„¤ì¤„-ê²ƒì´ë‹¤">
<a class="anchor" href="#repo-spy%EB%A5%BC-%EA%B0%80%EC%A7%84-usecase-class%EB%8A%94-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-repo-method%ED%98%B8%EC%B6%9C%EC%8B%9C-method%EB%B3%84-param-dict%EC%97%90-%EC%86%8C%EC%9C%A0%EB%A7%8C-%ED%95%98%EA%B3%A0%EC%9E%88%EA%B3%A0-mock_method%EB%A1%9C-dto%EB%AA%A9%EA%B0%9D%EC%B2%B4%EB%A5%BC-response%EC%97%90-%EA%B1%B4%EB%84%A4%EC%A4%84-%EA%B2%83%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo spyë¥¼ ê°€ì§„ usecase classëŠ”, ë‚´ë¶€ì—ì„œ repo methodí˜¸ì¶œì‹œ, methodë³„ param dictì— ì†Œìœ ë§Œ í•˜ê³ ìˆê³ , mock_method()ë¡œ DTOëª©ê°ì²´ë¥¼ responseì— ê±´ë„¤ì¤„ ê²ƒì´ë‹¤.</h5>

<h4 id="03-use-case-class-testëŠ”-inputê³¼-outputì„-ë”°ë¡œ-í…ŒìŠ¤íŒ…í•œë‹¤">
<a class="anchor" href="#03-use-case-class-test%EB%8A%94-input%EA%B3%BC-output%EC%9D%84-%EB%94%B0%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8C%85%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 use case class testëŠ” inputê³¼ outputì„ ë”°ë¡œ í…ŒìŠ¤íŒ…í•œë‹¤</h4>

<h5 id="use-case-input-testëŠ”-inputì´-usecaseê°ì²´ë¥¼-íˆ¬ì…ëœ-ë’¤-ì‚¬ìš©ëœ-repo-spy-ì†-methodë³„-param-dictì—-ì˜-ë“¤ì–´ê°”ëŠ”ì§€-ê¹Œì§€-ê²€ì‚¬">
<a class="anchor" href="#use-case-input-test%EB%8A%94-input%EC%9D%B4-usecase%EA%B0%9D%EC%B2%B4%EB%A5%BC-%ED%88%AC%EC%9E%85%EB%90%9C-%EB%92%A4-%EC%82%AC%EC%9A%A9%EB%90%9C-repo-spy-%EC%86%8D-method%EB%B3%84-param-dict%EC%97%90-%EC%9E%98-%EB%93%A4%EC%96%B4%EA%B0%94%EB%8A%94%EC%A7%80-%EA%B9%8C%EC%A7%80-%EA%B2%80%EC%82%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>use case Input TestëŠ” inputì´ usecaseê°ì²´ë¥¼ íˆ¬ì…ëœ ë’¤, ì‚¬ìš©ëœ repo spy ì† methodë³„ param dictì— ì˜ ë“¤ì–´ê°”ëŠ”ì§€ ê¹Œì§€ ê²€ì‚¬</h5>

<ul>
  <li>
    <p>responseì™€ ë¬´ê´€í•˜ê²Œ, ë„£ì–´ì¤€ input vs repo spyì— ë“¤ì–´ê°„ param dict ì† inputì„ ë¹„êµí•œë‹¤</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing registry method"""</span>
  
    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">register_user</span> <span class="o">=</span> <span class="n">RegisterUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>
  
    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"password"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
    <span class="p">}</span>
  
    <span class="n">response</span> <span class="o">=</span> <span class="n">register_user</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"password"</span><span class="p">])</span>
  
    <span class="c1"># Testing inputs
</span>    <span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="use-case-output-testëŠ”-repo-spyëŠ”-mock_usersë¥¼-returní•˜ì§€ë§Œ-inputê³¼-ë³„ê°œì´ë¯€ë¡œ-inputì´-ì œëŒ€ë¡œ-ì•ˆë“¤ì–´ê°”ë‹¤ë©´-false--noneìœ¼ë¡œ-ë°˜í™˜ë -validate_entryì™€-responseì¡´ì¬ìœ ë¬´ë§Œ-ê²€ì‚¬í•œë‹¤">
<a class="anchor" href="#use-case-output-test%EB%8A%94-repo-spy%EB%8A%94-mock_users%EB%A5%BC-return%ED%95%98%EC%A7%80%EB%A7%8C-input%EA%B3%BC-%EB%B3%84%EA%B0%9C%EC%9D%B4%EB%AF%80%EB%A1%9C-input%EC%9D%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%95%88%EB%93%A4%EC%96%B4%EA%B0%94%EB%8B%A4%EB%A9%B4-false--none%EC%9C%BC%EB%A1%9C-%EB%B0%98%ED%99%98%EB%90%A0-validate_entry%EC%99%80-response%EC%A1%B4%EC%9E%AC%EC%9C%A0%EB%AC%B4%EB%A7%8C-%EA%B2%80%EC%82%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>use case Output TestëŠ” repo spyëŠ” mock_users()ë¥¼ returní•˜ì§€ë§Œ inputê³¼ ë³„ê°œì´ë¯€ë¡œ, [inputì´ ì œëŒ€ë¡œ ì•ˆë“¤ì–´ê°”ë‹¤ë©´, False / None]ìœ¼ë¡œ ë°˜í™˜ë  [validate_entryì™€ responseì¡´ì¬ìœ ë¬´]ë§Œ ê²€ì‚¬í•œë‹¤.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001145410425.png" alt="image-20221001145410425"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing registry method"""</span>

    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">register_user</span> <span class="o">=</span> <span class="n">RegisterUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"password"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">register_user</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"password"</span><span class="p">])</span>

    <span class="c1"># Testing inputs
</span>    <span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">insert_user_param</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span>

    <span class="c1"># Tesing outputs
</span>    <span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
    <span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span>
</code></pre></div></div>

<h5 id="pytest--vsë¥¼-ëŒë¦¬ë˜-ê²€ì¦ì•ˆí•˜ëŠ”-responseì˜-ì‹¤ì œë‚´ìš©spy-repoê°€-faker-mock_usersë¥¼-í†µí•´-ë°˜í™˜í•œ-ë°ì´í„°ë¥¼-í™•ì¸í•˜ë©´ì„œ-ëŒë ¤ë³´ì">
<a class="anchor" href="#pytest--vs%EB%A5%BC-%EB%8F%8C%EB%A6%AC%EB%90%98-%EA%B2%80%EC%A6%9D%EC%95%88%ED%95%98%EB%8A%94-response%EC%9D%98-%EC%8B%A4%EC%A0%9C%EB%82%B4%EC%9A%A9spy-repo%EA%B0%80-faker-mock_users%EB%A5%BC-%ED%86%B5%ED%95%B4-%EB%B0%98%ED%99%98%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%98%EB%A9%B4%EC%84%9C-%EB%8F%8C%EB%A0%A4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>pytest -vsë¥¼ ëŒë¦¬ë˜, ê²€ì¦ì•ˆí•˜ëŠ” responseì˜ ì‹¤ì œë‚´ìš©(spy repoê°€ faker mock_users()ë¥¼ í†µí•´ ë°˜í™˜í•œ ë°ì´í„°)ë¥¼ í™•ì¸í•˜ë©´ì„œ ëŒë ¤ë³´ì.</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\data\register_user\register_test.py -vs
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001145810603.png" alt="image-20221001145810603"></p>

<h4 id="04-use-case-classëŠ”-inputì—-ëŒ€í•œ-fail-testë„-í•„ìš”í•˜ë‹¤">
<a class="anchor" href="#04-use-case-class%EB%8A%94-input%EC%97%90-%EB%8C%80%ED%95%9C-fail-test%EB%8F%84-%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 use case ClassëŠ” inputì— ëŒ€í•œ fail testë„ í•„ìš”í•˜ë‹¤</h4>

<h5 id="ì„±ê³µtestë¥¼-ë³µì‚¬í•´ì„œ-_fail-í…ŒìŠ¤íŠ¸-ë©”ì„œë“œë¥¼-ë§Œë“ ë‹¤">
<a class="anchor" href="#%EC%84%B1%EA%B3%B5test%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-_fail-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì„±ê³µtestë¥¼ ë³µì‚¬í•´ì„œ _fail í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë¥¼ ë§Œë“ ë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register_fail</span><span class="p">():</span>
    <span class="s">""" Testing registry method in fail"""</span>

</code></pre></div></div>

<h5 id="js-input-attributesì—-invalid-typeì„-ì…ë ¥">
<a class="anchor" href="#js-input-attributes%EC%97%90-invalid-type%EC%9D%84-%EC%9E%85%EB%A0%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>js input attributesì— invalid typeì„ ì…ë ¥</h5>

<ul>
  <li>nameì€ stríƒ€ì…ì¸ë° intë¥¼ ë„£ì–´ì¤€ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register_fail</span><span class="p">():</span>
    <span class="s">""" Testing registry method in fail"""</span>

    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">register_user</span> <span class="o">=</span> <span class="n">RegisterUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># "name": faker.name(),
</span>        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="s">"password"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
    <span class="p">}</span>
</code></pre></div></div>

<h5 id="inputì´-ì˜ëª»ë˜ë©´-usecase---repo-spyì˜-ë©”ì„œë“œë¡œ-ì§„ì…ë„-ëª»í•˜ë¯€ë¡œ-assertì‹œ-repo-spyì˜-param-dictëŠ”-ë¹„ì–´ìˆì–´ì•¼í•œë‹¤">
<a class="anchor" href="#input%EC%9D%B4-%EC%9E%98%EB%AA%BB%EB%90%98%EB%A9%B4-usecase---repo-spy%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%A7%84%EC%9E%85%EB%8F%84-%EB%AA%BB%ED%95%98%EB%AF%80%EB%A1%9C-assert%EC%8B%9C-repo-spy%EC%9D%98-param-dict%EB%8A%94-%EB%B9%84%EC%96%B4%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>inputì´ ì˜ëª»ë˜ë©´, usecase -&gt; repo spyì˜ ë©”ì„œë“œë¡œ ì§„ì…ë„ ëª»í•˜ë¯€ë¡œ, assertì‹œ repo spyì˜ param dictëŠ” ë¹„ì–´ìˆì–´ì•¼í•œë‹¤.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001155815817.png" alt="image-20221001155815817"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing inputs
# assert user_repo.insert_user_param["name"] == attributes["name"]
# assert user_repo.insert_user_param["password"] == attributes["password"]
</span><span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">insert_user_param</span> <span class="o">==</span> <span class="p">{}</span>
</code></pre></div></div>

<h5 id="ouput-testì—ì„œëŠ”-validate_entryì—¬ë¶€ì¸-successëŠ”-false--returnì˜-dataëŠ”-response--none-ì´ˆê¸°í™”ìƒíƒœë¥¼-ì‘ë‹µí•˜ê²Œ-ëœë‹¤">
<a class="anchor" href="#ouput-test%EC%97%90%EC%84%9C%EB%8A%94-validate_entry%EC%97%AC%EB%B6%80%EC%9D%B8-success%EB%8A%94-false--return%EC%9D%98-data%EB%8A%94-response--none-%EC%B4%88%EA%B8%B0%ED%99%94%EC%83%81%ED%83%9C%EB%A5%BC-%EC%9D%91%EB%8B%B5%ED%95%98%EA%B2%8C-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ouput testì—ì„œëŠ” validate_entryì—¬ë¶€ì¸ SuccessëŠ” False / returnì˜ DataëŠ” response = None ì´ˆê¸°í™”ìƒíƒœë¥¼ ì‘ë‹µí•˜ê²Œ ëœë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Tesing outputs
</span><span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">None</span>
</code></pre></div></div>

<h5 id="ì°¸ê³ -pytest-íŠ¹ì •ê²½ë¡œëŠ”-í´ë”ê¹Œì§€ë§Œìœ¼ë¡œ-ì¤˜ë„-ëœë‹¤">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-pytest-%ED%8A%B9%EC%A0%95%EA%B2%BD%EB%A1%9C%EB%8A%94-%ED%8F%B4%EB%8D%94%EA%B9%8C%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C-%EC%A4%98%EB%8F%84-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ ) pytest íŠ¹ì •ê²½ë¡œëŠ” í´ë”ê¹Œì§€ë§Œìœ¼ë¡œ ì¤˜ë„ ëœë‹¤.</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\data\register_user\ -vs
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001160341867.png" alt="image-20221001160341867"></p>

<h5 id="testì™„ë£Œëœ-git-ì²˜ë¦¬">
<a class="anchor" href="#test%EC%99%84%EB%A3%8C%EB%90%9C-git-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì™„ë£Œëœ git ì²˜ë¦¬</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
git add .
git commit -m "feat: Creating register user use case and testing it"
</code></pre></div></div>

<ul>
  <li>pushí›„ PRê¹Œì§€ ì™„ë£Œí•˜ê¸°</li>
</ul>

<h2 id="use-cases-2-finduser">
<a class="anchor" href="#use-cases-2-finduser" aria-hidden="true"><span class="octicon octicon-link"></span></a>use cases 2 FindUser</h2>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001204534126.png" alt="image-20221001204534126"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001204542131.png" alt="image-20221001204542131"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001204550933.png" alt="image-20221001204550933"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001204612237.png" alt="image-20221001204612237"></p>

<h3 id="ì‘ì—…-ëë‚œ-brì˜-local-í´ë”ì—ì„œ-ìƒˆ-bríŒŒì„œ-ì‘ì—…-ì´ì–´ì„œ-í•˜ê¸°">
<a class="anchor" href="#%EC%9E%91%EC%97%85-%EB%81%9D%EB%82%9C-br%EC%9D%98-local-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-%EC%83%88-br%ED%8C%8C%EC%84%9C-%EC%9E%91%EC%97%85-%EC%9D%B4%EC%96%B4%EC%84%9C-%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì‘ì—… ëë‚œ brì˜ local í´ë”ì—ì„œ ìƒˆ bríŒŒì„œ ì‘ì—… ì´ì–´ì„œ í•˜ê¸°</h3>

<ol>
  <li>
    <p>í˜„ì¬ brë¥¼ í™•ì¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">branch</span>
<span class="o">*</span> <span class="n">feat</span><span class="o">/</span><span class="n">register_user_use_case</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>checkout -b</strong>ë¡œ ìƒˆ br ìƒì„±í•˜ì—¬ ì§„ì…í•˜ê¸°</p>

    <ul>
      <li>ì›ë˜ëŠ” githubì—ì„œ create branchí–ˆì—ˆìŒ.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout -b feat/generic_use_cases
   
git branch
   
* feat/generic_use_cases
  feat/register_user_use_case
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git push -u origin [branchëª…]ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ìƒˆë¡œìƒì„±í•œ brë¥¼ pushí•´ì„œ githubì— ìƒì„±í•˜ê¸°</code></strong></p>

    <ul>
      <li>
        <p>vscodeì—ì„œëŠ” push -u origin [branch] ëŒ€ì‹   <strong><code class="language-plaintext highlighter-rouge">ë¶„ê¸°ê²Œì‹œ</code>ê°€ ëœ¬ë‹¤.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001205639510.png" alt="image-20221001205639510"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>githubì—ì„œ <strong>ë¹ˆ ë¶„ê¸°ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001205751422.png" alt="image-20221001205751422"></p>
  </li>
</ol>

<h3 id="01-use-case-classëŠ”-domain--use_cases-ì—-interfaceí˜•íƒœ-classë¶€í„°-ì •ì˜í•˜ë”ë¼">
<a class="anchor" href="#01-use-case-class%EB%8A%94-domain--use_cases-%EC%97%90-interface%ED%98%95%ED%83%9C-class%EB%B6%80%ED%84%B0-%EC%A0%95%EC%9D%98%ED%95%98%EB%8D%94%EB%9D%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 use case ClassëŠ” domain &gt; use_cases ì— [Interfaceí˜•íƒœ Class]ë¶€í„° ì •ì˜í•˜ë”ë¼</h3>

<h4 id="as--interfaceë¥¼-ë¶™ì—¬ì“°ë¯€ë¡œ-classëª…ì—-ì§ì ‘-interfaceë¥¼-ë¶™ì—¬ì“°ì§€-ì•Šìœ¼ë¯€ë¡œ--datainterfacesì—-ì†í•˜ì§„-ì•ŠëŠ”ë‹¤">
<a class="anchor" href="#as--interface%EB%A5%BC-%EB%B6%99%EC%97%AC%EC%93%B0%EB%AF%80%EB%A1%9C-class%EB%AA%85%EC%97%90-%EC%A7%81%EC%A0%91-interface%EB%A5%BC-%EB%B6%99%EC%97%AC%EC%93%B0%EC%A7%80-%EC%95%8A%EC%9C%BC%EB%AF%80%EB%A1%9C--datainterfaces%EC%97%90-%EC%86%8D%ED%95%98%EC%A7%84-%EC%95%8A%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>as -Interfaceë¥¼ ë¶™ì—¬ì“°ë¯€ë¡œ, classëª…ì— ì§ì ‘ interfaceë¥¼ ë¶™ì—¬ì“°ì§€ ì•Šìœ¼ë¯€ë¡œ,  data&gt;interfacesì— ì†í•˜ì§„ ì•ŠëŠ”ë‹¤.</h4>

<ol>
  <li>
    <p>src&gt;domain&gt;use_cases&gt; <code class="language-plaintext highlighter-rouge">find_user.py</code>ë¥¼ ë§Œë“ ë‹¤</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
   
<span class="k">class</span> <span class="nc">FindUser</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to FindUser use case """</span>
   
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="finduserëŠ”-select_userë¥¼-ì“¸-ê²ƒì¸ë°-idunique_colfk-ì—-ë”°ë¼-ê²½ìš°ì˜-ìˆ˜ê°€-ìˆìœ¼ë¯€ë¡œ-ê·¸ë§Œí¼-by_xxë©”ì„œë“œë¥¼-ë‚˜ëˆ ì„œ-ë§Œë“ ë‹¤-use_case-classì˜-ë©”ì„œë“œ-returntypeì€-dictbool-dto-ì•„ë‹ˆë¼ë©´-dictbool-listdto-ê³ ì •ì´ë‹¤">
<a class="anchor" href="#finduser%EB%8A%94-select_user%EB%A5%BC-%EC%93%B8-%EA%B2%83%EC%9D%B8%EB%8D%B0-idunique_colfk-%EC%97%90-%EB%94%B0%EB%9D%BC-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98%EA%B0%80-%EC%9E%88%EC%9C%BC%EB%AF%80%EB%A1%9C-%EA%B7%B8%EB%A7%8C%ED%81%BC-by_xx%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EB%82%98%EB%88%A0%EC%84%9C-%EB%A7%8C%EB%93%A0%EB%8B%A4-use_case-class%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C-returntype%EC%9D%80-dictbool-dto-%EC%95%84%EB%8B%88%EB%9D%BC%EB%A9%B4-dictbool-listdto-%EA%B3%A0%EC%A0%95%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>FindUserëŠ” select_userë¥¼ ì“¸ ê²ƒì¸ë°, id/unique_col/fk ì— ë”°ë¼ ê²½ìš°ì˜ ìˆ˜ê°€ ìˆìœ¼ë¯€ë¡œ, ê·¸ë§Œí¼ <code class="language-plaintext highlighter-rouge">by_xx</code>ë©”ì„œë“œë¥¼ ë‚˜ëˆ ì„œ ë§Œë“ ë‹¤. use_case Classì˜ ë©”ì„œë“œ returnTypeì€ Dict[bool, DTO] ì•„ë‹ˆë¼ë©´ Dict[bool, List[DTO]] ê³ ì •ì´ë‹¤.</h4>

<ul>
  <li>by_idë¡œ 1ê°œë§Œ selectí•œë‹¤ê³  í•˜ë”ë¼ë„, selectë©”ì„œë“œì˜ return typeì€ ê³ ì •ì ìœ¼ë¡œ List[DTO]ì´ë‹¤.</li>
</ul>

<ol>
  <li>
    <p>user_id, name 2ê°œë¥¼ ê²€ìƒ‰idë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°, ì¼ë‹¨  <code class="language-plaintext highlighter-rouge">by_id</code>ë¶€í„° ì •ì˜í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
   
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="k">class</span> <span class="nc">FindUser</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to FindUser use case """</span>
   
    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">by_id</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Specific Case """</span>
   
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_id"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ë³µì‚¬í•´ì„œ <code class="language-plaintext highlighter-rouge">by_name</code> ë©”ì„œë“œë„ ë§Œë“ ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">abstractclassmethod</span>
<span class="k">def</span> <span class="nf">by_name</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
    <span class="s">""" Specific Case """</span>
   
    <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_name"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ë³µì‚¬í•´ì„œ <code class="language-plaintext highlighter-rouge">by_id_and_name</code>ì„ ë§Œë“ ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">abstractclassmethod</span>
<span class="k">def</span> <span class="nf">by_id_and_name</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
    <span class="s">""" Specific Case """</span>
   
    <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_id_and_name"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì¸í„°í˜ì´ìŠ¤ ì •ì˜ê°€ ëë‚˜ë©´, use_casesì˜ initì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.register_user</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
<span class="kn">from</span> <span class="nn">.find_user</span> <span class="kn">import</span> <span class="n">FindUser</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="02-data---ê°œë³„use_caseí´ë”ëª…--init-ìƒì„±í›„-ê°œë³„use_caseë™ì‚¬ëª…pyì—ë‹¤ê°€-usecase-classë¥¼-ì •ì˜í•œë‹¤">
<a class="anchor" href="#02-data---%EA%B0%9C%EB%B3%84use_case%ED%8F%B4%EB%8D%94%EB%AA%85--init-%EC%83%9D%EC%84%B1%ED%9B%84-%EA%B0%9C%EB%B3%84use_case%EB%8F%99%EC%82%AC%EB%AA%85py%EC%97%90%EB%8B%A4%EA%B0%80-usecase-class%EB%A5%BC-%EC%A0%95%EC%9D%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 data &gt;  ê°œë³„use_caseí´ë”ëª… + init ìƒì„±í›„, ê°œë³„use_caseë™ì‚¬ëª….pyì—ë‹¤ê°€ usecase Classë¥¼ ì •ì˜í•œë‹¤.</h3>

<h4 id="domainuse_casesì˜-pyëª…ê³¼-dataê°œë³„use_caseëª…ì€--ë™ì‚¬_ëª©ì ì–´ì§€ë§Œ-ê°œë³„use_caseí´ë”-ì†-pyíŒŒì¼ì€-ë™ì‚¬ë¡œë§Œ-êµ¬ì„±í•œë‹¤">
<a class="anchor" href="#domainuse_cases%EC%9D%98-py%EB%AA%85%EA%B3%BC-data%EA%B0%9C%EB%B3%84use_case%EB%AA%85%EC%9D%80--%EB%8F%99%EC%82%AC_%EB%AA%A9%EC%A0%81%EC%96%B4%EC%A7%80%EB%A7%8C-%EA%B0%9C%EB%B3%84use_case%ED%8F%B4%EB%8D%94-%EC%86%8D-py%ED%8C%8C%EC%9D%BC%EC%9D%80-%EB%8F%99%EC%82%AC%EB%A1%9C%EB%A7%8C-%EA%B5%AC%EC%84%B1%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>domain&gt;use_cases&gt;ì˜ pyëª…ê³¼, data&gt;ê°œë³„use_caseëª…ì€  ë™ì‚¬_ëª©ì ì–´ì§€ë§Œ, ê°œë³„use_caseí´ë” ì† pyíŒŒì¼ì€ ë™ì‚¬ë¡œë§Œ êµ¬ì„±í•œë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001213404812.png" alt="image-20221001213404812"></p>

<ol>
  <li>src&gt;data&gt;<code class="language-plaintext highlighter-rouge">find_user</code>í´ë” + initì„ ë§Œë“¤ê³ , <strong><code class="language-plaintext highlighter-rouge">find.py</code>ë¥¼ ìƒì„±í•œë‹¤</strong>
</li>
</ol>

<h4 id="domainuse_casesì—ì„œ-ì •ì˜í•œ-interfaceë¥¼-as--interfaceë¡œ-import-í•´ì„œ-ì‹¤ì œ-usecase-classfinduserë¥¼-êµ¬í˜„í•œë‹¤">
<a class="anchor" href="#domainuse_cases%EC%97%90%EC%84%9C-%EC%A0%95%EC%9D%98%ED%95%9C-interface%EB%A5%BC-as--interface%EB%A1%9C-import-%ED%95%B4%EC%84%9C-%EC%8B%A4%EC%A0%9C-usecase-classfinduser%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>domain&gt;use_casesì—ì„œ ì •ì˜í•œ interfaceë¥¼ as -Interfaceë¡œ import í•´ì„œ ì‹¤ì œ Usecase Class(FindUser)ë¥¼ êµ¬í˜„í•œë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">FindUser</span> <span class="k">as</span> <span class="n">FindUserInterface</span>

<span class="k">class</span> <span class="nc">FindUser</span><span class="p">(</span><span class="n">FindUserInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case Find User """</span>
</code></pre></div></div>

<h4 id="usecase-classëŠ”-repositoryë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë°-ì´-ë•Œ-datainterfacesì—-ì •ì˜í•œ-repo-interfaceë¥¼-as-repoë¡œ-importí•´ì„œ-ì¤€ë‹¤">
<a class="anchor" href="#usecase-class%EB%8A%94-repository%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8D%B0-%EC%9D%B4-%EB%95%8C-datainterfaces%EC%97%90-%EC%A0%95%EC%9D%98%ED%95%9C-repo-interface%EB%A5%BC-as-repo%EB%A1%9C-import%ED%95%B4%EC%84%9C-%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase ClassëŠ” repositoryë¥¼ ì¸ìë¡œ ë°›ëŠ”ë°, ì´ ë•Œ, data&gt;interfacesì— ì •ì˜í•œ repo interfaceë¥¼ as repoë¡œ importí•´ì„œ ì¤€ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">FindUser</span> <span class="k">as</span> <span class="n">FindUserInterface</span>
<span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">UserRepositoryInterface</span> <span class="k">as</span> <span class="n">UserRepository</span>


<span class="k">class</span> <span class="nc">FindUser</span><span class="p">(</span><span class="n">FindUserInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case Find User """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">UserRepository</span><span class="p">]):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
</code></pre></div></div>

<h4 id="usecase-class-methodì˜-signatureëŠ”-domainuse_casesì—-ì •ì˜í•´ë‘”-interfaceì˜-signatureë¥¼-ë³µì‚¬í•´ì„œ-ìˆ˜ì •í•œë‹¤">
<a class="anchor" href="#usecase-class-method%EC%9D%98-signature%EB%8A%94-domainuse_cases%EC%97%90-%EC%A0%95%EC%9D%98%ED%95%B4%EB%91%94-interface%EC%9D%98-signature%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-%EC%88%98%EC%A0%95%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase class methodì˜ signatureëŠ” domain&gt;use_casesì— ì •ì˜í•´ë‘” interfaceì˜ signatureë¥¼ ë³µì‚¬í•´ì„œ ìˆ˜ì •í•œë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUser</span><span class="p">(</span><span class="n">FindUserInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case Find User """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">UserRepository</span><span class="p">]):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>

    <span class="k">def</span> <span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User By id
        :param - user_i: id of the user
        :return - Dictionary with informations of the process 
        """</span>
</code></pre></div></div>

<h4 id="usecase-methodì˜-êµ¬í˜„ë¶€ëŠ”-responsenoneì´ˆê¸°í™”-vaildate_entryë¡œ-ì‹œì‘í•˜ê³ -ì‘ë‹µí˜•ì€-ê°ê°ì„-ì±„ìš´-dictë¡œ-í•œë‹¤">
<a class="anchor" href="#usecase-method%EC%9D%98-%EA%B5%AC%ED%98%84%EB%B6%80%EB%8A%94-responsenone%EC%B4%88%EA%B8%B0%ED%99%94-vaildate_entry%EB%A1%9C-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B3%A0-%EC%9D%91%EB%8B%B5%ED%98%95%EC%9D%80-%EA%B0%81%EA%B0%81%EC%9D%84-%EC%B1%84%EC%9A%B4-dict%EB%A1%9C-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase methodì˜ êµ¬í˜„ë¶€ëŠ” response=Noneì´ˆê¸°í™”, vaildate_entryë¡œ ì‹œì‘í•˜ê³ , ì‘ë‹µí˜•ì€ ê°ê°ì„ ì±„ìš´ dictë¡œ í•œë‹¤.</h4>

<ol>
  <li>entryì—ì„œ í˜• ê²€ì‚¬ì‹œ í†µê³¼ëª»í•˜ë©´, repositoryë¥¼ ì´ìš©ëª»í•˜ê³  responseê°€ Noneìœ¼ë¡œ ë°˜í™˜ëœë‹¤.</li>
  <li>entry í˜•ê²€ì‚¬ í†µê³¼ì‹œ, responseì— ì¸ìë¡œ ë°›ì€ repositoryë¥¼ ì´ìš©í•´ DTOë¥¼ ì´ìš©í•œ ê²°ê³¼ê°€ ë“¤ì–´ê°„ë‹¤</li>
  <li>return dictë¡œ validate_entryê²°ê³¼ ë° responseê²°ê³¼ë¥¼ keyì— ë„£ì–´ ë°˜í™˜í•œë‹¤.</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="k">def</span> <span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User By id
        :param - user_i: id of the user
        :return - Dictionary with informations of the process 
        """</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>

</code></pre></div></div>

<ol>
  <li><strong>ë‚˜ë¨¸ì§€ ì¸ì ê²½ìš°ì˜ ìˆ˜ì— ë”°ë¥¸ select methodë“¤ì„ ë‹¤ ë³µì‚¬í•´ì„œ êµ¬í˜„í•´ì¤€ë‹¤.</strong></li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
    <span class="s">""" Select User By name
        :param - name: name of the user
        :return - Dictionary with informations of the process 
        """</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">by_id_and_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User By id and name
        :param - user_id: id of the user
        :return - Dictionary with informations of the process 
        """</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
</code></pre></div></div>

<h3 id="03-usecase-class-testfind_testpy">
<a class="anchor" href="#03-usecase-class-testfind_testpy" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 usecase Class test(find_test.py)</h3>

<h4 id="testëŠ”-ë™ì¼í´ë”-ì†-ëª¨ë“ˆ--fakerë¥¼-ê¸°ë³¸ì ìœ¼ë¡œ-import">
<a class="anchor" href="#test%EB%8A%94-%EB%8F%99%EC%9D%BC%ED%8F%B4%EB%8D%94-%EC%86%8D-%EB%AA%A8%EB%93%88--faker%EB%A5%BC-%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9C%BC%EB%A1%9C-import" aria-hidden="true"><span class="octicon octicon-link"></span></a>testëŠ” ë™ì¼í´ë” ì† ëª¨ë“ˆ + fakerë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ import</h4>

<ol>
  <li>
    <p>src&gt;data&gt;find_user&gt; <code class="language-plaintext highlighter-rouge">find_test.py</code>ë¥¼ ë§Œë“ ë‹¤.</p>
  </li>
  <li>
    <p>testëŠ” ê¸°ë³¸ì ìœ¼ë¡œ fakerë¥¼ importí•œë‹¤.</p>
  </li>
  <li>
    <p>testëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <strong>ë™ì¼í´ë”ì— ìˆëŠ” í…ŒìŠ¤íŠ¸í•  ëª¨ë“ˆì„ <code class="language-plaintext highlighter-rouge">.ëª¨ë“ˆëª…</code>importí•œë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.find</span> <span class="kn">import</span> <span class="n">FindUser</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="repoì¸ìë¡œ-ì‚¬ìš©í•˜ëŠ”-usecase-class-testëŠ”-infrarepoë™ì¼ì„ ìƒ-testí´ë”ì˜-repospyë¥¼-importí•´ì„œ-ì¸ìë¡œ-ì‚¬ìš©í•œë‹¤">
<a class="anchor" href="#repo%EC%9D%B8%EC%9E%90%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-usecase-class-test%EB%8A%94-infrarepo%EB%8F%99%EC%9D%BC%EC%84%A0%EC%83%81-test%ED%8F%B4%EB%8D%94%EC%9D%98-repospy%EB%A5%BC-import%ED%95%B4%EC%84%9C-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repoì¸ìë¡œ ì‚¬ìš©í•˜ëŠ” usecase Class testëŠ” infra&gt;repoë™ì¼ì„ ìƒ testí´ë”ì˜ repospyë¥¼ importí•´ì„œ ì¸ìë¡œ ì‚¬ìš©í•œë‹¤.</h4>

<ul>
  <li>repo spy: repoì™€ ë™ì¼í•˜ê²Œ ìƒê²¼ìœ¼ë‚˜ ë‚´ë¶€ì—ì„œ CRUDì—†ì´ methodë³„ dictì— paramë“¤ì„ ëª¨ì•„ë‘ê³ , í™•ì¸ìš©ìœ¼ë¡œ ì“´ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.find</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">src.infra.test</span> <span class="kn">import</span> <span class="n">UserRepositorySpy</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_by_id</span><span class="p">():</span>
    <span class="s">""" Testing by_id method """</span>

    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">find_user</span> <span class="o">=</span> <span class="n">FindUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="usecaseëŠ”-inputì„-jsíƒ€ì…ì˜-attr-dictë¥¼-fakerë¡œ-ë§Œë“¤ê³ -usecase-methodì—-ë„£ì–´ì£¼ë©´-ë‚´ë¶€-repo-spyê°€-param-dictì—-ë¬¼ê³ -ìˆì„-ê²ƒì´ë‹¤">
<a class="anchor" href="#usecase%EB%8A%94-input%EC%9D%84-js%ED%83%80%EC%9E%85%EC%9D%98-attr-dict%EB%A5%BC-faker%EB%A1%9C-%EB%A7%8C%EB%93%A4%EA%B3%A0-usecase-method%EC%97%90-%EB%84%A3%EC%96%B4%EC%A3%BC%EB%A9%B4-%EB%82%B4%EB%B6%80-repo-spy%EA%B0%80-param-dict%EC%97%90-%EB%AC%BC%EA%B3%A0-%EC%9E%88%EC%9D%84-%EA%B2%83%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecaseëŠ” inputì„ jsíƒ€ì…ì˜ attr dictë¥¼ fakerë¡œ ë§Œë“¤ê³ , usecase methodì— ë„£ì–´ì£¼ë©´, ë‚´ë¶€ repo spyê°€ param dictì— ë¬¼ê³  ìˆì„ ê²ƒì´ë‹¤.</h4>

<ul>
  <li>attributesì—ëŠ” â€œidâ€ë¡œ ì…ë ¥í–ˆì§€ë§Œ, param dictëŠ” <strong>paramëª…ìœ¼ë¡œ ì…ë ¥ë˜ê¸° ë•Œë¬¸ì—, user_id=ì— ë„£ì–´ì¤¬ìœ¼ë©´ user_idë¡œ ì €ì¥ì‹œì¼°ì„ ê²ƒì´ë‹¤.</strong>
</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_by_id</span><span class="p">():</span>
    <span class="s">""" Testing by_id method """</span>

    <span class="n">user_repo</span> <span class="o">=</span> <span class="n">UserRepositorySpy</span><span class="p">()</span>
    <span class="n">find_user</span> <span class="o">=</span> <span class="n">FindUser</span><span class="p">(</span><span class="n">user_repo</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">find_user</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">])</span>

    <span class="c1"># Testing Inputs
</span>    <span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">select_user_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="usecase-method-testëŠ”-outputdictë¥¼-successvalidate_entry-torf-ì™€-datanone-or-not-none-2ê°œë¥¼-ê²€ì‚¬í•˜ë©´-ëœë‹¤">
<a class="anchor" href="#usecase-method-test%EB%8A%94-outputdict%EB%A5%BC-successvalidate_entry-torf-%EC%99%80-datanone-or-not-none-2%EA%B0%9C%EB%A5%BC-%EA%B2%80%EC%82%AC%ED%95%98%EB%A9%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase method testëŠ” output(dict)ë¥¼ Success(validate_entry TorF )ì™€ Data(None or not None) 2ê°œë¥¼ ê²€ì‚¬í•˜ë©´ ëœë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Inputs
</span><span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">select_user_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">]</span>

<span class="c1"># Testing outputs
</span><span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="testë©”ì„œë“œ1ê°œë§ˆë‹¤-pytestë¥¼-ëŒë¦°ë‹¤-íƒìƒ‰ê¸°í´ë”ì—-ìš°í´ë¦­-ìƒëŒ€ê²½ë¡œ-ë³µì‚¬í•´ì„œ-pytest--vsë¥¼-ëŒë¦¬ë©´-ëœë‹¤">
<a class="anchor" href="#test%EB%A9%94%EC%84%9C%EB%93%9C1%EA%B0%9C%EB%A7%88%EB%8B%A4-pytest%EB%A5%BC-%EB%8F%8C%EB%A6%B0%EB%8B%A4-%ED%83%90%EC%83%89%EA%B8%B0%ED%8F%B4%EB%8D%94%EC%97%90-%EC%9A%B0%ED%81%B4%EB%A6%AD-%EC%83%81%EB%8C%80%EA%B2%BD%EB%A1%9C-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-pytest--vs%EB%A5%BC-%EB%8F%8C%EB%A6%AC%EB%A9%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>testë©”ì„œë“œ1ê°œë§ˆë‹¤ pytestë¥¼ ëŒë¦°ë‹¤. íƒìƒ‰ê¸°í´ë”ì— ìš°í´ë¦­ ìƒëŒ€ê²½ë¡œ ë³µì‚¬í•´ì„œ pytest -vsë¥¼ ëŒë¦¬ë©´ ëœë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001224900780.png" alt="image-20221001224900780"></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\data\find_user -vs
</code></pre></div></div>

<h4 id="spy-repoëŠ”-ë‚´ë¶€ì—ì„œ-fakerë¡œ-ì‹¤ì‹œê°„ìœ¼ë¡œ-ë§Œë“œëŠ”-mock_entityë¡œ-ê°ì²´ë¥¼-ë§Œë“¤ì–´-ë°˜í™˜í•´ì£¼ë¯€ë¡œ-printë¡œ-pytest--vsì—ì„œ-ë‚´ìš©ë¬¼ì„-í™•ì¸í• -ìˆ˜-ìˆì§€ë§Œ-ëœë¤ê°ì²´ê³ -typeë§Œ-dtoë‹¤">
<a class="anchor" href="#spy-repo%EB%8A%94-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-faker%EB%A1%9C-%EC%8B%A4%EC%8B%9C%EA%B0%84%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%9C%EB%8A%94-mock_entity%EB%A1%9C-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B0%98%ED%99%98%ED%95%B4%EC%A3%BC%EB%AF%80%EB%A1%9C-print%EB%A1%9C-pytest--vs%EC%97%90%EC%84%9C-%EB%82%B4%EC%9A%A9%EB%AC%BC%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%A0-%EC%88%98-%EC%9E%88%EC%A7%80%EB%A7%8C-%EB%9E%9C%EB%8D%A4%EA%B0%9D%EC%B2%B4%EA%B3%A0-type%EB%A7%8C-dto%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>spy repoëŠ” ë‚´ë¶€ì—ì„œ fakerë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë§Œë“œëŠ” mock_entity()ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•´ì£¼ë¯€ë¡œ, print()ë¡œ pytest -vsì—ì„œ ë‚´ìš©ë¬¼ì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ, ëœë¤ê°ì²´ê³  Typeë§Œ DTOë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001225054616.png" alt="image-20221001225054616"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">find_user</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="c1"># Testing Inputs
</span><span class="k">assert</span> <span class="n">user_repo</span><span class="p">.</span><span class="n">select_user_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">]</span>

<span class="c1"># Testing outputs
</span><span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="testê¹Œì§€-ëë‚¬ìœ¼ë©´-ëª¨ë“ˆì„-initì—-ì˜¬ë ¤ì£¼ê¸°">
<a class="anchor" href="#test%EA%B9%8C%EC%A7%80-%EB%81%9D%EB%82%AC%EC%9C%BC%EB%A9%B4-%EB%AA%A8%EB%93%88%EC%9D%84-init%EC%97%90-%EC%98%AC%EB%A0%A4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>testê¹Œì§€ ëë‚¬ìœ¼ë©´ ëª¨ë“ˆì„ initì— ì˜¬ë ¤ì£¼ê¸°</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.find</span> <span class="kn">import</span> <span class="n">FindUser</span>
</code></pre></div></div>

<h4 id="by_id-ì´ì™¸ì—-ë©”ì„œë“œtestëŠ”-ìƒëµí•˜ê³ -need-testë¥¼-ë‹¬ì•„ì£¼ê³ -commit">
<a class="anchor" href="#by_id-%EC%9D%B4%EC%99%B8%EC%97%90-%EB%A9%94%EC%84%9C%EB%93%9Ctest%EB%8A%94-%EC%83%9D%EB%9E%B5%ED%95%98%EA%B3%A0-need-test%EB%A5%BC-%EB%8B%AC%EC%95%84%EC%A3%BC%EA%B3%A0-commit" aria-hidden="true"><span class="octicon octicon-link"></span></a>by_id ì´ì™¸ì— ë©”ì„œë“œtestëŠ” ìƒëµí•˜ê³  (need test)ë¥¼ ë‹¬ì•„ì£¼ê³  commit</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit -am "feat: implementing find user (need test)"
</code></pre></div></div>

<h2 id="use-cases-3-findpet">
<a class="anchor" href="#use-cases-3-findpet" aria-hidden="true"><span class="octicon octicon-link"></span></a>use cases 3 FindPet</h2>

<h3 id="01-srcdomain-use_cases--find_petpy-interface-ì •ì˜í•˜ê¸°">
<a class="anchor" href="#01-srcdomain-use_cases--find_petpy-interface-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 src&gt;domain&gt; use_cases &gt; find_pet.py (interface) ì •ì˜í•˜ê¸°</h3>

<ul>
  <li>use case  ë©”ì„œë“œë“¤ì€ ëª¨ë‘ Dict[bool, DTO or List[DTO]]ë¥¼ ë°˜í™˜í•œë‹¤</li>
  <li>interfaceëŠ” Use caseê°€ ê°ì²´ìƒì„±classê°€ ë  ê²ƒì´ë¯€ë¡œ @abstractmethodë¡œ ì •ì˜í•œë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>


<span class="k">class</span> <span class="nc">FindPet</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to FindPet use case """</span>

    <span class="o">@</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">by_pet_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Specific case """</span>

        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_pet_id"</span><span class="p">)</span>

    <span class="o">@</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">by_user_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Specific case """</span>

        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_user_id"</span><span class="p">)</span>

    <span class="o">@</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">by_pet_id_and_user_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Specific case """</span>

        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: by_pet_id_and_user_id"</span><span class="p">)</span>

</code></pre></div></div>

<ul>
  <li>
    <p>ì™„ì„±ë˜ë©´ init.pyì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.register_user</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
<span class="kn">from</span> <span class="nn">.find_user</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">.find_pet</span> <span class="kn">import</span> <span class="n">FindPet</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="02-srcdatafind_petí´ë”init--findpy-usecase-class-ì •ì˜í•˜ê¸°">
<a class="anchor" href="#02-srcdatafind_pet%ED%8F%B4%EB%8D%94init--findpy-usecase-class-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 src&gt;data&gt;find_petí´ë”&gt;init + find.py (usecase Class) ì •ì˜í•˜ê¸°</h3>

<ul>
  <li>src&gt;domian&gt;use_cases&gt;find_pet.pyì— ì •ì˜í•œ interfaceë¥¼ ë°”íƒ•ìœ¼ë¡œ usecase class ì •ì˜í•˜ê¸°
    <ul>
      <li>repoë¥¼ ì¸ìë¡œ ì‘ë™í•˜ëŠ” usecase Class</li>
      <li>ë©”ì„œë“œëŠ” ì£¼ë¡œ reponse=Noneì´ˆê¸°í™”, validate_entryë¡œ ì‹œì‘í•œë‹¤.
        <ul>
          <li>entryê°€ ì°¸ì¼ ë•Œ, responseì— repositoryì˜ ë©”ì„œë“œ í˜¸ì¶œ ê²°ê³¼ê°’ì„ ì¬í• ë‹¹í•´ì¤€ë‹¤. ì•„ë‹ˆë©´ Noneìœ¼ë¡œ ë°˜í™˜ëœë‹¤.</li>
        </ul>
      </li>
      <li>repo selectë©”ì„œë“œì˜ ë°˜í™˜íƒ€ì…ì€ ë¬´ì¡°ê±´ ë³µìˆ˜ DTO List[DTO]ì´ë‹¤.</li>
      <li>usecase selectë©”ì„œë“œ(find)ì˜ ë°˜í™˜íƒ€ì…ì€ ë¬´ì¡°ê±´ Dict[bool, DTO or List[DTO]]ì´ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span> <span class="k">as</span> <span class="n">PetRepository</span>
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">FindPet</span> <span class="k">as</span> <span class="n">FindPetInterface</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
  
  
<span class="k">class</span> <span class="nc">FindPet</span><span class="p">(</span><span class="n">FindPetInterface</span><span class="p">):</span>
  
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PetRepository</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span> <span class="o">=</span> <span class="n">pet_repository</span>
  
    <span class="k">def</span> <span class="nf">by_pet_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Select Pet By pet_id 
        :param - pet_id: id of the pet
        :return - Dictionary with informations of the process
        """</span>
  
        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pet_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
  
        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">)</span>
  
        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
  
    <span class="k">def</span> <span class="nf">by_user_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Select Pet By user_id 
        :param - user_id: id of the user
        :return - Dictionary with informations of the process
        """</span>
  
        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
  
        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
  
        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
  
    <span class="k">def</span> <span class="nf">by_pet_id_and_user_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]:</span>
        <span class="s">""" Select Pet By pet_id 
        :param - pet_id: id of the pet
        :return - Dictionary with informations of the process
        """</span>
  
        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pet_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
  
        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
  
        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
  
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì‘ì„±ëœ classëŠ” initì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.find</span> <span class="kn">import</span> <span class="n">FindPet</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="03-srcdatafind_petí´ë”-find_testpy-usecase-class-test-ì •ì˜í•˜ê¸°">
<a class="anchor" href="#03-srcdatafind_pet%ED%8F%B4%EB%8D%94-find_testpy-usecase-class-test-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 src&gt;data&gt;find_petí´ë”&gt; find_test.py (usecase Class test) ì •ì˜í•˜ê¸°</h3>

<h4 id="01-usecase-testëŠ”-ì¸ìë¡œ-ë“¤ì–´ê°€ëŠ”-repoì—-ëŒ€í•œ-repo-spyê°€-í•„ìš”---repo-spyì˜-ë°˜í™˜-ê°’ì¸-mock_dto-ë°˜í™˜-ë©”ì„œë“œ-mock_petê°€-ë¨¼ì €-í•„ìš”">
<a class="anchor" href="#01-usecase-test%EB%8A%94-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%80%EB%8A%94-repo%EC%97%90-%EB%8C%80%ED%95%9C-repo-spy%EA%B0%80-%ED%95%84%EC%9A%94---repo-spy%EC%9D%98-%EB%B0%98%ED%99%98-%EA%B0%92%EC%9D%B8-mock_dto-%EB%B0%98%ED%99%98-%EB%A9%94%EC%84%9C%EB%93%9C-mock_pet%EA%B0%80-%EB%A8%BC%EC%A0%80-%ED%95%84%EC%9A%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 usecase testëŠ” ì¸ìë¡œ ë“¤ì–´ê°€ëŠ” repoì— ëŒ€í•œ repo spyê°€ í•„ìš” -&gt; repo spyì˜ ë°˜í™˜ ê°’ì¸ mock_DTO ë°˜í™˜ [ë©”ì„œë“œ] mock_pet()ê°€ ë¨¼ì € í•„ìš”</h4>

<h4 id="02-mock_petdto-ë°˜í™˜-moc_method-ë¶€í„°-ë§Œë“¤ê¸°">
<a class="anchor" href="#02-mock_petdto-%EB%B0%98%ED%99%98-moc_method-%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 mock_pet(DTO) ë°˜í™˜ moc_method() ë¶€í„° ë§Œë“¤ê¸°</h4>

<ul>
  <li>faker + DTO importë¡œ ì•„ë¬´ê±°ë‚˜ ìƒì„±í•´ì„œ ë°˜í™˜í•´ì£¼ë©´ ëœë‹¤. <strong>mockê°ì²´ëŠ” ë°˜í™˜ë˜ëŠ” í•„ë“œê°’ì´ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.</strong>
    <ul>
      <li>enumì— ëŒ€í•´ì„œëŠ” stringê°’ì„ ë„£ì–´ì¤€ë‹¤. DBë“  dtoë“  stringìœ¼ë¡œ ë“¤ì–´ê°€ìˆë‹¤?!</li>
    </ul>
  </li>
  <li>src&gt;domain&gt;modelsì— ì†í•˜ë¯€ë¡œ modelsì˜ ê°™ì€ ì„ ìƒì¸ <strong>src&gt;domain&gt;testì— mock_pet.pyì— ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.</strong>
    <ul>
      <li><strong>ì‹¤ì‹œê°„ ê°ì²´ê°€ í•„ìš”í•œë°, classê°€ ì•„ë‹ˆë¼ <code class="language-plaintext highlighter-rouge">ëª©ê°ì²´ ìƒì„± mock_method</code>ë¡œ ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤.</strong></li>
    </ul>
  </li>
  <li>mock_users.py -&gt; ë‚˜ì¤‘ì— mock_user.pyë¡œ ë³€ê²½í•´ì•¼í•  ê²ƒ ê°™ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">mock_pet</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
    <span class="s">""" Mocking Pet 
    :param - None
    :return - Fake Pet registry
    """</span>

    <span class="k">return</span> <span class="n">Pets</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="n">specie</span><span class="o">=</span><span class="s">"dog"</span><span class="p">,</span>
        <span class="n">age</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>
    <p>ë§Œë“¤ì–´ì¡Œìœ¼ë©´ initì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.mock_users</span> <span class="kn">import</span> <span class="n">mock_users</span>
<span class="kn">from</span> <span class="nn">.mock_pet</span> <span class="kn">import</span> <span class="n">mock_pet</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="03-srcinfratestì—-pet_repository_spypyë¥¼-ì •ì˜í•œë‹¤">
<a class="anchor" href="#03-srcinfratest%EC%97%90-pet_repository_spypy%EB%A5%BC-%EC%A0%95%EC%9D%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 src&gt;infra&gt;testì— pet_repository_spy.pyë¥¼ ì •ì˜í•œë‹¤.</h4>

<ul>
  <li>
    <p>repoí´ë” ê°™ì€ ì„ ìƒì˜ testí´ë”ë”ì— <code class="language-plaintext highlighter-rouge">pet_repository_spy.py</code>ìƒì„±</p>
  </li>
  <li>
    <p>repo spyëŠ” <strong>classì— ì›ë³¸repo methodë³„  -&gt; initì— param_dictë¥¼ ë§Œë“¤ì–´, inputì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ëª¨ì•„ë‘”ë‹¤.</strong></p>

    <ul>
      <li>
<strong>outputë„ mock_dto()ë©”ì„œë“œë¡œ ìƒì„±í•´ì„œ ë°˜í™˜í•´ì¤€ë‹¤.</strong>
        <ul>
          <li>insertì²˜ëŸ¼ ë‹¨ìˆ˜ì¼ ê²½ìš° mock_pet()</li>
          <li>selectì²˜ëŸ¼ ë³µìˆ˜ì¼ ê²½ìš° [ mock_pet() ]</li>
        </ul>
      </li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.test</span> <span class="kn">import</span> <span class="n">mock_pet</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
  
<span class="k">class</span> <span class="nc">PetRepositorySpy</span><span class="p">:</span>
    <span class="s">""" Spy to Pet Repository """</span>
  
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_pet_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_pet_param</span> <span class="o">=</span> <span class="p">{}</span>
  
    <span class="k">def</span> <span class="nf">insert_pet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
        <span class="s">""" Spy all the attributes """</span>
  
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">'specie'</span><span class="p">]</span> <span class="o">=</span> <span class="n">specie</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">'age'</span><span class="p">]</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">'user_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
  
        <span class="k">return</span> <span class="n">mock_pet</span><span class="p">()</span>
  
    <span class="k">def</span> <span class="nf">select_pet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]:</span>
        <span class="s">""" Spy all the attributes """</span>
  
        <span class="bp">self</span><span class="p">.</span><span class="n">select_pet_param</span><span class="p">[</span><span class="s">'pet_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pet_id</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">select_pet_param</span><span class="p">[</span><span class="s">'user_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
  
        <span class="k">return</span> <span class="p">[</span><span class="n">mock_pet</span><span class="p">()]</span>
  
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì™„ì„±ë¬ìœ¼ë©´ initì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.user_repository_spy</span> <span class="kn">import</span> <span class="n">UserRepositorySpy</span>
<span class="kn">from</span> <span class="nn">.pet_repository_spy</span> <span class="kn">import</span> <span class="n">PetRepositorySpy</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="04-ë“œë””ì–´-use_case_testfind_testpyì—-spy-repo-ì‚¬ìš©í•´ì„œ-ì •ì˜í•˜ê¸°">
<a class="anchor" href="#04-%EB%93%9C%EB%94%94%EC%96%B4-use_case_testfind_testpy%EC%97%90-spy-repo-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 ë“œë””ì–´ use_case_test(find_test.py)ì— spy repo ì‚¬ìš©í•´ì„œ ì •ì˜í•˜ê¸°</h4>

<ul>
  <li>
    <p>repo spyë¥¼ importí•˜ê³ , ì›ë³¸ usecase Classë¥¼ importí•´ì„œ ì •ì˜í•´ì„œ <strong>usecase classì˜ methodë“¤ì„ test_í•œë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.infra.test</span> <span class="kn">import</span> <span class="n">PetRepositorySpy</span>
<span class="kn">from</span> <span class="nn">.find</span> <span class="kn">import</span> <span class="n">FindPet</span>
  
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
  
<span class="k">def</span> <span class="nf">test_by_pet_id</span><span class="p">():</span>
    <span class="s">""" Testing by_pet_id method in FindPet """</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>usecase ê°ì²´ë¥¼ ìƒì„±ì‹œ repo spyë¥¼ ë„£ì–´ì„œ ìƒì„±í•œë‹¤.</p>
  </li>
  <li>
    <p>usecase ê°ì²´ëŠ” <strong>request inputì„ ë°›ìœ¼ë‹ˆ,  dictë¡œ inputì„ ì •ì˜í•˜ê³  methodì— í•˜ë‚˜ì”© ë½‘ì•„ì„œ ë„£ì–´ì¤€ë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_by_pet_id</span><span class="p">():</span>
    <span class="s">""" Testing by_pet_id method in FindPet """</span>
  
    <span class="n">pet_repo</span> <span class="o">=</span> <span class="n">PetRepositorySpy</span><span class="p">()</span>
    <span class="n">find_pet</span> <span class="o">=</span> <span class="n">FindPet</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">)</span>
  
    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pet_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">2</span><span class="p">)}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">find_pet</span><span class="p">.</span><span class="n">by_pet_id</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">])</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="usecase-methodì˜-test-ì¤‘-input-testëŠ”-repo-spyê°€-ë¨¹ì€-input-vs-attributesë¡œ-ë§Œë“ -inputì„-ë¹„êµí•œë‹¤">
<a class="anchor" href="#usecase-method%EC%9D%98-test-%EC%A4%91-input-test%EB%8A%94-repo-spy%EA%B0%80-%EB%A8%B9%EC%9D%80-input-vs-attributes%EB%A1%9C-%EB%A7%8C%EB%93%A0-input%EC%9D%84-%EB%B9%84%EA%B5%90%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase methodì˜ test ì¤‘ input testëŠ” repo spyê°€ ë¨¹ì€ input vs attributesë¡œ ë§Œë“  inputì„ ë¹„êµí•œë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_by_pet_id</span><span class="p">():</span>
    <span class="s">""" Testing by_pet_id method in FindPet """</span>

    <span class="n">pet_repo</span> <span class="o">=</span> <span class="n">PetRepositorySpy</span><span class="p">()</span>
    <span class="n">find_pet</span> <span class="o">=</span> <span class="n">FindPet</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pet_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">2</span><span class="p">)}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">find_pet</span><span class="p">.</span><span class="n">by_pet_id</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">])</span>

    <span class="c1"># Testing Input
</span>    <span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">select_pet_param</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">]</span>
</code></pre></div></div>

<h5 id="usecase-methodì˜-test-ì¤‘-output-testëŠ”-repo-spyê°€-ë°˜í™˜í•˜ëŠ”-ëª©ê°ì²´ê°€-ì¤‘ìš”í•œê²Œ-ì•„ë‹ˆë¼-usecaseë°˜í™˜-dictì˜-success-tfìœ ë¬´--data-ì¡´ì¬ìœ ë¬´ë¥¼-í™•ì¸í•œë‹¤">
<a class="anchor" href="#usecase-method%EC%9D%98-test-%EC%A4%91-output-test%EB%8A%94-repo-spy%EA%B0%80-%EB%B0%98%ED%99%98%ED%95%98%EB%8A%94-%EB%AA%A9%EA%B0%9D%EC%B2%B4%EA%B0%80-%EC%A4%91%EC%9A%94%ED%95%9C%EA%B2%8C-%EC%95%84%EB%8B%88%EB%9D%BC-usecase%EB%B0%98%ED%99%98-dict%EC%9D%98-success-tf%EC%9C%A0%EB%AC%B4--data-%EC%A1%B4%EC%9E%AC%EC%9C%A0%EB%AC%B4%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase methodì˜ test ì¤‘ output testëŠ” repo spyê°€ ë°˜í™˜í•˜ëŠ” ëª©ê°ì²´ê°€ ì¤‘ìš”í•œê²Œ ì•„ë‹ˆë¼ usecaseë°˜í™˜ dictì˜ success T/Fìœ ë¬´ + data ì¡´ì¬ìœ ë¬´ë¥¼ í™•ì¸í•œë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Output
</span><span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="05-1ê°œ-ë©”ì„œë“œ-ì™„ì„±ì‹œë§ˆë‹¤-pytestë¥¼-ëŒë¦°ë‹¤">
<a class="anchor" href="#05-1%EA%B0%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%99%84%EC%84%B1%EC%8B%9C%EB%A7%88%EB%8B%A4-pytest%EB%A5%BC-%EB%8F%8C%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 1ê°œ ë©”ì„œë“œ ì™„ì„±ì‹œë§ˆë‹¤ pytestë¥¼ ëŒë¦°ë‹¤.</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pytest [íŒŒì¼ì´ ì†í•œ í´ë” ìƒëŒ€ê²½ë¡œ ë³µì‚¬] -vs
</code></pre></div></div>

<h3 id="04-ë‚˜ë¨¸ì§€-method-ìƒëµ---need-testë¡œ-ì»¤ë°‹í•˜ê¸°">
<a class="anchor" href="#04-%EB%82%98%EB%A8%B8%EC%A7%80-method-%EC%83%9D%EB%9E%B5---need-test%EB%A1%9C-%EC%BB%A4%EB%B0%8B%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 ë‚˜ë¨¸ì§€ method ìƒëµ -&gt; (need test)ë¡œ ì»¤ë°‹í•˜ê¸°</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status

git add .

git commit -am "feat: implementing FindUser use case (need test)"

git commit -am "feat: implementing FindUser use case (need test)"

git log --oneline
</code></pre></div></div>

<h2 id="ì°¸ê³ ">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ </h2>

<ul>
  <li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Robert C. Martin (Uncle Bob)ì˜ Clean Code Blog</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-Clean-Architecture-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 1í¸</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B02">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 2í¸</a></li>
</ul>

<h4 id="gitignore">
<a class="anchor" href="#gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>gitignore</h4>

<ul>
  <li>
    <p>gitì— commitë˜ì—ˆë˜ ê²ƒì„ ignoreí•˜ê³  ì‹¶ì„ ë•Œ</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rm [íŒŒì¼ëª…] --cached
</code></pre></div>    </div>
  </li>
  <li>
    <p>git amend</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git commit --amend --no-edit
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>console ë“±ì—ì„œ init importë¶€í„° ìƒê¸°ëŠ” pycacheí´ë”</li>
  <li>venv</li>
  <li>ì—°ìŠµìš© sqlite .dbíŒŒì¼</li>
  <li>pytestì‹œ ìƒê¸°ëŠ” .pytest_cache í´ë”</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h4 id="sqlalchemyíŒ¨í‚¤ì§€">
<a class="anchor" href="#sqlalchemy%ED%8C%A8%ED%82%A4%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>sqlalchemyíŒ¨í‚¤ì§€</h4>

<ul>
  <li>ì¼ë°˜ íŒ¨í‚¤ì§€: create_engine / ì¹¼ëŸ¼ì¬ë£Œë“¤</li>
  <li>.orm íŒ¨í‚¤ì§€:
    <ul>
      <li>relatioship: 1:Mì—ì„œ 1ì— í•´ë‹¹í•˜ëŠ” tableì´ ë“¤ê³  ìˆëŠ” ê°€ì§œì¹¼ëŸ¼</li>
      <li>sessionmaker: handler class ì† enterì—ì„œ engineì„ ë¬¶ì–´ì„œ sessionì„ ë°˜í™˜í•´ì£¼ëŠ” ë†ˆ</li>
    </ul>
  </li>
</ul>

<h4 id="githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">
<a class="anchor" href="#github%EC%97%90%EC%84%9C-br%EB%94%B0%EC%84%9C-%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</h4>

<h5 id="1-1-githubì—ì„œ-brìƒì„±--clone">
<a class="anchor" href="#1-1-github%EC%97%90%EC%84%9C-br%EC%83%9D%EC%84%B1--clone" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-1] githubì—ì„œ brìƒì„± ~ clone</h5>

<ol>
  <li>
    <p>githubì— ë“¤ì–´ê°€ì„œ <code class="language-plaintext highlighter-rouge">feat/~</code>ë¡œ ë¸Œëœì¹˜ ìƒì„±</p>
  </li>
  <li>
    <p>í•´ë‹¹ brë§Œ clone</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b [branch] [gitì£¼ì†Œ]
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">
<a class="anchor" href="#clone%ED%9B%84-%EC%B4%88%EA%B8%B0-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</h5>

<ol>
  <li>gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°
    <ul>
      <li>ì—†ìœ¼ë©´ config importí•´ì„œ Base + handler -&gt; get_enigne -&gt; bindí•œ ë‹¤ìŒ, create_all()í•´ì¤˜ì•¼í• ë“¯??</li>
    </ul>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<ol>
  <li>githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ pre-commit install ì§ì ‘ ì„¸íŒ…</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<ol>
  <li>vscode ì—´ê³  interpreter venvë¡œ ì§€ì •</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code .
</code></pre></div></div>

<h5 id="1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">
<a class="anchor" href="#1-2-%EC%9E%91%EC%97%85%EB%81%9D%EB%82%9C-br%EC%9D%98-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-%EC%83%88-%EC%9E%91%EC%97%85-br%EC%83%9D%EC%84%B1--%EB%B6%84%EA%B8%B0%EA%B2%8C%EC%8B%9C-%EC%B4%88%EA%B8%B0%EC%84%B8%ED%8C%85-%EB%98%90-%EC%95%88%ED%95%B4%EB%8F%84-%EB%90%98%EB%8A%94-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</h5>

<ol>
  <li>
    <p>í˜„ì¬ brë¥¼ í™•ì¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">branch</span>
<span class="o">*</span> <span class="n">feat</span><span class="o">/</span><span class="n">register_user_use_case</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>checkout -b</strong>ë¡œ ìƒˆ br ìƒì„±í•˜ì—¬ ì§„ì…í•˜ê¸°</p>

    <ul>
      <li>ì›ë˜ëŠ” githubì—ì„œ create branchí–ˆì—ˆìŒ.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout -b feat/generic_use_cases
   
git branch
   
* feat/generic_use_cases
  feat/register_user_use_case
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git push -u origin [branchëª…]ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ìƒˆë¡œìƒì„±í•œ brë¥¼ pushí•´ì„œ githubì— ìƒì„±í•˜ê¸°</code></strong></p>

    <ul>
      <li>vscodeì—ì„œëŠ” push -u origin [branch] ëŒ€ì‹   <strong><code class="language-plaintext highlighter-rouge">ë¶„ê¸°ê²Œì‹œ</code>ê°€ ëœ¬ë‹¤.</strong>
</li>
    </ul>
  </li>
  <li>
    <p>githubì—ì„œ <strong>ë¹ˆ ë¶„ê¸°ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°</strong></p>

    <ul>
      <li>githubì— mergeë˜ê¸° ìœ„í•´ì„œëŠ” <strong>ì§ì „ ì‘ì—…ì´í›„ <code class="language-plaintext highlighter-rouge">githubì— ìƒˆ ì‘ì—… brë¥¼ ë¨¼ì € ìƒì„±í•´ë†“ê³  ì‘ì—…</code>ì— ë“¤ì–´ê°€ì•¼í•œë‹¤</strong>
</li>
    </ul>
  </li>
</ol>

<h5 id="2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">
<a class="anchor" href="#2-%ED%95%B4%EB%8B%B9br-%EC%9E%91%EC%97%85%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%99%84%EB%A3%8C%ED%9B%84--merge%EA%B9%8C%EC%A7%80-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</h5>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add 
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>
  </li>
</ol>

<ul>
  <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
</ul>

<ol>
  <li><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></li>
</ol>

<h4 id="vscode-ì„¤ì •">
<a class="anchor" href="#vscode-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>vscode ì„¤ì •</h4>

<ul>
  <li>ìºì‰¬íŒŒì¼ ì•ˆë³´ì´ê¸°</li>
</ul>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"**/__pycache__"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"**/.pytest_cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<ul>
  <li>
    <p>tabì‹œ spaceë¡œ ì…ë ¥ë˜ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001015405760.png" alt="image-20221001015405760"></p>
  </li>
  <li>
    <p>íƒìƒ‰ê¸° ì—´ê¸° ë‹¨ì¶•í‚¤ : <code class="language-plaintext highlighter-rouge">shift + alt + R</code></p>

    <ul>
      <li>íŒŒì¼: íŒŒì¼ íƒìƒ‰ê¸°ì— í‘œì‹œ</li>
    </ul>
  </li>
</ul>

<h4 id="testì •ë¦¬">
<a class="anchor" href="#test%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì •ë¦¬</h4>

<ol>
  <li>
    <p>repo_insert_X</p>

    <ol>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>
        <p>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</p>
      </li>
      <li>repo_select_X</li>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ol>
  </li>
</ol>


  </div><a class="u-url" href="/python/flask/cleanarchitecture/2022/09/02/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_02_%EB%8B%A8%EC%9D%BCusecase_RepoSpy(class)_MockDTO(method).html" hidden></a>
</article>