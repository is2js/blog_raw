<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>í´ë¦°ì•„í‚¤í…ì³ 03 OneEntity UseCaseêµ¬í˜„ê³¼ testë¥¼ ìœ„í•œ UseCaseSpy | ëŒë²”í…¤ë†‘</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="í´ë¦°ì•„í‚¤í…ì³ 03 OneEntity UseCaseêµ¬í˜„ê³¼ testë¥¼ ìœ„í•œ UseCaseSpy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="python clean architecture" />
<meta property="og:description" content="python clean architecture" />
<link rel="canonical" href="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/03/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_03_ManyEntity_Register_usecase_UseCaseSpy.html" />
<meta property="og:url" content="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/03/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_03_ManyEntity_Register_usecase_UseCaseSpy.html" />
<meta property="og:site_name" content="ëŒë²”í…¤ë†‘" />
<meta property="og:image" content="blog.chojaeseong.com/images/posts/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-03T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-09-03T00:00:00-05:00","url":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/03/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_03_ManyEntity_Register_usecase_UseCaseSpy.html","@type":"BlogPosting","image":"blog.chojaeseong.com/images/posts/python.png","headline":"í´ë¦°ì•„í‚¤í…ì³ 03 OneEntity UseCaseêµ¬í˜„ê³¼ testë¥¼ ìœ„í•œ UseCaseSpy","dateModified":"2022-09-03T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/03/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_03_ManyEntity_Register_usecase_UseCaseSpy.html"},"description":"python clean architecture","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- í°íŠ¸ì¶”ê°€ë¥¼ ìœ„í•œ linkíƒœê·¸ ì‚½ì… -->
  <!-- í°íŠ¸1:  ê¸°ë³¸ spoqa ì›¹í°íŠ¸ -->
  <!-- cssì—ì„œ * {} ë‹¤ ë’¤ì§‘ì–´ì”€. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- í°íŠ¸2:  ë¸”ë¡œê·¸ ì œëª©ë“¤ sunflower ì›¹í°íŠ¸ -->
  <!-- ì¥¬í”¼í„° ë“± í¬ìŠ¤íŠ¸ ë‚´ë¶€ ê¸€ì h1, h2 ì œëª©ì€ sunflowerì²´ ë„ì… -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="blog.chojaeseong.com/feed.xml" title="ëŒë²”í…¤ë†‘" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ëŒë²”í…¤ë†‘</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">í´ë¦°ì•„í‚¤í…ì³ 03 OneEntity UseCaseêµ¬í˜„ê³¼ testë¥¼ ìœ„í•œ UseCaseSpy</h1><p class="page-description">python clean architecture</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-03T00:00:00-05:00" itemprop="datePublished">
        Sep 3, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      13 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#flask">flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cleanarchitecture">cleanarchitecture</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- tocê°€ ë¨¼ì € ë‚˜ì˜¤ë¯€ë¡œ h3ë¡œ ì•ˆë‚´í•˜ê¸° -->
    <h3>ğŸ“œ ì œëª©ìœ¼ë¡œ ë³´ê¸°</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#í´ë¦°-ì•„í‚¤í…ì³-3ì¥">í´ë¦° ì•„í‚¤í…ì³ 3ì¥</a>
<ul>
<li class="toc-entry toc-h2"><a href="#1-manyentity-register-use-case---register_pet">1 ManyEntity Register use case - register_pet</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-githubì—ì„œ-branch-ë”°ì„œ-ìƒˆì‘ì—…br-ì‹œì‘í•˜ê¸°í–ˆë˜-ê²ƒ">01 githubì—ì„œ branch ë”°ì„œ ìƒˆì‘ì—…br ì‹œì‘í•˜ê¸°(í–ˆë˜ ê²ƒ)</a></li>
<li class="toc-entry toc-h3"><a href="#02-srcdomainuse_casesì—ì„œ-register_petpy-ì¸í„°í˜ì´ìŠ¤-ë§Œë“¤ê¸°">02 src&gt;domain&gt;use_cases&gt;ì—ì„œ register_pet.py ì¸í„°í˜ì´ìŠ¤ ë§Œë“¤ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#ê´€ê³„-register-usecase-methodëŠ-fkidëŒ€ì‹ -fkì˜-dictì •ë³´ë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë‹¤">ê´€ê³„ Register usecase MethodëŠ fk(id)ëŒ€ì‹  fkì˜ Dictì •ë³´ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-srcdataê°œë³„ucregister_pet-ë™ì‚¬registerpy--initpyì„-ì •ì˜í•œë‹¤">03 src&gt;data&gt;(ê°œë³„UC)register_pet &gt;(ë™ì‚¬)register.py + init.pyì„ ì •ì˜í•œë‹¤.</a></li>
<li class="toc-entry toc-h3"><a href="#04-registermanyentity-usecase-classëŠ”-ë‹¨ë…-usecaseì™€-ë‹¬ë¦¬-repoì™¸-findfkentity_usecase_classë¥¼-ìƒì„±ìì˜-ì¸ìë¡œ-ì¶”ê°€ë¡œ-ë°›ëŠ”ë‹¤">04 RegisterManyEntity usecase ClassëŠ” ë‹¨ë… usecaseì™€ ë‹¬ë¦¬, repoì™¸ [FindFkEntity_usecase_Class]ë¥¼ ìƒì„±ìì˜ ì¸ìë¡œ ì¶”ê°€ë¡œ ë°›ëŠ”ë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#registermanyentity-classì˜-registerë©”ì„œë“œ-ë‚´ë¶€ì—ì„œëŠ”-private-emthodë¥¼-ì¶”ê°€í•´ì„œ-ìƒì„±ìì¸í’‹-selffindfk_usecase_classë¡œ-method-inputì¸-fk_informationì„-ê²€ì¦í•œë‹¤">RegisterManyEntity Classì˜ registerë©”ì„œë“œ ë‚´ë¶€ì—ì„œëŠ” [private emthod]ë¥¼ ì¶”ê°€í•´ì„œ, ìƒì„±ìì¸í’‹ [self.FindFK_usecase_class]ë¡œ method inputì¸ [fk_information]ì„ ê²€ì¦í•œë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#find_user-ì—­ì‹œ-selectë¼ì„œ-id-andor-unique-keyì˜-ê²½ìš°ì˜-ìˆ˜ì—-ë”°ë¼ì„œ-ê²°ê³¼ë¬¼ì„-ë°˜í™˜í•˜ê²Œ-í•œë‹¤-ì‹¤íŒ¨ê°€ëŠ¥ì„±ì´-ìˆëŠ”-í˜¸ì¶œì€-ê°€ë³€ë³€ìˆ˜-noneìœ¼ë¡œ-ì´ˆê¸°í™”í•´ë†“ê³ -ì‹œì‘í•œë‹¤">find_user ì—­ì‹œ selectë¼ì„œ id and/or unique keyì˜ ê²½ìš°ì˜ ìˆ˜ì— ë”°ë¼ì„œ ê²°ê³¼ë¬¼ì„ ë°˜í™˜í•˜ê²Œ í•œë‹¤. ì‹¤íŒ¨ê°€ëŠ¥ì„±ì´ ìˆëŠ” í˜¸ì¶œì€ ê°€ë³€ë³€ìˆ˜ Noneìœ¼ë¡œ ì´ˆê¸°í™”í•´ë†“ê³  ì‹œì‘í•œë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#repo-select-inputì„-keywordnoneìœ¼ë¡œ-ì£¼ê³ -ê²½ìš°ì˜ìˆ˜ë³„-ifë¬¸ìœ¼ë¡œ-í•œë°©ì—-ì²˜ë¦¬í•œë‹¤">repo select: inputì„ keyword=Noneìœ¼ë¡œ ì£¼ê³ , ê²½ìš°ì˜ìˆ˜ë³„ ifë¬¸ìœ¼ë¡œ í•œë°©ì— ì²˜ë¦¬í•œë‹¤</a></li>
<li class="toc-entry toc-h5"><a href="#usecase-selectfind-inputì´-js---dictì—-ë‹´ê²¨ì„œ-ë“¤ì–´ì˜¤ë©°-selectìš©-inputì˜-ê²½ìš°ì˜-ìˆ˜-ë§ˆë‹¤-argsë¡œ-ì •ì˜í•œ-methodë¥¼-ê°ê°-ë§Œë“¤ì–´ë†“ëŠ”ë‹¤">usecase select(find): inputì´ js -&gt; dictì— ë‹´ê²¨ì„œ ë“¤ì–´ì˜¤ë©°, selectìš© inputì˜ ê²½ìš°ì˜ ìˆ˜ ë§ˆë‹¤ argsë¡œ ì •ì˜í•œ methodë¥¼ ê°ê° ë§Œë“¤ì–´ë†“ëŠ”ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#manyentity-register-usecase-ì†-fkentity-findfk---ìì‹ ì²˜ëŸ¼-jsì˜-dictë¡œ-ë‹´ê²¨ë“¤ì–´ì˜¤ê¸´-í•˜ë‚˜-í™•ì •ëœ-ì •ë³´ê°€-ì•„ë‹ˆë¼-dictkeysë¡œ-ë¹¼ë†“ê³ -repo-kargsì²˜ëŸ¼-keysì—-ë‹´ê¸´-ê²½ìš°ì˜-ìˆ˜ë³„-ifë¬¸ì„-ì‚¬ìš©í•´-í•œë°©ì—-ì²˜ë¦¬í•˜ë˜-args-ì •ì˜í•œ-methodë¥¼-í˜¸ì¶œí•˜ê²Œ-í•œë‹¤">manyentity register usecase ì† FKentity FindFk -&gt; ìì‹ ì²˜ëŸ¼ jsì˜ dictë¡œ ë‹´ê²¨ë“¤ì–´ì˜¤ê¸´ í•˜ë‚˜, í™•ì •ëœ ì •ë³´ê°€ ì•„ë‹ˆë¼ dict.keys()ë¡œ ë¹¼ë†“ê³ , repo kargsì²˜ëŸ¼ keysì— ë‹´ê¸´ ê²½ìš°ì˜ ìˆ˜ë³„ ifë¬¸ì„ ì‚¬ìš©í•´ í•œë°©ì— ì²˜ë¦¬í•˜ë˜, args ì •ì˜í•œ methodë¥¼ í˜¸ì¶œí•˜ê²Œ í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#ë‹¤ì‹œ--user_information-method-inputì„-__private-ë©”ì„œë“œë¡œ-ê²°ê³¼ë¬¼ì„-ë°›ì•„-entryì™€-ë™ì‹œì—-__private-ë©”ì„œë“œì˜-ê²°ê³¼ë¬¼-ì¤‘-successì—¬ë¶€ë§Œìœ¼ë¡œ-ê°™ì´-checkerì˜-ê²€ì¦-ì¡°ê±´ìœ¼ë¡œ-ì¤€ë‹¤">ë‹¤ì‹œ  user_information method inputì„ __private ë©”ì„œë“œë¡œ ê²°ê³¼ë¬¼ì„ ë°›ì•„, entryì™€ ë™ì‹œì— __private ë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ ì¤‘ â€œSuccessâ€ì—¬ë¶€ë§Œìœ¼ë¡œ ê°™ì´ checkerì˜ ê²€ì¦ ì¡°ê±´ìœ¼ë¡œ ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#validate_entry-and-findfkê²°ê³¼ë¬¼success-ë‘˜ë‹¤-ì°¸ì¸-ê²½ìš°if-checkì—ë§Œ-responseì—-repositoryì˜-insertregister-method-í˜¸ì¶œì˜-ê²°ê³¼ë¬¼ì„-ë‹´ëŠ”ë‹¤ê²€ì¦-ì„±ê³µì‹œë§Œ-noneì—-ì¬í• ë‹¹í•´ì„œ-ë‹´ê¸°">validate_entry and FindFKê²°ê³¼ë¬¼[â€œSuccessâ€] ë‘˜ë‹¤ ì°¸ì¸ ê²½ìš°(if check:)ì—ë§Œ responseì— repositoryì˜ insert(register) method í˜¸ì¶œì˜ ê²°ê³¼ë¬¼ì„ ë‹´ëŠ”ë‹¤.(ê²€ì¦ ì„±ê³µì‹œë§Œ Noneì— ì¬í• ë‹¹í•´ì„œ ë‹´ê¸°)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#2-manyentity-register-use-case-test---register_testpy">2 ManyEntity Register use case Test - register_test.py</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-repo-spyì™€-ë”ë¶ˆì–´-manyentityì˜-register-use-caseëŠ”-ì¶”ê°€ëœ-ì¸ìì—-ëŒ€í•œ-findfk-spyë„-ë§Œë“¤ì–´ì•¼í•œë‹¤">01 repo spyì™€ ë”ë¶ˆì–´, ManyEntityì˜ register use caseëŠ” ì¶”ê°€ëœ ì¸ìì— ëŒ€í•œ [FindFK spy]ë„ ë§Œë“¤ì–´ì•¼í•œë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#ê°œë³„usecase-ì™€-ë™ì¼í•œ-ì„ ìƒì˜-srcdataì—-testí´ë”ë¥¼-ë§Œë“¤ê³ -find_user_spypyì™€-initì„-ë§Œë“ ë‹¤">ê°œë³„usecase ì™€ ë™ì¼í•œ ì„ ìƒì˜ src&gt;dataì— testí´ë”ë¥¼ ë§Œë“¤ê³  find_user_spy.pyì™€ initì„ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#spyëŠ”-inputì„-selfí•„ë“œì—-ë¨¸ê¸ˆê³ -outputì€-mockê°ì²´ë¡œ-ë‚´ì–´ì•¼í•˜ë‹ˆ-usersdtoì™€-mock_usersë¥¼-importí•œë‹¤">spyëŠ” inputì„ self.í•„ë“œì— ë¨¸ê¸ˆê³ , outputì€ mockê°ì²´ë¡œ ë‚´ì–´ì•¼í•˜ë‹ˆ, Users(DTO)ì™€ mock_users()ë¥¼ importí•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-ëŠ”-ì›ë˜-ìƒì„±ìì—-repoë¥¼-ì¸ìë¡œ-ë°›ì•˜ì§€ë§Œ--usecasespyëŠ”-ì‹¤ì œ-repoê°€-í•„ìš”ì—†ì´-repospyê°€-ë“¤ì–´ê°ˆ-ê²ƒì´ë¯€ë¡œ-typeì„-anyë¡œ-ì¤€ë‹¤">usecase ëŠ” ì›ë˜ ìƒì„±ìì— repoë¥¼ ì¸ìë¡œ ë°›ì•˜ì§€ë§Œ,  UsecaseSpyëŠ” ì‹¤ì œ repoê°€ í•„ìš”ì—†ì´ RepoSpyê°€ ë“¤ì–´ê°ˆ ê²ƒì´ë¯€ë¡œ Typeì„ anyë¡œ ì¤€ë‹¤!!!!</a></li>
<li class="toc-entry toc-h4"><a href="#ì›ë³¸-usecaseì˜-ë©”ì„œë“œë“¤-signatureë¥¼-ë³µì‚¬í•´ì„œ-ê°€ì ¸ì˜¤ë˜--êµ¬í˜„ë¶€ì—ëŠ”-ë‹¤ë“¤-ìê¸°-param-dictì—-í• ë‹¹í•´ì¤€ë‹¤">ì›ë³¸ usecaseì˜ ë©”ì„œë“œë“¤ signatureë¥¼ ë³µì‚¬í•´ì„œ ê°€ì ¸ì˜¤ë˜,  êµ¬í˜„ë¶€ì—ëŠ” ë‹¤ë“¤ ìê¸° param dictì— í• ë‹¹í•´ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#repo-spyì™€-ë˜ë‹¤ë¥¸-ì°¨ì´ì ì€-methodë³„-param-dictì—-input-ì €ì¥ì™¸-use-case-ì¢…íŠ¹-return-success-dataë¥¼-ìœ„í•´-resonsevalidate_entry-ì²˜ë¦¬ë¥¼-í•´ì¤˜ì•¼í•œë‹¤---repomethodí˜¸ì¶œì´-ì•„ë‹Œ-mock_method---ë¥¼-í™œìš©í•´ì„œ-dataresponse-dto-or-listdtoë¥¼-ì±„ì›Œì¤€ë‹¤">repo spyì™€ ë˜ë‹¤ë¥¸ ì°¨ì´ì ì€, methodë³„ param dictì— input ì €ì¥ì™¸, [use case ì¢…íŠ¹, return {â€œSuccessâ€, â€œDataâ€}]ë¥¼ ìœ„í•´ resonse/validate_entry ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤. -&gt; repomethodí˜¸ì¶œì´ ì•„ë‹Œ mock_method() + [] ë¥¼ í™œìš©í•´ì„œ Data(response, DTO or List[DTO])ë¥¼ ì±„ì›Œì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-register_manyentitytestpy-ì‘ì„±í•˜ê¸°">02 register_(ManyEntity)test.py ì‘ì„±í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#importí• -ê²ƒë“¤-ì •ë¦¬">importí•  ê²ƒë“¤ ì •ë¦¬</a></li>
<li class="toc-entry toc-h4"><a href="#pet_repospy-find_user-with-user_repospy-for-findpet">pet_repoSpy, find_user with user_repoSpy for FindPet</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-testë¼ë©´-inputì€-attributes-dictì§€ë§Œ-ë‚´ë¶€-fkí•„ë“œëŠ”-id-intê°’ì´-ì•„ë‹Œ-fk_information--ìœ¼ë¡œ-ë‚´ë¶€-ì •ë³´ëŠ”-userì „ì²´ì •ë³´ê°€-ì•„ë‹Œ-findselectì‹œ-í•„ìš”í•œ-í•„ë“œë“¤user_id-andor-user_nameìœ¼ë¡œ-êµ¬ì„±í•œë‹¤">usecase testë¼ë©´ inputì€ attributes dictì§€ë§Œ, ë‚´ë¶€ fkí•„ë“œëŠ” id intê°’ì´ ì•„ë‹Œ, fk_information = {}ìœ¼ë¡œ! ë‚´ë¶€ ì •ë³´ëŠ” userì „ì²´ì •ë³´ê°€ ì•„ë‹Œ find==selectì‹œ í•„ìš”í•œ í•„ë“œë“¤(user_id and/or user_name)ìœ¼ë¡œ êµ¬ì„±í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-method-testëŠ”-attributes---usecaseê°ì²´methodë¥¼-í˜¸ì¶œí•˜ì—¬-ì–»ëŠ”-response---dictbool-dto-or-listdtoë¥¼-outputìœ¼ë¡œ-testí•œë‹¤-ì´-ë•Œ-method-inputì—-fk_id-ëŒ€ì‹ -fk_information-with-select-argsë¡œ-êµ¬ì„±ë˜ëŠ”-ê²ƒì´-ì°¨ì´ì ì´ë‹¤">usecase method testëŠ” attributes -&gt; usecaseê°ì²´.methodë¥¼ í˜¸ì¶œí•˜ì—¬ ì–»ëŠ” response -&gt; Dict[bool, DTO or List[DTO]]ë¥¼ outputìœ¼ë¡œ testí•œë‹¤. ì´ ë•Œ, method inputì— fk_id ëŒ€ì‹  fk_information with select argsë¡œ êµ¬ì„±ë˜ëŠ” ê²ƒì´ ì°¨ì´ì ì´ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#input-testì—ì„œ-fk_informationì€-pkpetì„-registerí•˜ëŠ”ë°-only-idë§Œ-í•„ìš”í•˜ë¯€ë¡œ-fkì˜-idë§Œ-pet-repoì¸ì-pet-repospyì˜-param-dictë¡œ-ë“¤ì–´ê°„ë‹¤-usecase-input-testëŠ”-pet_repospyì˜-param-dictë¥¼-ê²€ì‚¬í•˜ë¯€ë¡œ-ê²€ì‚¬í•˜ë ¤ë©´-fk_informationì •ë³´-ì¤‘ì—-idë§Œ-ê²€ì‚¬í•œë‹¤">input testì—ì„œ, fk_informationì€ pk(Pet)ì„ registerí•˜ëŠ”ë°, only idë§Œ í•„ìš”í•˜ë¯€ë¡œ, fkì˜ idë§Œ Pet repoì¸ì/ Pet repoSpyì˜ param dictë¡œ ë“¤ì–´ê°„ë‹¤. usecase Input testëŠ” pet_repoSpyì˜ param dictë¥¼ ê²€ì‚¬í•˜ë¯€ë¡œ ê²€ì‚¬í•˜ë ¤ë©´ fk_informationì •ë³´ ì¤‘ì— idë§Œ ê²€ì‚¬í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#pet-repo-spyì˜-param-dictë¥¼-printí•˜ë©°-pytest">pet repo spyì˜ param dictë¥¼ printí•˜ë©° pytest</a></li>
<li class="toc-entry toc-h4"><a href="#findfkspyë¡œ-ë“¤ì–´ê°„-fk_information-inputì€-ë”°ë¡œ-ê²€ì‚¬í•œë‹¤">FindFkSpy()ë¡œ ë“¤ì–´ê°„ fk_information inputì€ ë”°ë¡œ ê²€ì‚¬í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#repo-spycrud-ì¸ìë³„-ê²½ìš°ì˜-ìˆ˜-by-ifì²˜ëŸ¼-usecase-spyì¸ìë³„-ê°-methodë„-ê°™ì€-repoì™€-ê°™ì€-inputì„-ë°›ìœ¼ë©°-ê²½ìš°ì˜ìˆ˜ë³„-methodë“¤ì—-ëŒ€í•œ-param_dictë¥¼-ê°€ì§€ê³ -ìˆìœ¼ë‹ˆ--usecase_spyë¡œ-fk_information-inputì •ë³´ë¥¼-param_dictë¡œ-testí•œë‹¤">repo spy(CRUD ì¸ìë³„ ê²½ìš°ì˜ ìˆ˜ by if)ì²˜ëŸ¼, UseCase Spy(ì¸ìë³„ ê° method)ë„ ê°™ì€ repoì™€ ê°™ì€ inputì„ ë°›ìœ¼ë©°, ê²½ìš°ì˜ìˆ˜ë³„ methodë“¤ì— ëŒ€í•œ param_dictë¥¼ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ,  usecase_spyë¡œ fk_information inputì •ë³´ë¥¼ param_dictë¡œ testí•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#usecase-output-ê²€ì‚¬ëŠ”-ê³ ì •ì´ë‹¤-usecasemethodì˜-ê²°ê³¼responseëŠ”-dictbool-listdto-or-dto">usecase Output ê²€ì‚¬ëŠ” ê³ ì •ì´ë‹¤. usecase.methodì˜ ê²°ê³¼responseëŠ” Dict[bool, List[DTO] or DTO]</a></li>
<li class="toc-entry toc-h4"><a href="#commit---branch--í™•ì¸í›„---push---merge">commit -&gt; branch  í™•ì¸í›„ -&gt; push -&gt; merge</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ì°¸ê³ ">ì°¸ê³ </a>
<ul>
<li class="toc-entry toc-h4"><a href="#gitignore">gitignore</a></li>
<li class="toc-entry toc-h4"><a href="#sqlalchemyíŒ¨í‚¤ì§€">sqlalchemyíŒ¨í‚¤ì§€</a></li>
<li class="toc-entry toc-h4"><a href="#githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#1-1-githubì—ì„œ-brìƒì„±--clone">[1-1] githubì—ì„œ brìƒì„± ~ clone</a></li>
<li class="toc-entry toc-h5"><a href="#cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h5"><a href="#1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</a></li>
<li class="toc-entry toc-h5"><a href="#1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#vscode-ì„¤ì •">vscode ì„¤ì •</a></li>
<li class="toc-entry toc-h4"><a href="#testì •ë¦¬">testì •ë¦¬</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="í´ë¦°-ì•„í‚¤í…ì³-3ì¥">
<a class="anchor" href="#%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-3%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>í´ë¦° ì•„í‚¤í…ì³ 3ì¥</h1>

<ul>
  <li>
    <p>í´ë˜ìŠ¤ ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ë¦¬í¬ì§€í† ë¦¬ì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ì‚¬ìš© ì‚¬ë¡€ë¥¼ ë„£ì—ˆìŠµë‹ˆë‹¤. ì˜¬ë°”ë¥¸ ê²ƒì€ ê° ì €ì¥ì†Œì˜ ì¸í„°í˜ì´ìŠ¤ì™€ ì§ì ‘ ì—°ê²°ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
  </li>
  <li>userì˜ ê²½ìš° register -&gt; find ìˆœìœ¼ë¡œ ì§„í–‰ë˜ì—ˆì§€ë§Œ</li>
  <li>fkë¥¼ ë“¤ê³  ìˆëŠ” Manyì˜ petì˜ ê²½ìš° find -&gt; registerë¡œ ì§„í–‰ëœë‹¤?!
    <ul>
      <li>ë“±ë¡ë„ ì—†ëŠ”ë° findë¶€í„° í•´ë„ëœë‹¤? use caseëŠ” ì´ë¯¸ repoì˜ insertê°€ ê°œë°œëœ ìƒí™©ì—ì„œ testí•´ì„œ ìƒê´€ ì—†ë‹¤.</li>
      <li><strong>petì€ registerì‘ì—…ì‹œ, userë¥¼ findí•´ì„œ pkê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¶€í„° ê²€ì‚¬í•´ì•¼í•˜ê¸° ë•Œë¬¸ì—, fkì˜ registerëŠ” ë‚˜ì¤‘ì—(pk/one table register- &gt; find ê¹Œì§€ ëë‚œ í›„) ì‘ì—…í•œë‹¤.</strong></li>
    </ul>
  </li>
</ul>

<h2 id="1-manyentity-register-use-case---register_pet">
<a class="anchor" href="#1-manyentity-register-use-case---register_pet" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 ManyEntity Register use case - register_pet</h2>

<h3 id="01-githubì—ì„œ-branch-ë”°ì„œ-ìƒˆì‘ì—…br-ì‹œì‘í•˜ê¸°í–ˆë˜-ê²ƒ">
<a class="anchor" href="#01-github%EC%97%90%EC%84%9C-branch-%EB%94%B0%EC%84%9C-%EC%83%88%EC%9E%91%EC%97%85br-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0%ED%96%88%EB%8D%98-%EA%B2%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 githubì—ì„œ branch ë”°ì„œ ìƒˆì‘ì—…br ì‹œì‘í•˜ê¸°(í–ˆë˜ ê²ƒ)</h3>

<ol>
  <li>ê¸°ì¡´ ì‘ì—… pushì´í›„ mergeê¹Œì§€ ëë‚´ê¸°</li>
  <li>githubì—ì„œ <code class="language-plaintext highlighter-rouge">feat/registry_pet</code> ì´ë¦„ì˜ <strong>br ë”´ í›„ì— clone ì¤€ë¹„í•˜ê¸°</strong>
</li>
  <li>localì—ì„œ <code class="language-plaintext highlighter-rouge">registryPet</code>í´ë” ë§Œë“¤ê³  ì—¬ê¸°ë‹¤ê°€ -b clone ë°›ê¸°</li>
  <li>local í´ë”ì— <strong>ë°±ì—…í•´ë‘” .dbë¥¼ ë³µë¶™í•´ì„œ ê°€ì ¸ë‹¤ë†“ê¸°</strong>
</li>
  <li>í„°ë¯¸ë„ì—ì„œ
    <ol>
      <li>clone ì½”ë“œí´ë”ë¡œ cd ë“¤ì–´ê°€ê¸°</li>
      <li>lsë¡œ íŒŒì¼ í™•ì¸</li>
      <li>venv ìƒì„± ë° í™œì„±í™”</li>
      <li>venv ì§„ì…í›„ requirements.txt ì„¤ì¹˜, pre-commit install</li>
      <li>vscodeë¡œ ì§„ì…í•´ì„œ venv select</li>
    </ol>
  </li>
</ol>

<h3 id="02-srcdomainuse_casesì—ì„œ-register_petpy-ì¸í„°í˜ì´ìŠ¤-ë§Œë“¤ê¸°">
<a class="anchor" href="#02-srcdomainuse_cases%EC%97%90%EC%84%9C-register_petpy-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 src&gt;domain&gt;use_cases&gt;ì—ì„œ register_pet.py ì¸í„°í˜ì´ìŠ¤ ë§Œë“¤ê¸°</h3>

<h4 id="ê´€ê³„-register-usecase-methodëŠ-fkidëŒ€ì‹ -fkì˜-dictì •ë³´ë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë‹¤">
<a class="anchor" href="#%EA%B4%80%EA%B3%84-register-usecase-method%EB%8A%90-fkid%EB%8C%80%EC%8B%A0-fk%EC%9D%98-dict%EC%A0%95%EB%B3%B4%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ê´€ê³„ Register usecase MethodëŠ fk(id)ëŒ€ì‹  fkì˜ Dictì •ë³´ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</h4>

<ol>
  <li>
    <p><strong>interfaceëŠ” ì‚¬ì‹¤ìƒ ê°ì²´contextë¥¼ ì‚¬ìš©ì•ˆí•˜ë¯€ë¡œ êµ³ì´ ë©”ì„œë“œë¥¼ selfì˜ abstractmethodë¡œ ì•ˆë§Œë“¤ì–´ë„ ëœë‹¤ê³  í•œë‹¤.@classmethodë§Œ ë‹¬ì•„ì„œ cls ë‹¤ ë‹¬ì•„ì„œ clsë¡œ ì¸í„°í˜ì´ìŠ¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.</strong></p>
  </li>
  <li>
    <p><strong>petì˜ ageëŠ” user_idë³´ë‹¤ ë” ìì‹  ê²ƒ ê°™ì§€ë§Œ ì‚¬ì‹¤ìƒ ì•„ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">ageëŠ” ì—†ì–´ë„ ë˜ëŠ” nullable</code>ì´ë¼ë©´ -&gt; kargsë¡œ ì£¼ê¸° ìœ„í•´, <code class="language-plaintext highlighter-rouge">fkì— í•´ë‹¹í•˜ëŠ” user_informationë³´ë‹¤ ë” ë’¤ìª½ì— ë†“ê³   = Noneìœ¼ë¡œ ì´ˆê¸°í™”</code>í•œë‹¤</strong></p>
  </li>
  <li>
    <p><strong>use caseì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">user_idë¥¼ ì§ì ‘ì‚¬ìš©í•˜ëŠ” repo</code>ì™€ ë‹¬ë¦¬ <code class="language-plaintext highlighter-rouge">user_idëŒ€ì‹  user_information dict</code>ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤. typeì€ idì™€ ageì˜ int, name/passwordì˜ strìœ¼ë¡œ Dict typeì„ ì½¤ë§ˆë¡œ ì—°ê²°í•´ì„œ ì¤€ë‹¤.</strong></p>
  </li>
  <li>
    <p>use case ë°˜í™˜íƒ€ì…ì€ Dict[bool, DTO or List[DTO]] ê³ ì •ì´ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
   
   
<span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to RegisterPet use case """</span>
   
    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
        <span class="s">""" use case """</span>
   
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Should implement method: register"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>initì— ì˜¬ë ¤ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.register_user</span> <span class="kn">import</span> <span class="n">RegisterUser</span>
<span class="kn">from</span> <span class="nn">.find_user</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">.find_pet</span> <span class="kn">import</span> <span class="n">FindPet</span>
<span class="kn">from</span> <span class="nn">.register_pet</span> <span class="kn">import</span> <span class="n">RegisterPet</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="03-srcdataê°œë³„ucregister_pet-ë™ì‚¬registerpy--initpyì„-ì •ì˜í•œë‹¤">
<a class="anchor" href="#03-srcdata%EA%B0%9C%EB%B3%84ucregister_pet-%EB%8F%99%EC%82%ACregisterpy--initpy%EC%9D%84-%EC%A0%95%EC%9D%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 src&gt;data&gt;(ê°œë³„UC)register_pet &gt;(ë™ì‚¬)register.py + init.pyì„ ì •ì˜í•œë‹¤.</h3>

<ol>
  <li>
    <p>ë§Œë“  usecase Interface import</p>
  </li>
  <li>
    <p>usecase ClassëŠ” repoë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤. ìƒì„±ì ì •ì˜ì‹œ, repo Interfaceë¥¼ importí•´ì„œ ì§€ì •</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span> <span class="k">as</span> <span class="n">PetRepository</span>
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterPet</span> <span class="k">as</span> <span class="n">RegisterPetInterface</span>
   
<span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">RegisterPetInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case: Register Pet"""</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PetRepository</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="04-registermanyentity-usecase-classëŠ”-ë‹¨ë…-usecaseì™€-ë‹¬ë¦¬-repoì™¸-findfkentity_usecase_classë¥¼-ìƒì„±ìì˜-ì¸ìë¡œ-ì¶”ê°€ë¡œ-ë°›ëŠ”ë‹¤">
<a class="anchor" href="#04-registermanyentity-usecase-class%EB%8A%94-%EB%8B%A8%EB%8F%85-usecase%EC%99%80-%EB%8B%AC%EB%A6%AC-repo%EC%99%B8-findfkentity_usecase_class%EB%A5%BC-%EC%83%9D%EC%84%B1%EC%9E%90%EC%9D%98-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EC%B6%94%EA%B0%80%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 RegisterManyEntity usecase ClassëŠ” ë‹¨ë… usecaseì™€ ë‹¬ë¦¬, repoì™¸ [FindFkEntity_usecase_Class]ë¥¼ ìƒì„±ìì˜ ì¸ìë¡œ ì¶”ê°€ë¡œ ë°›ëŠ”ë‹¤.</h3>

<ol>
  <li>
    <p>importí•´ì„œ ì¸ìì˜ Typeìœ¼ë¡œ ì¨ì•¼í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">src.data.find_user</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span> <span class="k">as</span> <span class="n">PetRepository</span>
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterPet</span> <span class="k">as</span> <span class="n">RegisterPetInterface</span>
   
<span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">RegisterPetInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case: Register Pet"""</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PetRepository</span><span class="p">],</span> <span class="n">find_user</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span> <span class="o">=</span> <span class="n">pet_repository</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span> <span class="o">=</span> <span class="n">find_user</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>interfaceì˜ ë©”ì„œë“œë¥¼ êµ¬í˜„í•œë‹¤.</p>

    <ul>
      <li>FK register ë©”ì„œë“œëŠ” fk(int)ê°’ ëŒ€ì‹ , fk_information dictê°€ ì¸ìë¡œ ë“¤ì–´ê°€ìˆë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">src.data.find_user</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span> <span class="k">as</span> <span class="n">PetRepository</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">RegisterPet</span> <span class="k">as</span> <span class="n">RegisterPetInterface</span>
   
<span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">RegisterPetInterface</span><span class="p">):</span>
    <span class="s">""" Class to define use case: Register Pet"""</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PetRepository</span><span class="p">],</span> <span class="n">find_user</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span> <span class="o">=</span> <span class="n">pet_repository</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span> <span class="o">=</span> <span class="n">find_user</span>
   
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
        <span class="s">"""Register Pet use case
        :param - name: pet name
               - specie: specie of the pet
               - age: age of the pet
               - user_information: Dictionary with user_id and/or user_name
        :return - Dictionary with informations of the process
        """</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>êµ¬í˜„ë¶€ëŠ” <code class="language-plaintext highlighter-rouge">repsone = None</code> ì™€  <code class="language-plaintext highlighter-rouge">validate_entry</code> ê²€ì‚¬ë¡œ ì‹œì‘ì€ ë™ì¼í•˜ì§€ë§Œ, <strong><code class="language-plaintext highlighter-rouge">user_information -&gt; find_user</code> ê³¼ì •ì´ ë” ì¶”ê°€</strong>ëœë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">RegisterPetInterface</span><span class="p">):</span>
    <span class="c1">#...
</span>   
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
        <span class="c1">#...
</span>           
        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
   
        <span class="c1"># Validate entry and tring to find an user
</span>        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">specie</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="registermanyentity-classì˜-registerë©”ì„œë“œ-ë‚´ë¶€ì—ì„œëŠ”-private-emthodë¥¼-ì¶”ê°€í•´ì„œ-ìƒì„±ìì¸í’‹-selffindfk_usecase_classë¡œ-method-inputì¸-fk_informationì„-ê²€ì¦í•œë‹¤">
<a class="anchor" href="#registermanyentity-class%EC%9D%98-register%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C%EB%8A%94-private-emthod%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%B4%EC%84%9C-%EC%83%9D%EC%84%B1%EC%9E%90%EC%9D%B8%ED%92%8B-selffindfk_usecase_class%EB%A1%9C-method-input%EC%9D%B8-fk_information%EC%9D%84-%EA%B2%80%EC%A6%9D%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>RegisterManyEntity Classì˜ registerë©”ì„œë“œ ë‚´ë¶€ì—ì„œëŠ” [private emthod]ë¥¼ ì¶”ê°€í•´ì„œ, ìƒì„±ìì¸í’‹ [self.FindFK_usecase_class]ë¡œ method inputì¸ [fk_information]ì„ ê²€ì¦í•œë‹¤.</h4>

<ul>
  <li><strong>my) <code class="language-plaintext highlighter-rouge">ë¯¸ë¦¬ ì†Œìœ í•œ self.ê°ì²´í•„ë“œ</code>ë¡œ, public methodì˜ ì™¸ë¶€inputì„ ë‹¤ë£° ë•, <code class="language-plaintext highlighter-rouge">__private methodë¡œ ì •ì˜</code>í•´ì„œ ë‹¤ë£¬ë‹¤.</strong></li>
  <li>findFK_usecase_classì˜ ê²°ê³¼ëŠ” Dict[bool, List[DTO]]ë‹¤</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RegisterPet</span><span class="p">(</span><span class="n">RegisterPetInterface</span><span class="p">):</span>
    <span class="c1">#...
</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_repository</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">PetRepository</span><span class="p">],</span> <span class="n">find_user</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span> <span class="o">=</span> <span class="n">pet_repository</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span> <span class="o">=</span> <span class="n">find_user</span>

    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
        <span class="c1">#...
</span>
    <span class="k">def</span> <span class="nf">__find_user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Check user infos and select user
        :param - user_information: Dictionary with user_id and/or usre_name
        :return - Dictionary with the response of find_use use case
        """</span>
        <span class="k">pass</span>

</code></pre></div></div>

<h5 id="find_user-ì—­ì‹œ-selectë¼ì„œ-id-andor-unique-keyì˜-ê²½ìš°ì˜-ìˆ˜ì—-ë”°ë¼ì„œ-ê²°ê³¼ë¬¼ì„-ë°˜í™˜í•˜ê²Œ-í•œë‹¤-ì‹¤íŒ¨ê°€ëŠ¥ì„±ì´-ìˆëŠ”-í˜¸ì¶œì€-ê°€ë³€ë³€ìˆ˜-noneìœ¼ë¡œ-ì´ˆê¸°í™”í•´ë†“ê³ -ì‹œì‘í•œë‹¤">
<a class="anchor" href="#find_user-%EC%97%AD%EC%8B%9C-select%EB%9D%BC%EC%84%9C-id-andor-unique-key%EC%9D%98-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98%EC%97%90-%EB%94%B0%EB%9D%BC%EC%84%9C-%EA%B2%B0%EA%B3%BC%EB%AC%BC%EC%9D%84-%EB%B0%98%ED%99%98%ED%95%98%EA%B2%8C-%ED%95%9C%EB%8B%A4-%EC%8B%A4%ED%8C%A8%EA%B0%80%EB%8A%A5%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8A%94-%ED%98%B8%EC%B6%9C%EC%9D%80-%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98-none%EC%9C%BC%EB%A1%9C-%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%B4%EB%86%93%EA%B3%A0-%EC%8B%9C%EC%9E%91%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>find_user ì—­ì‹œ selectë¼ì„œ id and/or unique keyì˜ ê²½ìš°ì˜ ìˆ˜ì— ë”°ë¼ì„œ ê²°ê³¼ë¬¼ì„ ë°˜í™˜í•˜ê²Œ í•œë‹¤. ì‹¤íŒ¨ê°€ëŠ¥ì„±ì´ ìˆëŠ” í˜¸ì¶œì€ ê°€ë³€ë³€ìˆ˜ Noneìœ¼ë¡œ ì´ˆê¸°í™”í•´ë†“ê³  ì‹œì‘í•œë‹¤.</h5>

<ul>
  <li><strong>usecase methodëŠ” <code class="language-plaintext highlighter-rouge">input ê²€ì¦í†µê³¼ì‹œë§Œ ê·¸ì™¸ ì‹¤íŒ¨</code> or <code class="language-plaintext highlighter-rouge">ê²½ìš°ì˜ ìˆ˜ì— ë”°ë¼ì„œ ì‹¤íŒ¨ê°€ëŠ¥</code>ì— ëŒ€í•´ <code class="language-plaintext highlighter-rouge">ê²°ê³¼ë¬¼ì„ ë°›ì•„ì£¼ëŠ” ê°€ë³€ë³€ìˆ˜ë¥¼ ì‹¤íŒ¨ë¡œ ì´ˆê¸°í™”(response = None)</code>í•´ë†“ê³  <code class="language-plaintext highlighter-rouge">ifì„±ê³µì‹œ</code>ì˜ íŒ¨í„´ì„ ê°€ì§„ë‹¤.</strong></li>
  <li>ì—¬ê¸°ì„œëŠ” <code class="language-plaintext highlighter-rouge">fk_founded = None</code>ìœ¼ë¡œ ì´ˆê¸°í™”í•´ë†“ê³ , <strong>input ë³€ìˆ˜ ê²½ìš°ì˜ìˆ˜ì— ë”°ë¼ ë‚˜ëˆ ì„œ í•˜ë˜, <code class="language-plaintext highlighter-rouge">ì‹¤íŒ¨ inputì— ëŒ€í•´ì„œ, ì„±ê³µê²°ê³¼ì™€ ë˜‘ê°™ì€ í˜•íƒœì˜ Dict[bool, None]</code>í˜•íƒœë¡œ ë°˜í™˜í•˜ê²Œ í•œë‹¤</strong>
</li>
  <li><strong>inputì´ dictì¼ ë•Œ, <code class="language-plaintext highlighter-rouge">keys()</code>ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">ê²½ìš°ì˜ ìˆ˜</code>ë¥¼ ë‚˜ëˆˆë‹¤.</strong></li>
</ul>

<h5 id="repo-select-inputì„-keywordnoneìœ¼ë¡œ-ì£¼ê³ -ê²½ìš°ì˜ìˆ˜ë³„-ifë¬¸ìœ¼ë¡œ-í•œë°©ì—-ì²˜ë¦¬í•œë‹¤">
<a class="anchor" href="#repo-select-input%EC%9D%84-keywordnone%EC%9C%BC%EB%A1%9C-%EC%A3%BC%EA%B3%A0-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98%EB%B3%84-if%EB%AC%B8%EC%9C%BC%EB%A1%9C-%ED%95%9C%EB%B0%A9%EC%97%90-%EC%B2%98%EB%A6%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo select: inputì„ keyword=Noneìœ¼ë¡œ ì£¼ê³ , ê²½ìš°ì˜ìˆ˜ë³„ ifë¬¸ìœ¼ë¡œ í•œë°©ì— ì²˜ë¦¬í•œë‹¤</h5>

<ul>
  <li>
    <p><strong>repo:  select <code class="language-plaintext highlighter-rouge">inputì„ keywordë¡œ ë§Œë“¤ê³  -&gt; ê²½ìš°ì˜ ìˆ˜ë³„ ifë¬¸</code>ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003163626647.png" alt="image-20221003163626647"></p>
  </li>
</ul>

<h5 id="usecase-selectfind-inputì´-js---dictì—-ë‹´ê²¨ì„œ-ë“¤ì–´ì˜¤ë©°-selectìš©-inputì˜-ê²½ìš°ì˜-ìˆ˜-ë§ˆë‹¤-argsë¡œ-ì •ì˜í•œ-methodë¥¼-ê°ê°-ë§Œë“¤ì–´ë†“ëŠ”ë‹¤">
<a class="anchor" href="#usecase-selectfind-input%EC%9D%B4-js---dict%EC%97%90-%EB%8B%B4%EA%B2%A8%EC%84%9C-%EB%93%A4%EC%96%B4%EC%98%A4%EB%A9%B0-select%EC%9A%A9-input%EC%9D%98-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98-%EB%A7%88%EB%8B%A4-args%EB%A1%9C-%EC%A0%95%EC%9D%98%ED%95%9C-method%EB%A5%BC-%EA%B0%81%EA%B0%81-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%86%93%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase select(find): inputì´ js -&gt; dictì— ë‹´ê²¨ì„œ ë“¤ì–´ì˜¤ë©°, selectìš© inputì˜ ê²½ìš°ì˜ ìˆ˜ ë§ˆë‹¤ argsë¡œ ì •ì˜í•œ methodë¥¼ ê°ê° ë§Œë“¤ì–´ë†“ëŠ”ë‹¤.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003163933181.png" alt="image-20221003163933181"></p>

<p>â€‹	<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003164344873.png" alt="image-20221003164344873"></p>

<h5 id="manyentity-register-usecase-ì†-fkentity-findfk---ìì‹ ì²˜ëŸ¼-jsì˜-dictë¡œ-ë‹´ê²¨ë“¤ì–´ì˜¤ê¸´-í•˜ë‚˜-í™•ì •ëœ-ì •ë³´ê°€-ì•„ë‹ˆë¼-dictkeysë¡œ-ë¹¼ë†“ê³ -repo-kargsì²˜ëŸ¼-keysì—-ë‹´ê¸´-ê²½ìš°ì˜-ìˆ˜ë³„-ifë¬¸ì„-ì‚¬ìš©í•´-í•œë°©ì—-ì²˜ë¦¬í•˜ë˜-args-ì •ì˜í•œ-methodë¥¼-í˜¸ì¶œí•˜ê²Œ-í•œë‹¤">
<a class="anchor" href="#manyentity-register-usecase-%EC%86%8D-fkentity-findfk---%EC%9E%90%EC%8B%A0%EC%B2%98%EB%9F%BC-js%EC%9D%98-dict%EB%A1%9C-%EB%8B%B4%EA%B2%A8%EB%93%A4%EC%96%B4%EC%98%A4%EA%B8%B4-%ED%95%98%EB%82%98-%ED%99%95%EC%A0%95%EB%90%9C-%EC%A0%95%EB%B3%B4%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-dictkeys%EB%A1%9C-%EB%B9%BC%EB%86%93%EA%B3%A0-repo-kargs%EC%B2%98%EB%9F%BC-keys%EC%97%90-%EB%8B%B4%EA%B8%B4-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98%EB%B3%84-if%EB%AC%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4-%ED%95%9C%EB%B0%A9%EC%97%90-%EC%B2%98%EB%A6%AC%ED%95%98%EB%90%98-args-%EC%A0%95%EC%9D%98%ED%95%9C-method%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EA%B2%8C-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>manyentity register usecase ì† FKentity FindFk -&gt; ìì‹ ì²˜ëŸ¼ jsì˜ dictë¡œ ë‹´ê²¨ë“¤ì–´ì˜¤ê¸´ í•˜ë‚˜, í™•ì •ëœ ì •ë³´ê°€ ì•„ë‹ˆë¼ dict.keys()ë¡œ ë¹¼ë†“ê³ , repo kargsì²˜ëŸ¼ keysì— ë‹´ê¸´ ê²½ìš°ì˜ ìˆ˜ë³„ ifë¬¸ì„ ì‚¬ìš©í•´ í•œë°©ì— ì²˜ë¦¬í•˜ë˜, args ì •ì˜í•œ methodë¥¼ í˜¸ì¶œí•˜ê²Œ í•œë‹¤.</h5>

<ul>
  <li>
    <p>ë”°ì§€ìë©´, repoì²˜ëŸ¼ usecaseë„ keyword ì¸ìë¡œ ë§Œë“¤ì–´ë†“ê³ ,  ifë¬¸ìœ¼ë¡œ í•œë°©ì— ì²˜ë¦¬í•˜ë©´ ì•ˆë˜ë ¤ë‚˜..<strong>ì–´ì°¨í”¼ ë‹¤ë¥¸ usecase registerì—ì„œ ì¸ìì˜ ê²½ìš°ì˜ìˆ˜ë¥¼ ë”°ì ¸ì•¼í•˜ëŠ”ë°?</strong></p>
  </li>
  <li>
    <p><strong>ê²½ìš°ì˜ ìˆ˜ë³„ ì•„ì˜ˆ  user_information dictì— <code class="language-plaintext highlighter-rouge">ì—†ëŠ”, ì‹¤íŒ¨ ê²½ìš°ì˜ ìˆ˜ë„ early return</code>  Dict[bool, List[DTO]]ë¡œ ì²˜ë¦¬í•œë‹¤.</strong></p>
    <ul>
      <li>ì¸ìê°€ ìˆëŠ” ê²½ìš°ëŠ” ê°€ë³€ë³€ìˆ˜ Noneì„ ì±„ì›Œì„œ ë§¨ ëì—ì„œ ë°˜í™˜</li>
      <li>ì¤‘ê°„ì— ì‹¤íŒ¨í•œ ê²½ìš° early return ë°˜í™˜</li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">__find_user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
    <span class="s">""" Check user infos and select user
        :param - user_information: Dictionary with user_id and/or usre_name
        :return - Dictionary with the response of find_use use case
        """</span>

    <span class="n">user_founded</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">user_params</span> <span class="o">=</span> <span class="n">user_information</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">if</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">user_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">in</span> <span class="n">user_params</span><span class="p">:</span>
        <span class="n">user_founded</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span><span class="p">.</span><span class="n">by_id_and_name</span><span class="p">(</span><span class="n">user_information</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">],</span> <span class="n">user_information</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">])</span>

        <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">user_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">in</span> <span class="n">user_params</span><span class="p">:</span>
            <span class="n">user_founded</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span><span class="p">.</span><span class="n">by_name</span><span class="p">(</span><span class="n">user_information</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">])</span>

            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">user_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">user_params</span><span class="p">:</span>
                <span class="n">user_founded</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span><span class="n">user_information</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">])</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>


                <span class="k">return</span> <span class="n">user_founded</span>
</code></pre></div></div>

<h4 id="ë‹¤ì‹œ--user_information-method-inputì„-__private-ë©”ì„œë“œë¡œ-ê²°ê³¼ë¬¼ì„-ë°›ì•„-entryì™€-ë™ì‹œì—-__private-ë©”ì„œë“œì˜-ê²°ê³¼ë¬¼-ì¤‘-successì—¬ë¶€ë§Œìœ¼ë¡œ-ê°™ì´-checkerì˜-ê²€ì¦-ì¡°ê±´ìœ¼ë¡œ-ì¤€ë‹¤">
<a class="anchor" href="#%EB%8B%A4%EC%8B%9C--user_information-method-input%EC%9D%84-__private-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EA%B2%B0%EA%B3%BC%EB%AC%BC%EC%9D%84-%EB%B0%9B%EC%95%84-entry%EC%99%80-%EB%8F%99%EC%8B%9C%EC%97%90-__private-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EA%B2%B0%EA%B3%BC%EB%AC%BC-%EC%A4%91-success%EC%97%AC%EB%B6%80%EB%A7%8C%EC%9C%BC%EB%A1%9C-%EA%B0%99%EC%9D%B4-checker%EC%9D%98-%EA%B2%80%EC%A6%9D-%EC%A1%B0%EA%B1%B4%EC%9C%BC%EB%A1%9C-%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë‹¤ì‹œ  user_information method inputì„ __private ë©”ì„œë“œë¡œ ê²°ê³¼ë¬¼ì„ ë°›ì•„, entryì™€ ë™ì‹œì— __private ë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ ì¤‘ â€œSuccessâ€ì—¬ë¶€ë§Œìœ¼ë¡œ ê°™ì´ checkerì˜ ê²€ì¦ ì¡°ê±´ìœ¼ë¡œ ì¤€ë‹¤.</h4>

<ul>
  <li>privateë©”ì„œë“œì§€ë§Œ, FindUserì˜ responseë¡œì„œ ê²°ê³¼ë¬¼ ê²€ì¦ì€ Success(T or F)ë¡œ í•´ë²„ë¦°ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
        <span class="c1">#...
</span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># Validate entry and tring to find an user
</span>        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">specie</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__find_user_information</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>
        <span class="n">checker</span> <span class="o">=</span> <span class="n">validate_entry</span> <span class="ow">and</span> <span class="n">user</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="validate_entry-and-findfkê²°ê³¼ë¬¼success-ë‘˜ë‹¤-ì°¸ì¸-ê²½ìš°if-checkì—ë§Œ-responseì—-repositoryì˜-insertregister-method-í˜¸ì¶œì˜-ê²°ê³¼ë¬¼ì„-ë‹´ëŠ”ë‹¤ê²€ì¦-ì„±ê³µì‹œë§Œ-noneì—-ì¬í• ë‹¹í•´ì„œ-ë‹´ê¸°">
<a class="anchor" href="#validate_entry-and-findfk%EA%B2%B0%EA%B3%BC%EB%AC%BCsuccess-%EB%91%98%EB%8B%A4-%EC%B0%B8%EC%9D%B8-%EA%B2%BD%EC%9A%B0if-check%EC%97%90%EB%A7%8C-response%EC%97%90-repository%EC%9D%98-insertregister-method-%ED%98%B8%EC%B6%9C%EC%9D%98-%EA%B2%B0%EA%B3%BC%EB%AC%BC%EC%9D%84-%EB%8B%B4%EB%8A%94%EB%8B%A4%EA%B2%80%EC%A6%9D-%EC%84%B1%EA%B3%B5%EC%8B%9C%EB%A7%8C-none%EC%97%90-%EC%9E%AC%ED%95%A0%EB%8B%B9%ED%95%B4%EC%84%9C-%EB%8B%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>validate_entry and FindFKê²°ê³¼ë¬¼[â€œSuccessâ€] ë‘˜ë‹¤ ì°¸ì¸ ê²½ìš°(if check:)ì—ë§Œ responseì— repositoryì˜ insert(register) method í˜¸ì¶œì˜ ê²°ê³¼ë¬¼ì„ ë‹´ëŠ”ë‹¤.(ê²€ì¦ ì„±ê³µì‹œë§Œ Noneì— ì¬í• ë‹¹í•´ì„œ ë‹´ê¸°)</h4>

<ul>
  <li><strong>ë‹¨ë… usecase: <code class="language-plaintext highlighter-rouge">response = None  -&gt; if validate_entry</code></strong></li>
  <li>**ê´€ê³„FKê°€ì§„ register usecase: **
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">resonse = None</code></strong></li>
      <li>
<strong><code class="language-plaintext highlighter-rouge">if checker</code></strong>
        <ul>
          <li>
<strong>validate_entry</strong> and</li>
          <li>FK_information -&gt; FindFK.find~ by privateë©”ì„œë“œ
            <ul>
              <li>ê²°ê³¼: <strong>Dict[bool, List[DTO] or None</strong>
                <ul>
                  <li><strong><code class="language-plaintext highlighter-rouge">FK_Dict["Success"]</code></strong></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>user_information + FindUserì˜ ê²€ì¦ì‹œ, ë”±íˆ ê²°ê³¼ë¬¼ë³´ë‹¤ëŠ” Dictì˜ Successì—¬ë¶€ë§Œ ì¤‘ìš”í•˜ë©°, ê²€ì¦í›„ í˜¸ì¶œì‹œ ë“¤ì–´ê°ˆ ê²ƒì€ user_informationì˜ â€œuser_idâ€ê°’ ë°–ì— ì—†ë‹¤</strong></p>
  </li>
  <li>í•´ë‹¹ methodì˜ ê²°ê³¼ë¬¼ Successì— ë“¤ì–´ê°€ëŠ” ê²ƒì€, validate_entryê°€ ì•„ë‹Œ checkerê°€ ë“¤ì–´ê°„ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Pets</span><span class="p">]:</span>
    <span class="c1">#...
</span>    <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1"># Validate entry and tring to find an user
</span>    <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">specie</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__find_user_information</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>
    <span class="n">checker</span> <span class="o">=</span> <span class="n">validate_entry</span> <span class="ow">and</span> <span class="n">user</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">checker</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">pet_repository</span><span class="p">.</span><span class="n">insert_pet</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">specie</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">user_information</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">])</span>
        
    <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">checker</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">__find_user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_information</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
	        <span class="c1">#...
</span></code></pre></div></div>

<ul>
  <li>UseCaseëŠ” ì•„ì§ ìƒìœ„ì—ì„œ importí•´ê°ˆ ì¼ì´ ì—†ì–´ì„œ <strong>initì— ì•ˆì˜¬ë¦°ë‹¤.</strong>
</li>
  <li>ëŒ€ì‹  <strong>testì‹œì—ëŠ” <code class="language-plaintext highlighter-rouge">í˜„ì¬í´ë”ì˜ ëª¨ë“ˆimport</code>ë¡œì„œ  from <code class="language-plaintext highlighter-rouge">.use_caseë™ì‚¬</code> import method</strong>í˜•íƒœë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</li>
</ul>

<h2 id="2-manyentity-register-use-case-test---register_testpy">
<a class="anchor" href="#2-manyentity-register-use-case-test---register_testpy" aria-hidden="true"><span class="octicon octicon-link"></span></a>2 ManyEntity Register use case Test - register_test.py</h2>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">resigster_test.py</code>ë¥¼ ë§Œë“ ë‹¤.</li>
</ol>

<h3 id="01-repo-spyì™€-ë”ë¶ˆì–´-manyentityì˜-register-use-caseëŠ”-ì¶”ê°€ëœ-ì¸ìì—-ëŒ€í•œ-findfk-spyë„-ë§Œë“¤ì–´ì•¼í•œë‹¤">
<a class="anchor" href="#01-repo-spy%EC%99%80-%EB%8D%94%EB%B6%88%EC%96%B4-manyentity%EC%9D%98-register-use-case%EB%8A%94-%EC%B6%94%EA%B0%80%EB%90%9C-%EC%9D%B8%EC%9E%90%EC%97%90-%EB%8C%80%ED%95%9C-findfk-spy%EB%8F%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 repo spyì™€ ë”ë¶ˆì–´, ManyEntityì˜ register use caseëŠ” ì¶”ê°€ëœ ì¸ìì— ëŒ€í•œ [FindFK spy]ë„ ë§Œë“¤ì–´ì•¼í•œë‹¤.</h3>

<h4 id="ê°œë³„usecase-ì™€-ë™ì¼í•œ-ì„ ìƒì˜-srcdataì—-testí´ë”ë¥¼-ë§Œë“¤ê³ -find_user_spypyì™€-initì„-ë§Œë“ ë‹¤">
<a class="anchor" href="#%EA%B0%9C%EB%B3%84usecase-%EC%99%80-%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%84%A0%EC%83%81%EC%9D%98-srcdata%EC%97%90-test%ED%8F%B4%EB%8D%94%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B3%A0-find_user_spypy%EC%99%80-init%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ê°œë³„usecase ì™€ ë™ì¼í•œ ì„ ìƒì˜ src&gt;dataì— testí´ë”ë¥¼ ë§Œë“¤ê³  find_user_spy.pyì™€ initì„ ë§Œë“ ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003233517745.png" alt="image-20221003233517745"></p>

<h4 id="spyëŠ”-inputì„-selfí•„ë“œì—-ë¨¸ê¸ˆê³ -outputì€-mockê°ì²´ë¡œ-ë‚´ì–´ì•¼í•˜ë‹ˆ-usersdtoì™€-mock_usersë¥¼-importí•œë‹¤">
<a class="anchor" href="#spy%EB%8A%94-input%EC%9D%84-self%ED%95%84%EB%93%9C%EC%97%90-%EB%A8%B8%EA%B8%88%EA%B3%A0-output%EC%9D%80-mock%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%82%B4%EC%96%B4%EC%95%BC%ED%95%98%EB%8B%88-usersdto%EC%99%80-mock_users%EB%A5%BC-import%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>spyëŠ” inputì„ self.í•„ë“œì— ë¨¸ê¸ˆê³ , outputì€ mockê°ì²´ë¡œ ë‚´ì–´ì•¼í•˜ë‹ˆ, Users(DTO)ì™€ mock_users()ë¥¼ importí•œë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
<span class="kn">from</span> <span class="nn">src.domain.test</span> <span class="kn">import</span> <span class="n">mock_users</span>
</code></pre></div></div>

<h4 id="usecase-ëŠ”-ì›ë˜-ìƒì„±ìì—-repoë¥¼-ì¸ìë¡œ-ë°›ì•˜ì§€ë§Œ--usecasespyëŠ”-ì‹¤ì œ-repoê°€-í•„ìš”ì—†ì´-repospyê°€-ë“¤ì–´ê°ˆ-ê²ƒì´ë¯€ë¡œ-typeì„-anyë¡œ-ì¤€ë‹¤">
<a class="anchor" href="#usecase-%EB%8A%94-%EC%9B%90%EB%9E%98-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-repo%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EC%95%98%EC%A7%80%EB%A7%8C--usecasespy%EB%8A%94-%EC%8B%A4%EC%A0%9C-repo%EA%B0%80-%ED%95%84%EC%9A%94%EC%97%86%EC%9D%B4-repospy%EA%B0%80-%EB%93%A4%EC%96%B4%EA%B0%88-%EA%B2%83%EC%9D%B4%EB%AF%80%EB%A1%9C-type%EC%9D%84-any%EB%A1%9C-%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase ëŠ” ì›ë˜ ìƒì„±ìì— repoë¥¼ ì¸ìë¡œ ë°›ì•˜ì§€ë§Œ,  UsecaseSpyëŠ” ì‹¤ì œ repoê°€ í•„ìš”ì—†ì´ RepoSpyê°€ ë“¤ì–´ê°ˆ ê²ƒì´ë¯€ë¡œ Typeì„ anyë¡œ ì¤€ë‹¤!!!!</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003234225144.png" alt="image-20221003234225144"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserSpy</span><span class="p">:</span>
    <span class="s">""" class to define use case: Select User """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
        
</code></pre></div></div>

<ul>
  <li>FindUserì—ì„œ methodë“¤ì„ í™•ì¸í•˜ê³ , ê·¸ ì´ë¦„ë³„ë¡œ _paramì„ ë¶™ì¸ dictë¥¼ ê°¯ìˆ˜ëŒ€ë¡œ ìƒì„±ìì—ì„œ ì´ˆê¸°í™”í•˜ì—¬, ì¶”í›„ inputë“¤ì„ ë“¤ê³  ìˆì„ ìˆ˜ ìˆê²Œ í•œë‹¤.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003234318140.png" alt="image-20221003234318140"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserSpy</span><span class="p">:</span>
    <span class="s">""" class to define use case: Select User """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_name_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></div>

<h4 id="ì›ë³¸-usecaseì˜-ë©”ì„œë“œë“¤-signatureë¥¼-ë³µì‚¬í•´ì„œ-ê°€ì ¸ì˜¤ë˜--êµ¬í˜„ë¶€ì—ëŠ”-ë‹¤ë“¤-ìê¸°-param-dictì—-í• ë‹¹í•´ì¤€ë‹¤">
<a class="anchor" href="#%EC%9B%90%EB%B3%B8-usecase%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EB%93%A4-signature%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-%EA%B0%80%EC%A0%B8%EC%98%A4%EB%90%98--%EA%B5%AC%ED%98%84%EB%B6%80%EC%97%90%EB%8A%94-%EB%8B%A4%EB%93%A4-%EC%9E%90%EA%B8%B0-param-dict%EC%97%90-%ED%95%A0%EB%8B%B9%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì›ë³¸ usecaseì˜ ë©”ì„œë“œë“¤ signatureë¥¼ ë³µì‚¬í•´ì„œ ê°€ì ¸ì˜¤ë˜,  êµ¬í˜„ë¶€ì—ëŠ” ë‹¤ë“¤ ìê¸° param dictì— í• ë‹¹í•´ì¤€ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003234549687.png" alt="image-20221003234549687"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">class</span> <span class="nc">FindUserSpy</span><span class="p">:</span>
    <span class="s">""" class to define use case: Select User """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_repository</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">user_repository</span> <span class="o">=</span> <span class="n">user_repository</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_name_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by id """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>

    <span class="k">def</span> <span class="nf">by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by name """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>


    <span class="k">def</span> <span class="nf">by_id_and_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by id and name """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        
</code></pre></div></div>

<h4 id="repo-spyì™€-ë˜ë‹¤ë¥¸-ì°¨ì´ì ì€-methodë³„-param-dictì—-input-ì €ì¥ì™¸-use-case-ì¢…íŠ¹-return-success-dataë¥¼-ìœ„í•´-resonsevalidate_entry-ì²˜ë¦¬ë¥¼-í•´ì¤˜ì•¼í•œë‹¤---repomethodí˜¸ì¶œì´-ì•„ë‹Œ-mock_method---ë¥¼-í™œìš©í•´ì„œ-dataresponse-dto-or-listdtoë¥¼-ì±„ì›Œì¤€ë‹¤">
<a class="anchor" href="#repo-spy%EC%99%80-%EB%98%90%EB%8B%A4%EB%A5%B8-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%80-method%EB%B3%84-param-dict%EC%97%90-input-%EC%A0%80%EC%9E%A5%EC%99%B8-use-case-%EC%A2%85%ED%8A%B9-return-success-data%EB%A5%BC-%EC%9C%84%ED%95%B4-resonsevalidate_entry-%EC%B2%98%EB%A6%AC%EB%A5%BC-%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4---repomethod%ED%98%B8%EC%B6%9C%EC%9D%B4-%EC%95%84%EB%8B%8C-mock_method---%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%B4%EC%84%9C-dataresponse-dto-or-listdto%EB%A5%BC-%EC%B1%84%EC%9B%8C%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo spyì™€ ë˜ë‹¤ë¥¸ ì°¨ì´ì ì€, methodë³„ param dictì— input ì €ì¥ì™¸, [use case ì¢…íŠ¹, return {â€œSuccessâ€, â€œDataâ€}]ë¥¼ ìœ„í•´ resonse/validate_entry ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤. -&gt; repomethodí˜¸ì¶œì´ ì•„ë‹Œ mock_method() + [] ë¥¼ í™œìš©í•´ì„œ Data(response, DTO or List[DTO])ë¥¼ ì±„ì›Œì¤€ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221003235723271.png" alt="image-20221003235723271"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserSpy</span><span class="p">:</span>
    <span class="c1">#...
</span>    <span class="k">def</span> <span class="nf">by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by id """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="p">[</span><span class="n">mock_users</span><span class="p">()]</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ë‚˜ë¨¸ì§€ 2ê°œ ë©”ì„œë“œë„ ë‹¤ ì±„ì›Œì¤€ë‹¤.
    <ul>
      <li><strong>ì‹¤ì œrepoì˜ ë©”ì„œë“œí˜¸ì¶œ ëŒ€ì‹ , mock_methodë¡œ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•´ì¤€ë‹¤.</strong></li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by name 
        :param - name: name of the user
        :return  - Dictionary with informations of the process
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="p">[</span><span class="n">mock_users</span><span class="p">()]</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>


    <span class="k">def</span> <span class="nf">by_id_and_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]]:</span>
        <span class="s">""" Select User by id and name
        :param - user_id: id of the user
               -  name: name of the user
        :return  - Dictionary with informations of the process
        """</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">validate_entry</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_entry</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="p">[</span><span class="n">mock_users</span><span class="p">()]</span>
        
        <span class="k">return</span> <span class="p">{</span><span class="s">"Success"</span><span class="p">:</span> <span class="n">validate_entry</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="n">response</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ê°–ë‹¤ì“°ê¸° ìœ„í•´ì„œ  initì— ì˜¬ë ¤ì¤€ë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.find_user_spy</span> <span class="kn">import</span> <span class="n">FindUserSpy</span>
</code></pre></div></div>

<h3 id="02-register_manyentitytestpy-ì‘ì„±í•˜ê¸°">
<a class="anchor" href="#02-register_manyentitytestpy-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 register_(ManyEntity)test.py ì‘ì„±í•˜ê¸°</h3>

<h4 id="importí• -ê²ƒë“¤-ì •ë¦¬">
<a class="anchor" href="#import%ED%95%A0-%EA%B2%83%EB%93%A4-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>importí•  ê²ƒë“¤ ì •ë¦¬</h4>

<ul>
  <li>testë‹ˆê¹Œ, <strong>faker</strong>ë¥¼</li>
  <li>UseCaseì˜ ì¸ìë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒë“¤ì˜ spyë“¤ì„
    <ul>
      <li><strong>PetRepositorySpy</strong></li>
      <li>
<strong>FindUserSpy</strong>(ManyEntity Find Spy)
        <ul>
          <li>usecaseë¡œì„œ <strong>UserRepositorySpy</strong>
</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>testí•  UseCaseì¸ <strong>RegisterPet</strong>
</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.infra.test</span> <span class="kn">import</span> <span class="n">PetRepositorySpy</span><span class="p">,</span> <span class="n">UserRepositorySpy</span>
<span class="kn">from</span> <span class="nn">src.data.test</span> <span class="kn">import</span> <span class="n">FindUserSpy</span>


<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
</code></pre></div></div>

<h4 id="pet_repospy-find_user-with-user_repospy-for-findpet">
<a class="anchor" href="#pet_repospy-find_user-with-user_repospy-for-findpet" aria-hidden="true"><span class="octicon octicon-link"></span></a>pet_repoSpy, find_user with user_repoSpy for FindPet</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing Register method in RegisterPet"""</span>

    <span class="n">pet_repo</span> <span class="o">=</span> <span class="n">PetRepositorySpy</span><span class="p">()</span>
    <span class="n">find_user</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>

    <span class="n">register_pet</span> <span class="o">=</span> <span class="n">RegisterPet</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">,</span> <span class="n">find_user</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="usecase-testë¼ë©´-inputì€-attributes-dictì§€ë§Œ-ë‚´ë¶€-fkí•„ë“œëŠ”-id-intê°’ì´-ì•„ë‹Œ-fk_information--ìœ¼ë¡œ-ë‚´ë¶€-ì •ë³´ëŠ”-userì „ì²´ì •ë³´ê°€-ì•„ë‹Œ-findselectì‹œ-í•„ìš”í•œ-í•„ë“œë“¤user_id-andor-user_nameìœ¼ë¡œ-êµ¬ì„±í•œë‹¤">
<a class="anchor" href="#usecase-test%EB%9D%BC%EB%A9%B4-input%EC%9D%80-attributes-dict%EC%A7%80%EB%A7%8C-%EB%82%B4%EB%B6%80-fk%ED%95%84%EB%93%9C%EB%8A%94-id-int%EA%B0%92%EC%9D%B4-%EC%95%84%EB%8B%8C-fk_information--%EC%9C%BC%EB%A1%9C-%EB%82%B4%EB%B6%80-%EC%A0%95%EB%B3%B4%EB%8A%94-user%EC%A0%84%EC%B2%B4%EC%A0%95%EB%B3%B4%EA%B0%80-%EC%95%84%EB%8B%8C-findselect%EC%8B%9C-%ED%95%84%EC%9A%94%ED%95%9C-%ED%95%84%EB%93%9C%EB%93%A4user_id-andor-user_name%EC%9C%BC%EB%A1%9C-%EA%B5%AC%EC%84%B1%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase testë¼ë©´ inputì€ attributes dictì§€ë§Œ, ë‚´ë¶€ fkí•„ë“œëŠ” id intê°’ì´ ì•„ë‹Œ, fk_information = {}ìœ¼ë¡œ! ë‚´ë¶€ ì •ë³´ëŠ” userì „ì²´ì •ë³´ê°€ ì•„ë‹Œ find==selectì‹œ í•„ìš”í•œ í•„ë“œë“¤(user_id and/or user_name)ìœ¼ë¡œ êµ¬ì„±í•œë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing Register method in RegisterPet"""</span>

    <span class="n">pet_repo</span> <span class="o">=</span> <span class="n">PetRepositorySpy</span><span class="p">()</span>
    <span class="n">find_user</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>

    <span class="n">register_pet</span> <span class="o">=</span> <span class="n">RegisterPet</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">,</span> <span class="n">find_user</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"specie"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"age"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s">"user_information"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"user_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
            <span class="s">"user_name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="p">},</span>
    <span class="p">}</span>

</code></pre></div></div>

<h4 id="usecase-method-testëŠ”-attributes---usecaseê°ì²´methodë¥¼-í˜¸ì¶œí•˜ì—¬-ì–»ëŠ”-response---dictbool-dto-or-listdtoë¥¼-outputìœ¼ë¡œ-testí•œë‹¤-ì´-ë•Œ-method-inputì—-fk_id-ëŒ€ì‹ -fk_information-with-select-argsë¡œ-êµ¬ì„±ë˜ëŠ”-ê²ƒì´-ì°¨ì´ì ì´ë‹¤">
<a class="anchor" href="#usecase-method-test%EB%8A%94-attributes---usecase%EA%B0%9D%EC%B2%B4method%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EC%97%AC-%EC%96%BB%EB%8A%94-response---dictbool-dto-or-listdto%EB%A5%BC-output%EC%9C%BC%EB%A1%9C-test%ED%95%9C%EB%8B%A4-%EC%9D%B4-%EB%95%8C-method-input%EC%97%90-fk_id-%EB%8C%80%EC%8B%A0-fk_information-with-select-args%EB%A1%9C-%EA%B5%AC%EC%84%B1%EB%90%98%EB%8A%94-%EA%B2%83%EC%9D%B4-%EC%B0%A8%EC%9D%B4%EC%A0%90%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase method testëŠ” attributes -&gt; usecaseê°ì²´.methodë¥¼ í˜¸ì¶œí•˜ì—¬ ì–»ëŠ” response -&gt; Dict[bool, DTO or List[DTO]]ë¥¼ outputìœ¼ë¡œ testí•œë‹¤. ì´ ë•Œ, method inputì— fk_id ëŒ€ì‹  fk_information with select argsë¡œ êµ¬ì„±ë˜ëŠ” ê²ƒì´ ì°¨ì´ì ì´ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="c1">#...
</span>    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"specie"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"age"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s">"user_information"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"user_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
            <span class="s">"user_name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">register_pet</span><span class="p">.</span><span class="n">register</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span>
        <span class="n">specie</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"specie"</span><span class="p">],</span>
        <span class="n">age</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"age"</span><span class="p">],</span>
        <span class="n">user_information</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></div>

<h4 id="input-testì—ì„œ-fk_informationì€-pkpetì„-registerí•˜ëŠ”ë°-only-idë§Œ-í•„ìš”í•˜ë¯€ë¡œ-fkì˜-idë§Œ-pet-repoì¸ì-pet-repospyì˜-param-dictë¡œ-ë“¤ì–´ê°„ë‹¤-usecase-input-testëŠ”-pet_repospyì˜-param-dictë¥¼-ê²€ì‚¬í•˜ë¯€ë¡œ-ê²€ì‚¬í•˜ë ¤ë©´-fk_informationì •ë³´-ì¤‘ì—-idë§Œ-ê²€ì‚¬í•œë‹¤">
<a class="anchor" href="#input-test%EC%97%90%EC%84%9C-fk_information%EC%9D%80-pkpet%EC%9D%84-register%ED%95%98%EB%8A%94%EB%8D%B0-only-id%EB%A7%8C-%ED%95%84%EC%9A%94%ED%95%98%EB%AF%80%EB%A1%9C-fk%EC%9D%98-id%EB%A7%8C-pet-repo%EC%9D%B8%EC%9E%90-pet-repospy%EC%9D%98-param-dict%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%84%EB%8B%A4-usecase-input-test%EB%8A%94-pet_repospy%EC%9D%98-param-dict%EB%A5%BC-%EA%B2%80%EC%82%AC%ED%95%98%EB%AF%80%EB%A1%9C-%EA%B2%80%EC%82%AC%ED%95%98%EB%A0%A4%EB%A9%B4-fk_information%EC%A0%95%EB%B3%B4-%EC%A4%91%EC%97%90-id%EB%A7%8C-%EA%B2%80%EC%82%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>input testì—ì„œ, fk_informationì€ pk(Pet)ì„ registerí•˜ëŠ”ë°, only idë§Œ í•„ìš”í•˜ë¯€ë¡œ, fkì˜ idë§Œ Pet repoì¸ì/ Pet repoSpyì˜ param dictë¡œ ë“¤ì–´ê°„ë‹¤. usecase Input testëŠ” pet_repoSpyì˜ param dictë¥¼ ê²€ì‚¬í•˜ë¯€ë¡œ ê²€ì‚¬í•˜ë ¤ë©´ fk_informationì •ë³´ ì¤‘ì— idë§Œ ê²€ì‚¬í•œë‹¤.</h4>

<ul>
  <li>fk_information dictëŠ”, usecase inputìœ¼ë¡œ ë“¤ì–´ê°€ì§€ë§Œ, repoì—ëŠ” idë§Œ ë“¤ì–´ê°„ë‹¤.
    <ul>
      <li>
<strong>fk_information dict</strong>ëŠ” <strong>privateë©”ì„œë“œì—ì„œ  fkìì‹ ì˜ usecase ì¤‘ Find methodì— ì‚¬ìš©</strong>ë˜ì–´, ìˆìœ¼ë©´ <strong>Dict[bool, List[DTO]]</strong>ë¥¼ ì—†ìœ¼ë©´  Noneì´ë‹¤<strong>. ê²°ê³¼ë³€ìˆ˜ userì—ëŠ” Success, Dataê°€ T/F, List[DTO] or None</strong>ìœ¼ë¡œ ìˆì„ ê²ƒì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004012819609.png" alt="image-20221004012819609"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_register</span><span class="p">():</span>
    <span class="s">""" Testing Register method in RegisterPet"""</span>

    <span class="n">pet_repo</span> <span class="o">=</span> <span class="n">PetRepositorySpy</span><span class="p">()</span>
    <span class="n">find_user</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>

    <span class="n">register_pet</span> <span class="o">=</span> <span class="n">RegisterPet</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">,</span> <span class="n">find_user</span><span class="p">)</span>

    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"specie"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="s">"age"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s">"user_information"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"user_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
            <span class="s">"user_name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">(),</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">register_pet</span><span class="p">.</span><span class="n">register</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">],</span>
        <span class="n">specie</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"specie"</span><span class="p">],</span>
        <span class="n">age</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"age"</span><span class="p">],</span>
        <span class="n">user_information</span><span class="o">=</span><span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="c1"># Testing Inputs
</span>    <span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"specie"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"specie"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">][</span><span class="s">"user_id"</span><span class="p">]</span>

    <span class="k">print</span><span class="p">(</span><span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="pet-repo-spyì˜-param-dictë¥¼-printí•˜ë©°-pytest">
<a class="anchor" href="#pet-repo-spy%EC%9D%98-param-dict%EB%A5%BC-print%ED%95%98%EB%A9%B0-pytest" aria-hidden="true"><span class="octicon octicon-link"></span></a>pet repo spyì˜ param dictë¥¼ printí•˜ë©° pytest</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\data\register_pet -vs
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004015421420.png" alt="image-20221004015421420"></p>

<h4 id="findfkspyë¡œ-ë“¤ì–´ê°„-fk_information-inputì€-ë”°ë¡œ-ê²€ì‚¬í•œë‹¤">
<a class="anchor" href="#findfkspy%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%84-fk_information-input%EC%9D%80-%EB%94%B0%EB%A1%9C-%EA%B2%80%EC%82%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>FindFkSpy()ë¡œ ë“¤ì–´ê°„ fk_information inputì€ ë”°ë¡œ ê²€ì‚¬í•œë‹¤.</h4>

<ul>
  <li>
    <p>ì•„ë˜ë¶€ë¶„ì„ ì œê±°í•˜ê³  FindUserSpy ê°ì²´ê°€ ì–´ë–»ê²Œ ë¨¸ê¸ˆê³  ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">][</span><span class="s">"user_id"</span><span class="p">]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ì¼ë°˜ì ìœ¼ë¡œ repo spyê°€ methodë³„ param_dictë¥¼ í•„ë“œë¡œ ë¨¸ê¸ˆê³  ìˆë‹¤.</strong></p>

    <ul>
      <li>
        <p>user_repo_spy</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004015854620.png" alt="image-20221004015854620"></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>ê·¸ ìƒìœ„ë‹¨ê³„ì¸ UseCaseì˜ SpyëŠ” repo spy(any) + UseCaseë©”ì„œë“œ param_dictë¥¼ ë¨¸ê¸ˆê³  ìˆë‹¤.</strong></p>

    <ul>
      <li>find_user_spy</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004020007284.png" alt="image-20221004020007284"></p>
  </li>
</ul>

<h4 id="repo-spycrud-ì¸ìë³„-ê²½ìš°ì˜-ìˆ˜-by-ifì²˜ëŸ¼-usecase-spyì¸ìë³„-ê°-methodë„-ê°™ì€-repoì™€-ê°™ì€-inputì„-ë°›ìœ¼ë©°-ê²½ìš°ì˜ìˆ˜ë³„-methodë“¤ì—-ëŒ€í•œ-param_dictë¥¼-ê°€ì§€ê³ -ìˆìœ¼ë‹ˆ--usecase_spyë¡œ-fk_information-inputì •ë³´ë¥¼-param_dictë¡œ-testí•œë‹¤">
<a class="anchor" href="#repo-spycrud-%EC%9D%B8%EC%9E%90%EB%B3%84-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98-by-if%EC%B2%98%EB%9F%BC-usecase-spy%EC%9D%B8%EC%9E%90%EB%B3%84-%EA%B0%81-method%EB%8F%84-%EA%B0%99%EC%9D%80-repo%EC%99%80-%EA%B0%99%EC%9D%80-input%EC%9D%84-%EB%B0%9B%EC%9C%BC%EB%A9%B0-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98%EB%B3%84-method%EB%93%A4%EC%97%90-%EB%8C%80%ED%95%9C-param_dict%EB%A5%BC-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EC%9C%BC%EB%8B%88--usecase_spy%EB%A1%9C-fk_information-input%EC%A0%95%EB%B3%B4%EB%A5%BC-param_dict%EB%A1%9C-test%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>repo spy(CRUD ì¸ìë³„ ê²½ìš°ì˜ ìˆ˜ by if)ì²˜ëŸ¼, UseCase Spy(ì¸ìë³„ ê° method)ë„ ê°™ì€ repoì™€ ê°™ì€ inputì„ ë°›ìœ¼ë©°, ê²½ìš°ì˜ìˆ˜ë³„ methodë“¤ì— ëŒ€í•œ param_dictë¥¼ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ,  usecase_spyë¡œ fk_information inputì •ë³´ë¥¼ param_dictë¡œ testí•œë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Inputs
</span><span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"specie"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"specie"</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">pet_repo</span><span class="p">.</span><span class="n">insert_pet_param</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span>

<span class="c1"># Testing FindUser Inputs
</span><span class="k">assert</span> <span class="n">find_user</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">][</span><span class="s">"user_id"</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">find_user</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">attributes</span><span class="p">[</span><span class="s">"user_information"</span><span class="p">][</span><span class="s">"user_name"</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pytest</span> <span class="n">src</span>\<span class="n">data</span>\<span class="n">register_pet</span> <span class="o">-</span><span class="n">vs</span>
</code></pre></div></div>

<h4 id="usecase-output-ê²€ì‚¬ëŠ”-ê³ ì •ì´ë‹¤-usecasemethodì˜-ê²°ê³¼responseëŠ”-dictbool-listdto-or-dto">
<a class="anchor" href="#usecase-output-%EA%B2%80%EC%82%AC%EB%8A%94-%EA%B3%A0%EC%A0%95%EC%9D%B4%EB%8B%A4-usecasemethod%EC%9D%98-%EA%B2%B0%EA%B3%BCresponse%EB%8A%94-dictbool-listdto-or-dto" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecase Output ê²€ì‚¬ëŠ” ê³ ì •ì´ë‹¤. usecase.methodì˜ ê²°ê³¼responseëŠ” Dict[bool, List[DTO] or DTO]</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Outputs
</span><span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="commit---branch--í™•ì¸í›„---push---merge">
<a class="anchor" href="#commit---branch--%ED%99%95%EC%9D%B8%ED%9B%84---push---merge" aria-hidden="true"><span class="octicon octicon-link"></span></a>commit -&gt; branch  í™•ì¸í›„ -&gt; push -&gt; merge</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
git add .
git commit -am "feat: Implementng register_pet use case"
git commit -am "feat: Implementng register_pet use case"
</code></pre></div></div>

<h2 id="ì°¸ê³ ">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ </h2>

<ul>
  <li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Robert C. Martin (Uncle Bob)ì˜ Clean Code Blog</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-Clean-Architecture-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 1í¸</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B02">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 2í¸</a></li>
</ul>

<h4 id="gitignore">
<a class="anchor" href="#gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>gitignore</h4>

<ul>
  <li>
    <p>gitì— commitë˜ì—ˆë˜ ê²ƒì„ ignoreí•˜ê³  ì‹¶ì„ ë•Œ</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rm [íŒŒì¼ëª…] --cached
</code></pre></div>    </div>
  </li>
  <li>
    <p>git amend</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git commit --amend --no-edit
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>console ë“±ì—ì„œ init importë¶€í„° ìƒê¸°ëŠ” pycacheí´ë”</li>
  <li>venv</li>
  <li>ì—°ìŠµìš© sqlite .dbíŒŒì¼</li>
  <li>pytestì‹œ ìƒê¸°ëŠ” .pytest_cache í´ë”</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h4 id="sqlalchemyíŒ¨í‚¤ì§€">
<a class="anchor" href="#sqlalchemy%ED%8C%A8%ED%82%A4%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>sqlalchemyíŒ¨í‚¤ì§€</h4>

<ul>
  <li>ì¼ë°˜ íŒ¨í‚¤ì§€: create_engine / ì¹¼ëŸ¼ì¬ë£Œë“¤</li>
  <li>.orm íŒ¨í‚¤ì§€:
    <ul>
      <li>relatioship: 1:Mì—ì„œ 1ì— í•´ë‹¹í•˜ëŠ” tableì´ ë“¤ê³  ìˆëŠ” ê°€ì§œì¹¼ëŸ¼</li>
      <li>sessionmaker: handler class ì† enterì—ì„œ engineì„ ë¬¶ì–´ì„œ sessionì„ ë°˜í™˜í•´ì£¼ëŠ” ë†ˆ</li>
    </ul>
  </li>
</ul>

<h4 id="githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">
<a class="anchor" href="#github%EC%97%90%EC%84%9C-br%EB%94%B0%EC%84%9C-%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</h4>

<h5 id="1-1-githubì—ì„œ-brìƒì„±--clone">
<a class="anchor" href="#1-1-github%EC%97%90%EC%84%9C-br%EC%83%9D%EC%84%B1--clone" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-1] githubì—ì„œ brìƒì„± ~ clone</h5>

<ol>
  <li>
    <p>githubì— ë“¤ì–´ê°€ì„œ <code class="language-plaintext highlighter-rouge">feat/~</code>ë¡œ ë¸Œëœì¹˜ ìƒì„±</p>
  </li>
  <li>
    <p>í•´ë‹¹ brë§Œ clone</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b [branch] [gitì£¼ì†Œ]
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">
<a class="anchor" href="#clone%ED%9B%84-%EC%B4%88%EA%B8%B0-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</h5>

<ol>
  <li>gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°
    <ul>
      <li>ì—†ìœ¼ë©´ config importí•´ì„œ Base + handler -&gt; get_enigne -&gt; bindí•œ ë‹¤ìŒ, create_all()í•´ì¤˜ì•¼í• ë“¯??</li>
    </ul>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<ol>
  <li>githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ pre-commit install ì§ì ‘ ì„¸íŒ…</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<ol>
  <li>vscode ì—´ê³  interpreter venvë¡œ ì§€ì •</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code .
</code></pre></div></div>

<h5 id="1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">
<a class="anchor" href="#1-2-%EC%9E%91%EC%97%85%EB%81%9D%EB%82%9C-br%EC%9D%98-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-%EC%83%88-%EC%9E%91%EC%97%85-br%EC%83%9D%EC%84%B1--%EB%B6%84%EA%B8%B0%EA%B2%8C%EC%8B%9C-%EC%B4%88%EA%B8%B0%EC%84%B8%ED%8C%85-%EB%98%90-%EC%95%88%ED%95%B4%EB%8F%84-%EB%90%98%EB%8A%94-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</h5>

<ol>
  <li>
    <p>í˜„ì¬ brë¥¼ í™•ì¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">branch</span>
<span class="o">*</span> <span class="n">feat</span><span class="o">/</span><span class="n">register_user_use_case</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>checkout -b</strong>ë¡œ ìƒˆ br ìƒì„±í•˜ì—¬ ì§„ì…í•˜ê¸°</p>

    <ul>
      <li>ì›ë˜ëŠ” githubì—ì„œ create branchí–ˆì—ˆìŒ.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout -b feat/generic_use_cases
   
git branch
   
* feat/generic_use_cases
  feat/register_user_use_case
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git push -u origin [branchëª…]ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ìƒˆë¡œìƒì„±í•œ brë¥¼ pushí•´ì„œ githubì— ìƒì„±í•˜ê¸°</code></strong></p>

    <ul>
      <li>vscodeì—ì„œëŠ” push -u origin [branch] ëŒ€ì‹   <strong><code class="language-plaintext highlighter-rouge">ë¶„ê¸°ê²Œì‹œ</code>ê°€ ëœ¬ë‹¤.</strong>
</li>
    </ul>
  </li>
  <li>
    <p>githubì—ì„œ <strong>ë¹ˆ ë¶„ê¸°ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°</strong></p>

    <ul>
      <li>githubì— mergeë˜ê¸° ìœ„í•´ì„œëŠ” <strong>ì§ì „ ì‘ì—…ì´í›„ <code class="language-plaintext highlighter-rouge">githubì— ìƒˆ ì‘ì—… brë¥¼ ë¨¼ì € ìƒì„±í•´ë†“ê³  ì‘ì—…</code>ì— ë“¤ì–´ê°€ì•¼í•œë‹¤</strong>
</li>
    </ul>
  </li>
</ol>

<h5 id="1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">
<a class="anchor" href="#1-3--%EC%98%9B%EB%82%A0%EC%97%90-%EB%94%B0%EB%91%94-br%EC%97%90%EC%84%9C-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%A0-%EB%95%90-%EC%B5%9C%EC%8B%A0-master%EB%A5%BC-rebase%ED%9B%84%EC%97%90-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git checkout master</code>ë¥¼ í†µí•´ <strong>ì•ˆê°€ì ¸ì™€ì„œ ì•ˆë³´ì´ë˜ master</strong>ë¥¼ ë§Œë“ ë‹¤</p>

    <ul>
      <li>
<strong>-bì˜ ìƒˆë¡œë§Œë“  ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ</strong> remoteì™€ ì—°ê²°ëœ masterê°€ ëœë‹¤.</li>
      <li>
<code class="language-plaintext highlighter-rouge">git branch</code>ë¡œ í™•ì¸</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout master
   
git branch
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git pull</code>ë¡œ masterì— ìµœì‹  ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>rebaseë°›ì„ ì—…ëƒì•ˆëœ ì‘ì—…brë¡œ ë„˜ì–´ê°„ ë’¤, <code class="language-plaintext highlighter-rouge">matserì˜ ë‚´ìš©ì„ rebaseë¡œ ë°›ì•„ì˜¨ë‹¤</code></strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout [ì‘ì—…br]
   
git rebase master
   
git log --oneline
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">
<a class="anchor" href="#2-%ED%95%B4%EB%8B%B9br-%EC%9E%91%EC%97%85%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%99%84%EB%A3%8C%ED%9B%84--merge%EA%B9%8C%EC%A7%80-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</h5>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add 
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>
  </li>
</ol>

<ul>
  <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
</ul>

<ol>
  <li><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></li>
</ol>

<h4 id="vscode-ì„¤ì •">
<a class="anchor" href="#vscode-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>vscode ì„¤ì •</h4>

<ul>
  <li>ìºì‰¬íŒŒì¼ ì•ˆë³´ì´ê¸°</li>
</ul>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"**/__pycache__"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"**/.pytest_cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<ul>
  <li>
    <p>tabì‹œ spaceë¡œ ì…ë ¥ë˜ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001015405760.png" alt="image-20221001015405760"></p>
  </li>
  <li>
    <p>íƒìƒ‰ê¸° ì—´ê¸° ë‹¨ì¶•í‚¤ : <code class="language-plaintext highlighter-rouge">shift + alt + R</code></p>

    <ul>
      <li>íŒŒì¼: íŒŒì¼ íƒìƒ‰ê¸°ì— í‘œì‹œ</li>
    </ul>
  </li>
</ul>

<h4 id="testì •ë¦¬">
<a class="anchor" href="#test%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì •ë¦¬</h4>

<ol>
  <li>
    <p>repo_insert_X</p>

    <ol>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</li>
    </ol>
  </li>
  <li>
    <p>repo_select_X</p>
    <ol>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ol>
  </li>
</ol>


  </div><a class="u-url" href="/python/flask/cleanarchitecture/2022/09/03/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_03_ManyEntity_Register_usecase_UseCaseSpy.html" hidden></a>
</article>


<!-- <script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>í‰ë²”í•œ í•œì˜ì‚¬ ëŒë²”ì˜ ì—”ì§€ë‹ˆì–´ ë„ì „ê¸°</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
