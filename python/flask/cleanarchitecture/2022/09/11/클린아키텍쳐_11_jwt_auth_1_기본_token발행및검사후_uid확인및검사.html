<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>í´ë¦°ì•„í‚¤í…ì³ 11 jwt auth token ë°œí–‰ê³¼ ê²€ì‚¬ ë° uid ê²€ì‚¬ | ëŒë²”í…¤ë†‘</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="í´ë¦°ì•„í‚¤í…ì³ 11 jwt auth token ë°œí–‰ê³¼ ê²€ì‚¬ ë° uid ê²€ì‚¬" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="python clean architecture" />
<meta property="og:description" content="python clean architecture" />
<link rel="canonical" href="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/11/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_11_jwt_auth_1_%EA%B8%B0%EB%B3%B8_token%EB%B0%9C%ED%96%89%EB%B0%8F%EA%B2%80%EC%82%AC%ED%9B%84_uid%ED%99%95%EC%9D%B8%EB%B0%8F%EA%B2%80%EC%82%AC.html" />
<meta property="og:url" content="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/11/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_11_jwt_auth_1_%EA%B8%B0%EB%B3%B8_token%EB%B0%9C%ED%96%89%EB%B0%8F%EA%B2%80%EC%82%AC%ED%9B%84_uid%ED%99%95%EC%9D%B8%EB%B0%8F%EA%B2%80%EC%82%AC.html" />
<meta property="og:site_name" content="ëŒë²”í…¤ë†‘" />
<meta property="og:image" content="blog.chojaeseong.com/images/posts/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-11T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-09-11T00:00:00-05:00","url":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/11/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_11_jwt_auth_1_%EA%B8%B0%EB%B3%B8_token%EB%B0%9C%ED%96%89%EB%B0%8F%EA%B2%80%EC%82%AC%ED%9B%84_uid%ED%99%95%EC%9D%B8%EB%B0%8F%EA%B2%80%EC%82%AC.html","@type":"BlogPosting","image":"blog.chojaeseong.com/images/posts/python.png","headline":"í´ë¦°ì•„í‚¤í…ì³ 11 jwt auth token ë°œí–‰ê³¼ ê²€ì‚¬ ë° uid ê²€ì‚¬","dateModified":"2022-09-11T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/11/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_11_jwt_auth_1_%EA%B8%B0%EB%B3%B8_token%EB%B0%9C%ED%96%89%EB%B0%8F%EA%B2%80%EC%82%AC%ED%9B%84_uid%ED%99%95%EC%9D%B8%EB%B0%8F%EA%B2%80%EC%82%AC.html"},"description":"python clean architecture","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- í°íŠ¸ì¶”ê°€ë¥¼ ìœ„í•œ linkíƒœê·¸ ì‚½ì… -->
  <!-- í°íŠ¸1:  ê¸°ë³¸ spoqa ì›¹í°íŠ¸ -->
  <!-- cssì—ì„œ * {} ë‹¤ ë’¤ì§‘ì–´ì”€. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- í°íŠ¸2:  ë¸”ë¡œê·¸ ì œëª©ë“¤ sunflower ì›¹í°íŠ¸ -->
  <!-- ì¥¬í”¼í„° ë“± í¬ìŠ¤íŠ¸ ë‚´ë¶€ ê¸€ì h1, h2 ì œëª©ì€ sunflowerì²´ ë„ì… -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="blog.chojaeseong.com/feed.xml" title="ëŒë²”í…¤ë†‘" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ëŒë²”í…¤ë†‘</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">í´ë¦°ì•„í‚¤í…ì³ 11 jwt auth token ë°œí–‰ê³¼ ê²€ì‚¬ ë° uid ê²€ì‚¬</h1><p class="page-description">python clean architecture</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-11T00:00:00-05:00" itemprop="datePublished">
        Sep 11, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      11 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#flask">flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cleanarchitecture">cleanarchitecture</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- tocê°€ ë¨¼ì € ë‚˜ì˜¤ë¯€ë¡œ h3ë¡œ ì•ˆë‚´í•˜ê¸° -->
    <h3>ğŸ“œ ì œëª©ìœ¼ë¡œ ë³´ê¸°</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#í´ë¦°-ì•„í‚¤í…ì³-11ì¥">í´ë¦° ì•„í‚¤í…ì³ 11ì¥</a>
<ul>
<li class="toc-entry toc-h2"><a href="#1-ì„¸íŒ…">1 ì„¸íŒ…</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-ì²«-í”„ë¡œì íŠ¸-êµ¬ì¡°--not-clean-architecture">01 ì²« í”„ë¡œì íŠ¸ êµ¬ì¡°  (not clean architecture)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-src-routepy">001 src&gt; route.py</a>
<ul>
<li class="toc-entry toc-h5"><a href="#flask-blueprint-jsonifyë¡œ-secret-route-êµ¬ì„±">flask Blueprint, jsonifyë¡œ /secret route êµ¬ì„±</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#002-src-serverpy">002 src&gt; server.py</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ì‘ì„±ëœ-routeì˜-routeë“±ë¡ê°ì²´--flask-flask--flask_cors-cors---appê°ì²´-ìƒì„±í›„-ì´ˆê¸°í™”">ì‘ì„±ëœ .routeì˜ routeë“±ë¡ê°ì²´ + flask Flask + flask_cors CORS -&gt; appê°ì²´ ìƒì„±í›„ ì´ˆê¸°í™”</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#003-root--runpy">003 root &gt; run.py</a>
<ul>
<li class="toc-entry toc-h5"><a href="#appê°ì²´-import-ë°-name-mainì‹œ-ì‹¤í–‰ì½”ë“œ">appê°ì²´ import ë° name mainì‹œ ì‹¤í–‰ì½”ë“œ</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-clean-architecture">02 clean architecture</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-src-main-routes--api_routespyì—-secret-get-route-ì¶”ê°€">001 src&gt; main&gt; routes &gt; api_routes.pyì— /secret [GET] route ì¶”ê°€</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-postmanìœ¼ë¡œ-secret-get-route-test">03 POSTMANìœ¼ë¡œ /secret GET route TEST</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#2-flask-login-ëŒ€ì‹ -pyjwt">2 Flask-login ëŒ€ì‹  PyJWT</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-pyjwt-ì„¤ì¹˜">01 PyJWT ì„¤ì¹˜</a></li>
<li class="toc-entry toc-h3"><a href="#02-jwt-datetime-datetimetimedelta-import-í•˜ê³ -auth-post-route-ì¶”ê°€">02 jwt, datetime-datetime/timedelta import í•˜ê³  /auth [POST] route ì¶”ê°€</a></li>
<li class="toc-entry toc-h3"><a href="#03-auth-post-routeì—ì„œ-token-ë°œê¸‰---jwtencodeexp-dattime--key-algorithmë¡œ-token-ìƒì„±">03 /auth POST routeì—ì„œ token ë°œê¸‰ -&gt; jwt.encode({â€˜expâ€™: dattime }, key=, algorithm=)ë¡œ token ìƒì„±</a>
<ul>
<li class="toc-entry toc-h4"><a href="#routeë‚´ì—ì„œ-jwtëª¨ë“ˆì€-expë§Œë£Œê¸°ê°„ì„-í¬í•¨í•œ-dictë¥¼-keyì™€-algorithmì„-ì§€ì •í•˜ì—¬-encode-ë©”ì„œë“œë¡œ-tokenì„-ë§Œë“ ë‹¤">routeë‚´ì—ì„œ jwtëª¨ë“ˆì€ â€˜exp(ë§Œë£Œê¸°ê°„)â€™ì„ í¬í•¨í•œ dictë¥¼ key=ì™€ algorithm=ì„ ì§€ì •í•˜ì—¬ .encode() ë©”ì„œë“œë¡œ tokenì„ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#rs256ê³¼-hs256-ë‘˜ë‹¤-sha-256ì•”í˜¸í™”-ì•Œê³ ë¦¬ì¦˜ì´ì§€ë§Œ-hsê°€-secret-keyë¥¼-ê°€ì§€ê³ -ì•”í˜¸í™”í•´ì„œ-ë”-ì•ˆì „í•˜ë‹¤ê³ -í•œë‹¤">RS256ê³¼ HS256 ë‘˜ë‹¤ SHA-256ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì´ì§€ë§Œ, HSê°€ secret keyë¥¼ ê°€ì§€ê³  ì•”í˜¸í™”í•´ì„œ ë” ì•ˆì „í•˜ë‹¤ê³  í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#í™˜ê²½ë³€ìˆ˜-ì§€ì •í•´ì„œ-flask-run---postmanìœ¼ë¡œ-í™•ì¸í•˜ê¸°">í™˜ê²½ë³€ìˆ˜ ì§€ì •í•´ì„œ, flask run -&gt; POSTMANìœ¼ë¡œ í™•ì¸í•˜ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#ìƒì„±ëœ-tokenì„-ë²„ë¦¬ì§€-ë§ê³ -ê°€ì§€ê³ -ìˆëŠ”ë‹¤">ìƒì„±ëœ tokenì„ ë²„ë¦¬ì§€ ë§ê³  ê°€ì§€ê³  ìˆëŠ”ë‹¤.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#3-ê¸°ë³¸token-ë°œê¸‰-ë°-decodeì‹œ-ë°œìƒí•˜ëŠ”-ì˜ˆì™¸-ì²˜ë¦¬">3 ê¸°ë³¸token ë°œê¸‰ ë° decodeì‹œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-token-decode-ê²€ì‚¬-in-headersgetauthorization-in-get-route">01 token decode ê²€ì‚¬ in Headers.get(â€œAuthorizationâ€) in GET route</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-error-secret-get-routeì—ì„œ-requestheaders-ì†-authorization-keyë¥¼-í™•ì¸í•˜ê³ -tokenìì²´ê°€-ì—†ìœ¼ë©´-tokenë¬¸ì œê°€-ì•„ë‹ˆë¼-400-bad-requestë‹¤">001 [ERROR] /secret GET routeì—ì„œ request.headers ì† â€œAuthorizationâ€ keyë¥¼ í™•ì¸í•˜ê³  tokenìì²´ê°€ ì—†ìœ¼ë©´ tokenë¬¸ì œê°€ ì•„ë‹ˆë¼ 400 Bad Requestë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#002-postmanì—ì„œëŠ”-getìš”ì²­ì‹œ-authorization-typeì„-bearer--tokenì„-ì„ íƒí•˜ê³ -jwtencodeë¡œ-ë§Œë“ -í† í°ì„-ì…ë ¥í•œë‹¤">002 POSTMANì—ì„œëŠ” GETìš”ì²­ì‹œ Authorization TYPEì„ Bearer  Tokenì„ ì„ íƒí•˜ê³ , jwt.encodeë¡œ ë§Œë“  í† í°ì„ ì…ë ¥í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#003-ë°›ì€-tokenì„-ì¶œë ¥í•´ë³¸ë‹¤">003 ë°›ì€ tokenì„ ì¶œë ¥í•´ë³¸ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#004-tokenì€-ì‚¬ì‹¤-ì•ì—-bearer--ê°€-ë¶™ì€-raw_tokenìœ¼ë¡œ-ê°„ì£¼í•˜ê³ -splití•´ì„œ-tokenë§Œ-ì·¨í•œ-ë’¤--jwtdecodekey-algorhitmìœ¼ë¡œ-ì•”í˜¸í™”ì‹œ-ì‚¬ìš©í•œ-ë™ì¼-keyì™€-algoë¡œ-ì•”í˜¸í™”í•´ë…í•œ-token_informationì„-ì¶œë ¥í•´ë³¸ë‹¤">004 tokenì€ ì‚¬ì‹¤ ì•ì— Bearer[ ] ê°€ ë¶™ì€ raw_tokenìœ¼ë¡œ ê°„ì£¼í•˜ê³  splití•´ì„œ tokenë§Œ ì·¨í•œ ë’¤ , jwt.decode(,key=, algorhitm=)ìœ¼ë¡œ ì•”í˜¸í™”ì‹œ ì‚¬ìš©í•œ ë™ì¼ keyì™€ algoë¡œ ì•”í˜¸í™”í•´ë…í•œ token_informationì„ ì¶œë ¥í•´ë³¸ë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ë‚˜ëŠ”-í•œì°¸ìˆë‹¤ê°€-í–ˆë”ë‹ˆ-post-routeì—ì„œ-ë°œê¸‰í•œ-token-expire--jwtexceptionsexpiredsignatureerorê°€-ë‚œë‹¤">ë‚˜ëŠ” í•œì°¸ìˆë‹¤ê°€ í–ˆë”ë‹ˆ.. POST routeì—ì„œ ë°œê¸‰í•œ token expire =&gt; jwt.exceptions.ExpiredSignatureErorê°€ ë‚œë‹¤</a></li>
<li class="toc-entry toc-h5"><a href="#ë‹¤ì‹œ-auth-post-routeì—ì„œ-í† í°ì„-ë°œê¸‰ìƒì„±í•˜ê³ -secret-get-routeì—ì„œ-í† í°-ê²€ì‚¬ë¥¼-í•´ë³´ì">ë‹¤ì‹œ /auth POST routeì—ì„œ í† í°ì„ ë°œê¸‰(ìƒì„±)í•˜ê³ , /secret GET routeì—ì„œ í† í° ê²€ì‚¬ë¥¼ í•´ë³´ì.</a></li>
<li class="toc-entry toc-h5"><a href="#decodeí•œ-tokenì€-encodeí• ë•Œì˜-dictexpí¬í•¨ê°€-ê·¸ëŒ€ë¡œ-ì¶œë ¥ëœë‹¤">decodeí•œ tokenì€ encodeí• ë•Œì˜ dict(â€˜expâ€™í¬í•¨)ê°€ ê·¸ëŒ€ë¡œ ì¶œë ¥ëœë‹¤</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-invalidí•œ-tokenë§‰í† í°-12ê°œ-ì§€ìš´-í† í°í•´ì„œ-getìš”ì²­í•´ë³´ê¸°">02 invalidí•œ token(ë§‰í† í°, 1~2ê°œ ì§€ìš´ í† í°)í•´ì„œ GETìš”ì²­í•´ë³´ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-error-ë§‰tokenì€-ê²€ì‚¬ì‹œ-jwtexceptionsdecodeerrorê°€-ë‚œë‹¤---ê·¼ë°-ë§‰í† í°ì„-ì˜¬ë¦´ì´-ì—†ë‹¤">001 [ERROR] ë§‰tokenì€ ê²€ì‚¬ì‹œ jwt.exceptions.DecodeErrorê°€ ë‚œë‹¤ -&gt; ê·¼ë° ë§‰í† í°ì„ ì˜¬ë¦´ì´ ì—†ë‹¤?</a></li>
<li class="toc-entry toc-h4"><a href="#002-error-ì›ë˜-í† í°ì—ì„œ-12ê¸€ìë¥¼-ì§€ìš°ë©´-jwtexceptionsinvalidsignatureerrorê°€-ë‚œë‹¤">002 [ERROR] ì›ë˜ í† í°ì—ì„œ 1~2ê¸€ìë¥¼ ì§€ìš°ë©´, jwt.exceptions.InvalidSignatureErrorê°€ ë‚œë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#error-ë§‰tokenë§ê³ -12ê¸€ìë¹ ì§„-tokeninvalid-tokenì„-if-not-tokenê³¼-ë™ì¼í•œ-498ë¡œ-ì¡ì">[ERROR] ë§‰tokenë§ê³  1~2ê¸€ìë¹ ì§„ token(Invalid token)ì„ if not tokenê³¼ ë™ì¼í•œ 498ë¡œ ì¡ì</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-token-ë°œê¸‰-auth-post-routeì—ì„œ-ë°œê¸‰encodeì‹œ-expë¥¼-1ì´ˆë¡œí•´ì„œ-expireê´€ë ¨-ì—ëŸ¬-ì¡ê¸°">03 token ë°œê¸‰ /auth POST routeì—ì„œ ë°œê¸‰(encode)ì‹œ expë¥¼ 1ì´ˆë¡œí•´ì„œ.. Expireê´€ë ¨ ì—ëŸ¬ ì¡ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-post-ë°œê¸‰routeì—ì„œ-encodeì‹œ-expì˜-ê°’ì„-í˜„ì¬ì‹œê°„--timedeltaseconds1ë¡œ-ì¤˜ì„œ-ë¬´ì¡°ê±´-ë§Œë£Œëœ-ìƒíƒœë¥¼-ë§Œë‹¨ë‹¤">001 POST ë°œê¸‰routeì—ì„œ encodeì‹œ â€˜expâ€™ì˜ ê°’ì„ í˜„ì¬ì‹œê°„ + timedelta(seconds=1)ë¡œ ì¤˜ì„œ ë¬´ì¡°ê±´ ë§Œë£Œëœ ìƒíƒœë¥¼ ë§Œë‹¨ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#002-error-get-í™•ì¸-routeì—ì„œ-jwtexpiredsignatureerrorë¥¼-í† í°ì´-ì¡´ì¬í•˜ì§€-ì•Šì„-ë•Œì™€-ë™ì¼í•œ-401unauthorizedë¡œ-ì¡ëŠ”ë‹¤">002 [ERROR] GET í™•ì¸ routeì—ì„œ jwt.ExpiredSignatureErrorë¥¼ í† í°ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œì™€ ë™ì¼í•œ 401(Unauthorized)ë¡œ ì¡ëŠ”ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#003-postmanì—ì„œ-post-1ì´ˆì§œë¦¬-ë°œê¸‰----get-expiredtoken401ì„-í™•ì¸í•œë‹¤">003 POSTMANì—ì„œ POST 1ì´ˆì§œë¦¬ ë°œê¸‰ -&gt;  GET ExpiredToken401ì„ í™•ì¸í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#expiredtoken-ì—ëŸ´-ì¡ì•˜ìœ¼ë©´-ë‹¤ì‹œ-expë¥¼-30ë¶„ìœ¼ë¡œ-ëŒë ¤ë†“ì">expiredtoken ì—ëŸ´ ì¡ì•˜ìœ¼ë©´ ë‹¤ì‹œ expë¥¼ 30ë¶„ìœ¼ë¡œ ëŒë ¤ë†“ì</a></li>
<li class="toc-entry toc-h4"><a href="#ì°¸ê³ --expired-token-ì´ì™¸ì—--498-invalid-tokenë„-401ìœ¼ë¡œ-ì¡ì•„ë„-ëœë‹¤">ì°¸ê³ )  expired token ì´ì™¸ì— + 498 invalid tokenë„ 401ìœ¼ë¡œ ì¡ì•„ë„ ëœë‹¤.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#4-agentì˜-tokenì™¸-userì˜-id-uidë„-ì¶”ê°€">4 Agentì˜ tokenì™¸ userì˜ id (uid)ë„ ì¶”ê°€</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-tokenë°œê¸‰-routeì—ì„œ-expì™¸ì—-ë°œê¸‰ìš”ì²­ìì˜-uidë¥¼-í¬í•¨í•´ì„œ-ë°œê¸‰">01 tokenë°œê¸‰ routeì—ì„œ expì™¸ì— [ë°œê¸‰ìš”ì²­ìì˜ uid]ë¥¼ í¬í•¨í•´ì„œ ë°œê¸‰</a></li>
<li class="toc-entry toc-h3"><a href="#02-tokení™•ì¸-routeì—ì„œ-headersì—-authorizationì´ì™¸ì—-í˜„ì¬userì˜-tokení™•ì¸ìš”ì²­ìì˜-uidë„-êº¼ë‚´ì„œ-tokenë°œê¸‰ìì˜-uidì™€-ë¹„êµ">02 tokení™•ì¸ routeì—ì„œ, headersì— â€œAuthorizationâ€ì´ì™¸ì— í˜„ì¬userì˜ [tokení™•ì¸ìš”ì²­ìì˜ â€œuidâ€]ë„ êº¼ë‚´ì„œ [tokenë°œê¸‰ìì˜ uid]ì™€ ë¹„êµ</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-error-í˜„ì¬-ìš”ì²­ì‚¬ìš©ìì˜-uidë¥¼-headersì—ì„œ-êº¼ë‚¸ë‹¤-tokenì´-ì—†ëŠ”ê²ƒ-ì™¸ì—-uidê°€-ì—†ì–´ë„-400ì—ëŸ¬ë‹¤">001 [ERROR] í˜„ì¬ ìš”ì²­ì‚¬ìš©ìì˜ uidë¥¼ headersì—ì„œ êº¼ë‚¸ë‹¤. tokenì´ ì—†ëŠ”ê²ƒ ì™¸ì— uidê°€ ì—†ì–´ë„ 400ì—ëŸ¬ë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#002-ë°œê¸‰ì‹œ-tokenì—-í¬í•¨ëœ-uidë¥¼--decodeëœ-token_informationì—ì„œ-êº¼ë‚´-ë³€ìˆ˜ë¡œ-ë°›ì•„ë†“ëŠ”ë‹¤">002 ë°œê¸‰ì‹œ tokenì— í¬í•¨ëœ uidë¥¼  decodeëœ token_informationì—ì„œ êº¼ë‚´ ë³€ìˆ˜ë¡œ ë°›ì•„ë†“ëŠ”ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#003-token-decodeê³¼ì •ì—ì„œ-ë°œìƒí•˜ëŠ”-ì˜ˆì™¸í†µê³¼ì‹œ-token_uid-vs-í˜„ì¬uidë¥¼-ë¹„êµí•˜ì—¬-ë‹¤ë¥¼ì‹œ-400ìœ¼ë¡œ-ì˜ˆì™¸ë¥¼-ì²˜ë¦¬í•œë‹¤í˜•ë³€í™˜í•´ì„œ-í™•ì¸">003 token decodeê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸í†µê³¼ì‹œ, token_uid vs í˜„ì¬uidë¥¼ ë¹„êµí•˜ì—¬ ë‹¤ë¥¼ì‹œ, 400ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•œë‹¤(í˜•ë³€í™˜í•´ì„œ í™•ì¸)</a></li>
<li class="toc-entry toc-h4"><a href="#tokenê´€ë ¨-í…ŒìŠ¤íŠ¸ëŠ”-í•­ìƒ-postë¡œ-ìƒˆë¡œ-ë°œê¸‰---ë³µì‚¬---getìœ¼ë¡œ-ì¸ì¦ìš”ì²­í•˜ì--ì—¥-not-uidì—-ê±¸ë ¤-401-ì—ëŸ¬ê°€-ë‚œë‹¤">tokenê´€ë ¨ í…ŒìŠ¤íŠ¸ëŠ” í•­ìƒ POSTë¡œ ìƒˆë¡œ ë°œê¸‰ -&gt; ë³µì‚¬ -&gt; GETìœ¼ë¡œ ì¸ì¦ìš”ì²­í•˜ì =&gt; ì—¥? not uidì— ê±¸ë ¤ 401 ì—ëŸ¬ê°€ ë‚œë‹¤</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-uidëŠ”-authorizationê³¼-ë‹¬ë¦¬-postman-getìš”ì²­ì‹œ-headersì—-ì§ì ‘-ì¤˜ì•¼í•œë‹¤">03 uidëŠ” Authorizationê³¼ ë‹¬ë¦¬, POSTMAN GETìš”ì²­ì‹œ, Headersì— ì§ì ‘ ì¤˜ì•¼í•œë‹¤</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-getìš”ì²­ì‹œ-headersë¥¼-ë”°ë¡œ-ì¤€-ì ì´-ì—†ì—ˆëŠ”ë°-uidí…ŒìŠ¤íŠ¸ê°€-ì²˜ìŒì´ë‹¤">001 GETìš”ì²­ì‹œ Headersë¥¼ ë”°ë¡œ ì¤€ ì ì´ ì—†ì—ˆëŠ”ë° uidí…ŒìŠ¤íŠ¸ê°€ ì²˜ìŒì´ë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#002-í™•ì¸í•´ë³´ë‹ˆ-headers-ì†--uidëŠ”-stringìœ¼ë¡œ-tokenì†-ë°œê¸‰ì‹œ-ì§€ì •í•´ì¤€-uidëŠ”-intíƒ€ì…ì´ì—ˆë‹¤">002 í™•ì¸í•´ë³´ë‹ˆ, headers ì†  uidëŠ” stringìœ¼ë¡œ, tokenì† ë°œê¸‰ì‹œ ì§€ì •í•´ì¤€ uidëŠ” intíƒ€ì…ì´ì—ˆë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#003-ë°œê¸‰ì‹œì™€-ë‹¤ë¥¸-uidë¥¼-headersì—-ë°•ì•„ì„œ-tokení™•ì¸ìš”ì²­-í•œë‹¤ë©´--token_uid-vs-uid-ë¹„êµì‹œ-ë‚´ëŠ”-user-not-permissionì´-ë‚˜ì™€ì•¼í•œë‹¤">003 ë°œê¸‰ì‹œì™€ ë‹¤ë¥¸ uidë¥¼ headersì— ë°•ì•„ì„œ tokení™•ì¸ìš”ì²­ í•œë‹¤ë©´?  token_uid vs uid ë¹„êµì‹œ ë‚´ëŠ” User not permissionì´ ë‚˜ì™€ì•¼í•œë‹¤</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-ë˜ë‹¤ë¥¸-uidê´€ë ¨-ì—ëŸ¬-ì²˜ë¦¬---tokenìƒì„±ì‹œ-í•„ìˆ˜-dictk-keyì¸-uidë¥¼--ì—†ì´-ìƒì„±í•œ-ê²½ìš°">04 ë˜ë‹¤ë¥¸ uidê´€ë ¨ ì—ëŸ¬ ì²˜ë¦¬ -&gt; tokenìƒì„±ì‹œ í•„ìˆ˜ dictk-keyì¸ uidë¥¼,  ì—†ì´ ìƒì„±í•œ ê²½ìš°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#001-headers-ì†-uidëŠ”-getìœ¼ë¡œ-êº¼ë‚´ê³ -ì—†ìœ¼ë©´-400ì—ëŸ¬ì˜€ë‹¤">001 headers ì† uidëŠ” .get()ìœ¼ë¡œ êº¼ë‚´ê³  ì—†ìœ¼ë©´ 400ì—ëŸ¬ì˜€ë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#002-ê·¸ëŸ¬ë‚˜-tokenì€--ë°œê¸‰postì‹œ-ë¬´ì¡°ê±´-uidë¥¼-ë„£ì€-ìƒíƒœë¡œ-encodingí•´ì•¼í•˜ë©°-í™•ì¸ìš”ì²­getì‹œ-token_infouidë¡œ-ê°•ì œë¡œ-keyë¥¼-êº¼ë‚¸ë‹¤">002 ê·¸ëŸ¬ë‚˜ tokenì€  ë°œê¸‰(POST)ì‹œ ë¬´ì¡°ê±´ uidë¥¼ ë„£ì€ ìƒíƒœë¡œ encodingí•´ì•¼í•˜ë©°, í™•ì¸ìš”ì²­(GET)ì‹œ token_info[â€œuidâ€]ë¡œ ê°•ì œë¡œ keyë¥¼ êº¼ë‚¸ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#003-error-í•„ìˆ˜ì ìœ¼ë¡œ-ìˆì–´ì•¼í• -dict-key-not-getì¸-uidê°€-tokenì—-ì—†ìœ¼ë©´-keyerrorë¡œ-ì¡ê³ -401-ì—ëŸ¬ë¥¼-ë‚¸ë‹¤-ì„ì˜ë¡œ-invalid-token2ë¡œ-ë©”ì„¸ì§€ë¥¼-ì¡ëŠ”ë‹¤">003 [ERROR] í•„ìˆ˜ì ìœ¼ë¡œ ìˆì–´ì•¼í•  dict key( not .get())ì¸ uidê°€ tokenì— ì—†ìœ¼ë©´ KeyErrorë¡œ ì¡ê³  401 ì—ëŸ¬ë¥¼ ë‚¸ë‹¤. ì„ì˜ë¡œ â€œInvalid Token2â€ë¡œ ë©”ì„¸ì§€ë¥¼ ì¡ëŠ”ë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#uidì—†ì´-í† í°ë°œê¸‰-errorë¥¼-ë‚´ë³´ê¸°-ìœ„í•´--post-routeì—ì„œ-ì„ì‹œë¡œ-uid-key-valueë¥¼-ì‚­ì œí•˜ê³ -í…ŒìŠ¤íŠ¸">uidì—†ì´ í† í°ë°œê¸‰ Errorë¥¼ ë‚´ë³´ê¸° ìœ„í•´,  POST routeì—ì„œ ì„ì‹œë¡œ uid key-valueë¥¼ ì‚­ì œí•˜ê³  í…ŒìŠ¤íŠ¸</a></li>
<li class="toc-entry toc-h5"><a href="#ë‹¤ì‹œ-ë°œê¸‰ì‹œ-uid-ë„£ì–´ì£¼ì">ë‹¤ì‹œ ë°œê¸‰ì‹œ uid ë„£ì–´ì£¼ì</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ì°¸ê³ ">ì°¸ê³ </a>
<ul>
<li class="toc-entry toc-h4"><a href="#gitignore">gitignore</a></li>
<li class="toc-entry toc-h4"><a href="#sqlalchemyíŒ¨í‚¤ì§€">sqlalchemyíŒ¨í‚¤ì§€</a></li>
<li class="toc-entry toc-h4"><a href="#githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#1-1-githubì—ì„œ-brìƒì„±--clone">[1-1] githubì—ì„œ brìƒì„± ~ clone</a></li>
<li class="toc-entry toc-h5"><a href="#cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h5"><a href="#1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</a></li>
<li class="toc-entry toc-h5"><a href="#1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-pull---rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ pull -&gt; rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#2-framework-ìˆë‹¤ë©´-venvì—-í™˜ê²½ë³€ìˆ˜-ì„¸íŒ…---vscode-ë””ë²„ê¹…-ì„¸íŒ…">[2] framework ìˆë‹¤ë©´ venvì— í™˜ê²½ë³€ìˆ˜ ì„¸íŒ… -&gt; vscode ë””ë²„ê¹… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h5"><a href="#3-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">[3] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#vscode-ì„¤ì •">vscode ì„¤ì •</a></li>
<li class="toc-entry toc-h4"><a href="#testì •ë¦¬">testì •ë¦¬</a></li>
<li class="toc-entry toc-h4"><a href="#status_code">status_code</a></li>
<li class="toc-entry toc-h4"><a href="#powershell-í™˜ê²½ë³€ìˆ˜-ë“±ë¡í™•ì¸">powershell í™˜ê²½ë³€ìˆ˜ ë“±ë¡/í™•ì¸</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="í´ë¦°-ì•„í‚¤í…ì³-11ì¥">
<a class="anchor" href="#%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-11%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>í´ë¦° ì•„í‚¤í…ì³ 11ì¥</h1>

<h2 id="1-ì„¸íŒ…">
<a class="anchor" href="#1-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 ì„¸íŒ…</h2>

<h3 id="01-ì²«-í”„ë¡œì íŠ¸-êµ¬ì¡°--not-clean-architecture">
<a class="anchor" href="#01-%EC%B2%AB-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0--not-clean-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 ì²« í”„ë¡œì íŠ¸ êµ¬ì¡°  (not clean architecture)</h3>

<h4 id="001-src-routepy">
<a class="anchor" href="#001-src-routepy" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 src&gt; route.py</h4>

<h5 id="flask-blueprint-jsonifyë¡œ-secret-route-êµ¬ì„±">
<a class="anchor" href="#flask-blueprint-jsonify%EB%A1%9C-secret-route-%EA%B5%AC%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>flask Blueprint, jsonifyë¡œ /secret route êµ¬ì„±</h5>

<ul>
  <li>clean architectureë¼ë©´ <code class="language-plaintext highlighter-rouge">src&gt; main &gt; routes &gt; api_routes.py</code>
</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009214051476.png" alt="image-20221009214051476"></p>

<p>###</p>

<h4 id="002-src-serverpy">
<a class="anchor" href="#002-src-serverpy" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 src&gt; server.py</h4>

<h5 id="ì‘ì„±ëœ-routeì˜-routeë“±ë¡ê°ì²´--flask-flask--flask_cors-cors---appê°ì²´-ìƒì„±í›„-ì´ˆê¸°í™”">
<a class="anchor" href="#%EC%9E%91%EC%84%B1%EB%90%9C-route%EC%9D%98-route%EB%93%B1%EB%A1%9D%EA%B0%9D%EC%B2%B4--flask-flask--flask_cors-cors---app%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%ED%9B%84-%EC%B4%88%EA%B8%B0%ED%99%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì‘ì„±ëœ .routeì˜ routeë“±ë¡ê°ì²´ + flask Flask + flask_cors CORS -&gt; appê°ì²´ ìƒì„±í›„ ì´ˆê¸°í™”</h5>

<ul>
  <li>clean architectureë¼ë©´ <code class="language-plaintext highlighter-rouge">src&gt; main &gt; configs &gt; app.py</code>
</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009214205278.png" alt="image-20221009214205278"></p>

<h4 id="003-root--runpy">
<a class="anchor" href="#003-root--runpy" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 root &gt; run.py</h4>

<h5 id="appê°ì²´-import-ë°-name-mainì‹œ-ì‹¤í–‰ì½”ë“œ">
<a class="anchor" href="#app%EA%B0%9D%EC%B2%B4-import-%EB%B0%8F-name-main%EC%8B%9C-%EC%8B%A4%ED%96%89%EC%BD%94%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>appê°ì²´ import ë° name mainì‹œ ì‹¤í–‰ì½”ë“œ</h5>

<ul>
  <li>clean architectureë¼ë©´ <code class="language-plaintext highlighter-rouge">root &gt; run.py</code>
</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009214159517.png" alt="image-20221009214159517"></p>

<h3 id="02-clean-architecture">
<a class="anchor" href="#02-clean-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 clean architecture</h3>

<h4 id="001-src-main-routes--api_routespyì—-secret-get-route-ì¶”ê°€">
<a class="anchor" href="#001-src-main-routes--api_routespy%EC%97%90-secret-get-route-%EC%B6%94%EA%B0%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 src&gt; main&gt; routes &gt; api_routes.pyì— /secret [GET] route ì¶”ê°€</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span> <span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h3 id="03-postmanìœ¼ë¡œ-secret-get-route-test">
<a class="anchor" href="#03-postman%EC%9C%BC%EB%A1%9C-secret-get-route-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 POSTMANìœ¼ë¡œ /secret GET route TEST</h3>

<ul>
  <li>jsonifyí•œ ë©”ì„¸ì§€ê°€ ì˜ ë“¤ì–´ì˜¤ë‚˜ í™•ì¸í•œë‹¤.</li>
</ul>

<h2 id="2-flask-login-ëŒ€ì‹ -pyjwt">
<a class="anchor" href="#2-flask-login-%EB%8C%80%EC%8B%A0-pyjwt" aria-hidden="true"><span class="octicon octicon-link"></span></a>2 Flask-login ëŒ€ì‹  PyJWT</h2>

<h3 id="01-pyjwt-ì„¤ì¹˜">
<a class="anchor" href="#01-pyjwt-%EC%84%A4%EC%B9%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 PyJWT ì„¤ì¹˜</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install PyJWT
</code></pre></div></div>

<h3 id="02-jwt-datetime-datetimetimedelta-import-í•˜ê³ -auth-post-route-ì¶”ê°€">
<a class="anchor" href="#02-jwt-datetime-datetimetimedelta-import-%ED%95%98%EA%B3%A0-auth-post-route-%EC%B6%94%EA%B0%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 jwt, datetime-datetime/timedelta import í•˜ê³  /auth [POST] route ì¶”ê°€</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">jwt</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="c1">#...
</span>
<span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/auth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">authorize_user</span><span class="p">():</span>
    <span class="k">pass</span>
</code></pre></div></div>

<h3 id="03-auth-post-routeì—ì„œ-token-ë°œê¸‰---jwtencodeexp-dattime--key-algorithmë¡œ-token-ìƒì„±">
<a class="anchor" href="#03-auth-post-route%EC%97%90%EC%84%9C-token-%EB%B0%9C%EA%B8%89---jwtencodeexp-dattime--key-algorithm%EB%A1%9C-token-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 /auth POST routeì—ì„œ token ë°œê¸‰ -&gt; jwt.encode({â€˜expâ€™: dattime }, key=, algorithm=)ë¡œ token ìƒì„±</h3>

<h4 id="routeë‚´ì—ì„œ-jwtëª¨ë“ˆì€-expë§Œë£Œê¸°ê°„ì„-í¬í•¨í•œ-dictë¥¼-keyì™€-algorithmì„-ì§€ì •í•˜ì—¬-encode-ë©”ì„œë“œë¡œ-tokenì„-ë§Œë“ ë‹¤">
<a class="anchor" href="#route%EB%82%B4%EC%97%90%EC%84%9C-jwt%EB%AA%A8%EB%93%88%EC%9D%80-exp%EB%A7%8C%EB%A3%8C%EA%B8%B0%EA%B0%84%EC%9D%84-%ED%8F%AC%ED%95%A8%ED%95%9C-dict%EB%A5%BC-key%EC%99%80-algorithm%EC%9D%84-%EC%A7%80%EC%A0%95%ED%95%98%EC%97%AC-encode-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-token%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>routeë‚´ì—ì„œ jwtëª¨ë“ˆì€ â€˜exp(ë§Œë£Œê¸°ê°„)â€™ì„ í¬í•¨í•œ dictë¥¼ key=ì™€ algorithm=ì„ ì§€ì •í•˜ì—¬ .encode() ë©”ì„œë“œë¡œ tokenì„ ë§Œë“ ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/auth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">authorize_user</span><span class="p">():</span>
    
    <span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">encode</span><span class="p">({</span>
        <span class="s">'exp'</span> <span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'token'</span><span class="p">:</span> <span class="n">token</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h4 id="rs256ê³¼-hs256-ë‘˜ë‹¤-sha-256ì•”í˜¸í™”-ì•Œê³ ë¦¬ì¦˜ì´ì§€ë§Œ-hsê°€-secret-keyë¥¼-ê°€ì§€ê³ -ì•”í˜¸í™”í•´ì„œ-ë”-ì•ˆì „í•˜ë‹¤ê³ -í•œë‹¤">
<a class="anchor" href="#rs256%EA%B3%BC-hs256-%EB%91%98%EB%8B%A4-sha-256%EC%95%94%ED%98%B8%ED%99%94-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%9D%B4%EC%A7%80%EB%A7%8C-hs%EA%B0%80-secret-key%EB%A5%BC-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%95%94%ED%98%B8%ED%99%94%ED%95%B4%EC%84%9C-%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%98%EB%8B%A4%EA%B3%A0-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>RS256ê³¼ HS256 ë‘˜ë‹¤ SHA-256ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì´ì§€ë§Œ, HSê°€ secret keyë¥¼ ê°€ì§€ê³  ì•”í˜¸í™”í•´ì„œ ë” ì•ˆì „í•˜ë‹¤ê³  í•œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009220316821.png" alt="image-20221009220316821"></p>

<h4 id="í™˜ê²½ë³€ìˆ˜-ì§€ì •í•´ì„œ-flask-run---postmanìœ¼ë¡œ-í™•ì¸í•˜ê¸°">
<a class="anchor" href="#%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%A7%80%EC%A0%95%ED%95%B4%EC%84%9C-flask-run---postman%EC%9C%BC%EB%A1%9C-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>í™˜ê²½ë³€ìˆ˜ ì§€ì •í•´ì„œ, flask run -&gt; POSTMANìœ¼ë¡œ í™•ì¸í•˜ê¸°</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export FLASK_APP=run.py
export FLASK_ENV=development
flask run
</code></pre></div></div>

<ul>
  <li>
    <p>**POSTëŠ” headersê°€ í•„ìˆ˜ë©° **</p>

    <ul>
      <li>Content-Type: application/json</li>
    </ul>
  </li>
  <li>
    <p><strong>bodyëŠ” rawë¡œ ë‚´ìš©ë¬¼ì„ ë„£ì–´ì„œ ë³´ë‚¸ë‹¤.</strong></p>

    <ul>
      <li>ì—¬ê¸°ì„  routeì—ì„œ ì•„ì§ ì•ˆë°›ìœ¼ë¯€ë¡œ ì•„ë¬´ê±°ë‚˜ ë³´ë‚¸ë‹¤
        <ul>
          <li>username:</li>
          <li>password:</li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009221118022.png" alt="image-20221009221118022"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009221200419.png" alt="image-20221009221200419"></p>
  </li>
</ul>

<h4 id="ìƒì„±ëœ-tokenì„-ë²„ë¦¬ì§€-ë§ê³ -ê°€ì§€ê³ -ìˆëŠ”ë‹¤">
<a class="anchor" href="#%EC%83%9D%EC%84%B1%EB%90%9C-token%EC%9D%84-%EB%B2%84%EB%A6%AC%EC%A7%80-%EB%A7%90%EA%B3%A0-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ìƒì„±ëœ tokenì„ ë²„ë¦¬ì§€ ë§ê³  ê°€ì§€ê³  ìˆëŠ”ë‹¤.</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NjUzMjI3MTl9.km9cSKTBbOLbnHnsH3zq3dEfswdP57pizIFEpyf5_xY
</code></pre></div></div>

<h2 id="3-ê¸°ë³¸token-ë°œê¸‰-ë°-decodeì‹œ-ë°œìƒí•˜ëŠ”-ì˜ˆì™¸-ì²˜ë¦¬">
<a class="anchor" href="#3-%EA%B8%B0%EB%B3%B8token-%EB%B0%9C%EA%B8%89-%EB%B0%8F-decode%EC%8B%9C-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>3 ê¸°ë³¸token ë°œê¸‰ ë° decodeì‹œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬</h2>

<h3 id="01-token-decode-ê²€ì‚¬-in-headersgetauthorization-in-get-route">
<a class="anchor" href="#01-token-decode-%EA%B2%80%EC%82%AC-in-headersgetauthorization-in-get-route" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 token decode ê²€ì‚¬ in Headers.get(â€œAuthorizationâ€) in GET route</h3>

<h4 id="001-error-secret-get-routeì—ì„œ-requestheaders-ì†-authorization-keyë¥¼-í™•ì¸í•˜ê³ -tokenìì²´ê°€-ì—†ìœ¼ë©´-tokenë¬¸ì œê°€-ì•„ë‹ˆë¼-400-bad-requestë‹¤">
<a class="anchor" href="#001-error-secret-get-route%EC%97%90%EC%84%9C-requestheaders-%EC%86%8D-authorization-key%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%98%EA%B3%A0-token%EC%9E%90%EC%B2%B4%EA%B0%80-%EC%97%86%EC%9C%BC%EB%A9%B4-token%EB%AC%B8%EC%A0%9C%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-400-bad-request%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 [ERROR] /secret GET routeì—ì„œ request.headers ì† â€œAuthorizationâ€ keyë¥¼ í™•ì¸í•˜ê³  tokenìì²´ê°€ ì—†ìœ¼ë©´ tokenë¬¸ì œê°€ ì•„ë‹ˆë¼ 400 Bad Requestë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span> <span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h4 id="002-postmanì—ì„œëŠ”-getìš”ì²­ì‹œ-authorization-typeì„-bearer--tokenì„-ì„ íƒí•˜ê³ -jwtencodeë¡œ-ë§Œë“ -í† í°ì„-ì…ë ¥í•œë‹¤">
<a class="anchor" href="#002-postman%EC%97%90%EC%84%9C%EB%8A%94-get%EC%9A%94%EC%B2%AD%EC%8B%9C-authorization-type%EC%9D%84-bearer--token%EC%9D%84-%EC%84%A0%ED%83%9D%ED%95%98%EA%B3%A0-jwtencode%EB%A1%9C-%EB%A7%8C%EB%93%A0-%ED%86%A0%ED%81%B0%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 POSTMANì—ì„œëŠ” GETìš”ì²­ì‹œ Authorization TYPEì„ Bearer  Tokenì„ ì„ íƒí•˜ê³ , jwt.encodeë¡œ ë§Œë“  í† í°ì„ ì…ë ¥í•œë‹¤.</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NjUzMjI3MTl9.km9cSKTBbOLbnHnsH3zq3dEfswdP57pizIFEpyf5_xY
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009224324071.png" alt="image-20221009224324071"></p>

<ul>
  <li>
    <p>í˜„ì¬ í† í°ì˜ ì¡´ì¬ê²€ì‚¬ëŠ” í†µê³¼í•˜ë‹ˆ dataê°€ ì˜ ë‚˜ì˜¨ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009224642197.png" alt="image-20221009224642197"></p>
  </li>
  <li>
    <p>tokenì„ ì‚­ì œí•˜ê³  sendë³´ë‚´ë©´ 401ì—ëŸ¬ê°€ ëœ¨ëŠ”ì§€ í™•ì¸í•œë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009224707102.png" alt="image-20221009224707102"></p>
  </li>
</ul>

<h4 id="003-ë°›ì€-tokenì„-ì¶œë ¥í•´ë³¸ë‹¤">
<a class="anchor" href="#003-%EB%B0%9B%EC%9D%80-token%EC%9D%84-%EC%B6%9C%EB%A0%A5%ED%95%B4%EB%B3%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 ë°›ì€ tokenì„ ì¶œë ¥í•´ë³¸ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span> <span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009224837323.png" alt="image-20221009224837323"></p>

<h4 id="004-tokenì€-ì‚¬ì‹¤-ì•ì—-bearer--ê°€-ë¶™ì€-raw_tokenìœ¼ë¡œ-ê°„ì£¼í•˜ê³ -splití•´ì„œ-tokenë§Œ-ì·¨í•œ-ë’¤--jwtdecodekey-algorhitmìœ¼ë¡œ-ì•”í˜¸í™”ì‹œ-ì‚¬ìš©í•œ-ë™ì¼-keyì™€-algoë¡œ-ì•”í˜¸í™”í•´ë…í•œ-token_informationì„-ì¶œë ¥í•´ë³¸ë‹¤">
<a class="anchor" href="#004-token%EC%9D%80-%EC%82%AC%EC%8B%A4-%EC%95%9E%EC%97%90-bearer--%EA%B0%80-%EB%B6%99%EC%9D%80-raw_token%EC%9C%BC%EB%A1%9C-%EA%B0%84%EC%A3%BC%ED%95%98%EA%B3%A0-split%ED%95%B4%EC%84%9C-token%EB%A7%8C-%EC%B7%A8%ED%95%9C-%EB%92%A4--jwtdecodekey-algorhitm%EC%9C%BC%EB%A1%9C-%EC%95%94%ED%98%B8%ED%99%94%EC%8B%9C-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8F%99%EC%9D%BC-key%EC%99%80-algo%EB%A1%9C-%EC%95%94%ED%98%B8%ED%99%94%ED%95%B4%EB%8F%85%ED%95%9C-token_information%EC%9D%84-%EC%B6%9C%EB%A0%A5%ED%95%B4%EB%B3%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>004 tokenì€ ì‚¬ì‹¤ ì•ì— <code class="language-plaintext highlighter-rouge">Bearer[ ] </code>ê°€ ë¶™ì€ raw_tokenìœ¼ë¡œ ê°„ì£¼í•˜ê³  splití•´ì„œ tokenë§Œ ì·¨í•œ ë’¤ , jwt.decode(,key=, algorhitm=)ìœ¼ë¡œ ì•”í˜¸í™”ì‹œ ì‚¬ìš©í•œ ë™ì¼ keyì™€ algoë¡œ ì•”í˜¸í™”í•´ë…í•œ token_informationì„ ì¶œë ¥í•´ë³¸ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">print</span><span class="p">(</span><span class="n">raw_token</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">token_information</span><span class="p">)</span>


    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span> <span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h5 id="ë‚˜ëŠ”-í•œì°¸ìˆë‹¤ê°€-í–ˆë”ë‹ˆ-post-routeì—ì„œ-ë°œê¸‰í•œ-token-expire--jwtexceptionsexpiredsignatureerorê°€-ë‚œë‹¤">
<a class="anchor" href="#%EB%82%98%EB%8A%94-%ED%95%9C%EC%B0%B8%EC%9E%88%EB%8B%A4%EA%B0%80-%ED%96%88%EB%8D%94%EB%8B%88-post-route%EC%97%90%EC%84%9C-%EB%B0%9C%EA%B8%89%ED%95%9C-token-expire--jwtexceptionsexpiredsignatureeror%EA%B0%80-%EB%82%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë‚˜ëŠ” í•œì°¸ìˆë‹¤ê°€ í–ˆë”ë‹ˆ.. POST routeì—ì„œ ë°œê¸‰í•œ token expire =&gt; jwt.exceptions.ExpiredSignatureErorê°€ ë‚œë‹¤</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230510842.png" alt="image-20221009230510842"></p>

<h5 id="ë‹¤ì‹œ-auth-post-routeì—ì„œ-í† í°ì„-ë°œê¸‰ìƒì„±í•˜ê³ -secret-get-routeì—ì„œ-í† í°-ê²€ì‚¬ë¥¼-í•´ë³´ì">
<a class="anchor" href="#%EB%8B%A4%EC%8B%9C-auth-post-route%EC%97%90%EC%84%9C-%ED%86%A0%ED%81%B0%EC%9D%84-%EB%B0%9C%EA%B8%89%EC%83%9D%EC%84%B1%ED%95%98%EA%B3%A0-secret-get-route%EC%97%90%EC%84%9C-%ED%86%A0%ED%81%B0-%EA%B2%80%EC%82%AC%EB%A5%BC-%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë‹¤ì‹œ /auth POST routeì—ì„œ í† í°ì„ ë°œê¸‰(ìƒì„±)í•˜ê³ , /secret GET routeì—ì„œ í† í° ê²€ì‚¬ë¥¼ í•´ë³´ì.</h5>

<ol>
  <li>
    <p>POSTMANì— ë‹¤ë¥¸ íƒ­ì„ ì“´ ë•íƒì— postì½”ë“œê°€ ë‚¨ì•„ìˆë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230653220.png" alt="image-20221009230653220"></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NjUzMjYxOTZ9.skUZSXEso8BILbzGWFk2BVWyEMhetZGSKLnOdaEmtvg
</code></pre></div>    </div>
  </li>
  <li>
    <p>í•´ë‹¹í† í°ì„ ë‹¤ì‹œ GETì—ì„œ ì‚¬ìš©ìê°€ headersì— ë‹´ì•„ì„œ ë³´ëƒˆë‹¤ê³  ê°€ì •í•˜ì.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230738952.png" alt="image-20221009230738952"></p>
  </li>
  <li>
    <p>ì˜ë“¤ì–´ì˜¤ë‹ˆ -&gt; <strong>decodeí•œ token ì¶œë ¥ì„ í™•ì¸í•´ë³´ì</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230803647.png" alt="image-20221009230803647"></p>
  </li>
</ol>

<h5 id="decodeí•œ-tokenì€-encodeí• ë•Œì˜-dictexpí¬í•¨ê°€-ê·¸ëŒ€ë¡œ-ì¶œë ¥ëœë‹¤">
<a class="anchor" href="#decode%ED%95%9C-token%EC%9D%80-encode%ED%95%A0%EB%95%8C%EC%9D%98-dictexp%ED%8F%AC%ED%95%A8%EA%B0%80-%EA%B7%B8%EB%8C%80%EB%A1%9C-%EC%B6%9C%EB%A0%A5%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>decodeí•œ tokenì€ encodeí• ë•Œì˜ dict(â€˜expâ€™í¬í•¨)ê°€ ê·¸ëŒ€ë¡œ ì¶œë ¥ëœë‹¤</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230839458.png" alt="image-20221009230839458"></p>

<h3 id="02-invalidí•œ-tokenë§‰í† í°-12ê°œ-ì§€ìš´-í† í°í•´ì„œ-getìš”ì²­í•´ë³´ê¸°">
<a class="anchor" href="#02-invalid%ED%95%9C-token%EB%A7%89%ED%86%A0%ED%81%B0-12%EA%B0%9C-%EC%A7%80%EC%9A%B4-%ED%86%A0%ED%81%B0%ED%95%B4%EC%84%9C-get%EC%9A%94%EC%B2%AD%ED%95%B4%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 invalidí•œ token(ë§‰í† í°, 1~2ê°œ ì§€ìš´ í† í°)í•´ì„œ GETìš”ì²­í•´ë³´ê¸°</h3>

<h4 id="001-error-ë§‰tokenì€-ê²€ì‚¬ì‹œ-jwtexceptionsdecodeerrorê°€-ë‚œë‹¤---ê·¼ë°-ë§‰í† í°ì„-ì˜¬ë¦´ì´-ì—†ë‹¤">
<a class="anchor" href="#001-error-%EB%A7%89token%EC%9D%80-%EA%B2%80%EC%82%AC%EC%8B%9C-jwtexceptionsdecodeerror%EA%B0%80-%EB%82%9C%EB%8B%A4---%EA%B7%BC%EB%8D%B0-%EB%A7%89%ED%86%A0%ED%81%B0%EC%9D%84-%EC%98%AC%EB%A6%B4%EC%9D%B4-%EC%97%86%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 [ERROR] ë§‰tokenì€ ê²€ì‚¬ì‹œ jwt.exceptions.DecodeErrorê°€ ë‚œë‹¤ -&gt; ê·¼ë° ë§‰í† í°ì„ ì˜¬ë¦´ì´ ì—†ë‹¤?</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009230941059.png" alt="image-20221009230941059"></p>

<h4 id="002-error-ì›ë˜-í† í°ì—ì„œ-12ê¸€ìë¥¼-ì§€ìš°ë©´-jwtexceptionsinvalidsignatureerrorê°€-ë‚œë‹¤">
<a class="anchor" href="#002-error-%EC%9B%90%EB%9E%98-%ED%86%A0%ED%81%B0%EC%97%90%EC%84%9C-12%EA%B8%80%EC%9E%90%EB%A5%BC-%EC%A7%80%EC%9A%B0%EB%A9%B4-jwtexceptionsinvalidsignatureerror%EA%B0%80-%EB%82%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 [ERROR] ì›ë˜ í† í°ì—ì„œ 1~2ê¸€ìë¥¼ ì§€ìš°ë©´, jwt.exceptions.InvalidSignatureErrorê°€ ë‚œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009231649576.png" alt="image-20221009231649576"></p>

<h5 id="error-ë§‰tokenë§ê³ -12ê¸€ìë¹ ì§„-tokeninvalid-tokenì„-if-not-tokenê³¼-ë™ì¼í•œ-498ë¡œ-ì¡ì">
<a class="anchor" href="#error-%EB%A7%89token%EB%A7%90%EA%B3%A0-12%EA%B8%80%EC%9E%90%EB%B9%A0%EC%A7%84-tokeninvalid-token%EC%9D%84-if-not-token%EA%B3%BC-%EB%8F%99%EC%9D%BC%ED%95%9C-498%EB%A1%9C-%EC%9E%A1%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[ERROR] ë§‰tokenë§ê³  1~2ê¸€ìë¹ ì§„ token(Invalid token)ì„ if not tokenê³¼ ë™ì¼í•œ 498ë¡œ ì¡ì</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">InvalidSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Invalid Token"</span>
        <span class="p">}),</span> <span class="mi">498</span>

</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009232258804.png" alt="image-20221009232258804"></p>

<h3 id="03-token-ë°œê¸‰-auth-post-routeì—ì„œ-ë°œê¸‰encodeì‹œ-expë¥¼-1ì´ˆë¡œí•´ì„œ-expireê´€ë ¨-ì—ëŸ¬-ì¡ê¸°">
<a class="anchor" href="#03-token-%EB%B0%9C%EA%B8%89-auth-post-route%EC%97%90%EC%84%9C-%EB%B0%9C%EA%B8%89encode%EC%8B%9C-exp%EB%A5%BC-1%EC%B4%88%EB%A1%9C%ED%95%B4%EC%84%9C-expire%EA%B4%80%EB%A0%A8-%EC%97%90%EB%9F%AC-%EC%9E%A1%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 token ë°œê¸‰ /auth POST routeì—ì„œ ë°œê¸‰(encode)ì‹œ expë¥¼ 1ì´ˆë¡œí•´ì„œ.. Expireê´€ë ¨ ì—ëŸ¬ ì¡ê¸°</h3>

<h4 id="001-post-ë°œê¸‰routeì—ì„œ-encodeì‹œ-expì˜-ê°’ì„-í˜„ì¬ì‹œê°„--timedeltaseconds1ë¡œ-ì¤˜ì„œ-ë¬´ì¡°ê±´-ë§Œë£Œëœ-ìƒíƒœë¥¼-ë§Œë‹¨ë‹¤">
<a class="anchor" href="#001-post-%EB%B0%9C%EA%B8%89route%EC%97%90%EC%84%9C-encode%EC%8B%9C-exp%EC%9D%98-%EA%B0%92%EC%9D%84-%ED%98%84%EC%9E%AC%EC%8B%9C%EA%B0%84--timedeltaseconds1%EB%A1%9C-%EC%A4%98%EC%84%9C-%EB%AC%B4%EC%A1%B0%EA%B1%B4-%EB%A7%8C%EB%A3%8C%EB%90%9C-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%A7%8C%EB%8B%A8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 POST ë°œê¸‰routeì—ì„œ encodeì‹œ â€˜expâ€™ì˜ ê°’ì„ í˜„ì¬ì‹œê°„ + timedelta(seconds=1)ë¡œ ì¤˜ì„œ ë¬´ì¡°ê±´ ë§Œë£Œëœ ìƒíƒœë¥¼ ë§Œë‹¨ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/auth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">authorize_user</span><span class="p">():</span>

    <span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">encode</span><span class="p">({</span>
        <span class="s">'exp'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'token'</span><span class="p">:</span> <span class="n">token</span>
    <span class="p">}),</span> <span class="mi">200</span>

</code></pre></div></div>

<h4 id="002-error-get-í™•ì¸-routeì—ì„œ-jwtexpiredsignatureerrorë¥¼-í† í°ì´-ì¡´ì¬í•˜ì§€-ì•Šì„-ë•Œì™€-ë™ì¼í•œ-401unauthorizedë¡œ-ì¡ëŠ”ë‹¤">
<a class="anchor" href="#002-error-get-%ED%99%95%EC%9D%B8-route%EC%97%90%EC%84%9C-jwtexpiredsignatureerror%EB%A5%BC-%ED%86%A0%ED%81%B0%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EC%A7%80-%EC%95%8A%EC%9D%84-%EB%95%8C%EC%99%80-%EB%8F%99%EC%9D%BC%ED%95%9C-401unauthorized%EB%A1%9C-%EC%9E%A1%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 [ERROR] GET í™•ì¸ routeì—ì„œ jwt.ExpiredSignatureErrorë¥¼ í† í°ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œì™€ ë™ì¼í•œ 401(Unauthorized)ë¡œ ì¡ëŠ”ë‹¤.</h4>

<ul>
  <li>êµ³ì´ ë‚´ìš©ë¬¼ì„ ì¶œë ¥í•´ì„œ í™•ì¸í•  í•„ìš”ì—†ë‹¤
    <ul>
      <li>POSTìš”ì²­ì‹œ ë°›ì•„ì„œ ë³µì‚¬ë§Œ í•´ë‘”ë‹¤.</li>
      <li>GETì—ì„œ ì¶œë ¥í–ˆë–¤ ê²ƒì€ headers ì† raw_token -&gt; tokenìœ¼ë¡œ splitì´ í•„ìš”í–ˆê¸° ë•Œë¬¸ì—</li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>
    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">InvalidSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Invalid Token"</span>
        <span class="p">}),</span> <span class="mi">498</span>

    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Unauthorized"</span>
        <span class="p">}),</span> <span class="mi">401</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span><span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h4 id="003-postmanì—ì„œ-post-1ì´ˆì§œë¦¬-ë°œê¸‰----get-expiredtoken401ì„-í™•ì¸í•œë‹¤">
<a class="anchor" href="#003-postman%EC%97%90%EC%84%9C-post-1%EC%B4%88%EC%A7%9C%EB%A6%AC-%EB%B0%9C%EA%B8%89----get-expiredtoken401%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 POSTMANì—ì„œ POST 1ì´ˆì§œë¦¬ ë°œê¸‰ -&gt;  GET ExpiredToken401ì„ í™•ì¸í•œë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009234345130.png" alt="image-20221009234345130"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009234406851.png" alt="image-20221009234406851"></p>

<h4 id="expiredtoken-ì—ëŸ´-ì¡ì•˜ìœ¼ë©´-ë‹¤ì‹œ-expë¥¼-30ë¶„ìœ¼ë¡œ-ëŒë ¤ë†“ì">
<a class="anchor" href="#expiredtoken-%EC%97%90%EB%9F%B4-%EC%9E%A1%EC%95%98%EC%9C%BC%EB%A9%B4-%EB%8B%A4%EC%8B%9C-exp%EB%A5%BC-30%EB%B6%84%EC%9C%BC%EB%A1%9C-%EB%8F%8C%EB%A0%A4%EB%86%93%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>expiredtoken ì—ëŸ´ ì¡ì•˜ìœ¼ë©´ ë‹¤ì‹œ expë¥¼ 30ë¶„ìœ¼ë¡œ ëŒë ¤ë†“ì</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009234718731.png" alt="image-20221009234718731"></p>

<h4 id="ì°¸ê³ --expired-token-ì´ì™¸ì—--498-invalid-tokenë„-401ìœ¼ë¡œ-ì¡ì•„ë„-ëœë‹¤">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0--expired-token-%EC%9D%B4%EC%99%B8%EC%97%90--498-invalid-token%EB%8F%84-401%EC%9C%BC%EB%A1%9C-%EC%9E%A1%EC%95%84%EB%8F%84-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ )  expired token ì´ì™¸ì— + 498 invalid tokenë„ 401ìœ¼ë¡œ ì¡ì•„ë„ ëœë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009234821737.png" alt="image-20221009234821737"></p>

<h2 id="4-agentì˜-tokenì™¸-userì˜-id-uidë„-ì¶”ê°€">
<a class="anchor" href="#4-agent%EC%9D%98-token%EC%99%B8-user%EC%9D%98-id-uid%EB%8F%84-%EC%B6%94%EA%B0%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>4 Agentì˜ tokenì™¸ userì˜ id (uid)ë„ ì¶”ê°€</h2>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009235215344.png" alt="image-20221009235215344"></p>

<h3 id="01-tokenë°œê¸‰-routeì—ì„œ-expì™¸ì—-ë°œê¸‰ìš”ì²­ìì˜-uidë¥¼-í¬í•¨í•´ì„œ-ë°œê¸‰">
<a class="anchor" href="#01-token%EB%B0%9C%EA%B8%89-route%EC%97%90%EC%84%9C-exp%EC%99%B8%EC%97%90-%EB%B0%9C%EA%B8%89%EC%9A%94%EC%B2%AD%EC%9E%90%EC%9D%98-uid%EB%A5%BC-%ED%8F%AC%ED%95%A8%ED%95%B4%EC%84%9C-%EB%B0%9C%EA%B8%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 tokenë°œê¸‰ routeì—ì„œ expì™¸ì— [ë°œê¸‰ìš”ì²­ìì˜ uid]ë¥¼ í¬í•¨í•´ì„œ ë°œê¸‰</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/auth'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">authorize_user</span><span class="p">():</span>

    <span class="n">token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">encode</span><span class="p">({</span>
        <span class="s">'exp'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
        <span class="s">'uid'</span><span class="p">:</span> <span class="mi">12</span>
    <span class="p">},</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'token'</span><span class="p">:</span> <span class="n">token</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h3 id="02-tokení™•ì¸-routeì—ì„œ-headersì—-authorizationì´ì™¸ì—-í˜„ì¬userì˜-tokení™•ì¸ìš”ì²­ìì˜-uidë„-êº¼ë‚´ì„œ-tokenë°œê¸‰ìì˜-uidì™€-ë¹„êµ">
<a class="anchor" href="#02-token%ED%99%95%EC%9D%B8-route%EC%97%90%EC%84%9C-headers%EC%97%90-authorization%EC%9D%B4%EC%99%B8%EC%97%90-%ED%98%84%EC%9E%ACuser%EC%9D%98-token%ED%99%95%EC%9D%B8%EC%9A%94%EC%B2%AD%EC%9E%90%EC%9D%98-uid%EB%8F%84-%EA%BA%BC%EB%82%B4%EC%84%9C-token%EB%B0%9C%EA%B8%89%EC%9E%90%EC%9D%98-uid%EC%99%80-%EB%B9%84%EA%B5%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 tokení™•ì¸ routeì—ì„œ, headersì— â€œAuthorizationâ€ì´ì™¸ì— í˜„ì¬userì˜ [tokení™•ì¸ìš”ì²­ìì˜ â€œuidâ€]ë„ êº¼ë‚´ì„œ [tokenë°œê¸‰ìì˜ uid]ì™€ ë¹„êµ</h3>

<h4 id="001-error-í˜„ì¬-ìš”ì²­ì‚¬ìš©ìì˜-uidë¥¼-headersì—ì„œ-êº¼ë‚¸ë‹¤-tokenì´-ì—†ëŠ”ê²ƒ-ì™¸ì—-uidê°€-ì—†ì–´ë„-400ì—ëŸ¬ë‹¤">
<a class="anchor" href="#001-error-%ED%98%84%EC%9E%AC-%EC%9A%94%EC%B2%AD%EC%82%AC%EC%9A%A9%EC%9E%90%EC%9D%98-uid%EB%A5%BC-headers%EC%97%90%EC%84%9C-%EA%BA%BC%EB%82%B8%EB%8B%A4-token%EC%9D%B4-%EC%97%86%EB%8A%94%EA%B2%83-%EC%99%B8%EC%97%90-uid%EA%B0%80-%EC%97%86%EC%96%B4%EB%8F%84-400%EC%97%90%EB%9F%AC%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 [ERROR] í˜„ì¬ ìš”ì²­ì‚¬ìš©ìì˜ uidë¥¼ headersì—ì„œ êº¼ë‚¸ë‹¤. tokenì´ ì—†ëŠ”ê²ƒ ì™¸ì— uidê°€ ì—†ì–´ë„ 400ì—ëŸ¬ë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>

    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"uid"</span><span class="p">)</span>

    <span class="c1"># if not raw_token:
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">uid</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>
</code></pre></div></div>

<h4 id="002-ë°œê¸‰ì‹œ-tokenì—-í¬í•¨ëœ-uidë¥¼--decodeëœ-token_informationì—ì„œ-êº¼ë‚´-ë³€ìˆ˜ë¡œ-ë°›ì•„ë†“ëŠ”ë‹¤">
<a class="anchor" href="#002-%EB%B0%9C%EA%B8%89%EC%8B%9C-token%EC%97%90-%ED%8F%AC%ED%95%A8%EB%90%9C-uid%EB%A5%BC--decode%EB%90%9C-token_information%EC%97%90%EC%84%9C-%EA%BA%BC%EB%82%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%86%93%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 ë°œê¸‰ì‹œ tokenì— í¬í•¨ëœ uidë¥¼  decodeëœ token_informationì—ì„œ êº¼ë‚´ ë³€ìˆ˜ë¡œ ë°›ì•„ë†“ëŠ”ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>

    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"uid"</span><span class="p">)</span>

    <span class="c1"># if not raw_token:
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">uid</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
        <span class="n">token_uid</span> <span class="o">=</span> <span class="n">token_information</span><span class="p">[</span><span class="s">"uid"</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="003-token-decodeê³¼ì •ì—ì„œ-ë°œìƒí•˜ëŠ”-ì˜ˆì™¸í†µê³¼ì‹œ-token_uid-vs-í˜„ì¬uidë¥¼-ë¹„êµí•˜ì—¬-ë‹¤ë¥¼ì‹œ-400ìœ¼ë¡œ-ì˜ˆì™¸ë¥¼-ì²˜ë¦¬í•œë‹¤í˜•ë³€í™˜í•´ì„œ-í™•ì¸">
<a class="anchor" href="#003-token-decode%EA%B3%BC%EC%A0%95%EC%97%90%EC%84%9C-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%98%88%EC%99%B8%ED%86%B5%EA%B3%BC%EC%8B%9C-token_uid-vs-%ED%98%84%EC%9E%ACuid%EB%A5%BC-%EB%B9%84%EA%B5%90%ED%95%98%EC%97%AC-%EB%8B%A4%EB%A5%BC%EC%8B%9C-400%EC%9C%BC%EB%A1%9C-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%B2%98%EB%A6%AC%ED%95%9C%EB%8B%A4%ED%98%95%EB%B3%80%ED%99%98%ED%95%B4%EC%84%9C-%ED%99%95%EC%9D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 token decodeê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸í†µê³¼ì‹œ, token_uid vs í˜„ì¬uidë¥¼ ë¹„êµí•˜ì—¬ ë‹¤ë¥¼ì‹œ, 400ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•œë‹¤(í˜•ë³€í™˜í•´ì„œ í™•ì¸)</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>

    <span class="c1">#...
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
        <span class="n">token_uid</span> <span class="o">=</span> <span class="n">token_information</span><span class="p">[</span><span class="s">"uid"</span><span class="p">]</span>

    <span class="c1">#...
</span>    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Unauthorized"</span>
        <span class="p">}),</span> <span class="mi">401</span>

    <span class="k">print</span><span class="p">(</span><span class="n">token_uid</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">token_uid</span><span class="p">),</span> <span class="n">uid</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">uid</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">token_uid</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"User not permissin"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s">'data'</span><span class="p">:</span> <span class="s">'Message secret'</span>
    <span class="p">}),</span> <span class="mi">200</span>
</code></pre></div></div>

<h4 id="tokenê´€ë ¨-í…ŒìŠ¤íŠ¸ëŠ”-í•­ìƒ-postë¡œ-ìƒˆë¡œ-ë°œê¸‰---ë³µì‚¬---getìœ¼ë¡œ-ì¸ì¦ìš”ì²­í•˜ì--ì—¥-not-uidì—-ê±¸ë ¤-401-ì—ëŸ¬ê°€-ë‚œë‹¤">
<a class="anchor" href="#token%EA%B4%80%EB%A0%A8-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-%ED%95%AD%EC%83%81-post%EB%A1%9C-%EC%83%88%EB%A1%9C-%EB%B0%9C%EA%B8%89---%EB%B3%B5%EC%82%AC---get%EC%9C%BC%EB%A1%9C-%EC%9D%B8%EC%A6%9D%EC%9A%94%EC%B2%AD%ED%95%98%EC%9E%90--%EC%97%A5-not-uid%EC%97%90-%EA%B1%B8%EB%A0%A4-401-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%82%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>tokenê´€ë ¨ í…ŒìŠ¤íŠ¸ëŠ” í•­ìƒ POSTë¡œ ìƒˆë¡œ ë°œê¸‰ -&gt; ë³µì‚¬ -&gt; GETìœ¼ë¡œ ì¸ì¦ìš”ì²­í•˜ì =&gt; ì—¥? not uidì— ê±¸ë ¤ 401 ì—ëŸ¬ê°€ ë‚œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012011997.png" alt="image-20221010012011997"></p>

<h3 id="03-uidëŠ”-authorizationê³¼-ë‹¬ë¦¬-postman-getìš”ì²­ì‹œ-headersì—-ì§ì ‘-ì¤˜ì•¼í•œë‹¤">
<a class="anchor" href="#03-uid%EB%8A%94-authorization%EA%B3%BC-%EB%8B%AC%EB%A6%AC-postman-get%EC%9A%94%EC%B2%AD%EC%8B%9C-headers%EC%97%90-%EC%A7%81%EC%A0%91-%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 uidëŠ” Authorizationê³¼ ë‹¬ë¦¬, POSTMAN GETìš”ì²­ì‹œ, Headersì— ì§ì ‘ ì¤˜ì•¼í•œë‹¤</h3>

<h4 id="001-getìš”ì²­ì‹œ-headersë¥¼-ë”°ë¡œ-ì¤€-ì ì´-ì—†ì—ˆëŠ”ë°-uidí…ŒìŠ¤íŠ¸ê°€-ì²˜ìŒì´ë‹¤">
<a class="anchor" href="#001-get%EC%9A%94%EC%B2%AD%EC%8B%9C-headers%EB%A5%BC-%EB%94%B0%EB%A1%9C-%EC%A4%80-%EC%A0%81%EC%9D%B4-%EC%97%86%EC%97%88%EB%8A%94%EB%8D%B0-uid%ED%85%8C%EC%8A%A4%ED%8A%B8%EA%B0%80-%EC%B2%98%EC%9D%8C%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 GETìš”ì²­ì‹œ Headersë¥¼ ë”°ë¡œ ì¤€ ì ì´ ì—†ì—ˆëŠ”ë° uidí…ŒìŠ¤íŠ¸ê°€ ì²˜ìŒì´ë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012140462.png" alt="image-20221010012140462"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012149063.png" alt="image-20221010012149063"></p>

<h4 id="002-í™•ì¸í•´ë³´ë‹ˆ-headers-ì†--uidëŠ”-stringìœ¼ë¡œ-tokenì†-ë°œê¸‰ì‹œ-ì§€ì •í•´ì¤€-uidëŠ”-intíƒ€ì…ì´ì—ˆë‹¤">
<a class="anchor" href="#002-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B3%B4%EB%8B%88-headers-%EC%86%8D--uid%EB%8A%94-string%EC%9C%BC%EB%A1%9C-token%EC%86%8D-%EB%B0%9C%EA%B8%89%EC%8B%9C-%EC%A7%80%EC%A0%95%ED%95%B4%EC%A4%80-uid%EB%8A%94-int%ED%83%80%EC%9E%85%EC%9D%B4%EC%97%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 í™•ì¸í•´ë³´ë‹ˆ, headers ì†  uidëŠ” stringìœ¼ë¡œ, tokenì† ë°œê¸‰ì‹œ ì§€ì •í•´ì¤€ uidëŠ” intíƒ€ì…ì´ì—ˆë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="n">token_uid</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">token_uid</span><span class="p">),</span> <span class="n">uid</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">uid</span><span class="p">))</span>
<span class="c1"># 12 &lt;class 'int'&gt; 12 &lt;class 'str'&gt;
</span></code></pre></div></div>

<h4 id="003-ë°œê¸‰ì‹œì™€-ë‹¤ë¥¸-uidë¥¼-headersì—-ë°•ì•„ì„œ-tokení™•ì¸ìš”ì²­-í•œë‹¤ë©´--token_uid-vs-uid-ë¹„êµì‹œ-ë‚´ëŠ”-user-not-permissionì´-ë‚˜ì™€ì•¼í•œë‹¤">
<a class="anchor" href="#003-%EB%B0%9C%EA%B8%89%EC%8B%9C%EC%99%80-%EB%8B%A4%EB%A5%B8-uid%EB%A5%BC-headers%EC%97%90-%EB%B0%95%EC%95%84%EC%84%9C-token%ED%99%95%EC%9D%B8%EC%9A%94%EC%B2%AD-%ED%95%9C%EB%8B%A4%EB%A9%B4--token_uid-vs-uid-%EB%B9%84%EA%B5%90%EC%8B%9C-%EB%82%B4%EB%8A%94-user-not-permission%EC%9D%B4-%EB%82%98%EC%99%80%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 ë°œê¸‰ì‹œì™€ ë‹¤ë¥¸ uidë¥¼ headersì— ë°•ì•„ì„œ tokení™•ì¸ìš”ì²­ í•œë‹¤ë©´?  token_uid vs uid ë¹„êµì‹œ ë‚´ëŠ” User not permissionì´ ë‚˜ì™€ì•¼í•œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012438559.png" alt="image-20221010012438559"></p>

<h3 id="04-ë˜ë‹¤ë¥¸-uidê´€ë ¨-ì—ëŸ¬-ì²˜ë¦¬---tokenìƒì„±ì‹œ-í•„ìˆ˜-dictk-keyì¸-uidë¥¼--ì—†ì´-ìƒì„±í•œ-ê²½ìš°">
<a class="anchor" href="#04-%EB%98%90%EB%8B%A4%EB%A5%B8-uid%EA%B4%80%EB%A0%A8-%EC%97%90%EB%9F%AC-%EC%B2%98%EB%A6%AC---token%EC%83%9D%EC%84%B1%EC%8B%9C-%ED%95%84%EC%88%98-dictk-key%EC%9D%B8-uid%EB%A5%BC--%EC%97%86%EC%9D%B4-%EC%83%9D%EC%84%B1%ED%95%9C-%EA%B2%BD%EC%9A%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 ë˜ë‹¤ë¥¸ uidê´€ë ¨ ì—ëŸ¬ ì²˜ë¦¬ -&gt; tokenìƒì„±ì‹œ í•„ìˆ˜ dictk-keyì¸ uidë¥¼,  ì—†ì´ ìƒì„±í•œ ê²½ìš°</h3>

<h4 id="001-headers-ì†-uidëŠ”-getìœ¼ë¡œ-êº¼ë‚´ê³ -ì—†ìœ¼ë©´-400ì—ëŸ¬ì˜€ë‹¤">
<a class="anchor" href="#001-headers-%EC%86%8D-uid%EB%8A%94-get%EC%9C%BC%EB%A1%9C-%EA%BA%BC%EB%82%B4%EA%B3%A0-%EC%97%86%EC%9C%BC%EB%A9%B4-400%EC%97%90%EB%9F%AC%EC%98%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>001 headers ì† uidëŠ” .get()ìœ¼ë¡œ êº¼ë‚´ê³  ì—†ìœ¼ë©´ 400ì—ëŸ¬ì˜€ë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012726664.png" alt="image-20221010012726664"></p>

<h4 id="002-ê·¸ëŸ¬ë‚˜-tokenì€--ë°œê¸‰postì‹œ-ë¬´ì¡°ê±´-uidë¥¼-ë„£ì€-ìƒíƒœë¡œ-encodingí•´ì•¼í•˜ë©°-í™•ì¸ìš”ì²­getì‹œ-token_infouidë¡œ-ê°•ì œë¡œ-keyë¥¼-êº¼ë‚¸ë‹¤">
<a class="anchor" href="#002-%EA%B7%B8%EB%9F%AC%EB%82%98-token%EC%9D%80--%EB%B0%9C%EA%B8%89post%EC%8B%9C-%EB%AC%B4%EC%A1%B0%EA%B1%B4-uid%EB%A5%BC-%EB%84%A3%EC%9D%80-%EC%83%81%ED%83%9C%EB%A1%9C-encoding%ED%95%B4%EC%95%BC%ED%95%98%EB%A9%B0-%ED%99%95%EC%9D%B8%EC%9A%94%EC%B2%ADget%EC%8B%9C-token_infouid%EB%A1%9C-%EA%B0%95%EC%A0%9C%EB%A1%9C-key%EB%A5%BC-%EA%BA%BC%EB%82%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>002 ê·¸ëŸ¬ë‚˜ tokenì€  ë°œê¸‰(POST)ì‹œ ë¬´ì¡°ê±´ uidë¥¼ ë„£ì€ ìƒíƒœë¡œ encodingí•´ì•¼í•˜ë©°, í™•ì¸ìš”ì²­(GET)ì‹œ token_info[â€œuidâ€]ë¡œ ê°•ì œë¡œ keyë¥¼ êº¼ë‚¸ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010012831765.png" alt="image-20221010012831765"></p>

<h4 id="003-error-í•„ìˆ˜ì ìœ¼ë¡œ-ìˆì–´ì•¼í• -dict-key-not-getì¸-uidê°€-tokenì—-ì—†ìœ¼ë©´-keyerrorë¡œ-ì¡ê³ -401-ì—ëŸ¬ë¥¼-ë‚¸ë‹¤-ì„ì˜ë¡œ-invalid-token2ë¡œ-ë©”ì„¸ì§€ë¥¼-ì¡ëŠ”ë‹¤">
<a class="anchor" href="#003-error-%ED%95%84%EC%88%98%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%A0-dict-key-not-get%EC%9D%B8-uid%EA%B0%80-token%EC%97%90-%EC%97%86%EC%9C%BC%EB%A9%B4-keyerror%EB%A1%9C-%EC%9E%A1%EA%B3%A0-401-%EC%97%90%EB%9F%AC%EB%A5%BC-%EB%82%B8%EB%8B%A4-%EC%9E%84%EC%9D%98%EB%A1%9C-invalid-token2%EB%A1%9C-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EC%9E%A1%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>003 [ERROR] í•„ìˆ˜ì ìœ¼ë¡œ ìˆì–´ì•¼í•  dict key( not .get())ì¸ uidê°€ tokenì— ì—†ìœ¼ë©´ KeyErrorë¡œ ì¡ê³  401 ì—ëŸ¬ë¥¼ ë‚¸ë‹¤. ì„ì˜ë¡œ â€œInvalid Token2â€ë¡œ ë©”ì„¸ì§€ë¥¼ ì¡ëŠ”ë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">api_routes_bp</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/secret"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"GET"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">secret_route</span><span class="p">():</span>

    <span class="n">raw_token</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"Authorization"</span><span class="p">)</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"uid"</span><span class="p">)</span>

    <span class="c1"># if not raw_token:
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">uid</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad Request"</span>
        <span class="p">}),</span> <span class="mi">400</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">raw_token</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">token_information</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s">'1234'</span><span class="p">,</span> <span class="n">algorithms</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
        <span class="n">token_uid</span> <span class="o">=</span> <span class="n">token_information</span><span class="p">[</span><span class="s">"uid"</span><span class="p">]</span>

    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">InvalidSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Invalid Token"</span>
        <span class="p">}),</span> <span class="mi">498</span>

    <span class="k">except</span> <span class="n">jwt</span><span class="p">.</span><span class="n">ExpiredSignatureError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Token expried"</span>
        <span class="p">}),</span> <span class="mi">401</span>
    <span class="k">except</span> <span class="nb">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
            <span class="s">"error"</span><span class="p">:</span> <span class="s">"Invalid Token2"</span>
        <span class="p">}),</span> <span class="mi">401</span>

</code></pre></div></div>

<h5 id="uidì—†ì´-í† í°ë°œê¸‰-errorë¥¼-ë‚´ë³´ê¸°-ìœ„í•´--post-routeì—ì„œ-ì„ì‹œë¡œ-uid-key-valueë¥¼-ì‚­ì œí•˜ê³ -í…ŒìŠ¤íŠ¸">
<a class="anchor" href="#uid%EC%97%86%EC%9D%B4-%ED%86%A0%ED%81%B0%EB%B0%9C%EA%B8%89-error%EB%A5%BC-%EB%82%B4%EB%B3%B4%EA%B8%B0-%EC%9C%84%ED%95%B4--post-route%EC%97%90%EC%84%9C-%EC%9E%84%EC%8B%9C%EB%A1%9C-uid-key-value%EB%A5%BC-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B3%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>uidì—†ì´ í† í°ë°œê¸‰ Errorë¥¼ ë‚´ë³´ê¸° ìœ„í•´,  POST routeì—ì„œ ì„ì‹œë¡œ uid key-valueë¥¼ ì‚­ì œí•˜ê³  í…ŒìŠ¤íŠ¸</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010013228176.png" alt="image-20221010013228176"></p>

<ul>
  <li>
    <p>POST</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010013246974.png" alt="image-20221010013246974"></p>
  </li>
  <li>
    <p>GET</p>

    <p>â€‹	<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010013310646.png" alt="image-20221010013310646"></p>
  </li>
</ul>

<h5 id="ë‹¤ì‹œ-ë°œê¸‰ì‹œ-uid-ë„£ì–´ì£¼ì">
<a class="anchor" href="#%EB%8B%A4%EC%8B%9C-%EB%B0%9C%EA%B8%89%EC%8B%9C-uid-%EB%84%A3%EC%96%B4%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë‹¤ì‹œ ë°œê¸‰ì‹œ uid ë„£ì–´ì£¼ì</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221010013340328.png" alt="image-20221010013340328"></p>

<h2 id="ì°¸ê³ ">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ </h2>

<ul>
  <li>
<a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Robert C. Martin (Uncle Bob)ì˜ Clean Code Blog</a>
    <ul>
      <li><a href="https://leanpub.com/clean-architectures-in-python">PDF-free-Clean Architectures in Python</a></li>
    </ul>
  </li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-Clean-Architecture-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 1í¸</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B02">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 2í¸</a></li>
  <li>
    <p><a href="https://testdriven.io/blog/fastapi-crud/#postgres-setup">fasapi vs flask</a></p>
  </li>
  <li>jsonapi ì˜ˆì œë¬¸ì„œ
    <ul>
      <li>https://jsonapi.org/format/#document-top-level</li>
      <li>https://jsonapi.org/format/#crud-creating-responses</li>
    </ul>
  </li>
  <li>vscode flask ë””ë²„ê¹… ì„¸íŒ… ë¬¸ì„œ
    <ul>
      <li>https://code.visualstudio.com/docs/python/debugging#_flask-debugging</li>
    </ul>
  </li>
</ul>

<h4 id="gitignore">
<a class="anchor" href="#gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>gitignore</h4>

<ul>
  <li>
    <p>gitì— commitë˜ì—ˆë˜ ê²ƒì„ ignoreí•˜ê³  ì‹¶ì„ ë•Œ</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rm [íŒŒì¼ëª…] --cached
</code></pre></div>    </div>
  </li>
  <li>
    <p>git amend</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git commit --amend --no-edit
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>console ë“±ì—ì„œ init importë¶€í„° ìƒê¸°ëŠ” pycacheí´ë”</li>
  <li>venv</li>
  <li>ì—°ìŠµìš© sqlite .dbíŒŒì¼</li>
  <li>pytestì‹œ ìƒê¸°ëŠ” .pytest_cache í´ë”</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h4 id="sqlalchemyíŒ¨í‚¤ì§€">
<a class="anchor" href="#sqlalchemy%ED%8C%A8%ED%82%A4%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>sqlalchemyíŒ¨í‚¤ì§€</h4>

<ul>
  <li>ì¼ë°˜ íŒ¨í‚¤ì§€: create_engine / ì¹¼ëŸ¼ì¬ë£Œë“¤</li>
  <li>.orm íŒ¨í‚¤ì§€:
    <ul>
      <li>
        <p>relatioship: 1:Mì—ì„œ 1ì— í•´ë‹¹í•˜ëŠ” tableì´ ë“¤ê³  ìˆëŠ” ê°€ì§œì¹¼ëŸ¼</p>
      </li>
      <li>
        <p>sessionmaker: handler class ì† enterì—ì„œ engineì„ ë¬¶ì–´ì„œ sessionì„ ë°˜í™˜í•´ì£¼ëŠ” ë†ˆ</p>
      </li>
      <li>
        <p>.orm.exc íŒ¨í‚¤ì§€</p>

        <ul>
          <li>
            <p><strong>NoResultFound</strong></p>

            <ul>
              <li>
                <p><strong>repoì—ì„œ</strong> pkë¡œ selectì‹œ .one()ìœ¼ë¡œ 1ê°œë§Œ ì°¾ì„ ë•Œ, ì—†ìœ¼ë©´ ë°œìƒí•˜ëŠ” ì˜ˆì™¸</p>
              </li>
              <li>
                <p>ë”°ë¡œ exceptë¥¼ ì¡ì•„ì„œ ë¹ˆlistë¥¼ ë°˜í™˜(selectëŠ” ì›ë˜ Listë°˜í™˜)</p>

                <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009023057244.png" alt="image-20221009023057244"></p>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>.exc íŒ¨í‚¤ì§€(exception):</p>

    <ul>
      <li>
        <p><strong>IntegrityError</strong>:</p>

        <ul>
          <li>
            <p><strong>adapterì—ì„œ ì²˜ë¦¬</strong>í•˜ë©° registerì‹œ unique key ì¤‘ë³µì‹œ ë‚˜ëŠ” ì—ëŸ¬</p>

            <ul>
              <li>
                <p>repoì—ì„œëŠ” ê·¸ëƒ¥ raiseë§Œ ì˜¬ë ¤ë†“ê³ , adapterì—ì„œ ì¡ë”ë¼</p>

                <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221009014640656.png" alt="image-20221009014640656"></p>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ê³„ì¸µë³„ ë³€ìˆ˜ì •ë¦¬
    <ul>
      <li>id : sqlalchemy -&gt; <strong>repo ì¸ìë¶€í„°ëŠ”</strong> fk_idë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">pk_id</code>
</li>
      <li>
        <p>name: sqlalchemy-&gt;repo-&gt;usecaseê¹Œì§€ëŠ” ê·¸ëƒ¥ name (ì„ íƒì¸ì ê°œë³„ë©”ì„œë“œì—by_name)-&gt; <strong>controller ì¸ìë¶€í„°ëŠ” ì™¸ë¶€ì—ì„  ë‹¤ë¥¸(pet)_nameë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">fk_name</code></strong></p>

        <ul>
          <li><strong>OneEntityì˜ ê²½ìš° ê·¸ëƒ¥ controllerì—ì„œë„ <code class="language-plaintext highlighter-rouge">name</code>ë§Œ</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>route ì¡°ì‹¬í•´ì•¼í•  ê²ƒ</strong></p>

    <ul>
      <li>
        <p>register routeëŠ” response.bodyì— controller response[â€œDataâ€]ì— ìˆë˜ <strong>DTOê°€ ë°˜í™˜</strong></p>
      </li>
      <li>
        <p><strong>find route</strong>ëŠ” response.bodyì— controller response[â€œDataâ€]ì— ìˆë˜ List<strong>EntityModelê°ì²´ ë°˜í™˜</strong>ë˜ë‹ˆ <strong>message ì‘ì„±ì‹œ enumí•„ë“œì— ëŒ€í•´ .valueê¹Œì§€ í•´ì„œ ë³´ë‚´ê¸°</strong></p>
      </li>
    </ul>
  </li>
  <li>
    <p>repo ì¡°ì‹¬í•´ì•¼í•  ê²ƒ</p>

    <ul>
      <li>
<strong>select repo</strong>ëŠ”
        <ul>
          <li>fkì— ëŒ€í•´ì„œëŠ” í•­ìƒ <strong>.all()ë¡œ ì¡°íšŒ</strong>í•´ì„œ <strong>ì—†ì–´ë„ ë¹ˆlistë°˜í™˜í•˜ë©° ì—ëŸ¬ì•ˆë‚¨</strong>
</li>
          <li><strong>pk or unique keyì— ëŒ€í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">.one()</code>ìœ¼ë¡œ ì¡°íšŒí•˜ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">ì—†ì„ ë•ŒëŠ” NoResultFound</code>ê°€ ë‚˜ë‹ˆ ì˜ˆì™¸ì²˜ë¦¬ í•„ìˆ˜</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">
<a class="anchor" href="#github%EC%97%90%EC%84%9C-br%EB%94%B0%EC%84%9C-%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</h4>

<h5 id="1-1-githubì—ì„œ-brìƒì„±--clone">
<a class="anchor" href="#1-1-github%EC%97%90%EC%84%9C-br%EC%83%9D%EC%84%B1--clone" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-1] githubì—ì„œ brìƒì„± ~ clone</h5>

<ol>
  <li>
    <p>githubì— ë“¤ì–´ê°€ì„œ <code class="language-plaintext highlighter-rouge">feat/~</code>ë¡œ ë¸Œëœì¹˜ ìƒì„±</p>
  </li>
  <li>
    <p>í•´ë‹¹ brë§Œ clone</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b [branch] [gitì£¼ì†Œ]
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">
<a class="anchor" href="#clone%ED%9B%84-%EC%B4%88%EA%B8%B0-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</h5>

<ol>
  <li>gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°
    <ul>
      <li>ì—†ìœ¼ë©´ config importí•´ì„œ Base + handler -&gt; get_enigne -&gt; bindí•œ ë‹¤ìŒ, create_all()í•´ì¤˜ì•¼í• ë“¯??</li>
    </ul>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<ol>
  <li>githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ pre-commit install ì§ì ‘ ì„¸íŒ…</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<ol>
  <li>vscode ì—´ê³  interpreter venvë¡œ ì§€ì •</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code .
</code></pre></div></div>

<h5 id="1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">
<a class="anchor" href="#1-2-%EC%9E%91%EC%97%85%EB%81%9D%EB%82%9C-br%EC%9D%98-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-%EC%83%88-%EC%9E%91%EC%97%85-br%EC%83%9D%EC%84%B1--%EB%B6%84%EA%B8%B0%EA%B2%8C%EC%8B%9C-%EC%B4%88%EA%B8%B0%EC%84%B8%ED%8C%85-%EB%98%90-%EC%95%88%ED%95%B4%EB%8F%84-%EB%90%98%EB%8A%94-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</h5>

<ol>
  <li>
    <p>í˜„ì¬ brë¥¼ í™•ì¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">branch</span>
<span class="o">*</span> <span class="n">feat</span><span class="o">/</span><span class="n">register_user_use_case</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>checkout -b</strong>ë¡œ ìƒˆ br ìƒì„±í•˜ì—¬ ì§„ì…í•˜ê¸°</p>

    <ul>
      <li>ì›ë˜ëŠ” githubì—ì„œ create branchí–ˆì—ˆìŒ.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout -b feat/generic_use_cases
   
git branch
   
* feat/generic_use_cases
  feat/register_user_use_case
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git push -u origin [branchëª…]ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ìƒˆë¡œìƒì„±í•œ brë¥¼ pushí•´ì„œ githubì— ìƒì„±í•˜ê¸°</code></strong></p>

    <ul>
      <li>vscodeì—ì„œëŠ” push -u origin [branch] ëŒ€ì‹   <strong><code class="language-plaintext highlighter-rouge">ë¶„ê¸°ê²Œì‹œ</code>ê°€ ëœ¬ë‹¤.</strong>
</li>
    </ul>
  </li>
  <li>
    <p>githubì—ì„œ <strong>ë¹ˆ ë¶„ê¸°ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°</strong></p>

    <ul>
      <li>githubì— mergeë˜ê¸° ìœ„í•´ì„œëŠ” <strong>ì§ì „ ì‘ì—…ì´í›„ <code class="language-plaintext highlighter-rouge">githubì— ìƒˆ ì‘ì—… brë¥¼ ë¨¼ì € ìƒì„±í•´ë†“ê³  ì‘ì—…</code>ì— ë“¤ì–´ê°€ì•¼í•œë‹¤</strong>
</li>
    </ul>
  </li>
</ol>

<h5 id="1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-pull---rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">
<a class="anchor" href="#1-3--%EC%98%9B%EB%82%A0%EC%97%90-%EB%94%B0%EB%91%94-br%EC%97%90%EC%84%9C-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%A0-%EB%95%90-%EC%B5%9C%EC%8B%A0-master%EB%A5%BC-pull---rebase%ED%9B%84%EC%97%90-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ pull -&gt; rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git checkout master</code>ë¥¼ í†µí•´ <strong>ì•ˆê°€ì ¸ì™€ì„œ ì•ˆë³´ì´ë˜ master</strong>ë¥¼ ë§Œë“ ë‹¤</p>

    <ul>
      <li>
<strong>-bì˜ ìƒˆë¡œë§Œë“  ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ</strong> remoteì™€ ì—°ê²°ëœ masterê°€ ëœë‹¤.</li>
      <li>
<code class="language-plaintext highlighter-rouge">git branch</code>ë¡œ í™•ì¸</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout master
   
git branch
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git pull</code>ë¡œ masterì— ìµœì‹  ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>rebaseë°›ì„ ì—…ëƒì•ˆëœ ì‘ì—…brë¡œ ë„˜ì–´ê°„ ë’¤, <code class="language-plaintext highlighter-rouge">matserì˜ ë‚´ìš©ì„ rebaseë¡œ ë°›ì•„ì˜¨ë‹¤</code></strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout [ì‘ì—…br]
   
git rebase master
   
git log --oneline
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="2-framework-ìˆë‹¤ë©´-venvì—-í™˜ê²½ë³€ìˆ˜-ì„¸íŒ…---vscode-ë””ë²„ê¹…-ì„¸íŒ…">
<a class="anchor" href="#2-framework-%EC%9E%88%EB%8B%A4%EB%A9%B4-venv%EC%97%90-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%B8%ED%8C%85---vscode-%EB%94%94%EB%B2%84%EA%B9%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>[2] framework ìˆë‹¤ë©´ venvì— í™˜ê²½ë³€ìˆ˜ ì„¸íŒ… -&gt; vscode ë””ë²„ê¹… ì„¸íŒ…</h5>

<ol>
  <li>
    <p>ë“±ë¡:</p>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">FLASK_APP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ì´ˆê¸°í™”ëœ appê°ì²´ë¥¼ importí•œ pythoníŒŒì¼ëª…"</span><span class="w">
</span><span class="c">#export FLASK_APP=íŒŒì¼ëª…</span><span class="w">
</span></code></pre></div>    </div>

    <ul>
      <li>powershellì€ íŒŒì¼ëª…ì€ â€œ â€œ í™•ì¥ìë¥¼ ëº€ ìŒë”°ì˜´í‘œë¡œ</li>
      <li><strong>ë³´í†µ appê°ì²´ importí•œ pythoníŒŒì¼ì€ <code class="language-plaintext highlighter-rouge">run</code>ì´ë¼ê³  ëª…ëª…í•˜ë©°, mainìœ¼ë¡œ app.runë„ ê°€ì§€ê³  ìˆë‹¤.</strong></li>
    </ul>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">FLASK_RUN_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8000</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>í™•ì¸</p>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>clië¡œ frameworkì‹¤í–‰</strong></p>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   flask run
</code></pre></div></div>

<ol>
  <li>
    <p><strong>vscodeì— F5ë¡œ ì‹¤í–‰ ë° ë””ë²„ê¹… ê°€ëŠ¥í•˜ê²Œ ì„¸íŒ…(.vscode/launch.json)</strong></p>

    <ol>
      <li>
        <p>vscode ì¢Œì¸¡ì— <code class="language-plaintext highlighter-rouge">ì‹¤í–‰ ë° ë””ë²„ê·¸</code>ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.</p>
      </li>
      <li>
        <p><strong>launch.json file</strong>ì„ ëˆ„ë¥´ê³  -&gt; python -&gt; python fileì„ ì„ íƒí•´ì„œ <strong>localì— <code class="language-plaintext highlighter-rouge">.vscode &gt; launch.json</code>ì„ ìƒì„±í•œë‹¤</strong></p>
      </li>
      <li>
        <p>vscode ë¬¸ì„œ &gt; python &gt; debugging &gt; <a href="https://code.visualstudio.com/docs/python/debugging#_flask-debugging">flask debugging</a>ì„ ì°¾ì•„ê°€ì„œ ì„¤ì •ì„ ë³µì‚¬í•´ì˜¨ë‹¤</p>

        <div class="language-json highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Python: Flask (development mode)"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"python"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flask"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"FLASK_APP"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app.py"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"FLASK_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"run"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"jinja"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
      
</span></code></pre></div>        </div>
      </li>
      <li>
        <p><strong>launch.json ë‚´ìš© ì¤‘ <code class="language-plaintext highlighter-rouge">configurations</code> ë‚´ë¶€ list value ì¤‘ 1ê°œë¡œ dictë¥¼ ë³µë¶™í•œë‹¤.</strong></p>
      </li>
      <li>
        <p><strong>FLASK_APPì— íŒŒì¼ëª…ì´ ì•„ë‹Œ pyí™•ì¥ìê¹Œì§€ ë‹¤ ì ì–´ì¤˜ì•¼í•œë‹¤. appê°ì²´ë¥¼ importí•˜ê³  ìˆëŠ” <code class="language-plaintext highlighter-rouge">run.py</code>ë¥¼ ëª…ì‹œí•´ì£¼ì</strong></p>
      </li>
      <li>
        <p>ë‹¤ì‹œí•œë²ˆ run and debug íƒ­ì„ ëˆ„ë¥´ê³  ì‹¤í–‰ì‹œí‚¨ë‹¤.</p>
      </li>
    </ol>
  </li>
</ol>

<ul>
  <li>F5 ì‹¤í–‰, shift+F5 ì¢…ë£Œ, ctrl + shilft + F5 ì¬ì‹¤í–‰</li>
</ul>

<ol>
  <li>
    <p>F9ë¡œ routeì˜ returnë¶€ë¶„ì„ break pointë¥¼ ì°ê³  -&gt; F5ë¡œ ì‹¤í–‰ìƒíƒœì—ì„œ -&gt; POSTMANìœ¼ë¡œ ì…ë ¥ì„ ì¤€ ë’¤ -&gt;break pointí™•ì¸ í›„ í™•ì¸ì´ ëë‚˜ë©´ -&gt; continue(F5) í•´ë³´ì.</p>
  </li>
  <li>
    <p>git commit</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>   improve: enabling debugger
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="3-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">
<a class="anchor" href="#3-%ED%95%B4%EB%8B%B9br-%EC%9E%91%EC%97%85%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%99%84%EB%A3%8C%ED%9B%84--merge%EA%B9%8C%EC%A7%80-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>[3] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</h5>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add .
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>
  </li>
</ol>

<ul>
  <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
</ul>

<ol>
  <li><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></li>
</ol>

<h4 id="vscode-ì„¤ì •">
<a class="anchor" href="#vscode-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>vscode ì„¤ì •</h4>

<ul>
  <li>ìºì‰¬íŒŒì¼ ì•ˆë³´ì´ê¸°</li>
</ul>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"**/__pycache__"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"**/.pytest_cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<ul>
  <li>
    <p>tabì‹œ spaceë¡œ ì…ë ¥ë˜ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001015405760.png" alt="image-20221001015405760"></p>
  </li>
  <li>
    <p>íƒìƒ‰ê¸° ì—´ê¸° ë‹¨ì¶•í‚¤ : <code class="language-plaintext highlighter-rouge">shift + alt + R</code></p>

    <ul>
      <li>íŒŒì¼: íŒŒì¼ íƒìƒ‰ê¸°ì— í‘œì‹œ</li>
    </ul>
  </li>
</ul>

<h4 id="testì •ë¦¬">
<a class="anchor" href="#test%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì •ë¦¬</h4>

<ol>
  <li>
    <p>repo_insert_X</p>

    <ol>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</li>
    </ol>
  </li>
  <li>
    <p>repo_select_X</p>
    <ol>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ol>
  </li>
</ol>

<h4 id="status_code">
<a class="anchor" href="#status_code" aria-hidden="true"><span class="octicon octicon-link"></span></a>status_code</h4>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">422</code>: validate_entryì‹¤íŒ¨í•˜ëŠ” query ì† paramë“¤ -&gt; usecaseë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ responseì˜ [â€œSuccessâ€]ê°€ False</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">í•„ìˆ˜param</code>(dictì† í•„ë“œ)ì´ ë¹ ì¡Œì„ ê²½ìš°(ì¡´ì¬ê²€ì¦) or í•„ìˆ˜paramì´ <code class="language-plaintext highlighter-rouge">validate_entryì‹¤íŒ¨</code>í•  ê²½ìš° -&gt; <code class="language-plaintext highlighter-rouge">response("Success"/"Data")ì˜ "Success"ê°€ False</code></strong></p>

        <ul>
          <li>
            <p>use_case_controller</p>

            <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">reponse</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">400</code>: queryì† paramë“¤ì´ í•„ìš”í•œ controllerì¸ë° http_requestì•ˆì— ì•„ì˜ˆ ì¡´ì¬ë„ ì•ˆí–ˆë‹¤ë©´, 400 Bad Requestì—ëŸ¬ + í•„ìˆ˜param(id)ì˜ í˜•ë³€í™˜ ì‹¤íŒ¨ì‹œ</p>

    <ul>
      <li>
        <p><strong>GETìš”ì²­ì— ëŒ€í•´ http_requestì— í•„ìˆ˜paramì„ í¬í•¨í•œ .query or .bodyê°€ ì•„ì˜ˆ ë‚ ë¼ì˜¤ì§€ë„ ì•Šì•˜ì„ ê²½ìš°</strong></p>

        <ul>
          <li>
            <p>use_case_controller</p>

            <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
	<span class="c1"># if query
# if not query
</span><span class="k">else</span><span class="p">:</span>
</code></pre></div>            </div>

            <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">body</span><span class="p">:</span>
	<span class="c1"># if body
# if not body
</span><span class="k">else</span><span class="p">:</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>GETìš”ì²­(request.args.to_dict())ì— ëŒ€í•´ í•„ìˆ˜param(id)ì˜ í˜•ë³€í™˜ì„ ì‹¤íŒ¨í–ˆì„ ë•Œ</strong></p>

        <ul>
          <li>
            <p>flask_adapter</p>

            <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="n">query_string_params</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">args</span><span class="p">.</span><span class="n">to_dict</span><span class="p">()</span>
       
    <span class="k">if</span> <span class="s">"pet_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">query_string_params</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">query_string_params</span><span class="p">[</span><span class="s">"pet_id"</span><span class="p">])</span>
       
    <span class="k">if</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">query_string_params</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">query_string_params</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">])</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_400</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
        <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
    <span class="p">)</span>
       
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">409</code>:  íƒ€ê²Ÿ ìì›ì— ìƒíƒœì— ìš”ì²­ì´ conflictë¥¼ ìœ ë°œí•œ ê²½ìš°</p>

    <ul>
      <li>
        <p><strong>register(insert) POST ìš”ì²­ì— ëŒ€í•´ unique key(name)ì´ ì¤‘ë³µëœ sendê°€ ë‚ ì•„ì™€, dbì—ì„œ unique constraint == ì¤‘ë³µì—ëŸ¬(IntegrityError)ë¥¼ ë°œìƒí•œ ê²½ìš°</strong></p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>POSTMANDì—ì„œ ìƒì„±ìš”ì²­ì„ ê°™ì€nameë¥¼ ê°€ì§„ bodyë¡œ 2ë²ˆ ìš”ì²­í–ˆì„ ë•Œ
</code></pre></div>        </div>

        <ul>
          <li>
            <p>flask_adapter</p>

            <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api_route</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="n">http_request</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_409</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
        <span class="p">)</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h4 id="powershell-í™˜ê²½ë³€ìˆ˜-ë“±ë¡í™•ì¸">
<a class="anchor" href="#powershell-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EB%93%B1%EB%A1%9D%ED%99%95%EC%9D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>powershell í™˜ê²½ë³€ìˆ˜ ë“±ë¡/í™•ì¸</h4>

<ul>
  <li>pythonê°€ìƒí™˜ê²½ venvì—ì„œ activatedí•œ ìƒíƒœë¡œ ì ìš©
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">venv\Scripts\activate.ps1</code>ì— ì €ì¥ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>ë“±ë¡:</p>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">FLASK_APP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"hello"</span><span class="w">
</span></code></pre></div>    </div>

    <ul>
      <li>íŒŒì¼ëª…ì€ â€œ â€œ í™•ì¥ìë¥¼ ëº€ ìŒë”°ì˜´í‘œë¡œ</li>
    </ul>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">FLASK_RUN_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8000</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>í™•ì¸</p>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">Format-Table</span><span class="w"> </span><span class="nt">-Wrap</span><span class="w">
</span></code></pre></div>    </div>

    <div class="language-powershell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c">## 'LOGONSERVER' í™˜ê²½ë³€ìˆ˜ë¥¼ ì°¾ê³  ì‹¶ë‹¤ë©´,</span><span class="w">
</span><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:LOGONSERVER</span><span class="w">
   
</span><span class="c">## 'on'ì´ í¬í•¨ëœ ë‹¨ì–´, ex) logONserver, ONedrive...</span><span class="w">
</span><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:</span><span class="o">*</span><span class="nx">on</span><span class="o">*</span><span class="w">
   
</span><span class="c">## 'on'ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´, ONedrive ...</span><span class="w">
</span><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:on</span><span class="o">*</span><span class="w">
   
</span><span class="c">## 'on'ìœ¼ë¡œ ëë‚˜ëŠ” ë‹¨ì–´, ex) processor_revisiON ...</span><span class="w">
</span><span class="nf">Get-ChildItem</span><span class="w"> </span><span class="nx">Env:</span><span class="o">*</span><span class="nx">on</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ol>


  </div><a class="u-url" href="/python/flask/cleanarchitecture/2022/09/11/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_11_jwt_auth_1_%EA%B8%B0%EB%B3%B8_token%EB%B0%9C%ED%96%89%EB%B0%8F%EA%B2%80%EC%82%AC%ED%9B%84_uid%ED%99%95%EC%9D%B8%EB%B0%8F%EA%B2%80%EC%82%AC.html" hidden></a>
</article>


<!-- <script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>í‰ë²”í•œ í•œì˜ì‚¬ ëŒë²”ì˜ ì—”ì§€ë‹ˆì–´ ë„ì „ê¸°</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
