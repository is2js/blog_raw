<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>í´ë¦°ì•„í‚¤í…ì³ 01 í™˜ê²½ì„¤ì •ê³¼ infra, domain, data_layer | ëŒë²”í…¤ë†‘</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="í´ë¦°ì•„í‚¤í…ì³ 01 í™˜ê²½ì„¤ì •ê³¼ infra, domain, data_layer" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="python clean architecture" />
<meta property="og:description" content="python clean architecture" />
<link rel="canonical" href="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/01/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_01_infra_domain_data_layer.html" />
<meta property="og:url" content="blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/01/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_01_infra_domain_data_layer.html" />
<meta property="og:site_name" content="ëŒë²”í…¤ë†‘" />
<meta property="og:image" content="blog.chojaeseong.com/images/posts/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-01T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-09-01T00:00:00-05:00","url":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/01/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_01_infra_domain_data_layer.html","@type":"BlogPosting","image":"blog.chojaeseong.com/images/posts/python.png","headline":"í´ë¦°ì•„í‚¤í…ì³ 01 í™˜ê²½ì„¤ì •ê³¼ infra, domain, data_layer","dateModified":"2022-09-01T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/01/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_01_infra_domain_data_layer.html"},"description":"python clean architecture","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- í°íŠ¸ì¶”ê°€ë¥¼ ìœ„í•œ linkíƒœê·¸ ì‚½ì… -->
  <!-- í°íŠ¸1:  ê¸°ë³¸ spoqa ì›¹í°íŠ¸ -->
  <!-- cssì—ì„œ * {} ë‹¤ ë’¤ì§‘ì–´ì”€. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- í°íŠ¸2:  ë¸”ë¡œê·¸ ì œëª©ë“¤ sunflower ì›¹í°íŠ¸ -->
  <!-- ì¥¬í”¼í„° ë“± í¬ìŠ¤íŠ¸ ë‚´ë¶€ ê¸€ì h1, h2 ì œëª©ì€ sunflowerì²´ ë„ì… -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="blog.chojaeseong.com/feed.xml" title="ëŒë²”í…¤ë†‘" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ëŒë²”í…¤ë†‘</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">í´ë¦°ì•„í‚¤í…ì³ 01 í™˜ê²½ì„¤ì •ê³¼ infra, domain, data_layer</h1><p class="page-description">python clean architecture</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-01T00:00:00-05:00" itemprop="datePublished">
        Sep 1, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      31 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#flask">flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cleanarchitecture">cleanarchitecture</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- tocê°€ ë¨¼ì € ë‚˜ì˜¤ë¯€ë¡œ h3ë¡œ ì•ˆë‚´í•˜ê¸° -->
    <h3>ğŸ“œ ì œëª©ìœ¼ë¡œ ë³´ê¸°</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#í´ë¦°-ì•„í‚¤í…ì³">í´ë¦° ì•„í‚¤í…ì³</a>
<ul>
<li class="toc-entry toc-h2"><a href="#1-ë°ì´í„°ë² ì´ìŠ¤-ë°-ì¸í”„ë¼-ê³„ì¸µ">1 ë°ì´í„°ë² ì´ìŠ¤ ë° ì¸í”„ë¼ ê³„ì¸µ</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-í™˜ê²½-ì„¸íŒ…pylink-flake8-pre-commit">01 í™˜ê²½ ì„¸íŒ…(pylink, flake8, pre-commit)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#pre-commitì—ì„œ-window-linux-ëª¨ë‘-ì‘ë™í•˜ëŠ”-requirements-hookë§Œë“¤ê¸°">pre-commitì—ì„œ window, linux ëª¨ë‘ ì‘ë™í•˜ëŠ” requirements hookë§Œë“¤ê¸°</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-src-infra-í´ë”-ì„¸íŒ…">02 src, infra í´ë” ì„¸íŒ…</a></li>
<li class="toc-entry toc-h3"><a href="#03-configì„¤ì •">03 configì„¤ì •</a>
<ul>
<li class="toc-entry toc-h4"><a href="#03-1-db_config--db_base-ì„¤ì •sqlalchemy">03-1 db_config + db_base ì„¤ì •(sqlalchemy)</a></li>
<li class="toc-entry toc-h4"><a href="#03-2-configì˜-initpyì—-ê°™ì´-importë -ëª¨ë“ˆë“¤-handlerdb_config-basedb_base-ì˜¬ë ¤ë†“ê¸°">03-2 configì˜ init.pyì— ê°™ì´ importë  ëª¨ë“ˆë“¤ handler(db_config), Base(db_base) ì˜¬ë ¤ë†“ê¸°</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-entities-ì„¤ì •-ë°-ìƒì„±">04 entities ì„¤ì • ë° ìƒì„±</a>
<ul>
<li class="toc-entry toc-h4"><a href="#04-1-entityí´ë”-ë°-íŒŒì¼-ìƒì„±">04-1 entityí´ë” ë° íŒŒì¼ ìƒì„±</a></li>
<li class="toc-entry toc-h4"><a href="#04-2-ê°-entityíŒŒì¼ë³„-sqlaì¬ë£Œë“¤--ì„ ì–¸í›„-configê°€-ì˜¬ë ¤ë†“ì€-ê²ƒ-ì¤‘-1ê°œì¸-base-class-ì‚¬ìš©í•˜ê¸°">04-2 ê° entityíŒŒì¼ë³„, sqlaì¬ë£Œë“¤ + ì„ ì–¸í›„ Configê°€ ì˜¬ë ¤ë†“ì€ ê²ƒ ì¤‘ 1ê°œì¸ Base class ì‚¬ìš©í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#userspy">users.py</a></li>
<li class="toc-entry toc-h5"><a href="#petspy">pets.py</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#04-3-entitiesì˜-initpyì—-ê°™ì´-importë -ëª¨ë“ˆentityë“¤-ì˜¬ë ¤ë†“ê¸°">04-3 entitiesì˜ init.pyì— ê°™ì´ importë  ëª¨ë“ˆ(entity)ë“¤ ì˜¬ë ¤ë†“ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#1m-entity-í•„ë“œ-ì •ë¦¬1relationshiporm-mforeignkey">1:M entity í•„ë“œ ì •ë¦¬(1:relationship(orm), M:ForeignKey)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#05-python-consoleì—ì„œ-config---entities-2ê°œ-ëª¨ë“ˆë¡œ-dbì—°ê²°-ë°-tableìƒì„±">05 python consoleì—ì„œ config  + entities 2ê°œ ëª¨ë“ˆë¡œ DBì—°ê²° ë° tableìƒì„±</a>
<ul>
<li class="toc-entry toc-h4"><a href="#my-ipythonì„¤ì¹˜í•˜ì—¬-consoleì—-ìë™ì™„ì„±">my) ipythonì„¤ì¹˜í•˜ì—¬ consoleì— ìë™ì™„ì„±</a></li>
<li class="toc-entry toc-h4"><a href="#from-srcinfraconfig-import-">from src.infra.config import *</a></li>
<li class="toc-entry toc-h4"><a href="#from-srcinfraentities-import--ê¹Œì§€í•˜ê³ -base--engineìœ¼ë¡œ-db-ìƒì„±">from src.infra.entities import * ê¹Œì§€í•˜ê³  Base + engineìœ¼ë¡œ DB ìƒì„±</a></li>
<li class="toc-entry toc-h4"><a href="#í…ŒìŠ¤íŠ¸ìš©-sqlitedbíŒŒì¼ì€-ignoreì—-ë“±ë¡í•´ì£¼ê¸°-í›„-commití–ˆì—ˆë‹¤ë©´-cacheì œê±°í•´ì£¼ê¸°">í…ŒìŠ¤íŠ¸ìš© sqlite.dbíŒŒì¼ì€ ignoreì— ë“±ë¡í•´ì£¼ê¸° í›„ commití–ˆì—ˆë‹¤ë©´ cacheì œê±°í•´ì£¼ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#git-ê¸°ì¡´-commitì—-ì²˜ë¦¬-ì¶”ê°€-add--í›„-commit-amend-no-edit">(git) ê¸°ì¡´ commitì— ì²˜ë¦¬ ì¶”ê°€: add . í›„ commit â€“amend â€“no-edit</a></li>
<li class="toc-entry toc-h4"><a href="#1m-ê´€ê³„í™•ì¸">1:M ê´€ê³„í™•ì¸</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#06-dbì—°ê²°-í›„-engineë§Œdbìƒì„±ê°€ëŠ¥-ì†Œìœ í•˜ë˜--dbconnecthandlerë¥¼-crudë¥¼-ìœ„í•œ-sessionì†Œìœ -context-managerí™”">06 (DBì—°ê²° í›„) engineë§Œ(DBìƒì„±ê°€ëŠ¥) ì†Œìœ í•˜ë˜  DBConnectHandlerë¥¼ CRUDë¥¼ ìœ„í•œ sessionì†Œìœ  context managerí™”</a>
<ul>
<li class="toc-entry toc-h4"><a href="#ì°¸ê³ -testpyë¡œ-context-manageê°€-ì•„ë‹ˆë©´-ì§ì ‘-closeí•´ì•¼í•˜ëŠ”-ë²ˆê±°ë¡œì›€">ì°¸ê³ ) test.pyë¡œ context manageê°€ ì•„ë‹ˆë©´ ì§ì ‘ closeí•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€</a></li>
<li class="toc-entry toc-h4"><a href="#dbconnectionhandlerì—-enterexit-ì •ì˜í•´ì£¼ê¸°">DBConnectionHandlerì— enter/exit ì •ì˜í•´ì£¼ê¸°</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#07-repo-ì„¤ì •-ë°-fakepyrepo-ìƒì„±í•˜ê¸°">07 repo ì„¤ì • ë° fake.py(Repo) ìƒì„±í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#08-ì„¤ì •ì™„ë£Œëœ-í”„ë¡œì íŠ¸ë¥¼-pushí›„-ì‘ì—…í• -brì„-ë”´-ë’¤-localì›ë³¸ë ˆí¬ì‚­ì œdbì±™ê¸°ê¸°-í›„-íŠ¹ì •ë¸Œëœì¹˜ë§Œ-cloneí•˜ì—¬-ê°œë³„ì‘ì—…í•˜ê¸°">08 ì„¤ì •ì™„ë£Œëœ í”„ë¡œì íŠ¸ë¥¼ pushí›„ ì‘ì—…í•  brì„ ë”´ ë’¤, localì›ë³¸ë ˆí¬ì‚­ì œ(.dbì±™ê¸°ê¸°) í›„ íŠ¹ì •ë¸Œëœì¹˜ë§Œ cloneí•˜ì—¬ ê°œë³„ì‘ì—…í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-ì„¤ì •ì´-ëë‚œ-projectë¥¼-pushí•˜ê³ -upstreamìœ¼ë¡œ-ê°„ì£¼í•˜ë©°-ì‘ì—…branchë¥¼-ë¯¸ë¦¬-ë”°ë†“ëŠ”ë‹¤">01 ì„¤ì •ì´ ëë‚œ projectë¥¼ pushí•˜ê³  upstreamìœ¼ë¡œ ê°„ì£¼í•˜ë©°, ì‘ì—…branchë¥¼ ë¯¸ë¦¬ ë”°ë†“ëŠ”ë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#02-brìƒì„±ëœ-repoë¥¼-pullí•´ì„œ-checkoutí•´ì„œ-ì²˜ë¦¬í•˜ì§€ë§ê³ -prì„-ì‚¬ìš©í•˜ê¸°-ìœ„í•´-ì›ë³¸repoëŠ”-ë‚¨ê²¨ë‘ê³ -ë‚¨ì˜repoë©´-forkí›„-ë¸Œëœì¹˜ë‹¨ìœ„ë¡œ--b-cloneí•´ì„œ-ì‘ì—…í›„-prë¡œ-ëë‚´ê¸°">02 brìƒì„±ëœ repoë¥¼ pullí•´ì„œ checkoutí•´ì„œ ì²˜ë¦¬í•˜ì§€ë§ê³ , PRì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´, ì›ë³¸repoëŠ” ë‚¨ê²¨ë‘ê³  (ë‚¨ì˜repoë©´ forkí›„) ë¸Œëœì¹˜ë‹¨ìœ„ë¡œ -b cloneí•´ì„œ ì‘ì—…í›„ PRë¡œ ëë‚´ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#03-cloneë°›ê³ -ë°±ì—…db-ë„£ì–´ì¤€-í´ë”ì—-ê°€ìƒí™˜ê²½-ìƒì„±---requirementstxt-ì„¤ì¹˜---pre-commit-installê¹Œì§€">03 cloneë°›ê³  ë°±ì—…db ë„£ì–´ì¤€ í´ë”ì— ê°€ìƒí™˜ê²½ ìƒì„± -&gt; requirements.txt ì„¤ì¹˜ -&gt; pre-commit installê¹Œì§€</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#2-repositoryì™€-pytest">2 Repositoryì™€ PyTest</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-user-repository-ì‘ì„±">01 User Repository ì‘ì„±</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-repositoryëŠ”-configì˜-handlerì™€-entitiesì˜-entityë¥¼-ê¸°ë³¸ì ìœ¼ë¡œ-import">01 repositoryëŠ” configì˜ handlerì™€ entitiesì˜ entityë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ import</a></li>
<li class="toc-entry toc-h4"><a href="#02--pytestë¥¼-ìœ„í•´-user_repository_testpyë¥¼-ì‘ì„±í•œë‹¤">02  pytestë¥¼ ìœ„í•´, user_repository_test.pyë¥¼ ì‘ì„±í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#03-pytest--fakerë¥¼-ì„¤ì¹˜í•˜ê³ -_testpyì—ì„œ-ì‚¬ìš©í•œë‹¤">03 pytest + fakerë¥¼ ì„¤ì¹˜í•˜ê³  _test.pyì—ì„œ ì‚¬ìš©í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#04-pytestëŠ”-í„°ë¯¸ë„ì—ì„œ-ëŒë¦°ë‹¤">04 pytestëŠ” í„°ë¯¸ë„ì—ì„œ ëŒë¦°ë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#pytestì˜-ê²°ê³¼-pytest_cacheí´ë”ê°€-ì¶”ê°€ë˜ë‹ˆ-gitignoreì—-í´ë”ë¥¼-ì¶”ê°€í•œë‹¤">pytestì˜ ê²°ê³¼ .pytest_cacheí´ë”ê°€ ì¶”ê°€ë˜ë‹ˆ gitignoreì— í´ë”ë¥¼ ì¶”ê°€í•œë‹¤</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-_testpyì—ì„œ-createinsert-ë©”ì„œë“œ-í…ŒìŠ¤íŠ¸">02 _test.pyì—ì„œ CREATE(insert) ë©”ì„œë“œ í…ŒìŠ¤íŠ¸</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-ì›ë³¸ë©”ì„œë“œ-ë‚´ë¶€ì—ì„œ-í™•ì¸í• -ìƒì„±-ë°ì´í„°ë¥¼-namedtupleë¶ˆë³€í´ë˜ìŠ¤ì˜-ê°ì²´ë¡œ-ìƒì„±í•´ì„œ-ë°˜í™˜í•œë‹¤">01 ì›ë³¸ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ í™•ì¸í•  ìƒì„± ë°ì´í„°ë¥¼ namedTuple(ë¶ˆë³€í´ë˜ìŠ¤)ì˜ ê°ì²´ë¡œ ìƒì„±í•´ì„œ, ë°˜í™˜í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#02-testë©”ì„œë“œì—ì„œëŠ”-returnë¬¼ì„-ë°›ì•„-printí•œë‹¤">02 testë©”ì„œë“œì—ì„œëŠ” returnë¬¼ì„ ë°›ì•„ printí•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#03-pytestì—ì„œëŠ”--v---sì˜µì…˜ì„-ê°€í•œë‹¤">03 pytestì—ì„œëŠ” -v + -sì˜µì…˜ì„ ê°€í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#04-namedtupleì˜-typenameì„-entityì™€-ë™ì¼í•˜ê²Œ-ì¤€-ê²ƒì˜-ì¥ì ì„-ì‚´ë ¤-insertë©”ì„œë“œì˜-return-type-ëª…ì‹œ-ë°-docstringë„-ìˆ˜ì •í•´ì¤€ë‹¤">04 namedTupleì˜ typenameì„ entityì™€ ë™ì¼í•˜ê²Œ ì¤€ ê²ƒì˜ ì¥ì ì„ ì‚´ë ¤, insertë©”ì„œë“œì˜ return type ëª…ì‹œ ë° docstringë„ ìˆ˜ì •í•´ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#05-handlerì˜-engine---execute-sql-queryë¥¼-ì´ìš©í•´ì„œ-ìƒì„±ëœ-ë°ì´í„°ë¥¼-printì—†ì´-dbë°ì´í„°ë¡œ-í•„ë“œë¼ë¦¬-assertë¡œ-ë¹„êµí•œë‹¤">05 handlerì˜ engine -&gt; execute sql queryë¥¼ ì´ìš©í•´ì„œ, ìƒì„±ëœ ë°ì´í„°ë¥¼ printì—†ì´ DBë°ì´í„°ë¡œ í•„ë“œë¼ë¦¬ assertë¡œ ë¹„êµí•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#ìƒì„±---sqlë¡œ-ë¡œë“œ---ë¹„êµ-ì „-dbì†-ë°ì´í„°ëŠ”-sqlë¡œ-ì‚­ì œê¹Œì§€-í•´ì¤€ë‹¤">ìƒì„± -&gt; sqlë¡œ ë¡œë“œ -&gt; ë¹„êµ ì „ dbì† ë°ì´í„°ëŠ” sqlë¡œ ì‚­ì œê¹Œì§€ í•´ì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-pre-commit-ì„¤ì •ì—-pytest-ì¶”ê°€í•˜ê¸°">03 pre-commit ì„¤ì •ì— pytest ì¶”ê°€í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#04-upstreamë‚´êº¼ë¼ë©´-remoteì—-pushí•´ì„œ-í•´ë‹¹-ì‘ì—…brë¥¼-í™•ì¸í•œë‹¤">04 upstream(ë‚´êº¼ë¼ë©´ remote)ì— pushí•´ì„œ í•´ë‹¹ ì‘ì—…brë¥¼ í™•ì¸í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#3-domain-layer-ë°-models-use_cases-ê°œë°œ">3 Domain layer ë° models, use_cases ê°œë°œ</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-src-domain--models-use_cases-ëª¨ë“ˆ-ìƒì„±">01 src&gt; domain &gt; models, use_cases ëª¨ë“ˆ ìƒì„±</a></li>
<li class="toc-entry toc-h3"><a href="#02-repositoryì—-ìˆë˜-namedtupleusersë¥¼-domain--modelsuserspyë¡œ-ì˜®ê¸°ê³ -users-entityëŠ”-usersmodelë¡œ-ì·¨ê¸‰í•˜ê¸°">02 repositoryì— ìˆë˜ namedTuple(â€œUsersâ€)ë¥¼ domain &gt; models&gt;users.pyë¡œ ì˜®ê¸°ê³ , Users entityëŠ” UsersModelë¡œ ì·¨ê¸‰í•˜ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#03-select_userselectë©”ì„œë“œë¥¼-ê°ì²´ê°€-ë¶€ë¥´ëŠ”-staticë©”ì„œë“œì¸-classmethodë¡œ-ì •ì˜">03 select_user(SELECT)ë©”ì„œë“œë¥¼ ê°ì²´ê°€ ë¶€ë¥´ëŠ” staticë©”ì„œë“œì¸ @classmethodë¡œ ì •ì˜</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-selectì˜-ê²°ê³¼ëŠ”-listmodelë¶ˆë³€class">01 selectì˜ ê²°ê³¼ëŠ” List[model(ë¶ˆë³€class)]</a></li>
<li class="toc-entry toc-h4"><a href="#02-selectëŠ”-insertì™€-ë‹¬ë¦¬-íŒŒë¼ë¯¸í„°ì˜-ê²½ìš°ì˜ìˆ˜---tryê°€-ì œì¼-ë°”ê¹¥ì—ì„œ-ë‚´ë¶€if-elifë³„-ì§„ì…í›„ì—-with-handler">02 selectëŠ” insertì™€ ë‹¬ë¦¬ íŒŒë¼ë¯¸í„°ì˜ ê²½ìš°ì˜ìˆ˜ -&gt; tryê°€ ì œì¼ ë°”ê¹¥ì—ì„œ ë‚´ë¶€if elifë³„ ì§„ì…í›„ì— with handler</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-selectë©”ì„œë“œì—-ëŒ€í•œ-testë©”ì„œë“œ-ì‘ì„±">04 selectë©”ì„œë“œì— ëŒ€í•œ testë©”ì„œë“œ ì‘ì„±</a>
<ul>
<li class="toc-entry toc-h4"><a href="#insertcreateë©”ì„œë“œ---dbì¡°íšŒí›„-dbì‚­ì œ-ì™€-ë‹¬ë¦¬-selectëŠ”-dbì‚½ì…ìƒì„±í›„----selectë©”ì„œë“œ---dbì‚­ì œ">insert(createë©”ì„œë“œ -&gt; dbì¡°íšŒí›„ dbì‚­ì œ )ì™€ ë‹¬ë¦¬, selectëŠ” dbì‚½ì…ìƒì„±í›„  -&gt; selectë©”ì„œë“œ -&gt; dbì‚­ì œ</a></li>
<li class="toc-entry toc-h4"><a href="#ë°ì´í„°ë¥¼-assert-í•„ë“œë¹„êµë¥¼-ë– ë‚˜-entityê°ì²´ë³„-ë¹„êµí•˜ê¸°-ìœ„í•´ì„œ-entityë³„-eqë©”ì„œë“œ-ì •ì˜í•˜ê¸°íŒŒë¼ë¯¸í„°ë¥¼-otherë¡œ-ì£¼ê³ -ë¹„êµ">ë°ì´í„°ë¥¼ assert í•„ë“œë¹„êµë¥¼ ë– ë‚˜ entityê°ì²´ë³„ ë¹„êµí•˜ê¸° ìœ„í•´ì„œ, entityë³„ eqë©”ì„œë“œ ì •ì˜í•˜ê¸°(íŒŒë¼ë¯¸í„°ë¥¼ otherë¡œ ì£¼ê³  ë¹„êµ)</a></li>
<li class="toc-entry toc-h4"><a href="#uniquekeyì¹¼ëŸ¼ì„-ê°€ì§„-ê²½ìš°ì˜ìˆ˜ë³„-ì¡°íšŒê²°ê³¼1ê°œë¼ë„listentitymodelë¥¼-assert-inìœ¼ë¡œ-ì—¬ëŸ¬ê°œ-ë‹¤-ë¹„êµí•˜ê¸°">uniquekeyì¹¼ëŸ¼ì„ ê°€ì§„ ê²½ìš°ì˜ìˆ˜ë³„ ì¡°íšŒê²°ê³¼(1ê°œë¼ë„List[entityModel])ë¥¼ assert inìœ¼ë¡œ ì—¬ëŸ¬ê°œ ë‹¤ ë¹„êµí•˜ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#commití¬ë§·íŒ…ë“±-í›„-hookì—-ì˜í•´-ì·¨ì†Œë˜ì—ˆë‹¤ë©´-ìˆ˜ì •ëœ-ê²ƒì„-ë‹¤ì‹œ-í•œë²ˆ-add-commit">commit(í¬ë§·íŒ…ë“±) í›„ hookì— ì˜í•´ ì·¨ì†Œë˜ì—ˆë‹¤ë©´, ìˆ˜ì •ëœ ê²ƒì„ ë‹¤ì‹œ í•œë²ˆ add commit</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#05-prí›„-ë™ì¼brì—ì„œ-ë‹¤ë¥¸-ì‘ì—…ì´-ëë‚¬ì„-ë•Œ">05 PRí›„ ë™ì¼brì—ì„œ ë‹¤ë¥¸ ì‘ì—…ì´ ëë‚¬ì„ ë•Œ</a>
<ul>
<li class="toc-entry toc-h4"><a href="#commití›„-push-ì „-githubë¥¼-ë³´ë‹ˆ-ì´ì „-prì´-mergeë˜ì–´ìˆëŠ”ë°ë„-ë‚¨ì•„ìˆë‹¤ë©´-close-prí•´ì¤€ë‹¤">commití›„ push ì „, githubë¥¼ ë³´ë‹ˆ ì´ì „ PRì´ mergeë˜ì–´ìˆëŠ”ë°ë„ ë‚¨ì•„ìˆë‹¤ë©´, close PRí•´ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#pushì „-prnew-pull-requestë¥¼-ëˆŒëŸ¬-ë“¤ì–´ê°€ì„œ-comparing-changesë¡œ-ì´ì „prì´-ì–´ë””ê¹Œì§€-ì‘ì—…ë¬ëŠ”ì§€-í™•ì¸í•œë‹¤">pushì „ PR&gt;New pull requestë¥¼ ëˆŒëŸ¬ ë“¤ì–´ê°€ì„œ, Comparing changesë¡œ ì´ì „PRì´ ì–´ë””ê¹Œì§€ ì‘ì—…ë¬ëŠ”ì§€ í™•ì¸í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#localì˜-clone-ì‘ì—…brì—ì„œ--commitì„-pushí•´ì„œí•œ-ë’¤---ì§ì ‘-new-pr--compare-branch-ë°”ê¿”ì„œ---create-prí•´ì„œ-ìƒˆë¡œìš´-prì„-ë§Œë“ ë‹¤">localì˜ [clone ì‘ì—…br]ì—ì„œ  commitì„ pushí•´ì„œí•œ ë’¤ -&gt; ì§ì ‘ New PR &gt; Compare branch ë°”ê¿”ì„œ -&gt; Create PRí•´ì„œ ìƒˆë¡œìš´ PRì„ ë§Œë“ ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#06-githubì—ì„œ-ë§Œë“ -íƒ€-ì‘ì—…brì„-ê°€ì ¸ì˜¤ë˜-ìµœì‹ masterë¥¼-rebaseí•˜ê³ -ì‚¬ìš©í•˜ê¸°">06 githubì—ì„œ ë§Œë“  íƒ€ ì‘ì—…brì„ ê°€ì ¸ì˜¤ë˜, ìµœì‹ masterë¥¼ rebaseí•˜ê³  ì‚¬ìš©í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#br1ê³¼-br2ë¥¼-ë™ì‹œì—-ë§Œë“¤ê³ -ë™ì‹œì—-clone--bí–ˆì—ˆë”ë¼ë©´">br1ê³¼ br2ë¥¼ ë™ì‹œì— ë§Œë“¤ê³  ë™ì‹œì— clone -bí–ˆì—ˆë”ë¼ë©´</a></li>
<li class="toc-entry toc-h4"><a href="#ë‹¤ìŒì‘ì—…brë§Œ-local-clone--bí•˜ê³ -ignoreë˜ì—ˆë˜---ìƒìœ„í´ë”ì—-ë°±ì—…í•´ë†“ì•˜ë˜-sqlite-dbíŒŒì¼ì„-ë³µë¶™í•´ì¤€ë‹¤">ë‹¤ìŒì‘ì—…brë§Œ local clone -bí•˜ê³ , ignoreë˜ì—ˆë˜ -&gt; ìƒìœ„í´ë”ì— ë°±ì—…í•´ë†“ì•˜ë˜ sqlite .dbíŒŒì¼ì„ ë³µë¶™í•´ì¤€ë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#ìµœì‹ ì—…ëƒëœ-masterë¥¼-ë‘ê³ -ë‹¤ì‹œ-ì‘ì—…brë¡œ-ë„˜ì–´ì™€-git-rebase-masterë¥¼-í†µí•´-masterë¡œë¶€í„°-ìµœì‹ ì‘ì—…ì„-ê°€ì ¸ì˜¨ë‹¤">ìµœì‹ ì—…ëƒëœ masterë¥¼ ë‘ê³ , ë‹¤ì‹œ ì‘ì—…brë¡œ ë„˜ì–´ì™€, git rebase masterë¥¼ í†µí•´ masterë¡œë¶€í„° ìµœì‹ ì‘ì—…ì„ ê°€ì ¸ì˜¨ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#07-cloneí•œ-í´ë”-new-settingìµœì´ˆ">07 cloneí•œ í´ë” new setting(ìµœì´ˆ)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-gitignoreì¤‘ì—-dbíŒŒì¼-ìˆìœ¼ë©´-ì˜®ê²¨ì£¼ê¸°">01 gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°</a></li>
<li class="toc-entry toc-h4"><a href="#02-githubì—ì„œ-ë”°ì˜¨-ë¹ˆ-ìƒˆbrì—-ëŒ€í•´-venvë¥¼-ë§Œë“¤ê³ -í™œì„±í™”í•˜ê³ --vscodeë¥¼-ì—°ë‹¤">02 githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#03-ìµœì´ˆ-requirementstxt-ì§ì ‘-ì„¤ì¹˜">03 ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</a></li>
<li class="toc-entry toc-h4"><a href="#04-ìµœì´ˆ-pre-commit-install-ì§ì ‘-ì„¤ì¹˜">04 ìµœì´ˆ pre-commit install ì§ì ‘ ì„¤ì¹˜</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#08-pet-repository-ê°œë°œ">08 pet repository ê°œë°œ</a>
<ul>
<li class="toc-entry toc-h4"><a href="#insert_petcreate-ë©”ì„œë“œ">insert_pet(CREATE) ë©”ì„œë“œ</a>
<ul>
<li class="toc-entry toc-h5"><a href="#pets-entityì—-ëŒ€í•œ-srcdomainmodelsì—ì„œ-petspydto-pets-ë§Œë“¤ì–´ì„œ-ì˜¬ë¦¬ê¸°">pets entityì— ëŒ€í•œ src&gt;domain&gt;modelsì—ì„œ pets.py(dto Pets) ë§Œë“¤ì–´ì„œ ì˜¬ë¦¬ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#pets-entityì—-ëŒ€í•œ-srcinfrarepoì—ì„œ-pet_repositorypy-ì—ì„œ-createë©”ì„œë“œinsert_ë¶€í„°-ë§Œë“¤ê¸°">pets entityì— ëŒ€í•œ src&gt;infra&gt;repoì—ì„œ pet_repository.py ì—ì„œ CREATEë©”ì„œë“œ(insert_)ë¶€í„° ë§Œë“¤ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#pet-repo-ë©”ì„œë“œ1ê°œ-ë§Œë“¤ë•Œë§ˆë‹¤-_testpyì—-testì‘ì„±í•˜ê¸°">pet repo ë©”ì„œë“œ1ê°œ ë§Œë“¤ë•Œë§ˆë‹¤ _test.pyì— testì‘ì„±í•˜ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#createinsertì˜-ê²°ê³¼ë¹„êµëŠ”-ë©”ì„œë“œ-ê²°ê³¼namedtuple-vs-engineì¿¼ë¦¬ê²°ê³¼lecayrow-tuple-ê²°ê³¼ì€-ì–´ì©”ìˆ˜-ì—†ì´-í•„ë“œë¼ë¦¬-í•œë‹¤">create(insert)ì˜ ê²°ê³¼ë¹„êµëŠ” ë©”ì„œë“œ ê²°ê³¼(namedTuple) vs engineì¿¼ë¦¬ê²°ê³¼(LecayRow, tuple) ê²°ê³¼ì€ ì–´ì©”ìˆ˜ ì—†ì´ í•„ë“œë¼ë¦¬ í•œë‹¤</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#test_insert_pet">test_insert_pet</a>
<ul>
<li class="toc-entry toc-h5"><a href="#pytestë¥¼-ê²½ë¡œë¥¼-ì§ì ‘-ì°¾ì•„ê°€-1ê°œì˜-testpyë§Œ-ê±¸-ìˆ˜ë„-ìˆë‹¤">pytestë¥¼ ê²½ë¡œë¥¼ ì§ì ‘ ì°¾ì•„ê°€ 1ê°œì˜ test.pyë§Œ ê±¸ ìˆ˜ë„ ìˆë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#dto-repoì˜-createinsertë©”ì„œë“œì˜-ê²°ê³¼ë¬¼ì—ì„œ-enum-fieldë¥¼-dtoì—-ë‹´ì„-ë•ŒëŠ”-valueë¡œ--ë‹´ëŠ”ë‹¤">[DTO] repoì˜ create(insert)ë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ì—ì„œ enum fieldë¥¼ DTOì— ë‹´ì„ ë•ŒëŠ” .valueë¡œ  ë‹´ëŠ”ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#my-dtonamedtupleê³¼-lecacyrow-ëª¨ë‘-tupleì´ë¼-ê°’ë¹„êµì‹œ-í†µê³¼-ë°”ë¡œ-ë˜ë”ë¼">my) DTO(namedTuple)ê³¼ LecacyRow ëª¨ë‘ tupleì´ë¼ ê°’ë¹„êµì‹œ í†µê³¼ ë°”ë¡œ ë˜ë”ë¼â€¦</a></li>
<li class="toc-entry toc-h5"><a href="#method-testì™„ë£Œí›„-commitì‘ì—…ì„-ì´ì–´í• -ê²ƒì´ë©´-pushì—†ì´-commití›„-ë°”ë¡œ-ì§„í–‰">method testì™„ë£Œí›„ commit(ì‘ì—…ì„ ì´ì–´í•  ê²ƒì´ë©´, pushì—†ì´ commití›„ ë°”ë¡œ ì§„í–‰)</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#select_pet-ë©”ì„œë“œ">select_pet ë©”ì„œë“œ</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ì¡°ì‹¬-fkê°€-selectë©”ì„œë“œì—-ë“¤ì–´ê°„-ê²½ìš°-oneì´-ì•„ë‹ˆë¼-allì„-ì“°ë©°-return-dataê°€-ì•„ë‹ˆë¼-ê·¸ëƒ¥-return-data">ì¡°ì‹¬! fkê°€ selectë©”ì„œë“œì— ë“¤ì–´ê°„ ê²½ìš°, .one()ì´ ì•„ë‹ˆë¼ .all()ì„ ì“°ë©°, return [data]ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ return data</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#select_test">select_test</a>
<ul>
<li class="toc-entry toc-h5"><a href="#insertcreateì™€-ë‹¤ë¥´ê²Œ-idë„-fakerë¡œ-ìƒì„±í•´ì„œ-ì¡°íšŒí•œë‹¤">insert(CREATE)ì™€ ë‹¤ë¥´ê²Œ, idë„ fakerë¡œ ìƒì„±í•´ì„œ ì¡°íšŒí•œë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#insertcreate-testì™€-ë‹¤ë¥´ê²Œ-selectread-testëŠ”-í•´ë‹¹-entity-model-ë°-enumë„-ì§ì ‘í•„ìš”í•˜ë‹¤">insert(CREATE) testì™€ ë‹¤ë¥´ê²Œ, select(READ) testëŠ” í•´ë‹¹ entity Model ë° enumë„ ì§ì ‘í•„ìš”í•˜ë‹¤.</a>
<ul>
<li class="toc-entry toc-h6"><a href="#insertëŠ”-dtotuple-vs-queryê²°ê³¼tuple">insertëŠ” dto(tuple) vs queryê²°ê³¼(tuple)</a></li>
<li class="toc-entry toc-h6"><a href="#createëŠ”-faker---entitymodel-vs--faker-insert-into---selectë©”ì„œë“œ-listdto">createëŠ” faker -&gt; entitymodel vs  faker-&gt;insert into -&gt; selectë©”ì„œë“œ List[DTO]</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#pre-commitì—-ì˜í•´-í•œë²ˆì€-ê±¸ë¦¬ê³ -ìˆ˜ì •ë˜ë‹ˆ-ë§¤ë²ˆ-addí•˜ì§€ë§ê³ -ê·¸ëƒ¥--amìœ¼ë¡œ-commití•´ì£¼ê³ -logí™•ì¸í•˜ì">pre-commitì— ì˜í•´ í•œë²ˆì€ ê±¸ë¦¬ê³ , ìˆ˜ì •ë˜ë‹ˆ ë§¤ë²ˆ addí•˜ì§€ë§ê³  ê·¸ëƒ¥ -amìœ¼ë¡œ commití•´ì£¼ê³  logí™•ì¸í•˜ì</a></li>
<li class="toc-entry toc-h4"><a href="#test-ì •ë¦¬-insertë©”ì„œë“œì™€-selectë©”ì„œë“œ-í…ŒìŠ¤íŠ¸">[Test] ì •ë¦¬: insertë©”ì„œë“œì™€ selectë©”ì„œë“œ í…ŒìŠ¤íŠ¸</a>
<ul>
<li class="toc-entry toc-h5"><a href="#01-insertë©”ì„œë“œtest_insert_pet">01 insertë©”ì„œë“œ(test_insert_pet)</a></li>
<li class="toc-entry toc-h5"><a href="#02-select-ë©”ì„œë“œtest_select_pet">02 select ë©”ì„œë“œ(test_select_pet)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#4-insert-select-ë©”ì„œë“œë“¤ì˜-interface-ì œì‘">4 insert, select ë©”ì„œë“œë“¤ì˜ Interface ì œì‘</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-src-dataí´ë”-ë°-init-ìƒì„±--interfaces-í´ë”-ë°-initìƒì„±">01 src&gt; dataí´ë” ë° init ìƒì„± &gt; interfaces í´ë” ë° initìƒì„±</a></li>
<li class="toc-entry toc-h3"><a href="#02-ê°-repositorypyë³„-repository_interfacepy-ë§Œë“¤ê¸°">02 ê° repository.pyë³„ repository_interface.py ë§Œë“¤ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#user_repository_interfacepyë„-petêº¼ë¥¼-ë³µì‚¬í•´ì„œ-ë°”ê¿”ì£¼ê¸°">user_repository_interface.pyë„ Petêº¼ë¥¼ ë³µì‚¬í•´ì„œ ë°”ê¿”ì£¼ê¸°</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-initpyì—-ìƒì„±í•œ-interface-ì˜¬ë ¤ì£¼ê¸°">03 init.pyì— ìƒì„±í•œ Interface ì˜¬ë ¤ì£¼ê¸°</a></li>
<li class="toc-entry toc-h3"><a href="#04-ê°-infrarepoì†-repositorypyë“¤ì˜-classë“¤ì€-datainterfaces-ì†repository_interfacepyë“¤ì„-ìƒì†í•´ì„œ-êµ¬í˜„í•´ì•¼í•œë‹¤">04 ê° infra&gt;repoì†&gt; repository.pyë“¤ì˜ classë“¤ì€ data&gt;interfaces ì†&gt;repository_interface.pyë“¤ì„ ìƒì†í•´ì„œ êµ¬í˜„í•´ì•¼í•œë‹¤.</a></li>
<li class="toc-entry toc-h3"><a href="#05-ì‘ì—…br-ì™„ë£Œêµ¬í˜„-pytest---ì»¤ë°‹-push---githubì—ì„œ-new-prê¹Œì§€">05 ì‘ì—…br ì™„ë£Œ(êµ¬í˜„ pytest) -&gt; ì»¤ë°‹ push -&gt; githubì—ì„œ new PRê¹Œì§€</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ì°¸ê³ ">ì°¸ê³ </a>
<ul>
<li class="toc-entry toc-h4"><a href="#gitignore">gitignore</a></li>
<li class="toc-entry toc-h4"><a href="#sqlalchemyíŒ¨í‚¤ì§€">sqlalchemyíŒ¨í‚¤ì§€</a></li>
<li class="toc-entry toc-h4"><a href="#cloneí›„-ì‘ì—…-ì„¸íŒ…">cloneí›„ ì‘ì—… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h4"><a href="#clone--b-ì‘ì—…í…ŒìŠ¤íŠ¸ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">clone -b ì‘ì—…+í…ŒìŠ¤íŠ¸ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</a></li>
<li class="toc-entry toc-h4"><a href="#vscode-ì„¤ì •">vscode ì„¤ì •</a></li>
<li class="toc-entry toc-h4"><a href="#testì •ë¦¬">testì •ë¦¬</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="í´ë¦°-ì•„í‚¤í…ì³">
<a class="anchor" href="#%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>í´ë¦° ì•„í‚¤í…ì³</h1>

<h2 id="1-ë°ì´í„°ë² ì´ìŠ¤-ë°-ì¸í”„ë¼-ê³„ì¸µ">
<a class="anchor" href="#1-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%8F-%EC%9D%B8%ED%94%84%EB%9D%BC-%EA%B3%84%EC%B8%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 ë°ì´í„°ë² ì´ìŠ¤ ë° ì¸í”„ë¼ ê³„ì¸µ</h2>

<h3 id="01-í™˜ê²½-ì„¸íŒ…pylink-flake8-pre-commit">
<a class="anchor" href="#01-%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85pylink-flake8-pre-commit" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 í™˜ê²½ ì„¸íŒ…(pylink, flake8, pre-commit)</h3>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">backend-python</code>í´ë” ìƒì„± &gt; <code class="language-plaintext highlighter-rouge">wt -d .</code>ë¡œ í„°ë¯¸ë„ ì—´ê¸° &gt;  <code class="language-plaintext highlighter-rouge">code .</code> vscodeì—´ì–´ë†“ê¸°</p>
  </li>
  <li>
    <p>í„°ë¯¸ë„ í´ë”ê²½ë¡œì—ì„œ git, ê°€ìƒí™˜ê²½ ì„¸íŒ…</p>

    <ol>
      <li>
        <p>ê¹ƒ ì´ˆê¸°í™”: <code class="language-plaintext highlighter-rouge">git init</code></p>
      </li>
      <li>
        <p>ê°€ìƒí™˜ê²½ ì§ì ‘ ìƒì„±:</p>

        <ol>
          <li><code class="language-plaintext highlighter-rouge">pip install virtualenv</code></li>
          <li>
<code class="language-plaintext highlighter-rouge">python -m virtualenv [-p python310] venv</code>
            <ul>
              <li>ë¦¬ëˆ…ìŠ¤: <code class="language-plaintext highlighter-rouge">virtualenv -p python3[10] venv</code>
</li>
            </ul>
          </li>
        </ol>
      </li>
      <li>
        <p>ê°€ìƒí™˜ê²½ í„°ë¯¸ë„ ì‹¤í–‰</p>

        <ol>
          <li>
<code class="language-plaintext highlighter-rouge">.\venv\Scripts\activate</code> or <code class="language-plaintext highlighter-rouge">. .\venv\Scripts\activate</code>
            <ul>
              <li>ë¦¬ëˆ…ìŠ¤: <code class="language-plaintext highlighter-rouge">. venv/bin/activate</code>
</li>
            </ul>
          </li>
        </ol>
      </li>
      <li>
        <p>vscodeì—ì„œ ìƒì„±ëœ ê°€ìƒí™˜ê²½ selectë˜ì—ˆëŠ”ì§€ í™•ì¸</p>

        <ol>
          <li>
            <p>F1 &gt; python interpreter &gt; í™•ì¸</p>

            <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925023738394.png" alt="image-20220925023738394"></p>
          </li>
        </ol>
      </li>
    </ol>
  </li>
  <li>
    <p>pylint íŒ¨í‚¤ì§€ ì„¤ì¹˜í›„ .pylintrcì„¸íŒ…</p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">. .\venv\Scripts\activate</code></p>
      </li>
      <li>
        <p>pylint íŒ¨í‚¤ì§€ ì„¤ì¹˜í›„ <code class="language-plaintext highlighter-rouge">.pylintrc</code> íŒŒì¼ ìƒì„±</p>

        <ol>
          <li>
            <p><code class="language-plaintext highlighter-rouge">pip3 install pylint</code></p>
          </li>
          <li>
            <p><code class="language-plaintext highlighter-rouge">pylint --generate-rcfile &gt; .pylintrc</code></p>
          </li>
          <li>
            <p>pylintrc íŒŒì¼ ìˆ˜ì •</p>

            <ol>
              <li>
                <p>docstring ì—†ì–´ë„ ë¬´ì‹œí•˜ê²Œ ì„¤ì •í•´ì¤€ë‹¤.</p>

                <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925024348809.png" alt="image-20220925024348809"></p>
              </li>
              <li>
                <p>max-line-lengthë¥¼ 100 -&gt; 120ìœ¼ë¡œ ìˆ˜ì •í•´ì¤€ë‹¤.</p>

                <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925024421370.png" alt="image-20220925024421370"></p>
              </li>
              <li>
                <p>min-public-methods ìˆ˜ë¥¼ 2-&gt;1ë¡œ ìˆ˜ì •í•´ì¤€ë‹¤.</p>

                <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925024540248.png" alt="image-20220925024540248"></p>
              </li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>flake8, black íŒ¨í‚¤ì§€ ì„¤ì¹˜í›„ <code class="language-plaintext highlighter-rouge">.flake8</code> ì„¸íŒ…</strong></p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pip3 install black</code></p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pip3 install flake8</code></p>
      </li>
      <li>
        <p><strong>pylintì™€ ë‹¬ë¦¬ <code class="language-plaintext highlighter-rouge">.flake8</code>íŒŒì¼ì„ vscodeì—ì„œ ìƒì„±í•´ì¤€ë‹¤.</strong></p>

        <ul>
          <li>íŒŒì¼ë³„ ignoresë¥¼ F401ì„ ê±¸ì–´ì¤˜ì•¼í•œë‹¤.</li>
        </ul>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>[flake8]
ignore = E722, W503
max-line-length = 120
per-file-ignores =
	__init__.py: F401
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>pre-comit íŒ¨í‚¤ì§€ ì„¤ì¹˜ í›„  <code class="language-plaintext highlighter-rouge">.pre-commit-config.yaml</code> ì„¸íŒ… -&gt; <code class="language-plaintext highlighter-rouge">pre-commit install</code></strong></p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pip3 install pre-commit</code></p>
      </li>
      <li>
        <p><strong>pylintì™€ ë‹¬ë¦¬ .<code class="language-plaintext highlighter-rouge">pre-commit-config.yaml</code>íŒŒì¼ì„ ì§ì ‘ vscodeì—ì„œ ìƒì„±í•´ì¤€ë‹¤.</strong></p>

        <ul>
          <li>stagesê°€ ë‹¤ [commit]ì´ë‹¤.</li>
          <li>black -&gt; python language versionì„ ìˆ˜ì •í•´ì¤€ë‹¤.</li>
          <li>
<strong>requirementsë§Œ repoê°€ localë¡œì„œ ì§ì ‘ ì‘ë™í•  ë‚´ì—­ì„ entryì— ì…ë ¥í•´ì¤˜ì•¼í•œë‹¤.</strong>
            <ul>
              <li>ì•„ë˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ linuxì—ì„œ bash -cë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œë‹¤</li>
            </ul>
          </li>
        </ul>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>repos:
-   repo: https://github.com/ambv/black
    rev: stable
    hooks:
    - id: black
      language_version: python3.10
      stages: [commit]
-   repo: https://gitlab.com/pycqa/flake8
    rev: 3.7.9
    hooks:
    - id: flake8
      stages: [commit]
-   repo: local
    hooks:
      - id: requirements
        name: requirements
        entry: bash -c 'venv/bin/pip3 freeze &gt; requirements.txt; git add requirements.txt'
        language: system
        pass_filenames: false
        stages: [commit]
</code></pre></div>        </div>

        <ul>
          <li>ì¶”í›„ ì•„ë˜ë¶€ë¶„ì„ pytestê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•  ê²ƒì´ë‹¤.</li>
        </ul>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>-   repo: local
    hooks:
    - id: pytest
      name: pytest
      language: system
      entry: pytest -v -s
      always_run: true
      pass_filenames: false
      stages: [commit]
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">pre-commit install</code>ë¡œ <code class="language-plaintext highlighter-rouge">.git/hooks/pre-commit</code> ìƒì„±í•´ì£¼ê¸°</strong></p>
      </li>
    </ol>
  </li>
  <li>
    <p>test.pyë¡œ ì„¤ì¹˜ í™•ì¸í•˜ê¸°</p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pylint</code>ìµìŠ¤í…ì…˜ ì„¤ì¹˜</p>
      </li>
      <li>
        <p>test.py ìƒì„±í›„ ì—ëŸ¬ í™•ì¸</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">start</span><span class="p">():</span>
      	
	<span class="k">print</span><span class="p">(</span><span class="s">"Ola Muno"</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>doctstringì—†ì´ pylintì—ëŸ¬ ë„ìš°ê¸°</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925033200028.png" alt="image-20220925033200028"></p>
      </li>
      <li>
        <p>git status -&gt; git add . -&gt; git commit -m â€˜â€˜ë¥¼ í†µí•´ <strong>pre-commit ì‘ë™ í™•ì¸í•´ë³´ê¸°</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925033924139.png" alt="image-20220925033924139"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925034015944.png" alt="image-20220925034015944"></p>
      </li>
      <li>
        <p>test.py  ì‚­ì œí•˜ê³  <code class="language-plaintext highlighter-rouge">git log --oneline</code>ë¡œ í™•ì¸</p>
      </li>
    </ol>
  </li>
  <li>
    <p>vscodeì—ì„œ <code class="language-plaintext highlighter-rouge">.gitignore</code>ìƒì„± í›„</p>

    <ol>
      <li>
        <p>pycache ë¬´ì‹œí•˜ê¸°</p>
      </li>
      <li>
        <p>venví´ë” ë¬´ì‹œí•˜ê¸°</p>

        <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h4 id="pre-commitì—ì„œ-window-linux-ëª¨ë‘-ì‘ë™í•˜ëŠ”-requirements-hookë§Œë“¤ê¸°">
<a class="anchor" href="#pre-commit%EC%97%90%EC%84%9C-window-linux-%EB%AA%A8%EB%91%90-%EC%9E%91%EB%8F%99%ED%95%98%EB%8A%94-requirements-hook%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>pre-commitì—ì„œ window, linux ëª¨ë‘ ì‘ë™í•˜ëŠ” requirements hookë§Œë“¤ê¸°</h4>

<ol>
  <li>
    <p>ê°ê°ì˜ <code class="language-plaintext highlighter-rouge">entry</code>ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ë©´, 1ê°œì˜ ìš´ì˜ì²´ì œì—ì„œ ë°–ì— ì‚¬ìš©ì•ˆëœë‹¤.</p>

    <ul>
      <li>
        <p><strong>linuxì˜ bash -c ë¡œ ì‘ë™ì‹œí‚¤ê¸°</strong></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">-</span>   <span class="n">repo</span><span class="p">:</span> <span class="n">local</span>
    <span class="n">hooks</span><span class="p">:</span>
      <span class="o">-</span> <span class="nb">id</span><span class="p">:</span> <span class="n">requirements</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">requirements</span>
        <span class="n">entry</span><span class="p">:</span> <span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="s">'venv/bin/pip3 freeze &gt; requirements.txt; git add requirements.txt'</span>
        <span class="c1"># entry: powershell -command '.\venv\Scripts\pip3 freeze &gt; .\requirements.txt; git add requirements.txt'
</span>        <span class="c1">#entry: ./.pre-commit-scripts/requirements.py
</span>        <span class="n">language</span><span class="p">:</span> <span class="n">system</span>
        <span class="n">pass_filenames</span><span class="p">:</span> <span class="n">false</span>
        <span class="n">stages</span><span class="p">:</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>windowsì˜ powershell -comandë¡œ ì‘ë™ì‹œí‚¤ê¸°</strong></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">-</span>   <span class="n">repo</span><span class="p">:</span> <span class="n">local</span>
    <span class="n">hooks</span><span class="p">:</span>
      <span class="o">-</span> <span class="nb">id</span><span class="p">:</span> <span class="n">requirements</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">requirements</span>
        <span class="c1"># entry: bash -c 'venv/bin/pip3 freeze &gt; requirements.txt; git add requirements.txt'
</span>        <span class="n">entry</span><span class="p">:</span> <span class="n">powershell</span> <span class="o">-</span><span class="n">command</span> <span class="s">'.</span><span class="se">\v</span><span class="s">env\Scripts\pip3 freeze &gt; .</span><span class="se">\r</span><span class="s">equirements.txt; git add requirements.txt'</span>
        <span class="c1"># entry: ./.pre-commit-scripts/requirements.py
</span>        <span class="n">language</span><span class="p">:</span> <span class="n">system</span>
        <span class="n">pass_filenames</span><span class="p">:</span> <span class="n">false</span>
        <span class="n">stages</span><span class="p">:</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>python scriptë¥¼ ë§Œë“¤ì–´, ìš´ì˜ì²´ì œë§ˆë‹¤(sys.platform) ì»¤ë§¨ë“œ ëª…ë ¹ì–´ ì‹¤í–‰(subprocess.call)ì‹œí‚¤ê¸°</strong></p>

    <ul>
      <li>ì´ ë•Œ, ëª…ë ¹ì–´ë¥¼ ` &gt; requirements.txt`ê¹Œì§€ ë‹¤ ì…ë ¥í•˜ë©´, ìœˆë„ìš°ì—ì„œ ê²½ë¡œë¥¼ ëª»ì°¾ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤
        <ul>
          <li><strong>with open() ì„ ì‚¬ìš©í•´ì„œ <code class="language-plaintext highlighter-rouge">requirements.txt</code>ë¥¼ <code class="language-plaintext highlighter-rouge">w</code>ëª¨ë“œë¡œ ì—´ì–´ë†“ê³  ë®ì–´ì“´ë‹¤</strong></li>
        </ul>
      </li>
    </ul>

    <ol>
      <li>
        <p>rootì— <code class="language-plaintext highlighter-rouge">.pre-commit-scripts</code>í´ë”ë¥¼ ë§Œë“¤ê³  <code class="language-plaintext highlighter-rouge">requirements.py</code>ë¥¼ ì‘ì„±í•œë‹¤.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927003959890.png" alt="image-20220927003959890"></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span>      
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>  <span class="c1"># nosec
</span><span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">platform</span>
      
      
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"./requirements.txt"</span>
      
    <span class="k">if</span> <span class="n">platform</span> <span class="o">==</span> <span class="s">"win32"</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
            <span class="n">call</span><span class="p">([</span><span class="s">"./venv/Scripts/pip3"</span><span class="p">,</span> <span class="s">"freeze"</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">file_</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_</span><span class="p">:</span>
            <span class="n">call</span><span class="p">([</span><span class="s">"./venv/bin/pip3"</span><span class="p">,</span> <span class="s">"freeze"</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">file_</span><span class="p">)</span>
    <span class="n">call</span><span class="p">(</span><span class="s">f"git add </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>  <span class="c1"># nosec
</span>      
      
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="nb">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">.pre-commit-config.yaml</code>ì˜ hook entryì—ì„œ í•´ë‹¹ py ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ê±¸ì–´ì¤€ë‹¤.</p>

        <div class="language-yaml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="pi">-</span>   <span class="na">repo</span><span class="pi">:</span> <span class="s">local</span>
    <span class="na">hooks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">requirements</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">requirements</span>
        <span class="c1"># entry: bash -c 'venv/bin/pip3 freeze &gt; requirements.txt; git add requirements.txt'</span>
        <span class="c1"># entry: powershell -command '.\venv\Scripts\pip3 freeze &gt; .\requirements.txt; git add requirements.txt'</span>
        <span class="na">entry</span><span class="pi">:</span> <span class="s">./.pre-commit-scripts/requirements.py</span>
        <span class="na">language</span><span class="pi">:</span> <span class="s">system</span>
        <span class="na">pass_filenames</span><span class="pi">:</span> <span class="no">false</span>
        <span class="na">stages</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">commit</span><span class="pi">]</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>
    <p>ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ pip-toolsë¥¼ ì„¤ì¹˜í•˜ê³ , ë‚´ë¶€ì—ì„œ call ì‹œ pip-complieì„ ì´ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.</p>

    <ul>
      <li>
        <p><a href="https://github.com/jazzband/pip-tools/">ê¹ƒí—ˆë¸Œ</a></p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pip3 install pip-tools</code> ì„¤ì¹˜</p>
      </li>
      <li>
        <p>python310ì´ë©´, pip-toolsë²„ì „(6.8.0)ì„ ì˜ ë§ì¶°ì•¼í•œë‹¤.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927004806256.png" alt="image-20220927004806256"></p>
      </li>
      <li>
        <p>yaml</p>

        <div class="language-yaml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="pi">-</span>   <span class="na">repo</span><span class="pi">:</span> <span class="s">https://github.com/jazzband/pip-tools</span>
    <span class="na">rev</span><span class="pi">:</span> <span class="s">6.8.0</span>
    <span class="na">hooks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">pip-compile</span>
      <span class="na">entry</span><span class="pi">:</span> <span class="s">./.pre-commit-scripts/pip-compile.py</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>pip-compile.py</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span>     
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>  <span class="c1"># nosec
</span><span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">platform</span>
     
     
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">platform</span> <span class="o">==</span> <span class="s">"win32"</span><span class="p">:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">(</span><span class="s">r"pip-compile.exe"</span><span class="p">,</span> <span class="s">"--output-file"</span><span class="p">,</span> <span class="s">"requirements.win.txt"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">(</span><span class="s">"pip-compile"</span><span class="p">,)</span>
    <span class="k">return</span> <span class="n">call</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>  <span class="c1"># nosec
</span>     
     
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="nb">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="02-src-infra-í´ë”-ì„¸íŒ…">
<a class="anchor" href="#02-src-infra-%ED%8F%B4%EB%8D%94-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 src, infra í´ë” ì„¸íŒ…</h3>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">src</code>í´ë” -&gt; importìš© ëª¨ë“ˆë¼ì´ì ¸ë¥¼ ìœ„í•œ  <code class="language-plaintext highlighter-rouge">init.py</code> ìƒì„±
    <ol>
      <li>
<code class="language-plaintext highlighter-rouge">infra</code>í´ë” -&gt; <code class="language-plaintext highlighter-rouge">init.py</code>ìƒì„±
        <ol>
          <li>
<code class="language-plaintext highlighter-rouge">config</code>í´ë” ìƒì„± &gt; <code class="language-plaintext highlighter-rouge">init.py</code>ìƒì„±</li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925182202353.png" alt="image-20220925182202353"></p>

<h3 id="03-configì„¤ì •">
<a class="anchor" href="#03-config%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 configì„¤ì •</h3>

<h4 id="03-1-db_config--db_base-ì„¤ì •sqlalchemy">
<a class="anchor" href="#03-1-db_config--db_base-%EC%84%A4%EC%A0%95sqlalchemy" aria-hidden="true"><span class="octicon octicon-link"></span></a>03-1 db_config + db_base ì„¤ì •(sqlalchemy)</h4>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pip3 install sqlalchemy</code></p>
  </li>
  <li>
    <p>src &gt; infra &gt; config &gt; <code class="language-plaintext highlighter-rouge">db_config.py</code></p>

    <ol>
      <li>
        <p>ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ìƒì„±ì(í•„ë“œë“¤)ì™€ ë©”ì„œë“œë¥¼ ë§Œë“ ë‹¤.</p>

        <ul>
          <li>engineìš© urlì˜ string ìƒìˆ˜ í•„ë“œì™€</li>
          <li>ê°ì²´ë³„ sesionì„ ë³´ìœ í•  í•„ë“œë¥¼ Noneìœ¼ë¡œì´ˆê¸°í™”</li>
        </ul>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925182238123.png" alt="image-20220925182238123"></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">DBConnectionHandler</span><span class="p">:</span>
	<span class="s">"""Sqlalchemy database connection"""</span>
      
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">__connection_string</span> <span class="o">=</span> <span class="s">'sqlite://storage.db'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">session</span> <span class="o">=</span> <span class="bp">None</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>sqlalchemyì˜ create_engineë©”ì„œë“œë¡œ, URLì„ ì´ìš©í•´ì„œ, dbì— connectioní•˜ì—¬ engineì„ ìƒì„±í•˜ì—¬ ë°˜í™˜ë°›ëŠ” ë©”ì„œë“œë¥¼ <code class="language-plaintext highlighter-rouge">get_engine</code>ì„ ì •ì˜í•¨</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
      
<span class="k">class</span> <span class="nc">DBConnectionHandler</span><span class="p">:</span>
	<span class="s">"""Sqlalchemy database connection"""</span>
      
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">__connection_string</span> <span class="o">=</span> <span class="s">'sqlite:///storage.db'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">session</span> <span class="o">=</span> <span class="bp">None</span>
      
	<span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">"""Return Connection Engine
		:param - None
		:return - engine connection to Database
		"""</span>
		<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">__connection_string</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">engine</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>
    <p>src &gt; infra &gt; config &gt; <code class="language-plaintext highlighter-rouge">db_base.py</code></p>

    <ol>
      <li>
        <p>sqlalchemyì˜ <strong>entity classë³„ ìƒì†í• </strong> Base classë¥¼ ë°˜í™˜í•´ì£¼ëŠ” íŒŒì¼ì´ë‹¤.</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
      
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h4 id="03-2-configì˜-initpyì—-ê°™ì´-importë -ëª¨ë“ˆë“¤-handlerdb_config-basedb_base-ì˜¬ë ¤ë†“ê¸°">
<a class="anchor" href="#03-2-config%EC%9D%98-initpy%EC%97%90-%EA%B0%99%EC%9D%B4-import%EB%90%A0-%EB%AA%A8%EB%93%88%EB%93%A4-handlerdb_config-basedb_base-%EC%98%AC%EB%A0%A4%EB%86%93%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03-2 configì˜ init.pyì— ê°™ì´ importë  ëª¨ë“ˆë“¤ handler(db_config), Base(db_base) ì˜¬ë ¤ë†“ê¸°</h4>

<ul>
  <li>ë‚´ í´ë”ì•ˆì—ì„œ ì‡ëŠ” ëª¨ë“ˆë“¤ì€ <code class="language-plaintext highlighter-rouge">from .ëª¨ë“ˆëª… import ì‚¬ìš©í•  class</code>ë¡œ initì— importí•´ë†“ì„ ìˆ˜ ìˆë‹¤.
    <ul>
      <li><strong>initì— ë‚´í•˜ìœ„ëª¨ë“ˆë“¤ì„ importí•´ë†“ìœ¼ë©´ -&gt; <code class="language-plaintext highlighter-rouge">ì™¸ë¶€ì—ì„œ ë‚´ í´ë” importì‹œ ë‹¤ ê°™ì´ ì˜¬ë¼ê°€ëŠ” íš¨ê³¼</code>ë‹¤</strong></li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.db_base</span> <span class="kn">import</span> <span class="n">Base</span>
<span class="kn">from</span> <span class="nn">.db_config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
</code></pre></div></div>

<h3 id="04-entities-ì„¤ì •-ë°-ìƒì„±">
<a class="anchor" href="#04-entities-%EC%84%A4%EC%A0%95-%EB%B0%8F-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 entities ì„¤ì • ë° ìƒì„±</h3>

<h4 id="04-1-entityí´ë”-ë°-íŒŒì¼-ìƒì„±">
<a class="anchor" href="#04-1-entity%ED%8F%B4%EB%8D%94-%EB%B0%8F-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>04-1 entityí´ë” ë° íŒŒì¼ ìƒì„±</h4>

<ol>
  <li>
    <p>src &gt; infra &gt; <code class="language-plaintext highlighter-rouge">entities</code> í´ë” ë° <code class="language-plaintext highlighter-rouge">init.py</code>ë¥¼ ë§Œë“ ë‹¤.</p>
  </li>
  <li>
    <p><strong>entity digramì„ ë³´ê³  <code class="language-plaintext highlighter-rouge">ì†Œë¬¸ìandë³µìˆ˜ users.py / pets.py</code> ë“± entityë³„ë¡œ pyíŒŒì¼ì„ ë§Œë“ ë‹¤.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925183730003.png" alt="image-20220925183730003"></p>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220925183149480.png" alt="image-20220925183149480"></p>

<h4 id="04-2-ê°-entityíŒŒì¼ë³„-sqlaì¬ë£Œë“¤--ì„ ì–¸í›„-configê°€-ì˜¬ë ¤ë†“ì€-ê²ƒ-ì¤‘-1ê°œì¸-base-class-ì‚¬ìš©í•˜ê¸°">
<a class="anchor" href="#04-2-%EA%B0%81-entity%ED%8C%8C%EC%9D%BC%EB%B3%84-sqla%EC%9E%AC%EB%A3%8C%EB%93%A4--%EC%84%A0%EC%96%B8%ED%9B%84-config%EA%B0%80-%EC%98%AC%EB%A0%A4%EB%86%93%EC%9D%80-%EA%B2%83-%EC%A4%91-1%EA%B0%9C%EC%9D%B8-base-class-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04-2 ê° entityíŒŒì¼ë³„, sqlaì¬ë£Œë“¤ + ì„ ì–¸í›„ Configê°€ ì˜¬ë ¤ë†“ì€ ê²ƒ ì¤‘ 1ê°œì¸ Base class ì‚¬ìš©í•˜ê¸°</h4>

<h5 id="userspy">
<a class="anchor" href="#userspy" aria-hidden="true"><span class="octicon octicon-link"></span></a>users.py</h5>

<ol>
  <li>
    <p>users.pyì—ì„œ entityêµ¬ì„±ì— í•„ìš”í•œ ì¬ë£Œë“¤ê³¼ <strong>config ì† Base classë¥¼ import</strong>í•œë‹¤</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">Base</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>users.py</p>

    <ul>
      <li>
        <p><strong>entity classë¥¼ Baseë¥¼ ìƒì†ë°›ì•„ì„œ ì‘ì„±í•œë‹¤</strong></p>
      </li>
      <li>
<strong>fkê´€ê³„ê°€ í•„ìš”í•˜ë©´ <code class="language-plaintext highlighter-rouge">sqlalchemy.orm</code>íŒ¨í‚¤ì§€ì—ì„œ <code class="language-plaintext highlighter-rouge">relationshiop</code>ì„ ì¬ë£Œë¡œ ê°€ì ¸ì˜¨ë‹¤</strong>
        <ul>
          <li>relationshipê´€ê³„ì˜ í…Œì´ë¸”ì€ <code class="language-plaintext highlighter-rouge">"ëŒ€ë¬¸ìë³µìˆ˜ í´ë˜ìŠ¤ëª…"</code>ìœ¼ë¡œ ì¤˜ì•¼í•œë‹¤.</li>
          <li><strong>1:mê´€ê³„ì—ì„œëŠ” 1ì—ì„œ relationshipë§Œ ëª…ì‹œí•´ì£¼ê³ , <code class="language-plaintext highlighter-rouge">Mì—ì„œ ForeignKeyì¬ë£Œë¥¼ ì‚¬ìš©</code>í•´ì„œ í•„ë“œë¡œ ì†Œìœ í•˜ê²Œ í•œë‹¤</strong></li>
        </ul>
      </li>
      <li>tablenameì€ ì†Œë¬¸ì ë³µìˆ˜ë¡œ ì ì</li>
      <li>reprëŠ” uniqueí•„ë“œë¡œ 1ê°œë¡œë§Œ ë‚˜íƒ€ë‚´ì£¼ì</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#..
</span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">relationship</span>
<span class="c1">#..
</span>   
<span class="k">class</span> <span class="nc">Users</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
	<span class="s">"""Users Entity"""</span>
   
	<span class="n">__tablename__</span> <span class="o">=</span> <span class="s">"users"</span>
   
	<span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">password</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
	<span class="n">id_pet</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">"Pets"</span><span class="p">)</span>
   
	<span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="s">f"User [name=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="err">!</span><span class="n">r</span><span class="si">}</span><span class="s">]"</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="petspy">
<a class="anchor" href="#petspy" aria-hidden="true"><span class="octicon octicon-link"></span></a>pets.py</h5>

<ol>
  <li>
    <p>erdì— typeì´ ì í˜€ìˆìœ¼ë©´ <code class="language-plaintext highlighter-rouge">import enum</code>í›„ enum.Enumì„ ìƒì†í•œ classë¥¼ ìƒì„±í›„ string ë³€ìˆ˜ë¥¼ í• ë‹¹í•´ì£¼ë©´ ëœë‹¤.</p>
  </li>
  <li>
    <p>Mê´€ê³„ì˜ entityë¡œì„œ <code class="language-plaintext highlighter-rouge">ForeignKey</code>ì¬ë£Œê°€ ì¶”ê°€ ë° enumíƒ€ì…ì‚¬ìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">Enum</code>ì¬ë£Œë„ ì¶”ê°€ëœë‹¤.</p>

    <ul>
      <li>Column(Enum( ì´ë„˜ìƒì†ì •ì˜í•œClassëª…), â€¦ )</li>
      <li>ForeignKey(â€œ<code class="language-plaintext highlighter-rouge">ì†Œë¬¸ìí…Œì´ë¸”ëª….idí•„ë“œëª…</code>â€œ)ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">enum</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">Base</span>
   
<span class="k">class</span> <span class="nc">AnimalTypes</span><span class="p">(</span><span class="n">enum</span><span class="p">.</span><span class="n">Enum</span><span class="p">):</span>
	<span class="s">"""defining Anymals Types"""</span>
	<span class="n">dog</span> <span class="o">=</span> <span class="s">'dog'</span>
	<span class="n">cat</span> <span class="o">=</span> <span class="s">'cat'</span>
	<span class="n">fish</span> <span class="o">=</span> <span class="s">'fish'</span>
	<span class="n">turtle</span> <span class="o">=</span> <span class="s">'turtle'</span>
   
   
<span class="k">class</span> <span class="nc">Pets</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
	<span class="s">"""Pets Entity"""</span>
   
	<span class="n">__tablename__</span> <span class="o">=</span> <span class="s">'pets'</span>
   
	<span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">specie</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Enum</span><span class="p">(</span><span class="n">AnimalTypes</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
	<span class="n">age</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">)</span>
	<span class="n">user_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">"users.id"</span><span class="p">))</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>reprëŠ” uniqueí•„ë“œ ì™¸ì—, Enumí•„ë“œ(ë‚˜ë¥¼ ë¬¶ì–´ì£¼ëŠ” ìƒìœ„ê°œë…) ë° <strong>fkê¹Œì§€</strong> ì°íˆë„ë¡ í•´ì¤€ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>	<span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="s">f"Pets: [name=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="err">!</span><span class="n">r</span><span class="si">}</span><span class="s">, specie=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">specie</span><span class="err">!</span><span class="n">r</span><span class="si">}</span><span class="s">, user_id=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">user_id</span><span class="si">}</span><span class="s">]"</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="04-3-entitiesì˜-initpyì—-ê°™ì´-importë -ëª¨ë“ˆentityë“¤-ì˜¬ë ¤ë†“ê¸°">
<a class="anchor" href="#04-3-entities%EC%9D%98-initpy%EC%97%90-%EA%B0%99%EC%9D%B4-import%EB%90%A0-%EB%AA%A8%EB%93%88entity%EB%93%A4-%EC%98%AC%EB%A0%A4%EB%86%93%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04-3 entitiesì˜ init.pyì— ê°™ì´ importë  ëª¨ë“ˆ(entity)ë“¤ ì˜¬ë ¤ë†“ê¸°</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.pets</span> <span class="kn">import</span> <span class="n">Pets</span>
<span class="kn">from</span> <span class="nn">.users</span> <span class="kn">import</span> <span class="n">Users</span>
</code></pre></div></div>

<h4 id="1m-entity-í•„ë“œ-ì •ë¦¬1relationshiporm-mforeignkey">
<a class="anchor" href="#1m-entity-%ED%95%84%EB%93%9C-%EC%A0%95%EB%A6%AC1relationshiporm-mforeignkey" aria-hidden="true"><span class="octicon octicon-link"></span></a>1:M entity í•„ë“œ ì •ë¦¬(1:relationship(orm), M:ForeignKey)</h4>

<ol>
  <li>one tableì€ <code class="language-plaintext highlighter-rouge">sqlalchemy.orm</code>ì˜ <code class="language-plaintext highlighter-rouge">relationship("ëŒ€ë¬¸ìClassëª…")</code>ìœ¼ë¡œ ì—°ê²°ì„ ìœ ì§€í•˜ê³ </li>
  <li>many tableì€ <code class="language-plaintext highlighter-rouge">sqlalchemy</code>ì˜ <code class="language-plaintext highlighter-rouge">ForeignKey("ì†Œë¬¸ìí…Œì´ë¸”ëª….idí•„ë“œëª…")</code>ìœ¼ë¡œ ì‹¤ì œí•„ë“œê°’ì„ ìœ ì§€í•œë‹¤.</li>
</ol>

<h3 id="05-python-consoleì—ì„œ-config---entities-2ê°œ-ëª¨ë“ˆë¡œ-dbì—°ê²°-ë°-tableìƒì„±">
<a class="anchor" href="#05-python-console%EC%97%90%EC%84%9C-config---entities-2%EA%B0%9C-%EB%AA%A8%EB%93%88%EB%A1%9C-db%EC%97%B0%EA%B2%B0-%EB%B0%8F-table%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 python consoleì—ì„œ config  + entities 2ê°œ ëª¨ë“ˆë¡œ DBì—°ê²° ë° tableìƒì„±</h3>

<h4 id="my-ipythonì„¤ì¹˜í•˜ì—¬-consoleì—-ìë™ì™„ì„±">
<a class="anchor" href="#my-ipython%EC%84%A4%EC%B9%98%ED%95%98%EC%97%AC-console%EC%97%90-%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) ipythonì„¤ì¹˜í•˜ì—¬ consoleì— ìë™ì™„ì„±</h4>

<p><code class="language-plaintext highlighter-rouge">pip3 install ipython</code></p>

<h4 id="from-srcinfraconfig-import-">
<a class="anchor" href="#from-srcinfraconfig-import-" aria-hidden="true"><span class="octicon octicon-link"></span></a>from src.infra.config import *</h4>

<ol>
  <li>
    <p>vscode terminalì—ì„œ <code class="language-plaintext highlighter-rouge">python</code>ë¡œ <strong>python consoleì— ì§„ì…</strong>í•œë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">from src.infra.config import *</code>ë¥¼ í†µí•´ <strong>initì— ì˜¬ë ¤ë‘” ëª¨ë“ˆë“¤ ëª¨ë‘ ì‚¬ìš©</strong>í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>

    <ul>
      <li>importí•´ì„œ ì‚¬ìš©í•˜ëŠ” ìˆœê°„ ê° ëª¨ë“ˆë“¤ ë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">__pycache__</code>ë“¤ì´ ìƒê¸°ê³  .gitignoreì—ì„œ  <code class="language-plaintext highlighter-rouge">**/__pycache/</code>ë¡œ ì²˜ë¦¬í–ˆë‹¤</li>
    </ul>
  </li>
  <li>
    <p><strong>DBConnectionHandlerí´ë˜ìŠ¤ì˜ ê°ì²´()ë¥¼ db_connìœ¼ë¡œ ë°›ì•„ì„œ, get_engine()ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬<code class="language-plaintext highlighter-rouge">engineê°ì²´</code>ë¥¼ ë°˜í™˜ë°›ì</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="o">*</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">db_conn</span> <span class="o">=</span> <span class="n">DBConnectionHandler</span><span class="p">()</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">db_conn</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
       
<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">engine</span>
       
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">Engine</span><span class="p">(</span><span class="n">sqlite</span><span class="p">:</span><span class="o">///</span><span class="n">storage</span><span class="p">.</span><span class="n">db</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Baseí´ë˜ìŠ¤ì˜ <code class="language-plaintext highlighter-rouge">.metadata.create_all( engine )</code>ìœ¼ë¡œ dbë¥¼ ìƒì„±í•˜ì</strong></p>

    <ul>
      <li>engineìƒì„±ì‹œ (DBConnectionHandlerì˜ ìƒìˆ˜í•„ë“œ -&gt; create_engineì‹œ ì¸ì) ëª…ì‹œëœ db URL ì£¼ì†Œì— dbë¥¼ ìƒì„±í•œë‹¤.</li>
      <li>sqliteëŠ”
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">://</code> or <code class="language-plaintext highlighter-rouge">:///:memory:</code>-&gt; ë©”ëª¨ë¦¬</li>
          <li>
<code class="language-plaintext highlighter-rouge">:///</code>  ìƒëŒ€ì£¼ì†Œ</li>
          <li>
<code class="language-plaintext highlighter-rouge">:////</code> ì ˆëŒ€ì£¼ì†Œ</li>
        </ul>
      </li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">Base</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926032016262.png" alt="image-20220926032016262"></p>
  </li>
  <li>
    <p><strong>ì´ëŒ€ë¡œ DBeaverì—ì„œ ì—´ì–´ë³´ë©´ entityë“¤ì´ ì—†ë‹¤</strong></p>
  </li>
</ol>

<ul>
  <li><strong>Baseë¥¼ ìƒì†í•˜ê³  ìˆëŠ” entityë“¤ì„ import ì•ˆí–ˆê¸° ë•Œë¬¸ì—, metadataê°€ ì—†ë‹¤.</strong></li>
</ul>

<ol>
  <li>í•´ë‹¹ ì˜ëª»ë§Œë“¤ì–´ì§„ dbë¥¼ ì‚­ì œí•´ì£¼ì.</li>
</ol>

<h4 id="from-srcinfraentities-import--ê¹Œì§€í•˜ê³ -base--engineìœ¼ë¡œ-db-ìƒì„±">
<a class="anchor" href="#from-srcinfraentities-import--%EA%B9%8C%EC%A7%80%ED%95%98%EA%B3%A0-base--engine%EC%9C%BC%EB%A1%9C-db-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>from src.infra.entities import * ê¹Œì§€í•˜ê³  Base + engineìœ¼ë¡œ DB ìƒì„±</h4>

<ol>
  <li>
    <p>python consoleì—ì„œ configëª¨ë“ˆë“¤ì„(Base, ConnectionHandler)ë¥¼ importí•˜ê³ </p>
  </li>
  <li>
    <p><strong>entityëª¨ë“ˆë“¤ë„ import í•œë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="o">*</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="o">*</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">db_conn</span> <span class="o">=</span> <span class="n">DBConnectionHandler</span><span class="p">()</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">db_conn</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">Base</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926033048846.png" alt="image-20220926033048846"></p>
  </li>
</ol>

<h4 id="í…ŒìŠ¤íŠ¸ìš©-sqlitedbíŒŒì¼ì€-ignoreì—-ë“±ë¡í•´ì£¼ê¸°-í›„-commití–ˆì—ˆë‹¤ë©´-cacheì œê±°í•´ì£¼ê¸°">
<a class="anchor" href="#%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9A%A9-sqlitedb%ED%8C%8C%EC%9D%BC%EC%9D%80-ignore%EC%97%90-%EB%93%B1%EB%A1%9D%ED%95%B4%EC%A3%BC%EA%B8%B0-%ED%9B%84-commit%ED%96%88%EC%97%88%EB%8B%A4%EB%A9%B4-cache%EC%A0%9C%EA%B1%B0%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>í…ŒìŠ¤íŠ¸ìš© sqlite.dbíŒŒì¼ì€ ignoreì— ë“±ë¡í•´ì£¼ê¸° í›„ commití–ˆì—ˆë‹¤ë©´ cacheì œê±°í•´ì£¼ê¸°</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rm storage.db --cached
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927010956644.png" alt="image-20220927010956644"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927011003749.png" alt="image-20220927011003749"></p>

<h4 id="git-ê¸°ì¡´-commitì—-ì²˜ë¦¬-ì¶”ê°€-add--í›„-commit-amend-no-edit">
<a class="anchor" href="#git-%EA%B8%B0%EC%A1%B4-commit%EC%97%90-%EC%B2%98%EB%A6%AC-%EC%B6%94%EA%B0%80-add--%ED%9B%84-commit-amend-no-edit" aria-hidden="true"><span class="octicon octicon-link"></span></a>(git) ê¸°ì¡´ commitì— ì²˜ë¦¬ ì¶”ê°€: add . í›„ commit â€“amend â€“no-edit</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add .
git commit --amend --no-edit
</code></pre></div></div>

<h4 id="1m-ê´€ê³„í™•ì¸">
<a class="anchor" href="#1m-%EA%B4%80%EA%B3%84%ED%99%95%EC%9D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>1:M ê´€ê³„í™•ì¸</h4>

<ol>
  <li>
    <p>1ì— í•´ë‹¹í•˜ëŠ” UsersëŠ” <code class="language-plaintext highlighter-rouge">.ormíŒ¨í‚¤ì§€ì˜ relationship</code>ë§Œ ê°€ì ¸ <strong>ì»¬ëŸ¼ ë° ì™¸ë¶€í‚¤ê°€ ì—†ë‹¤</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926033303675.png" alt="image-20220926033303675"></p>

    <ul>
      <li>
        <p>ëŒ€ì‹  ì°¸ì¡°ë‹¹í•˜ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">ì°¸ì¡°</code>ë§Œ  ìˆë‹¤.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926033328113.png" alt="image-20220926033328113"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926033349552.png" alt="image-20220926033349552"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Mì— í•´ë‹¹í•˜ëŠ” PetsëŠ” <strong>user_idì¹¼ëŸ¼</strong>ì„ í•„ë“œë¡œ ê°€ì§€ê³  ìˆìœ¼ë©°, ì™¸ë¶€í‚¤ì— ë‚˜íƒ€ë‚œë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926033435107.png" alt="image-20220926033435107"></p>
  </li>
</ol>

<h3 id="06-dbì—°ê²°-í›„-engineë§Œdbìƒì„±ê°€ëŠ¥-ì†Œìœ í•˜ë˜--dbconnecthandlerë¥¼-crudë¥¼-ìœ„í•œ-sessionì†Œìœ -context-managerí™”">
<a class="anchor" href="#06-db%EC%97%B0%EA%B2%B0-%ED%9B%84-engine%EB%A7%8Cdb%EC%83%9D%EC%84%B1%EA%B0%80%EB%8A%A5-%EC%86%8C%EC%9C%A0%ED%95%98%EB%8D%98--dbconnecthandler%EB%A5%BC-crud%EB%A5%BC-%EC%9C%84%ED%95%9C-session%EC%86%8C%EC%9C%A0-context-manager%ED%99%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>06 (DBì—°ê²° í›„) engineë§Œ(DBìƒì„±ê°€ëŠ¥) ì†Œìœ í•˜ë˜  DBConnectHandlerë¥¼ CRUDë¥¼ ìœ„í•œ sessionì†Œìœ  context managerí™”</h3>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926170449260.png" alt="image-20220926170449260"></p>

<ul>
  <li>
<a href="https://github.com/is2js/CleanCode/blob/master/cleancode/03_01_enter_exit_%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EA%B4%80%EB%A6%AC%EC%9E%90%EC%99%80_withas_%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0/With_as%EC%97%90_%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94_%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80_%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8_%EA%B4%80%EB%A6%AC%EC%9E%90.py">ì°¸ê³  ë‚´ ê¹ƒí—ˆë¸Œ CleanCode</a>
    <ul>
      <li>
<strong>DBConnector  or DBConnectionHandler</strong>ëŠ” ì„¹ì…˜ì„ ì‹¤í–‰ë™ì•ˆë§Œ ìœ ì§€ë˜ê²Œ í•˜ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">enter/exitë¥¼ ì •ì˜í•œ context manager</code>ë¥¼ ë§Œë“¤ì–´ì•¼í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<h4 id="ì°¸ê³ -testpyë¡œ-context-manageê°€-ì•„ë‹ˆë©´-ì§ì ‘-closeí•´ì•¼í•˜ëŠ”-ë²ˆê±°ë¡œì›€">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-testpy%EB%A1%9C-context-manage%EA%B0%80-%EC%95%84%EB%8B%88%EB%A9%B4-%EC%A7%81%EC%A0%91-close%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EB%B2%88%EA%B1%B0%EB%A1%9C%EC%9B%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ ) test.pyë¡œ context manageê°€ ì•„ë‹ˆë©´ ì§ì ‘ closeí•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€</h4>

<ol>
  <li>
    <p>file.txtì™€ test.py ìƒì„±í›„ open()ìœ¼ë¡œ íŒŒì¼ì„  ì—´ë„ë¡ í•˜ê³  fileë³€ìˆ˜.readline()ìœ¼ë¡œ txtë¥¼ ì½ëŠ” ì½”ë“œë¥¼ ì§ ë‹¤.</p>

    <ul>
      <li>with asë¥¼ ì•ˆì“°ê³ , openë§Œí•˜ë©´,  rwë™ì‹œì— ì•ˆë˜ì„œ, íŒŒì¼ì„ wí•˜ê³  r modeë¡œëŠ” ì—´ê¸°ë§Œ</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'file.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="p">.</span><span class="n">readline</span><span class="p">())</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>terminalì—ì„œ <code class="language-plaintext highlighter-rouge">python test.py</code></p>
  </li>
  <li>
    <p><strong>ë§Œì•½, openëœ fileì„ closeì•ˆí•˜ê³ , ë˜ë‹¤ì‹œ ì•„ë˜ì—ì„œ with asë¡œ ì—´ë©´.. 2ë²ˆ ì—´ë¦¬ê²Œ ëœë‹¤(close ìë™ì•ˆë¨)</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'file.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="p">.</span><span class="n">readline</span><span class="p">())</span>
   
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'file.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="p">.</span><span class="n">readline</span><span class="p">())</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="dbconnectionhandlerì—-enterexit-ì •ì˜í•´ì£¼ê¸°">
<a class="anchor" href="#dbconnectionhandler%EC%97%90-enterexit-%EC%A0%95%EC%9D%98%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>DBConnectionHandlerì— enter/exit ì •ì˜í•´ì£¼ê¸°</h4>

<ol>
  <li>
    <p>enter: íŒŒë¼ë¯¸í„°ëŠ” ì—†ìœ¼ë©° <strong>ìœ ì§€ë  engineê°ì²´ ìƒì„± + .ormíŒ¨í‚¤ì§€ì˜ sessionmakerê°ì²´ ìƒì„± -&gt; 2ê°œë¥¼ ì—°ê²°í•´ì„œ Handlerì˜ self.sessioní•„ë“œì— ìœ ì§€í•˜ê²Œ í•˜ê³ , return selfë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.</strong></p>
  </li>
  <li>
    <p>exit: í•„ìˆ˜íŒŒë¼ë¯¸í„° 3ê°œê°€ ìˆìœ¼ë©°, <strong>context(session_maker(bind=engine)ê°ì²´)ë¥¼ closeí•´ì£¼ë©´ ëœë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
   
<span class="k">class</span> <span class="nc">DBConnectionHandler</span><span class="p">:</span>
	<span class="c1">#...
</span>	<span class="k">def</span> <span class="nf">get_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">"""Return Connection Engine
		:param - None
		:return - engine connection to Database
		"""</span>
		<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">__connection_string</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">engine</span>
   
	<span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">engine</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
		<span class="n">session_maker</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session_maker</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
		<span class="k">return</span> <span class="bp">self</span>
   
	<span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># pylint: disable=no-memebr
</span></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>engineê³¼ bindëœ sessionê°ì²´ by session_makerë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ <code class="language-plaintext highlighter-rouge">CRUDì— ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©</code>ëœë‹¤.</strong></p>

    <ul>
      <li>handler ê°ì²´ -&gt; sessioní•„ë“œ -&gt; .CRUDë©”ì„œë“œ()
        <ul>
          <li><code class="language-plaintext highlighter-rouge">with DBConnection() as db_connection -&gt; db_connection.session.add()</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="07-repo-ì„¤ì •-ë°-fakepyrepo-ìƒì„±í•˜ê¸°">
<a class="anchor" href="#07-repo-%EC%84%A4%EC%A0%95-%EB%B0%8F-fakepyrepo-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>07 repo ì„¤ì • ë° fake.py(Repo) ìƒì„±í•˜ê¸°</h3>

<ol>
  <li>
    <p>src &gt; infra&gt; ì•„ë˜ì— repoí´ë” ë° init.pyë¥¼ ìƒì„±í•œë‹¤</p>
  </li>
  <li>
    <p>entityë³„ repo classë¥¼ ë§Œë“¤ì–´ì•¼í•˜ëŠ”ë°,<code class="language-plaintext highlighter-rouge">fake.py</code>ë¥¼ ì¼ë‹¨ ë§Œë“ ë‹¤.</p>

    <ul>
      <li>config(db_base, db_config:handler)ë¥¼ í†µì§¸ë¡œ importí•  ì¼ì€, consoleì—ì„œ entitiesì™€ í•¨ê»˜ DBìƒì„± ë³€ê²½ í•  ë•Œë§Œì´ë‹¤.</li>
    </ul>
  </li>
  <li>
    <p><strong>Repo classëŠ” ìƒì†ì—†ì´ + CRUDë©”ì„œë“œë¥¼ @classmehodë¡œ ì •ì˜í•œë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FakeRepo</span><span class="p">:</span>
	<span class="s">"""A simple Repository"""</span>
   	
	<span class="o">@</span><span class="nb">classmethod</span>
	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
		<span class="s">"""something"""</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Repo classì˜ CRUDë©”ì„œë“œë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">DBConnectionHandler  ë°  í•´ë‹¹ entity Class</code>ê°€ í•„ìš”í•˜ë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="k">class</span> <span class="nc">FakeRepo</span><span class="p">:</span>
    <span class="c1"># ...
</span></code></pre></div>    </div>
  </li>
  <li>
    <p><strong>insert(CREATE) ë©”ì„œë“œì˜ ê²½ìš°ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ ì‘ì„±í•œë‹¤.</strong></p>

    <ol>
      <li>context managerê°€ ëœ handlerë¥¼ with as ë¡œ ì—°ë‹¤ -&gt; <strong>í•´ë‹¹ êµ¬ë¬¸ì´ ëë‚˜ë©´ sessionì´ ìë™ close</strong>
</li>
      <li>sessionì„ í†µí•œ CRUDë¥¼ <strong>try ì‘ì—…+commit  excetp rollback+raise finally session.close()í˜•íƒœë¡œ ì‘ì„±í•œë‹¤</strong>
        <ul>
          <li>finallyëŠ” ì‘ì„±ì•ˆí•´ë„, handlerë¥¼ í†µí•œ connectionê°ì²´ëŠ”  withêµ¬ë¬¸ì´ ëë‚˜ë©´ ì•Œì•„ì„œ closeë ê²ƒ ê°™ì€ë°..</li>
        </ul>
      </li>
    </ol>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># pylint: disable=E1101
</span>   
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="k">class</span> <span class="nc">FakeRepo</span><span class="p">:</span>
	<span class="s">"""A simple Repository"""</span>
   	
	<span class="o">@</span><span class="nb">classmethod</span>
	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
		<span class="s">"""some thing"""</span>
   
		<span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">new_user</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
				<span class="k">raise</span>
			<span class="k">finally</span><span class="p">:</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ì‘ì„±ëœ Repo class .py (fake.py)ë¥¼ initì— ì˜¬ë ¤ë‘ê³  ì‚¬ìš©í•  ì¤€ë¹„ë¥¼ í•œë‹¤.</strong></p>

    <ul>
      <li>Repoë¥¼ í†µí•œCRUDì— í•„ìš”í•œ ê²ƒì€ ì´ë¯¸ í•´ë‹¹ repoíŒŒì¼ì— <strong>handler + entity</strong>ê°€importë˜ì–´ìˆë‹¤</li>
    </ul>
  </li>
  <li>
    <p><strong>pythonì½˜ì†”ë¡œ ë“¤ì–´ê°€, <code class="language-plaintext highlighter-rouge">from src.infra.repo import *</code>ì„ í†µí•´, Repoë¥¼ ì˜¬ë ¤ë†“ê³ </strong></p>

    <ul>
      <li>í•´ë‹¹repoê°ì²´ë¥¼ ë§Œë“¤ê³  crudë©”ì„œë“œë¥¼ ì‘ë™ì‹œì¼œë³¸ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">src.infra.repo</span> <span class="kn">import</span> <span class="o">*</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">FakeRepo</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">src</span><span class="p">.</span><span class="n">infra</span><span class="p">.</span><span class="n">repo</span><span class="p">.</span><span class="n">fake</span><span class="p">.</span><span class="n">FakeRepo</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">fake_repo</span> <span class="o">=</span> <span class="n">FakeRepo</span><span class="p">()</span>
   
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">fake_repo</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="s">'cho'</span><span class="p">,</span> <span class="s">'1234'</span><span class="p">)</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220926181531486.png" alt="image-20220926181531486"></p>
  </li>
</ol>

<h3 id="08-ì„¤ì •ì™„ë£Œëœ-í”„ë¡œì íŠ¸ë¥¼-pushí›„-ì‘ì—…í• -brì„-ë”´-ë’¤-localì›ë³¸ë ˆí¬ì‚­ì œdbì±™ê¸°ê¸°-í›„-íŠ¹ì •ë¸Œëœì¹˜ë§Œ-cloneí•˜ì—¬-ê°œë³„ì‘ì—…í•˜ê¸°">
<a class="anchor" href="#08-%EC%84%A4%EC%A0%95%EC%99%84%EB%A3%8C%EB%90%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EB%A5%BC-push%ED%9B%84-%EC%9E%91%EC%97%85%ED%95%A0-br%EC%9D%84-%EB%94%B4-%EB%92%A4-local%EC%9B%90%EB%B3%B8%EB%A0%88%ED%8F%AC%EC%82%AD%EC%A0%9Cdb%EC%B1%99%EA%B8%B0%EA%B8%B0-%ED%9B%84-%ED%8A%B9%EC%A0%95%EB%B8%8C%EB%9E%9C%EC%B9%98%EB%A7%8C-clone%ED%95%98%EC%97%AC-%EA%B0%9C%EB%B3%84%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>08 ì„¤ì •ì™„ë£Œëœ í”„ë¡œì íŠ¸ë¥¼ pushí›„ ì‘ì—…í•  brì„ ë”´ ë’¤, localì›ë³¸ë ˆí¬ì‚­ì œ(.dbì±™ê¸°ê¸°) í›„ íŠ¹ì •ë¸Œëœì¹˜ë§Œ cloneí•˜ì—¬ ê°œë³„ì‘ì—…í•˜ê¸°</h3>

<h4 id="01-ì„¤ì •ì´-ëë‚œ-projectë¥¼-pushí•˜ê³ -upstreamìœ¼ë¡œ-ê°„ì£¼í•˜ë©°-ì‘ì—…branchë¥¼-ë¯¸ë¦¬-ë”°ë†“ëŠ”ë‹¤">
<a class="anchor" href="#01-%EC%84%A4%EC%A0%95%EC%9D%B4-%EB%81%9D%EB%82%9C-project%EB%A5%BC-push%ED%95%98%EA%B3%A0-upstream%EC%9C%BC%EB%A1%9C-%EA%B0%84%EC%A3%BC%ED%95%98%EB%A9%B0-%EC%9E%91%EC%97%85branch%EB%A5%BC-%EB%AF%B8%EB%A6%AC-%EB%94%B0%EB%86%93%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 ì„¤ì •ì´ ëë‚œ projectë¥¼ pushí•˜ê³  upstreamìœ¼ë¡œ ê°„ì£¼í•˜ë©°, ì‘ì—…branchë¥¼ ë¯¸ë¦¬ ë”°ë†“ëŠ”ë‹¤</h4>

<ol>
  <li>
    <p>githubì— pushí•´ë†“ê³  <strong><code class="language-plaintext highlighter-rouge">feat/xxx_repository</code>í˜•íƒœë¡œ ì–¸ë”ë¼ì¸ìœ¼ë¡œ repositoryë³„ ì‘ì—…í•˜ë„ë¡ í•œë‹¤</strong></p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">feat/user_repository</code>ë”°ê¸°</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927012434633.png" alt="image-20220927012434633"></p>
      </li>
      <li>
        <p>ë°”ë¡œ ì´ì–´ì„œ user_repository -&gt; pet_repository ë°”ë¡œ ë”°ê¸°</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927012522777.png" alt="image-20220927012522777"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927012552418.png" alt="image-20220927012552418"></p>
      </li>
    </ul>
  </li>
</ol>

<h4 id="02-brìƒì„±ëœ-repoë¥¼-pullí•´ì„œ-checkoutí•´ì„œ-ì²˜ë¦¬í•˜ì§€ë§ê³ -prì„-ì‚¬ìš©í•˜ê¸°-ìœ„í•´-ì›ë³¸repoëŠ”-ë‚¨ê²¨ë‘ê³ -ë‚¨ì˜repoë©´-forkí›„-ë¸Œëœì¹˜ë‹¨ìœ„ë¡œ--b-cloneí•´ì„œ-ì‘ì—…í›„-prë¡œ-ëë‚´ê¸°">
<a class="anchor" href="#02-br%EC%83%9D%EC%84%B1%EB%90%9C-repo%EB%A5%BC-pull%ED%95%B4%EC%84%9C-checkout%ED%95%B4%EC%84%9C-%EC%B2%98%EB%A6%AC%ED%95%98%EC%A7%80%EB%A7%90%EA%B3%A0-pr%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%B4-%EC%9B%90%EB%B3%B8repo%EB%8A%94-%EB%82%A8%EA%B2%A8%EB%91%90%EA%B3%A0-%EB%82%A8%EC%9D%98repo%EB%A9%B4-fork%ED%9B%84-%EB%B8%8C%EB%9E%9C%EC%B9%98%EB%8B%A8%EC%9C%84%EB%A1%9C--b-clone%ED%95%B4%EC%84%9C-%EC%9E%91%EC%97%85%ED%9B%84-pr%EB%A1%9C-%EB%81%9D%EB%82%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 brìƒì„±ëœ repoë¥¼ pullí•´ì„œ checkoutí•´ì„œ ì²˜ë¦¬í•˜ì§€ë§ê³ , PRì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´, ì›ë³¸repoëŠ” ë‚¨ê²¨ë‘ê³  (ë‚¨ì˜repoë©´ forkí›„) ë¸Œëœì¹˜ë‹¨ìœ„ë¡œ -b cloneí•´ì„œ ì‘ì—…í›„ PRë¡œ ëë‚´ê¸°</h4>

<ol>
  <li>
    <p>ì›ë³¸repoë¥¼ ì‚­ì œí•˜ê¸° ì „ì—, <code class="language-plaintext highlighter-rouge">.gitignore</code>ì— <code class="language-plaintext highlighter-rouge">.db</code>íŒŒì¼ì´ ìˆë‚˜ í™•ì¸í•œë‹¤.</p>

    <ul>
      <li><strong>ìˆìœ¼ë©´ ì„ì‹œë¡œ ìƒìœ„í´ë”ì— ì˜®ê²¨ì¤€ë‹¤.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927023327204.png" alt="image-20220927023327204"></p>
  </li>
  <li>
    <p><strong>ì‘ì—…í–ˆë˜ <code class="language-plaintext highlighter-rouge">backend-python</code> í´ë”ë¥¼ upstremaìœ¼ë¡œ ê°„ì£¼í•˜ê³  ì‚­ì œ</strong>í•œë‹¤</p>

    <ul>
      <li>venví„°ë¯¸ë„</li>
      <li>venv vscodeë‹¤ êº¼ì•¼í•œë‹¤</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927023448112.png" alt="image-20220927023448112"></p>
  </li>
  <li>
    <p><strong>ìƒìœ„í´ë”ì—ì„œ í„°ë¯¸ë„ì„ ì¼œê³  -b íŠ¹ì •ë¸Œëœì¹˜</strong>ë¥¼ ë„£ì–´ì„œ cloneí•œë‹¤</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b feat/user_repository [ë³µë¶™.git]
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927023743519.png" alt="image-20220927023743519"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927023754539.png" alt="image-20220927023754539"></p>
  </li>
  <li>
    <p><strong>ë°±ì—…í•´ë†“ì€ .dbíŒŒì¼ì„ ë³µì‚¬ë§Œ í•´ì„œ ë„£ì–´ì¤€ë‹¤(ë‹¤ë¥¸ brë„ ë³µì‚¬í•´ì„œ ì“¸ ê²ƒì´ê¸° ë•Œë¬¸ì— ìë¦¬ ìœ ì§€)</strong></p>
  </li>
  <li>
    <p>í„°ë¯¸ë„ì—ì„œ cloneí•œ í”„ë¡œì íŠ¸ë¡œ ë“¤ì–´ê°€ <strong>lsì™€ git branchë¥¼ í™•ì¸í•œë‹¤.</strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>cd backend-python
   
ls
   
git branch
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927024318570.png" alt="image-20220927024318570"></p>
  </li>
</ol>

<h4 id="03-cloneë°›ê³ -ë°±ì—…db-ë„£ì–´ì¤€-í´ë”ì—-ê°€ìƒí™˜ê²½-ìƒì„±---requirementstxt-ì„¤ì¹˜---pre-commit-installê¹Œì§€">
<a class="anchor" href="#03-clone%EB%B0%9B%EA%B3%A0-%EB%B0%B1%EC%97%85db-%EB%84%A3%EC%96%B4%EC%A4%80-%ED%8F%B4%EB%8D%94%EC%97%90-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD-%EC%83%9D%EC%84%B1---requirementstxt-%EC%84%A4%EC%B9%98---pre-commit-install%EA%B9%8C%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 cloneë°›ê³  ë°±ì—…db ë„£ì–´ì¤€ í´ë”ì— ê°€ìƒí™˜ê²½ ìƒì„± -&gt; requirements.txt ì„¤ì¹˜ -&gt; pre-commit installê¹Œì§€</h4>

<ol>
  <li>
    <p>virtualenvë¡œ ê°€ìƒí™˜ê²½ ë§Œë“¤ì–´ì£¼ê³ , ì§„ì…í›„, txtì— ë”°ë¼ ì„¤ì¹˜</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>.\venv\Scripts\activate
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div>    </div>
  </li>
  <li>
    <p>code. &gt; select interpreter</p>
  </li>
</ol>

<h2 id="2-repositoryì™€-pytest">
<a class="anchor" href="#2-repository%EC%99%80-pytest" aria-hidden="true"><span class="octicon octicon-link"></span></a>2 Repositoryì™€ PyTest</h2>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927005857759.png" alt="image-20220927005857759"></p>

<ul>
  <li>í•­ìƒ í”„ë¡œì íŠ¸ëŠ” íƒìƒ‰ê¸°ë¡œ í´ë” -&gt; í„°ë¯¸ë„ -&gt; code . &gt; interpreter selectì„ íƒí›„ ë‚´ë¶€í„°ë¯¸ë„ ì¬ì˜¤í”ˆ &gt; ì™¸ë¶€ í„°ë¯¸ë„ venvì§ì ‘ ì¼œì£¼ê¸°
    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">í„°ë¯¸ë„(venv) &gt; vscode(venv)</code>ë¥¼ ê°™ì´ ìœ ì§€</strong>í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<h3 id="01-user-repository-ì‘ì„±">
<a class="anchor" href="#01-user-repository-%EC%9E%91%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 User Repository ì‘ì„±</h3>

<ol>
  <li>
    <p>fake.py ë° repo init ì† FakeRepo classì˜¬ë¦° ê²ƒ ì‚­ì œ</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">user_repository.py</code> ìƒì„± í›„ UserRepositoryí´ë˜ìŠ¤ ìƒì„±</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
	<span class="s">"""class to manage User Repository"""</span>
   	
</code></pre></div>    </div>
  </li>
  <li>
    <p>insertë©”ì„œë“œ ë§Œë“¤ê¸°</p>

    <ol>
      <li>createë¼ì„œ ìë™ìƒì„±ìš© idëŠ” ì¸ìë¡œ ì•ˆë°›ëŠ”ë‹¤)</li>
      <li>docstring ì‘ì„±</li>
    </ol>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
	<span class="s">"""class to manage User Repository"""</span>
   
	<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
		<span class="s">"""insert data in user entity
		:param - name: person name
		       - password: user password
		:return
		"""</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="01-repositoryëŠ”-configì˜-handlerì™€-entitiesì˜-entityë¥¼-ê¸°ë³¸ì ìœ¼ë¡œ-import">
<a class="anchor" href="#01-repository%EB%8A%94-config%EC%9D%98-handler%EC%99%80-entities%EC%9D%98-entity%EB%A5%BC-%EA%B8%B0%EB%B3%B8%EC%A0%81%EC%9C%BC%EB%A1%9C-import" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 repositoryëŠ” configì˜ handlerì™€ entitiesì˜ entityë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ import</h4>

<ol>
  <li>
    <p><strong>CRUDë©”ì„œë“œë‚´ì—ì„œ crudí•˜ê¸° ìœ„í•´ì„œëŠ” ë‚´ë¶€ sessionì„ fieldë¡œ  ìœ ì§€í•˜ëŠ” <code class="language-plaintext highlighter-rouge">DBConnectionHandler</code>ì„ with as db_connectionìœ¼ë¡œ +  í•´ë‹¹ dbë¥¼ ì»¨íŠ¸ë¡¤ í•˜ê¸° ìœ„í•œ <code class="language-plaintext highlighter-rouge">Users entity</code>ê°€ í•„ìš”í•˜ë¯€ë¡œsrc&gt;infra&gt;config + entitiesì—ì„œ import í•´ì„œ ì“´ë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Users</span>
   
   
</code></pre></div>    </div>
  </li>
  <li>
    <p>insert ì‘ì„± ë° pylint E1101(no-member) ë¬´ì‹œí•˜ê¸°</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># pylint: disable=E1101
</span>   
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Users</span>
   
   
<span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
    <span class="s">"""class to manage User Repository"""</span>
   
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="s">"""insert data in user entity
        :param - name: person name
               - password: user password
        :return
        """</span>
        <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_uesr</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_uesr</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
				<span class="k">raise</span> 
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>RepositoryëŠ” CRUDë©”ì„œë“œë“¤ì„ @classmethodë¡œ ì‘ì„±í•œë‹¤</strong></p>

    <ul>
      <li>repositoryëŠ” <strong><code class="language-plaintext highlighter-rouge">í•„ë“œ(ë©¤ë²„)ê°€ ì—†ëŠ” ê°ì²´ 1ê°œ ìƒì„±í•´ì„œ ëŒë ¤ì“°ê¸°</code>ë¥¼ ìœ„í•´   <code class="language-plaintext highlighter-rouge">ê°ì²´ë¡œ static í´ë˜ìŠ¤</code>ì²˜ëŸ¼ ì“°ê¸° ìœ„í•´ clsë¡œ ì •ì˜í•œë‹¤</strong>
</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="nb">classmethod</span>
<span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="02--pytestë¥¼-ìœ„í•´-user_repository_testpyë¥¼-ì‘ì„±í•œë‹¤">
<a class="anchor" href="#02--pytest%EB%A5%BC-%EC%9C%84%ED%95%B4-user_repository_testpy%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02  pytestë¥¼ ìœ„í•´, user_repository_test.pyë¥¼ ì‘ì„±í•œë‹¤.</h4>

<ul>
  <li>
    <p>í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…<code class="language-plaintext highlighter-rouge">_test</code>.py í˜•íƒœë¡œ ë°”ë¡œ ì˜†ì— ì‘ì„±í•´ì¤€ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927035013591.png" alt="image-20220927035013591"></p>
  </li>
</ul>

<h4 id="03-pytest--fakerë¥¼-ì„¤ì¹˜í•˜ê³ -_testpyì—ì„œ-ì‚¬ìš©í•œë‹¤">
<a class="anchor" href="#03-pytest--faker%EB%A5%BC-%EC%84%A4%EC%B9%98%ED%95%98%EA%B3%A0-_testpy%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 pytest + fakerë¥¼ ì„¤ì¹˜í•˜ê³  _test.pyì—ì„œ ì‚¬ìš©í•œë‹¤.</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install faker

pip3 install pytest
</code></pre></div></div>

<ol>
  <li>
    <p><strong>fakerì™€ í˜„ì¬í´ë”ì— ì›ë³¸py ì† í…ŒìŠ¤íŠ¸í•  í´ë˜ìŠ¤ë¥¼ importí•œë‹¤</strong></p>

    <ul>
      <li>ê°™ì€ í´ë”ì˜ pyì€ <code class="language-plaintext highlighter-rouge">.</code>ì„ ë¶™ì—¬ì„œ fromìœ¼ë¡œ ì¡ê³  import classë¥¼ í•˜ë©´ ë¨.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.user_repository</span> <span class="kn">import</span> <span class="n">UserRepository</span>
   
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Fakerê°ì²´ì™€, í…ŒìŠ¤íŠ¸í• í´ë˜ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•´ë†“ê³ , <code class="language-plaintext highlighter-rouge">test_</code>ë¡œ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì„œ  ì‘ì„±í•œë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.user_repository</span> <span class="kn">import</span> <span class="n">UserRepository</span>
<span class="kn">from</span> <span class="nn">src.infra.repo</span> <span class="kn">import</span> <span class="n">user_repository</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
<span class="n">user_repository</span> <span class="o">=</span> <span class="n">UserRepository</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="s">"""Should Insert User"""</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
	<span class="n">password</span> <span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()</span>
   
	<span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="04-pytestëŠ”-í„°ë¯¸ë„ì—ì„œ-ëŒë¦°ë‹¤">
<a class="anchor" href="#04-pytest%EB%8A%94-%ED%84%B0%EB%AF%B8%EB%84%90%EC%97%90%EC%84%9C-%EB%8F%8C%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 pytestëŠ” í„°ë¯¸ë„ì—ì„œ ëŒë¦°ë‹¤</h4>

<p><code class="language-plaintext highlighter-rouge">pytest</code></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927035951484.png" alt="image-20220927035951484"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927040205150.png" alt="image-20220927040205150"></p>

<ul>
  <li>
    <p>pytestí• ë•Œë§ˆë‹¤ ë°ì´í„°ê°€ ì¶”ê°€ë  ê²ƒì´ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927040235115.png" alt="image-20220927040235115"></p>
  </li>
</ul>

<h5 id="pytestì˜-ê²°ê³¼-pytest_cacheí´ë”ê°€-ì¶”ê°€ë˜ë‹ˆ-gitignoreì—-í´ë”ë¥¼-ì¶”ê°€í•œë‹¤">
<a class="anchor" href="#pytest%EC%9D%98-%EA%B2%B0%EA%B3%BC-pytest_cache%ED%8F%B4%EB%8D%94%EA%B0%80-%EC%B6%94%EA%B0%80%EB%90%98%EB%8B%88-gitignore%EC%97%90-%ED%8F%B4%EB%8D%94%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>pytestì˜ ê²°ê³¼ .pytest_cacheí´ë”ê°€ ì¶”ê°€ë˜ë‹ˆ gitignoreì— í´ë”ë¥¼ ì¶”ê°€í•œë‹¤</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h3 id="02-_testpyì—ì„œ-createinsert-ë©”ì„œë“œ-í…ŒìŠ¤íŠ¸">
<a class="anchor" href="#02-_testpy%EC%97%90%EC%84%9C-createinsert-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 _test.pyì—ì„œ CREATE(insert) ë©”ì„œë“œ í…ŒìŠ¤íŠ¸</h3>

<h4 id="01-ì›ë³¸ë©”ì„œë“œ-ë‚´ë¶€ì—ì„œ-í™•ì¸í• -ìƒì„±-ë°ì´í„°ë¥¼-namedtupleë¶ˆë³€í´ë˜ìŠ¤ì˜-ê°ì²´ë¡œ-ìƒì„±í•´ì„œ-ë°˜í™˜í•œë‹¤">
<a class="anchor" href="#01-%EC%9B%90%EB%B3%B8%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%ED%99%95%EC%9D%B8%ED%95%A0-%EC%83%9D%EC%84%B1-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-namedtuple%EB%B6%88%EB%B3%80%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%B4%EC%84%9C-%EB%B0%98%ED%99%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 ì›ë³¸ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ í™•ì¸í•  ìƒì„± ë°ì´í„°ë¥¼ namedTuple(ë¶ˆë³€í´ë˜ìŠ¤)ì˜ ê°ì²´ë¡œ ìƒì„±í•´ì„œ, ë°˜í™˜í•œë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
    <span class="s">"""class to manage User Repository"""</span>

    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="s">"""insert data in user entity
        :param - name: person name
               - password: user password
        :return
        """</span>

        <span class="n">InsertData</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">"Users"</span><span class="p">,</span> <span class="s">"id name password"</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_uesr</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_uesr</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="k">return</span> <span class="n">InsertData</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="n">password</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
            	<span class="c1"># ...
</span>                
        <span class="k">return</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="02-testë©”ì„œë“œì—ì„œëŠ”-returnë¬¼ì„-ë°›ì•„-printí•œë‹¤">
<a class="anchor" href="#02-test%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C%EB%8A%94-return%EB%AC%BC%EC%9D%84-%EB%B0%9B%EC%95%84-print%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 testë©”ì„œë“œì—ì„œëŠ” returnë¬¼ì„ ë°›ì•„ printí•œë‹¤</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="s">"""Should Insert User"""</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
	<span class="n">password</span> <span class="o">=</span><span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()</span>

	<span class="n">new_user</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="03-pytestì—ì„œëŠ”--v---sì˜µì…˜ì„-ê°€í•œë‹¤">
<a class="anchor" href="#03-pytest%EC%97%90%EC%84%9C%EB%8A%94--v---s%EC%98%B5%EC%85%98%EC%9D%84-%EA%B0%80%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 pytestì—ì„œëŠ” -v + -sì˜µì…˜ì„ ê°€í•œë‹¤</h4>

<ul>
  <li>
    <p>ì˜µì…˜ë³„ ì¶œë ¥</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pytest</code></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927144300378.png" alt="image-20220927144300378"></p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">pytest - v</code> : ë©”ì„œë“œë³„ ì„±ê³µì—¬ë¶€</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927144355582.png" alt="image-20220927144355582"></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>ìƒì„±ëœ ë°ì´í„°ë¥¼ ë³€ìˆ˜ì— ë°›ì•„ printê¹Œì§€ í•œ ë‹¤ìŒ <code class="language-plaintext highlighter-rouge">pytest -v -s</code></strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927150400983.png" alt="image-20220927150400983"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927150416488.png" alt="image-20220927150416488"></p>
  </li>
</ul>

<h4 id="04-namedtupleì˜-typenameì„-entityì™€-ë™ì¼í•˜ê²Œ-ì¤€-ê²ƒì˜-ì¥ì ì„-ì‚´ë ¤-insertë©”ì„œë“œì˜-return-type-ëª…ì‹œ-ë°-docstringë„-ìˆ˜ì •í•´ì¤€ë‹¤">
<a class="anchor" href="#04-namedtuple%EC%9D%98-typename%EC%9D%84-entity%EC%99%80-%EB%8F%99%EC%9D%BC%ED%95%98%EA%B2%8C-%EC%A4%80-%EA%B2%83%EC%9D%98-%EC%9E%A5%EC%A0%90%EC%9D%84-%EC%82%B4%EB%A0%A4-insert%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-return-type-%EB%AA%85%EC%8B%9C-%EB%B0%8F-docstring%EB%8F%84-%EC%88%98%EC%A0%95%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 namedTupleì˜ typenameì„ entityì™€ ë™ì¼í•˜ê²Œ ì¤€ ê²ƒì˜ ì¥ì ì„ ì‚´ë ¤, insertë©”ì„œë“œì˜ return type ëª…ì‹œ ë° docstringë„ ìˆ˜ì •í•´ì¤€ë‹¤.</h4>

<ul>
  <li>docstringì—ì„œëŠ” tupleì´ë¼ê³  ì´ë¦„ì§€ì–´ë†“ëŠ”ë‹¤?!</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927150707294.png" alt="image-20220927150707294"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
    <span class="s">"""class to manage User Repository"""</span>

    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="s">"""insert data in user entity
        :param - name: person name
               - password: user password
        :return - tuple with new user inserted
        """</span>
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927150808524.png" alt="image-20220927150808524"></p>

<h4 id="05-handlerì˜-engine---execute-sql-queryë¥¼-ì´ìš©í•´ì„œ-ìƒì„±ëœ-ë°ì´í„°ë¥¼-printì—†ì´-dbë°ì´í„°ë¡œ-í•„ë“œë¼ë¦¬-assertë¡œ-ë¹„êµí•œë‹¤">
<a class="anchor" href="#05-handler%EC%9D%98-engine---execute-sql-query%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-%EC%83%9D%EC%84%B1%EB%90%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-print%EC%97%86%EC%9D%B4-db%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A1%9C-%ED%95%84%EB%93%9C%EB%81%BC%EB%A6%AC-assert%EB%A1%9C-%EB%B9%84%EA%B5%90%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 handlerì˜ engine -&gt; execute sql queryë¥¼ ì´ìš©í•´ì„œ, ìƒì„±ëœ ë°ì´í„°ë¥¼ printì—†ì´ DBë°ì´í„°ë¡œ í•„ë“œë¼ë¦¬ assertë¡œ ë¹„êµí•œë‹¤</h4>

<ol>
  <li>
    <p>ì´ë¯¸ repositoryëŠ” crudë©”ì„œë“œë‚´ì—ì„œ, with handler-&gt; engine -&gt; bind í•œ sessioní•„ë“œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ, **<code class="language-plaintext highlighter-rouge">test</code>ì—ì„œ ì¶”ê°€ë¡œ <code class="language-plaintext highlighter-rouge">handler</code>ë¥¼ importí•´ì„œ <code class="language-plaintext highlighter-rouge">ì‹¤ì‹œê°„sessionì´ ì•„ë‹Œ engine</code>ë§Œ ê°€ì ¸ì™€ <code class="language-plaintext highlighter-rouge">execute</code>í•´ì„œ  dbì† ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì ¸ì™€ì„œ <code class="language-plaintext highlighter-rouge">í•„ë“œë¼ë¦¬ assert</code>ë¡œ  ë¹„êµí•œë‹¤. **</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">.user_repository</span> <span class="kn">import</span> <span class="n">UserRepository</span>
   
<span class="c1">#...
</span><span class="n">db_connection_handler</span> <span class="o">=</span> <span class="n">DBConnectionHandler</span><span class="p">()</span>
   
<span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="c1"># ...
</span>	<span class="n">engine</span> <span class="o">=</span> <span class="n">db_connection_handler</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
   
	<span class="n">new_user</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
	<span class="c1"># SQL Commands
</span>	<span class="n">query_user</span> <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"SELECT * FROM users WHERE id='</span><span class="si">{</span><span class="n">new_user</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">'"</span><span class="p">).</span><span class="n">fetchone</span><span class="p">()</span>
   
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="nb">id</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">name</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">password</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">password</span>
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pytest -v -s
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>executeí›„ fetchone()ì˜ ê²°ê³¼ëŠ” LegacyRowíƒ€ì…ì´ë©° <code class="language-plaintext highlighter-rouge">ì¶œë ¥ì€ íŠœí”Œí˜•íƒœ</code>ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">.í•„ë“œ</code>ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="c1">#...
</span>   
	<span class="n">new_user</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
	<span class="c1"># SQL Commands
</span>	<span class="n">query_user</span> <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"SELECT * FROM users WHERE id='</span><span class="si">{</span><span class="n">new_user</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">'"</span><span class="p">).</span><span class="n">fetchone</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">query_user</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="n">query_user</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pytest -v -s
   
Users(id=14, name='Andrew Moore', password='amount')
&lt;class 'sqlalchemy.engine.row.LegacyRow'&gt;
(14, 'Andrew Moore', 'amount')
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927172953375.png" alt="image-20220927172953375"></p>
  </li>
</ol>

<h4 id="ìƒì„±---sqlë¡œ-ë¡œë“œ---ë¹„êµ-ì „-dbì†-ë°ì´í„°ëŠ”-sqlë¡œ-ì‚­ì œê¹Œì§€-í•´ì¤€ë‹¤">
<a class="anchor" href="#%EC%83%9D%EC%84%B1---sql%EB%A1%9C-%EB%A1%9C%EB%93%9C---%EB%B9%84%EA%B5%90-%EC%A0%84-db%EC%86%8D-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%8A%94-sql%EB%A1%9C-%EC%82%AD%EC%A0%9C%EA%B9%8C%EC%A7%80-%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ìƒì„± -&gt; sqlë¡œ ë¡œë“œ -&gt; ë¹„êµ ì „ dbì† ë°ì´í„°ëŠ” sqlë¡œ ì‚­ì œê¹Œì§€ í•´ì¤€ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="c1">#...
</span>	<span class="n">new_user</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">insert_user</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
	<span class="c1"># SQL Commands
</span>	<span class="n">query_user</span> <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"SELECT * FROM users WHERE id='</span><span class="si">{</span><span class="n">new_user</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">'"</span><span class="p">).</span><span class="n">fetchone</span><span class="p">()</span>
	
	<span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"DELETE FROM users WHERE id='</span><span class="si">{</span><span class="n">new_user</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">'"</span><span class="p">)</span>


	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="nb">id</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">name</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">password</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">password</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest -v -s
</code></pre></div></div>

<h3 id="03-pre-commit-ì„¤ì •ì—-pytest-ì¶”ê°€í•˜ê¸°">
<a class="anchor" href="#03-pre-commit-%EC%84%A4%EC%A0%95%EC%97%90-pytest-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 pre-commit ì„¤ì •ì— pytest ì¶”ê°€í•˜ê¸°</h3>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">.pre-commit-config.yaml</code> ë§¨ ì•„ë˜ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.</p>

    <div class="language-yaml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="pi">-</span>   <span class="na">repo</span><span class="pi">:</span> <span class="s">local</span>
    <span class="na">hooks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">pytest</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">pytest</span>
      <span class="na">language</span><span class="pi">:</span> <span class="s">system</span>
      <span class="na">entry</span><span class="pi">:</span> <span class="s">pytest -v -s</span>
      <span class="na">always_run</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">pass_filenames</span><span class="pi">:</span> <span class="no">false</span>
      <span class="na">stages</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">commit</span><span class="pi">]</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì¼ë¶€ëŸ¬ testê°€ ì—ëŸ¬ë‚˜ë„ë¡ ìˆ˜ì •í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_insert_user</span><span class="p">():</span>
	<span class="c1">#...
</span>   
	<span class="c1"># assert new_user.id == query_user.id
</span>	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="mi">101</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">name</span>
	<span class="k">assert</span> <span class="n">new_user</span><span class="p">.</span><span class="n">password</span> <span class="o">==</span> <span class="n">query_user</span><span class="p">.</span><span class="n">password</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>git commitì„ í†µí•´ pytestê°€ ì‹¤íŒ¨ë¥¼ ì˜ ì¡ì•„ë‚´ëŠ”ì§€ í™•ì¸í•œë‹¤.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git add .
git commit -m "feat: Createing 
UserRepository with insert_user and test it"
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927174527715.png" alt="image-20220927174527715"></p>
  </li>
</ol>

<h3 id="04-upstreamë‚´êº¼ë¼ë©´-remoteì—-pushí•´ì„œ-í•´ë‹¹-ì‘ì—…brë¥¼-í™•ì¸í•œë‹¤">
<a class="anchor" href="#04-upstream%EB%82%B4%EA%BA%BC%EB%9D%BC%EB%A9%B4-remote%EC%97%90-push%ED%95%B4%EC%84%9C-%ED%95%B4%EB%8B%B9-%EC%9E%91%EC%97%85br%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 upstream(ë‚´êº¼ë¼ë©´ remote)ì— pushí•´ì„œ í•´ë‹¹ ì‘ì—…brë¥¼ í™•ì¸í•œë‹¤.</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push
</code></pre></div></div>

<ul>
  <li>
    <p>masterì— ë“¤ì–´ê°€ë„ PRê°€ ëœ¨ê¸´í•œë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175050873.png" alt="image-20220927175050873"></p>
  </li>
  <li>
    <p>ì‘ì—…brë¡œ ë“¤ì–´ê°€ì„œ ì§ì ‘ íŒŒì¼ì„ ë³¼ë• êº¼ì§€ì§€ë§Œ, ë°”ê¾¼ ì¦‰ì‹œëŠ” ë– ìˆë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175215916.png" alt="image-20220927175215916"></p>
  </li>
  <li>
    <p>PRì„ ëˆ„ë¥´ê³ , base &lt;- <strong>compareìª½ì„ ì‘ì—…brë¡œ í™•ì¸</strong>í•˜ê³  <strong>ì•„ë˜ ì½”ë“œë³€í™”ë¥¼ í™•ì¸</strong>í•œë‹¤</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175356646.png" alt="image-20220927175356646">
<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175411293.png" alt="image-20220927175411293"></p>
  </li>
  <li>
    <p><strong>ê´€ë¦¬ìëŠ” PRíƒ­ìœ¼ë¡œ ê°€ì„œ í™•ì¸</strong>í•œë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175543099.png" alt="image-20220927175543099"></p>
  </li>
  <li>
    <p>ê´€ë¦¬ìëŠ” <strong>file changes íƒ­ì—ì„œ ë³€í™”ë¥¼ ë³¸ë‹¤</strong></p>

    <ul>
      <li>ì½”ë©˜íŠ¸ë¥¼ ë‹¬ê³ ë‚˜ì„œ finish reviewë¥¼ í•´ì¤€ë‹¤.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175705790.png" alt="image-20220927175705790"></p>
  </li>
  <li>
    <p><strong>ê´€ë¦¬ìëŠ” íŒŒì¼ë§ˆë‹¤ Viewedë¥¼ í´ë¦­í•˜ë©´, í™•ì¸í•œ íŒŒì¼ë“¤ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175906652.png" alt="image-20220927175906652"></p>
  </li>
  <li>
    <p>í™•ì¸ì´ ëë‚˜ë©´, merge PRí•´ì¤€ë‹¤.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220927175609772.png" alt="image-20220927175609772"></p>
  </li>
</ul>

<h2 id="3-domain-layer-ë°-models-use_cases-ê°œë°œ">
<a class="anchor" href="#3-domain-layer-%EB%B0%8F-models-use_cases-%EA%B0%9C%EB%B0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>3 Domain layer ë° models, use_cases ê°œë°œ</h2>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928021521443.png" alt="image-20220928021521443"></p>

<h3 id="01-src-domain--models-use_cases-ëª¨ë“ˆ-ìƒì„±">
<a class="anchor" href="#01-src-domain--models-use_cases-%EB%AA%A8%EB%93%88-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 src&gt; domain &gt; models, use_cases ëª¨ë“ˆ ìƒì„±</h3>

<ol>
  <li>
    <p>src&gt; <code class="language-plaintext highlighter-rouge">domain</code>í´ë” ë° init.pyë¥¼ ìƒì„±</p>
  </li>
  <li>
    <p>src&gt; domain &gt; <code class="language-plaintext highlighter-rouge">models</code>í´ë” ë° init.pyë¥¼ ìƒì„±</p>
  </li>
  <li>
    <p>src&gt; domain &gt; <code class="language-plaintext highlighter-rouge">use_cases</code>í´ë” ë° init.pyë¥¼ ìƒì„±</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928022241819.png" alt="image-20220928022241819"></p>
  </li>
</ol>

<h3 id="02-repositoryì—-ìˆë˜-namedtupleusersë¥¼-domain--modelsuserspyë¡œ-ì˜®ê¸°ê³ -users-entityëŠ”-usersmodelë¡œ-ì·¨ê¸‰í•˜ê¸°">
<a class="anchor" href="#02-repository%EC%97%90-%EC%9E%88%EB%8D%98-namedtupleusers%EB%A5%BC-domain--modelsuserspy%EB%A1%9C-%EC%98%AE%EA%B8%B0%EA%B3%A0-users-entity%EB%8A%94-usersmodel%EB%A1%9C-%EC%B7%A8%EA%B8%89%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 repositoryì— ìˆë˜ namedTuple(â€œUsersâ€)ë¥¼ domain &gt; models&gt;users.pyë¡œ ì˜®ê¸°ê³ , Users entityëŠ” UsersModelë¡œ ì·¨ê¸‰í•˜ê¸°</h3>

<ol>
  <li>
    <p>user_repositoryì— ìˆëŠ” namedTuple import + ì‚¬ìš©ì½”ë“œë¥¼ src&gt;model&gt;<code class="language-plaintext highlighter-rouge">users.py</code> ë§Œë“¤ì–´ ë¡œ ì˜®ê¸´ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
   
<span class="n">InsertData</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">"Users"</span><span class="p">,</span> <span class="s">"id name password"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ë¶ˆë³€í´ë˜ìŠ¤ ë³€ìˆ˜ëª… == importëœ classëª…ìœ¼ë¡œì„œ Usersë¡œ ìˆ˜ì •í•œ ë’¤, initì— ì˜¬ë¦°ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
   
<span class="n">Users</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">"Users"</span><span class="p">,</span> <span class="s">"id name password"</span><span class="p">)</span>
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.users</span> <span class="kn">import</span> <span class="n">Users</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>user_repositoryì—ì„œëŠ” <strong>DTOê°œë…ìœ¼ë¡œì„œ src&gt;models&gt;user.pyì— ì •ì˜ëœ namedTupleì˜ ë¶ˆë³€í´ë˜ìŠ¤ <code class="language-plaintext highlighter-rouge">Users</code>ë¥¼ importí•´ì„œ ê¸°ì¡´ InsertDataê´€ë ¨ ë¡œì§ì„ ëŒ€ì²´í•œë‹¤</strong>.</p>

    <ul>
      <li>namedTuple -&gt; User(model)</li>
      <li>User(entity) -&gt; UsersModel</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># from collections import namedtuple
</span><span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>
   
<span class="c1">#...
</span>   
<span class="k">class</span> <span class="nc">UserRepository</span><span class="p">:</span>
    <span class="c1"># ...
</span>   
        <span class="c1"># InsertData = namedtuple("Users", "id name password")
</span>   
        <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># new_uesr = Users(name=name, password=password)
</span>                <span class="n">new_uesr</span> <span class="o">=</span> <span class="n">UsersModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_uesr</span><span class="p">)</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
   
                <span class="c1"># return InsertData(
</span>                <span class="k">return</span> <span class="n">Users</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">new_uesr</span><span class="p">.</span><span class="n">password</span>
                <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
                <span class="k">raise</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
   
        <span class="k">return</span> <span class="bp">None</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>êµì²´í•œ ë¡œì§ì´ ì˜ ì‘ë™í•˜ëŠ”ì§€ pytest -vsë¥¼ ëŒë µë…¸ë‹¤.</strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pytest -vs
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì˜ ì‘ë™í•˜ë©´ git status add commití•œë‹¤.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git commit -m "feat: Implementing models in domain layer"
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="03-select_userselectë©”ì„œë“œë¥¼-ê°ì²´ê°€-ë¶€ë¥´ëŠ”-staticë©”ì„œë“œì¸-classmethodë¡œ-ì •ì˜">
<a class="anchor" href="#03-select_userselect%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EA%B0%9D%EC%B2%B4%EA%B0%80-%EB%B6%80%EB%A5%B4%EB%8A%94-static%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%B8-classmethod%EB%A1%9C-%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 select_user(SELECT)ë©”ì„œë“œë¥¼ ê°ì²´ê°€ ë¶€ë¥´ëŠ” staticë©”ì„œë“œì¸ @classmethodë¡œ ì •ì˜</h3>

<h4 id="01-selectì˜-ê²°ê³¼ëŠ”-listmodelë¶ˆë³€class">
<a class="anchor" href="#01-select%EC%9D%98-%EA%B2%B0%EA%B3%BC%EB%8A%94-listmodel%EB%B6%88%EB%B3%80class" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 selectì˜ ê²°ê³¼ëŠ” List[model(ë¶ˆë³€class)]</h4>

<ol>
  <li>
    <p><strong>idì™€ ë™ë“±í•œ uniqueí•„ë“œ nameì´ ìˆìœ¼ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">idì™€ nameëª¨ë‘ = None</code>í˜•íƒœë¡œ ì„ íƒí˜•ìœ¼ë¡œ ë°›ëŠ”ë‹¤.</strong></p>
  </li>
  <li>
    <p><strong>return íƒ€ì…ì„ typingì„ importí•´ ì •ì˜í•˜ë©° ê²°êµ­ì—” <code class="language-plaintext highlighter-rouge">List[model]</code>í˜•íƒœë¡œ ë°˜í™˜ë°›ëŠ”ë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="s">"""
        Select data in user entity by id and/or name
        :param - user_id: Id of the registry
               - name: User name
        :return - List with Users selected
        """</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="02-selectëŠ”-insertì™€-ë‹¬ë¦¬-íŒŒë¼ë¯¸í„°ì˜-ê²½ìš°ì˜ìˆ˜---tryê°€-ì œì¼-ë°”ê¹¥ì—ì„œ-ë‚´ë¶€if-elifë³„-ì§„ì…í›„ì—-with-handler">
<a class="anchor" href="#02-select%EB%8A%94-insert%EC%99%80-%EB%8B%AC%EB%A6%AC-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EC%9D%98-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98---try%EA%B0%80-%EC%A0%9C%EC%9D%BC-%EB%B0%94%EA%B9%A5%EC%97%90%EC%84%9C-%EB%82%B4%EB%B6%80if-elif%EB%B3%84-%EC%A7%84%EC%9E%85%ED%9B%84%EC%97%90-with-handler" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 selectëŠ” insertì™€ ë‹¬ë¦¬ íŒŒë¼ë¯¸í„°ì˜ ê²½ìš°ì˜ìˆ˜ -&gt; tryê°€ ì œì¼ ë°”ê¹¥ì—ì„œ ë‚´ë¶€if elifë³„ ì§„ì…í›„ì— with handler</h4>

<ol>
  <li>
    <p>selectëŠ” idì™¸ì— ëŒ€ì²´ì¹¼ëŸ¼ì¸ unqiueì¹¼ëŸ¼ì„ ì“¸ ìˆ˜ ìˆëŠ” ìˆœê°„ë¶€í„° ì˜µì…”ë„í•˜ê²Œ ë°›ì„ ìˆ˜ ìˆì–´ì•¼í•œë‹¤.</p>

    <ul>
      <li>íŒŒë¼ë¯¸í„°ë¥¼ =Noneìœ¼ë¡œ ëª¨ë‘ ì£¼ê³ , ëª¨ë‘ Noneì´ë©´ ì˜ˆì™¸ì²˜ë¦¬ í•´ì•¼í•  ë“¯</li>
    </ul>
  </li>
  <li>
    <p><strong>selectê²°ê³¼ëŠ” 1ê°œì¼ìˆ˜ë„ ì—¬ëŸ¬ê°œì¼ ìˆ˜ë„ ìˆë‹¤. ê²°ê³¼ëŠ” Listë¡œ ë§ì¶°ë‚¬ìœ¼ë‹ˆ, ê°€ë³€ë³€ìˆ˜ì— 1ê°œì¼ì‹œ []ì”Œì›Œì„œ ë°˜í™˜í•´ì¤€ë‹¤.</strong></p>

    <ol>
      <li>ê°€ë³€ë³€ìˆ˜ query_data = Noneì—ë‹¤ê°€
        <ol>
          <li>
<code class="language-plaintext highlighter-rouge">.one()</code>1ê°œì‹œ -&gt;  [data] í• ë‹¹</li>
          <li>2ê°œì´ìƒì‹œ -&gt; ê·¸ëŒ€ë¡œ í• ë‹¹</li>
        </ol>
      </li>
    </ol>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="s">"""
        Select data in user entity by id and/or name
        :param - user_id: Id of the registry
               - name: User name
        :return - List with Users selected
        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">query_data</span> <span class="o">=</span> <span class="bp">None</span>
   
            <span class="k">if</span> <span class="n">user_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">UsersModel</span><span class="p">).</span><span class="n">filter_by</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">).</span><span class="n">one</span><span class="p">()</span>
                    <span class="n">query_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
   
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">user_id</span> <span class="ow">and</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">UsersModel</span><span class="p">).</span><span class="n">filter_by</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">).</span><span class="n">one</span><span class="p">()</span>
                    <span class="n">query_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
   
            <span class="k">elif</span> <span class="n">user_id</span> <span class="ow">and</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">UsersModel</span><span class="p">).</span><span class="n">filter_by</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">).</span><span class="n">one</span><span class="p">()</span>
                    <span class="n">query_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
   
            <span class="k">return</span> <span class="n">query_data</span>
   
        <span class="k">except</span><span class="p">:</span>
            <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="04-selectë©”ì„œë“œì—-ëŒ€í•œ-testë©”ì„œë“œ-ì‘ì„±">
<a class="anchor" href="#04-select%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%EB%8C%80%ED%95%9C-test%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9E%91%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 selectë©”ì„œë“œì— ëŒ€í•œ testë©”ì„œë“œ ì‘ì„±</h3>

<h4 id="insertcreateë©”ì„œë“œ---dbì¡°íšŒí›„-dbì‚­ì œ-ì™€-ë‹¬ë¦¬-selectëŠ”-dbì‚½ì…ìƒì„±í›„----selectë©”ì„œë“œ---dbì‚­ì œ">
<a class="anchor" href="#insertcreate%EB%A9%94%EC%84%9C%EB%93%9C---db%EC%A1%B0%ED%9A%8C%ED%9B%84-db%EC%82%AD%EC%A0%9C-%EC%99%80-%EB%8B%AC%EB%A6%AC-select%EB%8A%94-db%EC%82%BD%EC%9E%85%EC%83%9D%EC%84%B1%ED%9B%84----select%EB%A9%94%EC%84%9C%EB%93%9C---db%EC%82%AD%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>insert(createë©”ì„œë“œ -&gt; dbì¡°íšŒí›„ dbì‚­ì œ )ì™€ ë‹¬ë¦¬, selectëŠ” dbì‚½ì…ìƒì„±í›„  -&gt; selectë©”ì„œë“œ -&gt; dbì‚­ì œ</h4>

<ol>
  <li>
    <p><strong>ì¡°íšŒì˜ ê²½ìš°, entityì— ë°ì´í„°ë¥¼ ë„£ì–´ì„œ entityê°ì²´ë¡œ ì¡°íšŒí•œë‹¤.</strong></p>

    <ul>
      <li>Users entity -&gt; UsersModelë¡œ ê°€ì ¸ì˜¨ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">.user_repository</span> <span class="kn">import</span> <span class="n">UserRepository</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Users</span> <span class="k">as</span> <span class="n">UsersModel</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>fakerë¡œ í•„ë“œë°ì´í„°ë¥¼ ë§Œë“¤ê³ , <strong>selectì „ DBìƒì„±ë¶€í„° í•œë‹¤</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_select_user</span><span class="p">():</span>
    <span class="s">"""Should select a user in Users table and compare it """</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">UsersModel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
   
    <span class="n">engine</span> <span class="o">=</span> <span class="n">db_connection_handler</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
    <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s">f"  INSERT INTO users (id, name, password) VALUES (</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s">);"</span>
    <span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="ë°ì´í„°ë¥¼-assert-í•„ë“œë¹„êµë¥¼-ë– ë‚˜-entityê°ì²´ë³„-ë¹„êµí•˜ê¸°-ìœ„í•´ì„œ-entityë³„-eqë©”ì„œë“œ-ì •ì˜í•˜ê¸°íŒŒë¼ë¯¸í„°ë¥¼-otherë¡œ-ì£¼ê³ -ë¹„êµ">
<a class="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-assert-%ED%95%84%EB%93%9C%EB%B9%84%EA%B5%90%EB%A5%BC-%EB%96%A0%EB%82%98-entity%EA%B0%9D%EC%B2%B4%EB%B3%84-%EB%B9%84%EA%B5%90%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C-entity%EB%B3%84-eq%EB%A9%94%EC%84%9C%EB%93%9C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-other%EB%A1%9C-%EC%A3%BC%EA%B3%A0-%EB%B9%84%EA%B5%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë°ì´í„°ë¥¼ assert í•„ë“œë¹„êµë¥¼ ë– ë‚˜ entityê°ì²´ë³„ ë¹„êµí•˜ê¸° ìœ„í•´ì„œ, entityë³„ eqë©”ì„œë“œ ì •ì˜í•˜ê¸°(íŒŒë¼ë¯¸í„°ë¥¼ otherë¡œ ì£¼ê³  ë¹„êµ)</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Users</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="s">"""Users Entity"""</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">"users"</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">id_pet</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">"Pets"</span><span class="p">)</span>

    <span class="c1">#...
</span>
    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="nb">id</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">name</span> <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">password</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">password</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">\</code>ì—†ì´ enterë¥¼ í¸í•˜ê²Œ ì¤„ë°”ê¿ˆí•˜ê¸° ìœ„í•´ì„œ ê´„í˜¸ë¥¼ ê±¸ì–´ì£¼ê³  ì¹œë‹¤.</strong></li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Pets</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="s">"""Pets Entity"""</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">"pets"</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">specie</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Enum</span><span class="p">(</span><span class="n">AnimalTypes</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">)</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">"users.id"</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">f"Pets: [name=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="err">!</span><span class="n">r</span><span class="si">}</span><span class="s">, specie=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">specie</span><span class="err">!</span><span class="n">r</span><span class="si">}</span><span class="s">, user_id=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">user_id</span><span class="si">}</span><span class="s">]"</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="nb">id</span> 
            <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">name</span> 
            <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">specie</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">specie</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">age</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">age</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_id</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">user_id</span>
            <span class="p">)</span>
</code></pre></div></div>

<h4 id="uniquekeyì¹¼ëŸ¼ì„-ê°€ì§„-ê²½ìš°ì˜ìˆ˜ë³„-ì¡°íšŒê²°ê³¼1ê°œë¼ë„listentitymodelë¥¼-assert-inìœ¼ë¡œ-ì—¬ëŸ¬ê°œ-ë‹¤-ë¹„êµí•˜ê¸°">
<a class="anchor" href="#uniquekey%EC%B9%BC%EB%9F%BC%EC%9D%84-%EA%B0%80%EC%A7%84-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98%EB%B3%84-%EC%A1%B0%ED%9A%8C%EA%B2%B0%EA%B3%BC1%EA%B0%9C%EB%9D%BC%EB%8F%84listentitymodel%EB%A5%BC-assert-in%EC%9C%BC%EB%A1%9C-%EC%97%AC%EB%9F%AC%EA%B0%9C-%EB%8B%A4-%EB%B9%84%EA%B5%90%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>uniquekeyì¹¼ëŸ¼ì„ ê°€ì§„ ê²½ìš°ì˜ìˆ˜ë³„ ì¡°íšŒê²°ê³¼(1ê°œë¼ë„List[entityModel])ë¥¼ assert inìœ¼ë¡œ ì—¬ëŸ¬ê°œ ë‹¤ ë¹„êµí•˜ê¸°</h4>

<ol>
  <li>
<strong>ê°€ì§œë°ì´í„°ë¡œ -&gt; ëª¨ë¸ dataê°ì²´</strong>ë¥¼ ë§Œë“ ë‹¤.</li>
  <li>ê°€ì§œë°ì´í„°ë¥¼ -&gt; dbì— ì‚½ì…ìƒì„±í•œë‹¤.</li>
  <li>selectë©”ì„œë“œë¡œ dbì¡°íšŒí•˜ì—¬ -&gt; List[ëª¨ë¸]ì„ ë§Œë“ ë‹¤.</li>
  <li>1ë²ˆì—ì„œ ë§Œë“  ëª¨ë¸data vs 3ë²ˆì—ì„œ dbì¡°íšŒí•œ List[ëª¨ë¸]ì„ <strong>ê°ì²´ in [ê°ì²´List]ë¡œ ë¹„êµ</strong>í•œë‹¤.</li>
</ol>

<ul>
  <li><strong>f-string sql ì¤‘ VALUESë‹¤ìŒì—ëŠ” ê° {value}ì—ëŠ” ë°”ê¹¥ìª½ì— â€˜â€˜ì‘ì€ë”°ì˜´í‘œë¥¼ ì”Œì›Œì„œ ë„£ì–´ì¤˜ì•¼í•œë‹¤.</strong></li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_select_user</span><span class="p">():</span>
    <span class="s">"""Should select a user in Users table and compare it """</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">UsersModel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>

    <span class="n">engine</span> <span class="o">=</span> <span class="n">db_connection_handler</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
    <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s">f"  INSERT INTO users (id, name, password) VALUES ('</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s">', '</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">', '</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s">');"</span>
    <span class="p">)</span>

    <span class="n">query_user1</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">query_user2</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">query_user3</span> <span class="o">=</span> <span class="n">user_repository</span><span class="p">.</span><span class="n">select_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_user1</span>
    <span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_user2</span>
    <span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_user3</span>

    <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"DELETE FROM users WHERE id='</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s">';"</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest -v -s
</code></pre></div></div>

<h4 id="commití¬ë§·íŒ…ë“±-í›„-hookì—-ì˜í•´-ì·¨ì†Œë˜ì—ˆë‹¤ë©´-ìˆ˜ì •ëœ-ê²ƒì„-ë‹¤ì‹œ-í•œë²ˆ-add-commit">
<a class="anchor" href="#commit%ED%8F%AC%EB%A7%B7%ED%8C%85%EB%93%B1-%ED%9B%84-hook%EC%97%90-%EC%9D%98%ED%95%B4-%EC%B7%A8%EC%86%8C%EB%90%98%EC%97%88%EB%8B%A4%EB%A9%B4-%EC%88%98%EC%A0%95%EB%90%9C-%EA%B2%83%EC%9D%84-%EB%8B%A4%EC%8B%9C-%ED%95%9C%EB%B2%88-add-commit" aria-hidden="true"><span class="octicon octicon-link"></span></a>commit(í¬ë§·íŒ…ë“±) í›„ hookì— ì˜í•´ ì·¨ì†Œë˜ì—ˆë‹¤ë©´, ìˆ˜ì •ëœ ê²ƒì„ ë‹¤ì‹œ í•œë²ˆ add commit</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status

git add .

git commit -m 'feat: implementing select_user in UserRepository'
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161430582.png" alt="image-20220928161430582"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161441497.png" alt="image-20220928161441497"></p>

<h3 id="05-prí›„-ë™ì¼brì—ì„œ-ë‹¤ë¥¸-ì‘ì—…ì´-ëë‚¬ì„-ë•Œ">
<a class="anchor" href="#05-pr%ED%9B%84-%EB%8F%99%EC%9D%BCbr%EC%97%90%EC%84%9C-%EB%8B%A4%EB%A5%B8-%EC%9E%91%EC%97%85%EC%9D%B4-%EB%81%9D%EB%82%AC%EC%9D%84-%EB%95%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 PRí›„ ë™ì¼brì—ì„œ ë‹¤ë¥¸ ì‘ì—…ì´ ëë‚¬ì„ ë•Œ</h3>

<h4 id="commití›„-push-ì „-githubë¥¼-ë³´ë‹ˆ-ì´ì „-prì´-mergeë˜ì–´ìˆëŠ”ë°ë„-ë‚¨ì•„ìˆë‹¤ë©´-close-prí•´ì¤€ë‹¤">
<a class="anchor" href="#commit%ED%9B%84-push-%EC%A0%84-github%EB%A5%BC-%EB%B3%B4%EB%8B%88-%EC%9D%B4%EC%A0%84-pr%EC%9D%B4-merge%EB%90%98%EC%96%B4%EC%9E%88%EB%8A%94%EB%8D%B0%EB%8F%84-%EB%82%A8%EC%95%84%EC%9E%88%EB%8B%A4%EB%A9%B4-close-pr%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>commití›„ push ì „, githubë¥¼ ë³´ë‹ˆ ì´ì „ PRì´ mergeë˜ì–´ìˆëŠ”ë°ë„ ë‚¨ì•„ìˆë‹¤ë©´, close PRí•´ì¤€ë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928160730842.png" alt="image-20220928160730842"></p>

<h4 id="pushì „-prnew-pull-requestë¥¼-ëˆŒëŸ¬-ë“¤ì–´ê°€ì„œ-comparing-changesë¡œ-ì´ì „prì´-ì–´ë””ê¹Œì§€-ì‘ì—…ë¬ëŠ”ì§€-í™•ì¸í•œë‹¤">
<a class="anchor" href="#push%EC%A0%84-prnew-pull-request%EB%A5%BC-%EB%88%8C%EB%9F%AC-%EB%93%A4%EC%96%B4%EA%B0%80%EC%84%9C-comparing-changes%EB%A1%9C-%EC%9D%B4%EC%A0%84pr%EC%9D%B4-%EC%96%B4%EB%94%94%EA%B9%8C%EC%A7%80-%EC%9E%91%EC%97%85%EB%90%AC%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>pushì „ PR&gt;New pull requestë¥¼ ëˆŒëŸ¬ ë“¤ì–´ê°€ì„œ, Comparing changesë¡œ ì´ì „PRì´ ì–´ë””ê¹Œì§€ ì‘ì—…ë¬ëŠ”ì§€ í™•ì¸í•œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161040496.png" alt="image-20220928161040496"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161111314.png" alt="image-20220928161111314"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161136719.png" alt="image-20220928161136719"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161147312.png" alt="image-20220928161147312"></p>

<h4 id="localì˜-clone-ì‘ì—…brì—ì„œ--commitì„-pushí•´ì„œí•œ-ë’¤---ì§ì ‘-new-pr--compare-branch-ë°”ê¿”ì„œ---create-prí•´ì„œ-ìƒˆë¡œìš´-prì„-ë§Œë“ ë‹¤">
<a class="anchor" href="#local%EC%9D%98-clone-%EC%9E%91%EC%97%85br%EC%97%90%EC%84%9C--commit%EC%9D%84-push%ED%95%B4%EC%84%9C%ED%95%9C-%EB%92%A4---%EC%A7%81%EC%A0%91-new-pr--compare-branch-%EB%B0%94%EA%BF%94%EC%84%9C---create-pr%ED%95%B4%EC%84%9C-%EC%83%88%EB%A1%9C%EC%9A%B4-pr%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>localì˜ [clone ì‘ì—…br]ì—ì„œ  commitì„ pushí•´ì„œí•œ ë’¤ -&gt; ì§ì ‘ New PR &gt; Compare branch ë°”ê¿”ì„œ -&gt; Create PRí•´ì„œ ìƒˆë¡œìš´ PRì„ ë§Œë“ ë‹¤.</h4>

<ul>
  <li>vscodeì—ì„œ git push(ë¡œê·¸ì¸ ëœ í„°ë¯¸ë„ê°œë…)</li>
</ul>

<ol>
  <li>
    <p>ìƒˆ PR ëˆ„ë¥´ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161847178.png" alt="image-20220928161847178"></p>
  </li>
  <li>
    <p>Comparing Changesì—ì„œ ì‘ì—…brë¡œ ë°”ê¾¸ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161905559.png" alt="image-20220928161905559"></p>
  </li>
  <li>
    <p><strong>ì§ì ‘ create PR ëˆ„ë¥´ê¸°</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928161929876.png" alt="image-20220928161929876"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928162011863.png" alt="image-20220928162011863"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928162033796.png" alt="image-20220928162033796"></p>
  </li>
  <li>
    <p>ì§ì ‘ merge ëˆ„ë¥´ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928162139266.png" alt="image-20220928162139266"></p>
  </li>
  <li>
    <p>masterì—ì„œ mergeëœ ê²ƒ í™•ì¸í•˜ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220928162212960.png" alt="image-20220928162212960"></p>
  </li>
</ol>

<h3 id="06-githubì—ì„œ-ë§Œë“ -íƒ€-ì‘ì—…brì„-ê°€ì ¸ì˜¤ë˜-ìµœì‹ masterë¥¼-rebaseí•˜ê³ -ì‚¬ìš©í•˜ê¸°">
<a class="anchor" href="#06-github%EC%97%90%EC%84%9C-%EB%A7%8C%EB%93%A0-%ED%83%80-%EC%9E%91%EC%97%85br%EC%9D%84-%EA%B0%80%EC%A0%B8%EC%98%A4%EB%90%98-%EC%B5%9C%EC%8B%A0master%EB%A5%BC-rebase%ED%95%98%EA%B3%A0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>06 githubì—ì„œ ë§Œë“  íƒ€ ì‘ì—…brì„ ê°€ì ¸ì˜¤ë˜, ìµœì‹ masterë¥¼ rebaseí•˜ê³  ì‚¬ìš©í•˜ê¸°</h3>

<h4 id="br1ê³¼-br2ë¥¼-ë™ì‹œì—-ë§Œë“¤ê³ -ë™ì‹œì—-clone--bí–ˆì—ˆë”ë¼ë©´">
<a class="anchor" href="#br1%EA%B3%BC-br2%EB%A5%BC-%EB%8F%99%EC%8B%9C%EC%97%90-%EB%A7%8C%EB%93%A4%EA%B3%A0-%EB%8F%99%EC%8B%9C%EC%97%90-clone--b%ED%96%88%EC%97%88%EB%8D%94%EB%9D%BC%EB%A9%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>br1ê³¼ br2ë¥¼ ë™ì‹œì— ë§Œë“¤ê³  ë™ì‹œì— clone -bí–ˆì—ˆë”ë¼ë©´</h4>

<ul>
  <li>feat/user_repository -&gt; clone -b</li>
  <li>
<strong>feat/pet_repository -&gt; clone - b ì•ˆë¨(í´ë”ëª… ë™ì¼í•´ì„œ)</strong>
    <ul>
      <li><strong>ë‹¤ë¥¸ í´ë”ì— clone -b í–ˆì–´ì•¼í•¨</strong></li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>feat/pet_repository brì„ cloneí•´ ë‘” ê³³ìœ¼ë¡œ ê°€ì„œ, í„°ë¯¸ë„ì„ ì—´ê³ </p>

    <ul>
      <li>git branch</li>
      <li>
<strong>git checkout master</strong>
        <ul>
          <li><strong>ì‘ì—…bë§Œclone-bí•œ ìƒí™©ì—ì„œ <code class="language-plaintext highlighter-rouge">masterë¡œ checktout</code>í•˜ë©´ masterê°€ ìƒê¸´ë‹¤.</strong></li>
        </ul>
      </li>
      <li>git branch</li>
      <li>
<strong>git pull</strong>
        <ul>
          <li>feat/user_repositoryì—ì„œ ì‘ì—…í•œ ê²ƒë“¤ì´ ë‹¤ masteë¡œ ë°›ì•„ì§„ë‹¤.</li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929012747541.png" alt="image-20220929012747541"></p>
  </li>
</ol>

<h4 id="ë‹¤ìŒì‘ì—…brë§Œ-local-clone--bí•˜ê³ -ignoreë˜ì—ˆë˜---ìƒìœ„í´ë”ì—-ë°±ì—…í•´ë†“ì•˜ë˜-sqlite-dbíŒŒì¼ì„-ë³µë¶™í•´ì¤€ë‹¤">
<a class="anchor" href="#%EB%8B%A4%EC%9D%8C%EC%9E%91%EC%97%85br%EB%A7%8C-local-clone--b%ED%95%98%EA%B3%A0-ignore%EB%90%98%EC%97%88%EB%8D%98---%EC%83%81%EC%9C%84%ED%8F%B4%EB%8D%94%EC%97%90-%EB%B0%B1%EC%97%85%ED%95%B4%EB%86%93%EC%95%98%EB%8D%98-sqlite-db%ED%8C%8C%EC%9D%BC%EC%9D%84-%EB%B3%B5%EB%B6%99%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë‹¤ìŒì‘ì—…brë§Œ local clone -bí•˜ê³ , ignoreë˜ì—ˆë˜ -&gt; ìƒìœ„í´ë”ì— ë°±ì—…í•´ë†“ì•˜ë˜ sqlite .dbíŒŒì¼ì„ ë³µë¶™í•´ì¤€ë‹¤.</h4>

<ol>
  <li>
    <p>ë‚˜ëŠ” í´ë”ëª…ì„ pet_repositoryë¡œ ë§Œë“¤ê³  ì§„ì…í•œ ë’¤,  í„°ë¯¸ë„ì„ ì—´ì–´ì„œ <code class="language-plaintext highlighter-rouge">í˜„ì¬í´ë” .</code>ì— clone - bí•´ì˜¨ë‹¤</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b feat/pet_repository https://github.com/is2js/backend-python.git .
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929013207357.png" alt="image-20220929013207357"></p>
  </li>
  <li>
    <p>ìƒìœ„í´ë”ì— ë°±ì—…í•´ë‘” dbíŒŒì¼ì„ ë³µë¶™í•œë‹¤.</p>
  </li>
  <li>
    <p>í˜¹ì‹œ ëª°ë¼ì„œ masterë¡œ checkoutí•˜ê³  git pullí•´ì¤€ë‹¤.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>PS C:\Users\is2js\pythonProject\pet_repository&gt; git branch
* feat/pet_repository
PS C:\Users\is2js\pythonProject\pet_repository&gt; git checkout master
Switched to a new branch 'master'
Branch 'master' set up to track remote branch 'master' from 'origin'.
PS C:\Users\is2js\pythonProject\pet_repository&gt; git branch
  feat/pet_repository
* master
PS C:\Users\is2js\pythonProject\pet_repository&gt; git pull
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="ìµœì‹ ì—…ëƒëœ-masterë¥¼-ë‘ê³ -ë‹¤ì‹œ-ì‘ì—…brë¡œ-ë„˜ì–´ì™€-git-rebase-masterë¥¼-í†µí•´-masterë¡œë¶€í„°-ìµœì‹ ì‘ì—…ì„-ê°€ì ¸ì˜¨ë‹¤">
<a class="anchor" href="#%EC%B5%9C%EC%8B%A0%EC%97%85%EB%8E%83%EB%90%9C-master%EB%A5%BC-%EB%91%90%EA%B3%A0-%EB%8B%A4%EC%8B%9C-%EC%9E%91%EC%97%85br%EB%A1%9C-%EB%84%98%EC%96%B4%EC%99%80-git-rebase-master%EB%A5%BC-%ED%86%B5%ED%95%B4-master%EB%A1%9C%EB%B6%80%ED%84%B0-%EC%B5%9C%EC%8B%A0%EC%9E%91%EC%97%85%EC%9D%84-%EA%B0%80%EC%A0%B8%EC%98%A8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ìµœì‹ ì—…ëƒëœ masterë¥¼ ë‘ê³ , ë‹¤ì‹œ ì‘ì—…brë¡œ ë„˜ì–´ì™€, git rebase masterë¥¼ í†µí•´ masterë¡œë¶€í„° ìµœì‹ ì‘ì—…ì„ ê°€ì ¸ì˜¨ë‹¤.</h4>

<ul>
  <li>
    <p>ì¼ë‹¨ ìµœì‹ ì—…ëƒ masterì˜ git logë¥¼ ë³´ì.</p>

    <ul>
      <li>
        <p><strong>rebaseê²°ê³¼ 1ì¤„ë¡œ ì´ì–´ì§€ë¯€ë¡œ, ë¯¸ë¦¬ ë³´ì.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929013732893.png" alt="image-20220929013732893"></p>
      </li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p><strong>ìµœì‹ ì—…ëƒmasterë¥¼ ë‘” ìƒíƒœì—ì„œ, ì‘ì—…brë¡œ checkoutí•œë‹¤.</strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout feat/pet_repository
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ì‘ì—…brì—ì„œ -&gt; masterì—ê²Œ rebaseë¥¼ ìš”ì²­í•œë‹¤</strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rebase master
   
First, rewinding head to replay your work on top of it...
Fast-forwarded feat/pet_repository to master.
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929013958639.png" alt="image-20220929013958639"></p>
  </li>
</ol>

<h3 id="07-cloneí•œ-í´ë”-new-settingìµœì´ˆ">
<a class="anchor" href="#07-clone%ED%95%9C-%ED%8F%B4%EB%8D%94-new-setting%EC%B5%9C%EC%B4%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>07 cloneí•œ í´ë” new setting(ìµœì´ˆ)</h3>

<h4 id="01-gitignoreì¤‘ì—-dbíŒŒì¼-ìˆìœ¼ë©´-ì˜®ê²¨ì£¼ê¸°">
<a class="anchor" href="#01-gitignore%EC%A4%91%EC%97%90-db%ED%8C%8C%EC%9D%BC-%EC%9E%88%EC%9C%BC%EB%A9%B4-%EC%98%AE%EA%B2%A8%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<h4 id="02-githubì—ì„œ-ë”°ì˜¨-ë¹ˆ-ìƒˆbrì—-ëŒ€í•´-venvë¥¼-ë§Œë“¤ê³ -í™œì„±í™”í•˜ê³ --vscodeë¥¼-ì—°ë‹¤">
<a class="anchor" href="#02-github%EC%97%90%EC%84%9C-%EB%94%B0%EC%98%A8-%EB%B9%88-%EC%83%88br%EC%97%90-%EB%8C%80%ED%95%B4-venv%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B3%A0-%ED%99%9C%EC%84%B1%ED%99%94%ED%95%98%EA%B3%A0--vscode%EB%A5%BC-%EC%97%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<h4 id="03-ìµœì´ˆ-requirementstxt-ì§ì ‘-ì„¤ì¹˜">
<a class="anchor" href="#03-%EC%B5%9C%EC%B4%88-requirementstxt-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%B9%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<h4 id="04-ìµœì´ˆ-pre-commit-install-ì§ì ‘-ì„¤ì¹˜">
<a class="anchor" href="#04-%EC%B5%9C%EC%B4%88-pre-commit-install-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%B9%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 ìµœì´ˆ pre-commit install ì§ì ‘ ì„¤ì¹˜</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<h3 id="08-pet-repository-ê°œë°œ">
<a class="anchor" href="#08-pet-repository-%EA%B0%9C%EB%B0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>08 pet repository ê°œë°œ</h3>

<h4 id="insert_petcreate-ë©”ì„œë“œ">
<a class="anchor" href="#insert_petcreate-%EB%A9%94%EC%84%9C%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>insert_pet(CREATE) ë©”ì„œë“œ</h4>

<h5 id="pets-entityì—-ëŒ€í•œ-srcdomainmodelsì—ì„œ-petspydto-pets-ë§Œë“¤ì–´ì„œ-ì˜¬ë¦¬ê¸°">
<a class="anchor" href="#pets-entity%EC%97%90-%EB%8C%80%ED%95%9C-srcdomainmodels%EC%97%90%EC%84%9C-petspydto-pets-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-%EC%98%AC%EB%A6%AC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>pets entityì— ëŒ€í•œ src&gt;domain&gt;modelsì—ì„œ pets.py(dto Pets) ë§Œë“¤ì–´ì„œ ì˜¬ë¦¬ê¸°</h5>

<ol>
  <li>
    <p>src&gt;infra&gt;entitiesì— ìˆëŠ” pet.pyì˜ Pets class entityì˜ í•„ë“œë¥¼ í™•ì¸í•˜ê³ , namedTupleë¡œ DTO classë¥¼ ë¨¼ì € ë§Œë“ ë‹¤.</p>

    <ol>
      <li>
        <p>pets.py</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
      
<span class="n">Pets</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">"Pets"</span><span class="p">,</span> <span class="s">"id name specie age user_id"</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>modesì˜ initì— ì˜¬ë¦¬ê¸°</p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.users</span> <span class="kn">import</span> <span class="n">Users</span>
<span class="kn">from</span> <span class="nn">.pets</span> <span class="kn">import</span> <span class="n">Pets</span>
      
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h5 id="pets-entityì—-ëŒ€í•œ-srcinfrarepoì—ì„œ-pet_repositorypy-ì—ì„œ-createë©”ì„œë“œinsert_ë¶€í„°-ë§Œë“¤ê¸°">
<a class="anchor" href="#pets-entity%EC%97%90-%EB%8C%80%ED%95%9C-srcinfrarepo%EC%97%90%EC%84%9C-pet_repositorypy-%EC%97%90%EC%84%9C-create%EB%A9%94%EC%84%9C%EB%93%9Cinsert_%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>pets entityì— ëŒ€í•œ src&gt;infra&gt;repoì—ì„œ pet_repository.py ì—ì„œ CREATEë©”ì„œë“œ(insert_)ë¶€í„° ë§Œë“¤ê¸°</h5>

<ol>
  <li>
    <p>classmethodë¡œ idë¥¼ ì œì™¸í•œ í•„ë“œë¥¼ ì¸ìë¡œ, <strong>ë°˜í™˜íƒ€ì…ì€ DTO Petsë¡œ(ìƒì„±ëœ ê²ƒì„ ë°˜í™˜í•˜ì—¬ í™•ì¸í•˜ê²Œ í•œë‹¤)</strong></p>

    <ul>
      <li><strong>ë°˜í™˜íƒ€ì…ì— ì˜í•´, ì–´ì©”ìˆ˜ ì—†ì´ <code class="language-plaintext highlighter-rouge">model(dto)</code>ë¥¼ import í•´ì•¼í•˜ë¯€ë¡œ, ë¨¼ì € ì •ì˜í–ˆë‹¤.</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>   
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
   
   
<span class="k">class</span> <span class="nc">PetRepository</span><span class="p">:</span>
	<span class="s">"""Class to manage Pet Repository"""</span>
   
	<span class="o">@</span><span class="nb">classmethod</span>
	<span class="k">def</span> <span class="nf">insert_pet</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
   
</code></pre></div>    </div>

    <ul>
      <li>
        <p>import ì¶”ì²œì´ ëœ¨ëŠ”ë° ì†Œë¬¸ìë¡œ importëœë‹¤?</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929155819036.png" alt="image-20220929155819036"></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>crudë¥¼ í•˜ë ¤ë©´, returníƒ€ì…DTOë¿ë§Œ ì•„ë‹ˆë¼, ì‹¤ì œ <code class="language-plaintext highlighter-rouge">entity + session</code>ì´ í•„ìš”í•˜ë‹¤ <code class="language-plaintext highlighter-rouge">as PetsModel</code> + <code class="language-plaintext highlighter-rouge">handler</code>ë¥¼ importí•˜ì.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Pets</span> <span class="k">as</span> <span class="n">PetsModel</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>with handler -&gt; conn -&gt; sessionê°ì²´ë¡œ entityê°ì²´ë¥¼ addí•´ì„œ commití›„, <strong>commití›„ ìë™ìœ¼ë¡œ ë³€ìˆ˜ì— ë“±ë¡ëœ idë¥¼ ì‚¬ìš©í•´ì„œ DTOë¥¼ ì±„ì›Œ ë°˜í™˜í•œë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># pylint: disable=E1101
</span>   
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Pets</span> <span class="k">as</span> <span class="n">PetsModel</span>
   
<span class="k">class</span> <span class="nc">PetRepository</span><span class="p">:</span>
	<span class="s">"""Class to manage Pet Repository"""</span>
   
	<span class="o">@</span><span class="nb">classmethod</span>
	<span class="k">def</span> <span class="nf">insert_pet</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
		<span class="s">"""Insert data in pets entity
   
		Args:
			name (str): name of the pet
			specie (str): Enum with species accpets
			age (int): pet age
			user_id (int): id of the owner (FK)
   
		Returns:
			Pets: tuple with new pet inserted
		"""</span>
		<span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">new_pet</span> <span class="o">=</span> <span class="n">PetsModel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">specie</span><span class="o">=</span><span class="n">specie</span><span class="p">,</span>  <span class="n">age</span><span class="o">=</span><span class="n">age</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_pet</span><span class="p">)</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
   
				<span class="k">return</span> <span class="n">Pets</span><span class="p">(</span>
					<span class="nb">id</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="nb">id</span><span class="p">,</span> 
					<span class="n">name</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> 
					<span class="n">specie</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">specie</span><span class="p">,</span>  
					<span class="n">age</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">age</span><span class="p">,</span> 
					<span class="n">user_id</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">user_id</span>
				<span class="p">)</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
				<span class="k">raise</span>
			<span class="k">finally</span><span class="p">:</span>
				<span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
   		
		<span class="k">return</span> <span class="bp">None</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="pet-repo-ë©”ì„œë“œ1ê°œ-ë§Œë“¤ë•Œë§ˆë‹¤-_testpyì—-testì‘ì„±í•˜ê¸°">
<a class="anchor" href="#pet-repo-%EB%A9%94%EC%84%9C%EB%93%9C1%EA%B0%9C-%EB%A7%8C%EB%93%A4%EB%95%8C%EB%A7%88%EB%8B%A4-_testpy%EC%97%90-test%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>pet repo ë©”ì„œë“œ1ê°œ ë§Œë“¤ë•Œë§ˆë‹¤ _test.pyì— testì‘ì„±í•˜ê¸°</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pet_repositort_test.py</code>ë¥¼ ë§Œë“¤ê³  <code class="language-plaintext highlighter-rouge">test_í•´ë‹¹ë©”ì„œë“œ</code>ë¥¼ ì •ì˜í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_insert_pet</span><span class="p">():</span>
	<span class="s">"""Should insert pet in Pet table and return it"""</span>
   	
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´, fakerë¥¼ ì‚¬ìš©í•œë‹¤</strong></p>

    <ul>
      <li>fakerê°ì²´ëŠ” ì „ì—­ë³€ìˆ˜ë¡œ 1ê°œë¡œì„œ import ë°‘ì— ë§Œë“¤ì–´ì¤€ë‹¤.</li>
      <li><strong>fakerë¡œ ëª»ë§Œë“œëŠ”<code class="language-plaintext highlighter-rouge">enum</code>ì€ ì§ì ‘ ì…ë ¥í•´ì¤€ë‹¤.</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
   
   
<span class="k">def</span> <span class="nf">test_insert_pet</span><span class="p">():</span>
    <span class="s">"""Should insert pet in Pet table and return it"""</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">specie</span> <span class="o">=</span> <span class="s">"fish"</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>repositoryë¥¼ importí•´ì„œ ê±°ê¸° ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸í•  ê²ƒì´ë‹¤.</strong></p>

    <ul>
      <li>ì „ì—­ ê°ì²´ë³€ìˆ˜ë¥¼ ë§Œë“ ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.pet_repository</span> <span class="kn">import</span> <span class="n">PetRepository</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
<span class="n">pet_repository</span> <span class="o">=</span> <span class="n">PetRepository</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>sqlalchemy CRUDë¥¼ ì¦ëª…í•˜ê¸° ìœ„í•´ hanlderë¥¼ importí•´ì„œ engine.executeë¥¼ í™œìš©í•  ê²ƒì´ë‹¤.</strong></p>

    <ul>
      <li>ì „ì—­ hadler -&gt; db_connection_handlerê°ì²´ë¥¼ ë§Œë“ ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.pet_repository</span> <span class="kn">import</span> <span class="n">PetRepository</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
   
<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
<span class="n">pet_repository</span> <span class="o">=</span> <span class="n">PetRepository</span><span class="p">()</span>
<span class="n">db_connection_handler</span> <span class="o">=</span> <span class="n">DBConnectionHandler</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="createinsertì˜-ê²°ê³¼ë¹„êµëŠ”-ë©”ì„œë“œ-ê²°ê³¼namedtuple-vs-engineì¿¼ë¦¬ê²°ê³¼lecayrow-tuple-ê²°ê³¼ì€-ì–´ì©”ìˆ˜-ì—†ì´-í•„ë“œë¼ë¦¬-í•œë‹¤">
<a class="anchor" href="#createinsert%EC%9D%98-%EA%B2%B0%EA%B3%BC%EB%B9%84%EA%B5%90%EB%8A%94-%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B2%B0%EA%B3%BCnamedtuple-vs-engine%EC%BF%BC%EB%A6%AC%EA%B2%B0%EA%B3%BClecayrow-tuple-%EA%B2%B0%EA%B3%BC%EC%9D%80-%EC%96%B4%EC%A9%94%EC%88%98-%EC%97%86%EC%9D%B4-%ED%95%84%EB%93%9C%EB%81%BC%EB%A6%AC-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>create(insert)ì˜ ê²°ê³¼ë¹„êµëŠ” ë©”ì„œë“œ ê²°ê³¼(namedTuple) vs engineì¿¼ë¦¬ê²°ê³¼(LecayRow, tuple) ê²°ê³¼ì€ ì–´ì©”ìˆ˜ ì—†ì´ í•„ë“œë¼ë¦¬ í•œë‹¤</h5>

<ol>
  <li>
    <p><strong>repoë©”ì„œë“œ ê²°ê³¼ë¬¼(dto, namedTuple) vs engineì¿¼ë¦¬ê²°ê³¼ë¬¼(tuple)ì„ ë¹„êµí•œë‹¤</strong></p>

    <ul>
      <li>
        <p><strong>ì°¸ê³ : commitì´ ì´ë£¨ì–´ì§€ëŠ” ìˆœê°„ entity modelë¡œ ë§Œë“  ê°ì²´ì—ëŠ”, idë¥¼ í¬í•¨í•œ ì •ë³´ê°€ ë¶€ì—¬ëœë‹¤.</strong></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Pets</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_conn</span><span class="p">:</span>
<span class="p">...</span>     <span class="n">new_pet</span> <span class="o">=</span> <span class="n">Pets</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'adf'</span><span class="p">,</span><span class="n">specie</span><span class="o">=</span><span class="s">'fish'</span><span class="p">,</span><span class="n">age</span><span class="o">=</span><span class="mi">33</span><span class="p">,</span><span class="n">user_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>                       
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">new_pet</span><span class="p">),</span> <span class="n">new_pet</span><span class="p">)</span>
<span class="p">...</span>     <span class="n">db_conn</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_pet</span><span class="p">)</span>
<span class="p">...</span>     <span class="n">db_conn</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">new_pet</span><span class="p">),</span> <span class="n">new_pet</span><span class="p">)</span>
<span class="p">...</span>     <span class="n">db_conn</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
<span class="p">...</span> 
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">src</span><span class="p">.</span><span class="n">infra</span><span class="p">.</span><span class="n">entities</span><span class="p">.</span><span class="n">pets</span><span class="p">.</span><span class="n">Pets</span><span class="s">'&gt; Pets: [name='</span><span class="n">adf</span><span class="s">', specie='</span><span class="n">fish</span><span class="s">', user_id=1]
&lt;class '</span><span class="n">src</span><span class="p">.</span><span class="n">infra</span><span class="p">.</span><span class="n">entities</span><span class="p">.</span><span class="n">pets</span><span class="p">.</span><span class="n">Pets</span><span class="s">'&gt; Pets: [name='</span><span class="n">adf</span><span class="s">', specie=&lt;AnimalTypes.fish: '</span><span class="n">fish</span><span class="s">'&gt;, user_id=1]
</span></code></pre></div>        </div>

        <ul>
          <li>repo -&gt; entitymodel -&gt; session.addcommit -&gt; entitymodelì™„ì„± -&gt; <strong>dto(namedTuple)</strong>
</li>
        </ul>
      </li>
      <li>
        <p><strong>ì°¸ê³ : engineìœ¼ë¡œ fetchone()í•´ì˜¨ ê²°ê³¼ë¬¼ì€ tupleê°™ì€ ê²ƒì´ë‹¤.</strong></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">query_user</span> <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">'select * from users where id = 1;'</span><span class="p">).</span><span class="n">fetchone</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">query_user</span><span class="p">),</span> <span class="n">query_user</span><span class="p">)</span> 
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">sqlalchemy</span><span class="p">.</span><span class="n">engine</span><span class="p">.</span><span class="n">row</span><span class="p">.</span><span class="n">LegacyRow</span><span class="s">'&gt; (1, '</span><span class="n">cho</span><span class="s">', '</span><span class="mi">1234</span><span class="s">')
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h4 id="test_insert_pet">
<a class="anchor" href="#test_insert_pet" aria-hidden="true"><span class="octicon octicon-link"></span></a>test_insert_pet</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Pets</span> <span class="k">as</span> <span class="n">PetsModel</span>
<span class="kn">from</span> <span class="nn">src.infra.config</span> <span class="kn">import</span> <span class="n">DBConnectionHandler</span>
<span class="kn">from</span> <span class="nn">src.infra.entities.pets</span> <span class="kn">import</span> <span class="n">AnimalTypes</span>
<span class="kn">from</span> <span class="nn">.pet_repository</span> <span class="kn">import</span> <span class="n">PetRepository</span>


<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>
<span class="n">pet_repository</span> <span class="o">=</span> <span class="n">PetRepository</span><span class="p">()</span>
<span class="n">db_connection_handler</span> <span class="o">=</span> <span class="n">DBConnectionHandler</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_insert_pet</span><span class="p">():</span>
    <span class="s">"""Should insert pet in Pet table and return it"""</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">specie</span> <span class="o">=</span> <span class="s">"fish"</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">()</span>

    <span class="c1"># SQL Commands
</span>    <span class="n">new_pet</span> <span class="o">=</span> <span class="n">pet_repository</span><span class="p">.</span><span class="n">insert_pet</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">specie</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">user_id</span><span class="p">)</span>
    <span class="n">engine</span> <span class="o">=</span> <span class="n">db_connection_handler</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
    <span class="n">query_pet</span> <span class="o">=</span> <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s">f'SELECT * FROM pets WHERE id ="</span><span class="si">{</span><span class="n">new_pet</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">";'</span>
    <span class="p">).</span><span class="n">fetchone</span><span class="p">()</span>

    <span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"DELETE FROM users WHERE id = '</span><span class="si">{</span><span class="n">new_pet</span><span class="p">.</span><span class="nb">id</span><span class="si">}</span><span class="s">';"</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">new_pet</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">query_pet</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">new_pet</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">new_pet</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">.</span><span class="nb">id</span>
    <span class="k">assert</span> <span class="n">new_pet</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">.</span><span class="n">name</span>
    <span class="k">assert</span> <span class="n">new_pet</span><span class="p">.</span><span class="n">specie</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">.</span><span class="n">specie</span>
    <span class="k">assert</span> <span class="n">new_pet</span><span class="p">.</span><span class="n">age</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">.</span><span class="n">age</span>
    <span class="k">assert</span> <span class="n">new_pet</span><span class="p">.</span><span class="n">user_id</span> <span class="o">==</span> <span class="n">query_pet</span><span class="p">.</span><span class="n">user_id</span>
</code></pre></div></div>

<h5 id="pytestë¥¼-ê²½ë¡œë¥¼-ì§ì ‘-ì°¾ì•„ê°€-1ê°œì˜-testpyë§Œ-ê±¸-ìˆ˜ë„-ìˆë‹¤">
<a class="anchor" href="#pytest%EB%A5%BC-%EA%B2%BD%EB%A1%9C%EB%A5%BC-%EC%A7%81%EC%A0%91-%EC%B0%BE%EC%95%84%EA%B0%80-1%EA%B0%9C%EC%9D%98-testpy%EB%A7%8C-%EA%B1%B8-%EC%88%98%EB%8F%84-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>pytestë¥¼ ê²½ë¡œë¥¼ ì§ì ‘ ì°¾ì•„ê°€ 1ê°œì˜ test.pyë§Œ ê±¸ ìˆ˜ë„ ìˆë‹¤.</h5>

<ul>
  <li>ìƒìœ„í´ë”ë¶€í„° ì§ì ‘ pyê¹Œì§€ ê°€ì£¼ë©´ ëœë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> pytest .\src\infra\repo\pet_repository_test.py -vs
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929225934419.png" alt="image-20220929225934419"></p>

<h5 id="dto-repoì˜-createinsertë©”ì„œë“œì˜-ê²°ê³¼ë¬¼ì—ì„œ-enum-fieldë¥¼-dtoì—-ë‹´ì„-ë•ŒëŠ”-valueë¡œ--ë‹´ëŠ”ë‹¤">
<a class="anchor" href="#dto-repo%EC%9D%98-createinsert%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EA%B2%B0%EA%B3%BC%EB%AC%BC%EC%97%90%EC%84%9C-enum-field%EB%A5%BC-dto%EC%97%90-%EB%8B%B4%EC%9D%84-%EB%95%8C%EB%8A%94-value%EB%A1%9C--%EB%8B%B4%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[DTO] repoì˜ create(insert)ë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ì—ì„œ enum fieldë¥¼ DTOì— ë‹´ì„ ë•ŒëŠ” .valueë¡œ  ë‹´ëŠ”ë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PetRepository</span><span class="p">:</span>
    <span class="c1">#...
</span>    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">insert_pet</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
        <span class="c1">#...
</span>        <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
            <span class="c1">#...
</span>                <span class="k">return</span> <span class="n">Pets</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="nb">id</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="c1"># specie=new_pet.specie,
</span>                    <span class="n">specie</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">specie</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">age</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">age</span><span class="p">,</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">new_pet</span><span class="p">.</span><span class="n">user_id</span>
                <span class="p">)</span>
</code></pre></div></div>

<h5 id="my-dtonamedtupleê³¼-lecacyrow-ëª¨ë‘-tupleì´ë¼-ê°’ë¹„êµì‹œ-í†µê³¼-ë°”ë¡œ-ë˜ë”ë¼">
<a class="anchor" href="#my-dtonamedtuple%EA%B3%BC-lecacyrow-%EB%AA%A8%EB%91%90-tuple%EC%9D%B4%EB%9D%BC-%EA%B0%92%EB%B9%84%EA%B5%90%EC%8B%9C-%ED%86%B5%EA%B3%BC-%EB%B0%94%EB%A1%9C-%EB%90%98%EB%8D%94%EB%9D%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) DTO(namedTuple)ê³¼ LecacyRow ëª¨ë‘ tupleì´ë¼ ê°’ë¹„êµì‹œ í†µê³¼ ë°”ë¡œ ë˜ë”ë¼â€¦</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929230642759.png" alt="image-20220929230642759"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929230705136.png" alt="image-20220929230705136"></p>

<h5 id="method-testì™„ë£Œí›„-commitì‘ì—…ì„-ì´ì–´í• -ê²ƒì´ë©´-pushì—†ì´-commití›„-ë°”ë¡œ-ì§„í–‰">
<a class="anchor" href="#method-test%EC%99%84%EB%A3%8C%ED%9B%84-commit%EC%9E%91%EC%97%85%EC%9D%84-%EC%9D%B4%EC%96%B4%ED%95%A0-%EA%B2%83%EC%9D%B4%EB%A9%B4-push%EC%97%86%EC%9D%B4-commit%ED%9B%84-%EB%B0%94%EB%A1%9C-%EC%A7%84%ED%96%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>method testì™„ë£Œí›„ commit(ì‘ì—…ì„ ì´ì–´í•  ê²ƒì´ë©´, pushì—†ì´ commití›„ ë°”ë¡œ ì§„í–‰)</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">add</span> <span class="p">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s">"feat: implementing insert_pet in PetRepository"</span>
</code></pre></div></div>

<h4 id="select_pet-ë©”ì„œë“œ">
<a class="anchor" href="#select_pet-%EB%A9%94%EC%84%9C%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>select_pet ë©”ì„œë“œ</h4>

<ol>
  <li>
    <p>selectë¶€í„°ëŠ” 1ê°œë“  ì—¬ëŸ¬ê°œëŠ” return typeì´ <code class="language-plaintext highlighter-rouge">List[DTO]</code>í˜•íƒœë‹¤.</p>

    <ul>
      <li>typing íŒ¨í‚¤ì§€ì—ì„œ List ë¥¼ importí•œë‹¤.</li>
      <li>selectì‹œ íŒŒë¼ë¯¸í„°ê°€ ì„ íƒí˜•ì´ë¯€ë¡œ = Noneìœ¼ë¡œ ì„ ì–¸í•˜ë©°, <strong>ìì‹ ì˜ id or unique keyì¹¼ëŸ¼ or <code class="language-plaintext highlighter-rouge">í•˜ìœ„entity(M)ìœ¼ë¡œì„œ fkë¥¼ ë°˜ë“œì‹œ í¬í•¨</code>ì‹œí‚¨ë‹¤.</strong>
        <ul>
          <li>pet_id : ìì‹ ì˜ id</li>
          <li>user_id: Manyentityê°€ ê°€ì§€ê³  ìˆëŠ” ìƒìœ„entityì˜ id (FK)</li>
        </ul>
      </li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="c1">#...
</span>    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">select_pet</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]:</span>
   
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>selectëŠ” unique or fk ë“± ì„ íƒí˜•ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">try -&gt; ê°€ë³€ë³€ìˆ˜ -&gt; if elif return List[DTO] -&gt; ê° ê²½ìš°ë§ˆë‹¤ with </code>ì˜ ì „ëµìœ¼ë¡œ ê°„ë‹¤.</strong></p>
  </li>
</ol>

<h5 id="ì¡°ì‹¬-fkê°€-selectë©”ì„œë“œì—-ë“¤ì–´ê°„-ê²½ìš°-oneì´-ì•„ë‹ˆë¼-allì„-ì“°ë©°-return-dataê°€-ì•„ë‹ˆë¼-ê·¸ëƒ¥-return-data">
<a class="anchor" href="#%EC%A1%B0%EC%8B%AC-fk%EA%B0%80-select%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%84-%EA%B2%BD%EC%9A%B0-one%EC%9D%B4-%EC%95%84%EB%8B%88%EB%9D%BC-all%EC%9D%84-%EC%93%B0%EB%A9%B0-return-data%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-%EA%B7%B8%EB%83%A5-return-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì¡°ì‹¬! fkê°€ selectë©”ì„œë“œì— ë“¤ì–´ê°„ ê²½ìš°, .one()ì´ ì•„ë‹ˆë¼ .all()ì„ ì“°ë©°, return [data]ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ return data</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="nb">classmethod</span>
<span class="k">def</span> <span class="nf">select_pet</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]:</span>
    <span class="s">"""
        Select dat in PetEntity by id and/or user_id
        :param - pet_id: Id of the pet registry
               - user_id: Id of the owner
                :return - List with Pets selected
        """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="n">query_data</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">pet_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">user_id</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">PetsModel</span><span class="p">)</span>
                    <span class="p">.</span><span class="n">filter_by</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">)</span>
                    <span class="p">.</span><span class="n">one</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">query_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>

                <span class="k">elif</span> <span class="ow">not</span> <span class="n">pet_id</span> <span class="ow">and</span> <span class="n">user_id</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">PetsModel</span><span class="p">)</span>
                            <span class="p">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
                            <span class="p">.</span><span class="nb">all</span><span class="p">()</span>
                        <span class="p">)</span>
                        <span class="n">query_data</span> <span class="o">=</span> <span class="n">data</span>

                        <span class="k">elif</span> <span class="n">pet_id</span> <span class="ow">and</span> <span class="n">user_id</span><span class="p">:</span>
                            <span class="k">with</span> <span class="n">DBConnectionHandler</span><span class="p">()</span> <span class="k">as</span> <span class="n">db_connection</span><span class="p">:</span>
                                <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
                                    <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">PetsModel</span><span class="p">)</span>
                                    <span class="p">.</span><span class="n">filter_by</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
                                    <span class="p">.</span><span class="n">one</span><span class="p">()</span>
                                <span class="p">)</span>
                                <span class="n">query_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
                                <span class="k">return</span> <span class="n">query_data</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">rollback</span><span class="p">()</span>
                                <span class="k">raise</span>
                                <span class="k">finally</span><span class="p">:</span>
                                    <span class="n">db_connection</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

                                    <span class="k">return</span> <span class="bp">None</span>
</code></pre></div></div>

<h4 id="select_test">
<a class="anchor" href="#select_test" aria-hidden="true"><span class="octicon octicon-link"></span></a>select_test</h4>

<h5 id="insertcreateì™€-ë‹¤ë¥´ê²Œ-idë„-fakerë¡œ-ìƒì„±í•´ì„œ-ì¡°íšŒí•œë‹¤">
<a class="anchor" href="#insertcreate%EC%99%80-%EB%8B%A4%EB%A5%B4%EA%B2%8C-id%EB%8F%84-faker%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%B4%EC%84%9C-%EC%A1%B0%ED%9A%8C%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>insert(CREATE)ì™€ ë‹¤ë¥´ê²Œ, idë„ fakerë¡œ ìƒì„±í•´ì„œ ì¡°íšŒí•œë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_select_pet</span><span class="p">():</span>
    <span class="s">"""Should select a pet in Pets table and compare it"""</span>
    <span class="n">pet_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">specie</span> <span class="o">=</span> <span class="s">"fish"</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></div>

<h5 id="insertcreate-testì™€-ë‹¤ë¥´ê²Œ-selectread-testëŠ”-í•´ë‹¹-entity-model-ë°-enumë„-ì§ì ‘í•„ìš”í•˜ë‹¤">
<a class="anchor" href="#insertcreate-test%EC%99%80-%EB%8B%A4%EB%A5%B4%EA%B2%8C-selectread-test%EB%8A%94-%ED%95%B4%EB%8B%B9-entity-model-%EB%B0%8F-enum%EB%8F%84-%EC%A7%81%EC%A0%91%ED%95%84%EC%9A%94%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>insert(CREATE) testì™€ ë‹¤ë¥´ê²Œ, select(READ) testëŠ” í•´ë‹¹ entity Model ë° enumë„ ì§ì ‘í•„ìš”í•˜ë‹¤.</h5>

<h6 id="insertëŠ”-dtotuple-vs-queryê²°ê³¼tuple">
<a class="anchor" href="#insert%EB%8A%94-dtotuple-vs-query%EA%B2%B0%EA%B3%BCtuple" aria-hidden="true"><span class="octicon octicon-link"></span></a>insertëŠ” dto(tuple) vs queryê²°ê³¼(tuple)</h6>

<h6 id="createëŠ”-faker---entitymodel-vs--faker-insert-into---selectë©”ì„œë“œ-listdto">
<a class="anchor" href="#create%EB%8A%94-faker---entitymodel-vs--faker-insert-into---select%EB%A9%94%EC%84%9C%EB%93%9C-listdto" aria-hidden="true"><span class="octicon octicon-link"></span></a>createëŠ” faker -&gt; entitymodel vs  faker-&gt;insert into -&gt; selectë©”ì„œë“œ List[DTO]</h6>

<ol>
  <li>
    <p>entity ë° entityModelê°ì²´ ìƒì„±ì— í•„ìš”í•œ enumë„ ê°™ì´  importí•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.infra.entities</span> <span class="kn">import</span> <span class="n">Pets</span> <span class="k">as</span> <span class="n">PetsModel</span>
<span class="kn">from</span> <span class="nn">src.infra.entities.pets</span> <span class="kn">import</span> <span class="n">AnimalTypes</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>fakerë¡œ ë§Œë“  ë°ì´í„°ë¡œ entityModelì„ ë§Œë“ ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_select_pet</span><span class="p">():</span>
    <span class="s">"""Should select a pet in Pets table and compare it"""</span>
   
    <span class="n">pet_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">name</span><span class="p">()</span>
    <span class="n">specie</span> <span class="o">=</span> <span class="s">"fish"</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(</span><span class="n">digits</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
   
    <span class="n">specie_mock</span> <span class="o">=</span> <span class="n">AnimalTypes</span><span class="p">(</span><span class="s">"fish"</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">PetsModel</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">specie</span><span class="o">=</span><span class="n">specie_mock</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="n">age</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
       
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>engineìœ¼ë¡œ selectí•  ë°ì´í„°ë¥¼ dbì— ì‚½ì…ìƒì„±í•œë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># SQL Commands
</span><span class="n">engine</span> <span class="o">=</span> <span class="n">db_connection_handler</span><span class="p">.</span><span class="n">get_engine</span><span class="p">()</span>
<span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s">f"""
        INSERT INFO pets (id, name, spiece, age, user_id)
        VALUES ('</span><span class="si">{</span><span class="n">pet_id</span><span class="si">}</span><span class="s">', '</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">','</span><span class="si">{</span><span class="n">specie</span><span class="si">}</span><span class="s">','</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s">','</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s">');
        """</span>
<span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>selectë¥¼ íŒŒë¼ë¯¸í„° ê²½ìš°ì˜ ìˆ˜(3ê°€ì§€)ë¡œ ë‚ ë ¤ì„œ entityModelê°ì²´ in selectì¿¼ë¦¬ê²°ê³¼List[Dto]ìœ¼ë¡œ ë¹„êµí•œë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">query_pets1</span> <span class="o">=</span> <span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">)</span>
<span class="n">query_pets2</span> <span class="o">=</span> <span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
<span class="n">query_pets3</span> <span class="o">=</span> <span class="n">pet_repository</span><span class="p">.</span><span class="n">select_pet</span><span class="p">(</span><span class="n">pet_id</span><span class="o">=</span><span class="n">pet_id</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
   
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">query_pets1</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">query_pets1</span><span class="p">))</span>
   
<span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets1</span>
<span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets2</span>
<span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets3</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>insertì™€ ë‹¬ë¦¬,  ë¹„êµëë‚´ê³  ì‚½ì…í•œ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets1</span>
<span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets2</span>
<span class="k">assert</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">query_pets3</span>
   
<span class="n">engine</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">f"DELETE FROM users WHERE id='</span><span class="si">{</span><span class="n">pet_id</span><span class="si">}</span><span class="s">';"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>í…ŒìŠ¤íŠ¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">pytest</span> <span class="p">.</span>\<span class="n">src</span>\<span class="n">infra</span>\<span class="n">repo</span>\<span class="n">pet_repository_test</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">vs</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>entity modelê³¼ List[DTO]ëŠ” íƒ€ì…ì´ ë‹¤ë¥´ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">entity model ì† __eq__</code>ìœ¼ë¡œ ì¸í•´, í•„ë“œë¼ë¦¬ ë¹„êµí•˜ê²Œ ë˜ë‹ˆ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.</strong></p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">entity class ì† __eq__</code></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">id</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="nb">id</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">name</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">specie</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">specie</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">age</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">age</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_id</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">user_id</span>
    <span class="p">)</span>
</code></pre></div>        </div>
      </li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>[name='Marcus Smith', specie=&lt;AnimalTypes.fish: 'fish'&gt;, user_id=5935]
   
&lt;class 'src.infra.entities.pets.Pets'&gt;
   
[Pets: [name='Marcus Smith', specie=&lt;AnimalTypes.fish: 'fish'&gt;, user_id=5935]] 
   
&lt;class 'list'&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="pre-commitì—-ì˜í•´-í•œë²ˆì€-ê±¸ë¦¬ê³ -ìˆ˜ì •ë˜ë‹ˆ-ë§¤ë²ˆ-addí•˜ì§€ë§ê³ -ê·¸ëƒ¥--amìœ¼ë¡œ-commití•´ì£¼ê³ -logí™•ì¸í•˜ì">
<a class="anchor" href="#pre-commit%EC%97%90-%EC%9D%98%ED%95%B4-%ED%95%9C%EB%B2%88%EC%9D%80-%EA%B1%B8%EB%A6%AC%EA%B3%A0-%EC%88%98%EC%A0%95%EB%90%98%EB%8B%88-%EB%A7%A4%EB%B2%88-add%ED%95%98%EC%A7%80%EB%A7%90%EA%B3%A0-%EA%B7%B8%EB%83%A5--am%EC%9C%BC%EB%A1%9C-commit%ED%95%B4%EC%A3%BC%EA%B3%A0-log%ED%99%95%EC%9D%B8%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>pre-commitì— ì˜í•´ í•œë²ˆì€ ê±¸ë¦¬ê³ , ìˆ˜ì •ë˜ë‹ˆ ë§¤ë²ˆ addí•˜ì§€ë§ê³  ê·¸ëƒ¥ -amìœ¼ë¡œ commití•´ì£¼ê³  logí™•ì¸í•˜ì</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status

git commit -am "feat: implementing insert_pet and select_pet in PetRepository"

git log --oneline
</code></pre></div></div>

<h4 id="test-ì •ë¦¬-insertë©”ì„œë“œì™€-selectë©”ì„œë“œ-í…ŒìŠ¤íŠ¸">
<a class="anchor" href="#test-%EC%A0%95%EB%A6%AC-insert%EB%A9%94%EC%84%9C%EB%93%9C%EC%99%80-select%EB%A9%94%EC%84%9C%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>[Test] ì •ë¦¬: insertë©”ì„œë“œì™€ selectë©”ì„œë“œ í…ŒìŠ¤íŠ¸</h4>

<h5 id="01-insertë©”ì„œë“œtest_insert_pet">
<a class="anchor" href="#01-insert%EB%A9%94%EC%84%9C%EB%93%9Ctest_insert_pet" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 insertë©”ì„œë“œ(test_insert_pet)</h5>

<ol>
  <li>fakerë¡œ insertë©”ì„œë“œì˜ í•„ë“œì¬ë£Œë“¤ì„ <code class="language-plaintext highlighter-rouge">dbë°°ì • idí•„ë“œ</code>ì œì™¸í•˜ê³   ë§Œë“ ë‹¤</li>
  <li>
<strong>insertë©”ì„œë“œë¡œ new_pet(DTO)ë¡œ ë°˜í™˜</strong>ë°›ëŠ”ë‹¤.
    <ul>
      <li>(ë‚´ë¶€)ì¬ë£Œ-&gt;entityëª¨ë¸ê°ì²´-&gt;dbì— add(INSERT, CREATE)í›„ entityê°ì²´ì— idë°°ê¸‰ -&gt; entityëª¨ë¸ê°ì²´ì˜ í•„ë“œë“¤ë¡œ <strong>DTOë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜</strong>
</li>
    </ul>
  </li>
  <li>
<strong>assert</strong>ëŠ” DTOí•„ë“œ(namedTuple) == queryí•„ë“œ(tupe, LegacyRow)ì˜ <strong>í•„ë“œë¹„êµ</strong>ì´ë©° <strong>DTOí•„ë“œì— ëŒ€ì‘ë˜ëŠ” queryê²°ê³¼ tupleì´ ìš”êµ¬ëœë‹¤</strong>
</li>
  <li>
<strong>insertë©”ì„œë“œê²°ê³¼ DTOì—ì„œ idë§Œ ë°›ì•„ì™€ì„œ db engineìœ¼ë¡œ select -&gt; query_pet</strong>ìœ¼ë¡œ ë°›ì•„ì£¼ê³  <strong>ë°”ë¡œ engineìœ¼ë¡œ deleteê¹Œì§€ ë¨¹ì—¬ì¤€ë‹¤.</strong>
    <ul>
      <li>query_dataì— <strong>sqlalchemy insertëœ ë°ì´í„°ì˜ idë¡œ ë°ì´í„°ë§Œ ì¡°íšŒí•´ì˜¤ë©´ ë¨</strong>
</li>
    </ul>
  </li>
  <li>dtoí•„ë“œë“¤ê³¼ queryí•„ë“œë“¤ì„ ë¹„êµí•œë‹¤.</li>
</ol>

<ul>
  <li>
<strong>ìš”ì•½</strong>
    <ul>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</li>
    </ul>
  </li>
</ul>

<h5 id="02-select-ë©”ì„œë“œtest_select_pet">
<a class="anchor" href="#02-select-%EB%A9%94%EC%84%9C%EB%93%9Ctest_select_pet" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 select ë©”ì„œë“œ(test_select_pet)</h5>

<ol>
  <li>fakerë¡œ selectë©”ì„œë“œë“¤ì˜ ì¬ë£Œë“¤ì„ <code class="language-plaintext highlighter-rouge">ì´ë¯¸dbì—ìˆìœ¼ë‹ˆ idê¹Œì§€</code> ë§Œë“ ë‹¤.
    <ul>
      <li><strong>enum typeì´ë¼ë©´, enumClass(enum value)ë¡œ _mock í•„ë“œë¥¼ ë§Œë“ ë‹¤.</strong></li>
    </ul>
  </li>
  <li>idí¬í•¨ ì¬ë£Œë“¤ + <strong><code class="language-plaintext highlighter-rouge">entityëª¨ë¸ê°ì²´</code></strong>ë¥¼ ì§ì ‘ ë§Œë“ ë‹¤.
    <ul>
      <li>entityëª¨ë¸ê°ì²´ëŠ” ë¹„êµë¥¼ ìœ„í•œ ê²ƒì´ë©°, sqlalchemyë¡œ CRUDë¥¼ ì§ì ‘ í•˜ì§„ ì•ŠëŠ”ë‹¤??!</li>
    </ul>
  </li>
  <li>
<strong>ë˜‘ê°™ì€ idí¬í•¨ì¬ë£Œë“¤ + engine -&gt; db insertë¡œ ì‚½ì…ìƒì„±í•´ì„œ dbì— selectí•  ë°ì´í„°ë¥¼ ì„¸íŒ…</strong>í•´ë†“ëŠ”ë‹¤.</li>
  <li>
<strong>selectë©”ì„œë“œë¡œ <code class="language-plaintext highlighter-rouge">id ë° fk_idê²½ìš°ì˜ìˆ˜ë§Œí¼</code> query_data = <code class="language-plaintext highlighter-rouge">List[Entityëª¨ë¸ê°ì²´]</code>ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤.</strong>
    <ul>
      <li>(ë‚´ë¶€) session query(Entityëª¨ë¸).filterë“± one() or all()  -&gt; <strong>List[Entityëª¨ë¸ê°ì²´]</strong>
</li>
    </ul>
  </li>
  <li>
<strong>assertëŠ” (sessionì¡°ì‘ì—†ì´ ê·¸ëƒ¥ë§Œë“ ) entityëª¨ë¸ê°ì²´ in List[entityëª¨ë¸ê°ì²´]</strong>ì´ë‹¤</li>
  <li>
<strong>selectë¥¼ ìœ„í•´ idí¬í•¨ì¬ë£Œë“¤ë¡œ ë§Œë“  dbë°ì´í„°</strong>ë¥¼ <strong>engineìœ¼ë¡œ delete</strong>í•´ì¤€ë‹¤.</li>
</ol>

<ul>
  <li>
<strong>ìš”ì•½</strong>
    <ul>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ul>
  </li>
</ul>

<h2 id="4-insert-select-ë©”ì„œë“œë“¤ì˜-interface-ì œì‘">
<a class="anchor" href="#4-insert-select-%EB%A9%94%EC%84%9C%EB%93%9C%EB%93%A4%EC%9D%98-interface-%EC%A0%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>4 insert, select ë©”ì„œë“œë“¤ì˜ Interface ì œì‘</h2>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930200823231.png" alt="image-20220930200823231"></p>

<h3 id="01-src-dataí´ë”-ë°-init-ìƒì„±--interfaces-í´ë”-ë°-initìƒì„±">
<a class="anchor" href="#01-src-data%ED%8F%B4%EB%8D%94-%EB%B0%8F-init-%EC%83%9D%EC%84%B1--interfaces-%ED%8F%B4%EB%8D%94-%EB%B0%8F-init%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 src&gt; dataí´ë” ë° init ìƒì„± &gt; interfaces í´ë” ë° initìƒì„±</h3>

<ul>
  <li>
<strong>dbê´€ë ¨ëœ entities</strong>(Baseìƒì†class entityëª¨ë¸)ëŠ” <strong><code class="language-plaintext highlighter-rouge">infra layer</code>ì— **, **ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” ê°ì²´ì™€ ê´€ë ¨ëœ models</strong>(DTO)ëŠ” <strong><code class="language-plaintext highlighter-rouge">domain layer</code>ì—</strong> , <strong>interfaceëŠ” <code class="language-plaintext highlighter-rouge">data layer</code></strong>ì— ì†í•œë‹¤.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930231400928.png" alt="image-20220930231400928"></p>

<h3 id="02-ê°-repositorypyë³„-repository_interfacepy-ë§Œë“¤ê¸°">
<a class="anchor" href="#02-%EA%B0%81-repositorypy%EB%B3%84-repository_interfacepy-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 ê° repository.pyë³„ repository_interface.py ë§Œë“¤ê¸°</h3>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pet_repository_interface.py</code> ìƒì„±</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PetRepositoryInterface</span><span class="p">():</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ê° Interface classë“¤ì€ ì¶”ìƒí´ë˜ìŠ¤ê°€ ë˜ì–´ì•¼í•˜ë¯€ë¡œ ì•„ë˜ ê²ƒë“¤ì„ importí•œë‹¤.</strong></p>

    <ol>
      <li>abc íŒ¨í‚¤ì§€ì—ì„œ ì¶”ìƒí´ë˜ìŠ¤ABCì™€ ì¶”ìƒë©”ì„œë“œëª¨ë“ˆ</li>
      <li>selectë©”ì„œë“œì˜ ì‘ë‹µíƒ€ì… List</li>
      <li>insertë©”ì„œë“œì˜ ì‘ë‹µíƒ€ì…(idë°°ì •ëœentity-&gt;DTO)ì¸ modelsì˜ DTO</li>
    </ol>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>interfaceí´ë˜ìŠ¤ëŠ” ABCë¥¼ ìƒì†í•´ì„œ @abstractmethodë¡œ ì •ì˜í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Pets</span>
   
<span class="k">class</span> <span class="nc">PetRepositoryInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
	<span class="s">""" Interface to Pet repository"""</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>ì¶”ìƒë©”ì„œë“œì˜ signatureëŠ” <code class="language-plaintext highlighter-rouge">repoì˜ method signature</code>ë¥¼ ë³µì‚¬í•´ì„œ êµ¬ì„±í•œë‹¤</strong></p>

    <ul>
      <li><strong>repoë©”ì„œë“œëŠ” classë©”ì„œë“œì´ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">cls</code>ë¥¼ ì¶”ìƒë©”ì„œë“œìš©  <code class="language-plaintext highlighter-rouge">self</code>ë¡œ ë³€ê²½í•´ì„œ ì“´ë‹¤</strong></li>
      <li><strong>êµ¬í˜„ì•ˆë˜ê³  í˜¸ì¶œë˜ëŠ” ê²½ìš°ëŠ” ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆê²Œ <code class="language-plaintext highlighter-rouge">raise Exception("")</code>ì„ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">abstractclassmethod</span>
<span class="k">def</span> 
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PetRepositoryInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to Pet repository"""</span>
   
    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">insert_pet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">specie</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pets</span><span class="p">:</span>
        <span class="s">""" abstractmethod """</span>
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Method not implemented"</span><span class="p">)</span>
   
    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">select_pet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pet_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Pets</span><span class="p">]:</span>
        <span class="s">""" abstractmethod """</span>
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Method not implemented"</span><span class="p">)</span>
   
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="user_repository_interfacepyë„-petêº¼ë¥¼-ë³µì‚¬í•´ì„œ-ë°”ê¿”ì£¼ê¸°">
<a class="anchor" href="#user_repository_interfacepy%EB%8F%84-pet%EA%BA%BC%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>user_repository_interface.pyë„ Petêº¼ë¥¼ ë³µì‚¬í•´ì„œ ë°”ê¿”ì£¼ê¸°</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractclassmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">src.domain.models</span> <span class="kn">import</span> <span class="n">Users</span>


<span class="k">class</span> <span class="nc">UserRepositoryInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="s">""" Interface to Pet repository"""</span>

    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">insert_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Users</span><span class="p">:</span>
        <span class="s">""" abstractmethod """</span>
        
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Method not implemented"</span><span class="p">)</span>

    <span class="o">@</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">select_user</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Users</span><span class="p">]:</span>
        <span class="s">""" abstractmethod """</span>

        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Method not implemented"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="03-initpyì—-ìƒì„±í•œ-interface-ì˜¬ë ¤ì£¼ê¸°">
<a class="anchor" href="#03-initpy%EC%97%90-%EC%83%9D%EC%84%B1%ED%95%9C-interface-%EC%98%AC%EB%A0%A4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 init.pyì— ìƒì„±í•œ Interface ì˜¬ë ¤ì£¼ê¸°</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.pet_repository_interface</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span>
<span class="kn">from</span> <span class="nn">.user_repository_interface</span> <span class="kn">import</span> <span class="n">UserRepositoryInterface</span>

</code></pre></div></div>

<h3 id="04-ê°-infrarepoì†-repositorypyë“¤ì˜-classë“¤ì€-datainterfaces-ì†repository_interfacepyë“¤ì„-ìƒì†í•´ì„œ-êµ¬í˜„í•´ì•¼í•œë‹¤">
<a class="anchor" href="#04-%EA%B0%81-infrarepo%EC%86%8D-repositorypy%EB%93%A4%EC%9D%98-class%EB%93%A4%EC%9D%80-datainterfaces-%EC%86%8Drepository_interfacepy%EB%93%A4%EC%9D%84-%EC%83%81%EC%86%8D%ED%95%B4%EC%84%9C-%EA%B5%AC%ED%98%84%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 ê° infra&gt;repoì†&gt; repository.pyë“¤ì˜ classë“¤ì€ data&gt;interfaces ì†&gt;repository_interface.pyë“¤ì„ ìƒì†í•´ì„œ êµ¬í˜„í•´ì•¼í•œë‹¤.</h3>

<ol>
  <li>
    <p>interface import í›„ classê°€ ìƒì†</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">UserRepositoryInterface</span>
<span class="c1">#...
</span>   
   
<span class="k">class</span> <span class="nc">UserRepository</span><span class="p">(</span><span class="n">UserRepositoryInterface</span><span class="p">):</span>
    <span class="s">"""class to manage User Repository"""</span>
   
</code></pre></div>    </div>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.data.interfaces</span> <span class="kn">import</span> <span class="n">PetRepositoryInterface</span>
<span class="c1">#...
</span>   
   
<span class="k">class</span> <span class="nc">PetRepository</span><span class="p">(</span><span class="n">PetRepositoryInterface</span><span class="p">):</span>
    <span class="s">"""Class to manage Pet Repository"""</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>pytest ëŒë ¤ì„œ ë©”ì„œë“œë“¤ ì‘ë™ ë¬¸ì œì—†ëŠ”ì§€ í™•ì¸</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>pytest -vs
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="05-ì‘ì—…br-ì™„ë£Œêµ¬í˜„-pytest---ì»¤ë°‹-push---githubì—ì„œ-new-prê¹Œì§€">
<a class="anchor" href="#05-%EC%9E%91%EC%97%85br-%EC%99%84%EB%A3%8C%EA%B5%AC%ED%98%84-pytest---%EC%BB%A4%EB%B0%8B-push---github%EC%97%90%EC%84%9C-new-pr%EA%B9%8C%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 ì‘ì—…br ì™„ë£Œ(êµ¬í˜„ pytest) -&gt; ì»¤ë°‹ push -&gt; githubì—ì„œ new PRê¹Œì§€</h3>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add 
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>

    <ul>
      <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235359040.png" alt="image-20220930235359040"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235410729.png" alt="image-20220930235410729"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235422088.png" alt="image-20220930235422088"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235435742.png" alt="image-20220930235435742"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235515759.png" alt="image-20220930235515759"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235609221.png" alt="image-20220930235609221"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235628829.png" alt="image-20220930235628829"></p>
  </li>
</ol>

<ul>
  <li>
    <p><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220930235822367.png" alt="image-20220930235822367"></p>
  </li>
</ul>

<h2 id="ì°¸ê³ ">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ </h2>

<h4 id="gitignore">
<a class="anchor" href="#gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>gitignore</h4>

<ul>
  <li>
    <p>gitì— commitë˜ì—ˆë˜ ê²ƒì„ ignoreí•˜ê³  ì‹¶ì„ ë•Œ</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rm [íŒŒì¼ëª…] --cached
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>console ë“±ì—ì„œ init importë¶€í„° ìƒê¸°ëŠ” pycacheí´ë”</li>
  <li>venv</li>
  <li>ì—°ìŠµìš© sqlite .dbíŒŒì¼</li>
  <li>pytestì‹œ ìƒê¸°ëŠ” .pytest_cache í´ë”</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h4 id="sqlalchemyíŒ¨í‚¤ì§€">
<a class="anchor" href="#sqlalchemy%ED%8C%A8%ED%82%A4%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>sqlalchemyíŒ¨í‚¤ì§€</h4>

<ul>
  <li>ì¼ë°˜ íŒ¨í‚¤ì§€: create_engine / ì¹¼ëŸ¼ì¬ë£Œë“¤</li>
  <li>.orm íŒ¨í‚¤ì§€:   relatioship(1ê´€ê³„)/sessionmaker(handlerì˜ enterì—ì„œ engineì„ ë¬¶ì–´ì„œ ê°€ì§€ê³  ìˆì„ ë†ˆ)</li>
</ul>

<h4 id="cloneí›„-ì‘ì—…-ì„¸íŒ…">
<a class="anchor" href="#clone%ED%9B%84-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>cloneí›„ ì‘ì—… ì„¸íŒ…</h4>

<ol>
  <li>gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°</li>
</ol>

<ul>
  <li>ì—†ìœ¼ë©´ config importí•´ì„œ Base + enigne bindí•œ ë‹¤ìŒ, create_all()í•´ì¤˜ì•¼í• ë“¯??</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<ol>
  <li>githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ pre-commit install ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<h4 id="clone--b-ì‘ì—…í…ŒìŠ¤íŠ¸ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">
<a class="anchor" href="#clone--b-%EC%9E%91%EC%97%85%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%99%84%EB%A3%8C%ED%9B%84--merge%EA%B9%8C%EC%A7%80-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>clone -b ì‘ì—…+í…ŒìŠ¤íŠ¸ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</h4>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add 
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>
  </li>
</ol>

<ul>
  <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
</ul>

<ol>
  <li><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></li>
</ol>

<h4 id="vscode-ì„¤ì •">
<a class="anchor" href="#vscode-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>vscode ì„¤ì •</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"**/__pycache__"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"**/.pytest_cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h4 id="testì •ë¦¬">
<a class="anchor" href="#test%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì •ë¦¬</h4>

<ol>
  <li>
    <p>test_insert_X</p>

    <ol>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</li>
    </ol>
  </li>
  <li>
    <p>test_select_X</p>

    <ol>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ol>
  </li>
</ol>


  </div><a class="u-url" href="/python/flask/cleanarchitecture/2022/09/01/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_01_infra_domain_data_layer.html" hidden></a>
</article>


<!-- <script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>í‰ë²”í•œ í•œì˜ì‚¬ ëŒë²”ì˜ ì—”ì§€ë‹ˆì–´ ë„ì „ê¸°</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
