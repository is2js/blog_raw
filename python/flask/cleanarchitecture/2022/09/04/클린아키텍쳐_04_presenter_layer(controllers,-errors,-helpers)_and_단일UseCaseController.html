<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>í´ë¦°ì•„í‚¤í…ì³ 04 presenter layerì™€ OneEntity UseCaseController | ëŒë²”í…¤ë†‘</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="í´ë¦°ì•„í‚¤í…ì³ 04 presenter layerì™€ OneEntity UseCaseController" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="python clean architecture" />
<meta property="og:description" content="python clean architecture" />
<link rel="canonical" href="https://blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/04/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_04_presenter_layer(controllers,-errors,-helpers)_and_%EB%8B%A8%EC%9D%BCUseCaseController.html" />
<meta property="og:url" content="https://blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/04/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_04_presenter_layer(controllers,-errors,-helpers)_and_%EB%8B%A8%EC%9D%BCUseCaseController.html" />
<meta property="og:site_name" content="ëŒë²”í…¤ë†‘" />
<meta property="og:image" content="https://blog.chojaeseong.com/images/posts/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-09-04T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-09-04T00:00:00-05:00","url":"https://blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/04/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_04_presenter_layer(controllers,-errors,-helpers)_and_%EB%8B%A8%EC%9D%BCUseCaseController.html","@type":"BlogPosting","image":"https://blog.chojaeseong.com/images/posts/python.png","headline":"í´ë¦°ì•„í‚¤í…ì³ 04 presenter layerì™€ OneEntity UseCaseController","dateModified":"2022-09-04T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chojaeseong.com/python/flask/cleanarchitecture/2022/09/04/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_04_presenter_layer(controllers,-errors,-helpers)_and_%EB%8B%A8%EC%9D%BCUseCaseController.html"},"description":"python clean architecture","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- í°íŠ¸ì¶”ê°€ë¥¼ ìœ„í•œ linkíƒœê·¸ ì‚½ì… -->
  <!-- í°íŠ¸1:  ê¸°ë³¸ spoqa ì›¹í°íŠ¸ -->
  <!-- cssì—ì„œ * {} ë‹¤ ë’¤ì§‘ì–´ì”€. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- í°íŠ¸2:  ë¸”ë¡œê·¸ ì œëª©ë“¤ sunflower ì›¹í°íŠ¸ -->
  <!-- ì¥¬í”¼í„° ë“± í¬ìŠ¤íŠ¸ ë‚´ë¶€ ê¸€ì h1, h2 ì œëª©ì€ sunflowerì²´ ë„ì… -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.chojaeseong.com/feed.xml" title="ëŒë²”í…¤ë†‘" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">ëŒë²”í…¤ë†‘</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">í´ë¦°ì•„í‚¤í…ì³ 04 presenter layerì™€ OneEntity UseCaseController</h1><p class="page-description">python clean architecture</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-09-04T00:00:00-05:00" itemprop="datePublished">
        Sep 4, 2022
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      13 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#flask">flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cleanarchitecture">cleanarchitecture</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- tocê°€ ë¨¼ì € ë‚˜ì˜¤ë¯€ë¡œ h3ë¡œ ì•ˆë‚´í•˜ê¸° -->
    <h3>ğŸ“œ ì œëª©ìœ¼ë¡œ ë³´ê¸°</h3><ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#í´ë¦°-ì•„í‚¤í…ì³-4ì¥">í´ë¦° ì•„í‚¤í…ì³ 4ì¥</a>
<ul>
<li class="toc-entry toc-h2"><a href="#1-presenters-layerì—ì„œ-usecase-controller-ë§Œë“¤ê¸°">1 presenters layerì—ì„œ usecase controller ë§Œë“¤ê¸°</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-ì´ë²ˆë¶€í„°ëŠ”-masterì—ì„œ-ë°”ë¡œì‘ì—…-bì—†ì´-checkoutí›„-git-pull">01 ì´ë²ˆë¶€í„°ëŠ” masterì—ì„œ ë°”ë¡œì‘ì—…(-bì—†ì´ checkoutí›„ git pull)</a></li>
<li class="toc-entry toc-h3"><a href="#02-controllerë„ì…ì‹œë¶€í„°-srcpresentersí´ë”initì„-ë¨¼ì €-ë§Œë“¤ê³ -ë‚´ë¶€ì—-controllers-helpers-erros--ê°ê°ì˜-initì„-ë§Œë“ ë‹¤">02 controllerë„ì…ì‹œë¶€í„° src&gt;presenters(í´ë”+init)ì„ ë¨¼ì € ë§Œë“¤ê³ , ë‚´ë¶€ì— controllers, helpers, erros + ê°ê°ì˜ initì„ ë§Œë“ ë‹¤.</a></li>
<li class="toc-entry toc-h3"><a href="#03-helpers---http_modelspyë¥¼-ë¨¼ì €-ë§Œë“ ë‹¤">03 helpers &gt;  http_models.pyë¥¼ ë¨¼ì € ë§Œë“ ë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#httprequest-class">HttpRequest class</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ìƒì„±ìì—-header-dict-body-dict-query-dictê°€-ìƒì„±ìì˜-ì„ íƒí˜•kwargsì¸ìë¡œ--ì˜¤ë©°-í•„ë“œë¡œ-ê°€ì§„ë‹¤-reprë„-ê°™ì´-ì •ì˜í•´ì¤€ë‹¤">ìƒì„±ìì— header Dict, body Dict, query Dictê°€ ìƒì„±ìì˜ ì„ íƒí˜•kwargsì¸ìë¡œ  ì˜¤ë©° í•„ë“œë¡œ ê°€ì§„ë‹¤. reprë„ ê°™ì´ ì •ì˜í•´ì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#httpresponse-class">HttpResponse class</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ìƒì„±ìì—-status_code-int-body-anyê°€-í•„ìˆ˜argsë¡œ-ì˜¤ë©°-í•„ë“œë¡œ-ê°€ì§„ë‹¤">ìƒì„±ìì— status_code int, body anyê°€ í•„ìˆ˜argsë¡œ ì˜¤ë©° í•„ë“œë¡œ ê°€ì§„ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#initì—-2ê°œ-classë¥¼-ì˜¬ë ¤ì¤€ë‹¤">initì— 2ê°œ classë¥¼ ì˜¬ë ¤ì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-controllers--use_case_controllerpyë¥¼-ë§Œë“ ë‹¤">04 controllers &gt; use_case_controller.pyë¥¼ ë§Œë“ ë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#use_caseë³„-controllerpy---usecasecontroller-classë¥¼-ë§Œë“ ë‹¤">use_caseë³„ controller.py -&gt; UseCaseController classë¥¼ ë§Œë“ ë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#usecaseë³„controllerëŠ”-usecaseê°ì²´ë¥¼-ìƒì„±ìì¸ìë¡œ-ë°›ëŠ”ë‹¤">usecaseë³„controllerëŠ” usecaseê°ì²´ë¥¼ ìƒì„±ìì¸ìë¡œ ë°›ëŠ”ë‹¤</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#usecasecontrollerrê°ì²´ëŠ”-handleë©”ì„œë“œë¥¼-ê°€ì§€ë©°-http_requestë¥¼-ì¸ìë¡œ-ë°›ê³ -http_responseë¥¼-ë°˜í™˜í•œë‹¤">usecaseControllerrê°ì²´ëŠ” handleë©”ì„œë“œë¥¼ ê°€ì§€ë©°, http_requestë¥¼ ì¸ìë¡œ ë°›ê³  http_responseë¥¼ ë°˜í™˜í•œë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#handleë©”ì„œë“œ-ì¸ì-http_request-ì†-queryqueryparamì—-ë”°ë¼-usecaseê°ì²´ì˜-í˜¸ì¶œmethod-ê²½ìš°ì˜ìˆ˜ê°€-ë‹¬ë¼ì§„ë‹¤">handleë©”ì„œë“œ ì¸ì http_request ì† query(queryparam)ì— ë”°ë¼ usecaseê°ì²´ì˜ í˜¸ì¶œmethod ê²½ìš°ì˜ìˆ˜ê°€ ë‹¬ë¼ì§„ë‹¤.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#ì˜ë¬¸ì -í•´ê²°-ì„ íƒí˜•ì¸ìë“¤ì´-ë“¤ì–´ì™€ì„œ-ë‚´ë ¤ê°€ë„-ì¤‘ê°„service-usecaseëŠ”-ê²½ìš°ì˜-ìˆ˜ë³„-ë©”ì„œë“œë¡œ-í¸ì˜ì œê³µ">ì˜ë¬¸ì  í•´ê²°: ì„ íƒí˜•ì¸ìë“¤ì´ ë“¤ì–´ì™€ì„œ ë‚´ë ¤ê°€ë„, ì¤‘ê°„service usecaseëŠ” ê²½ìš°ì˜ ìˆ˜ë³„ ë©”ì„œë“œë¡œ í¸ì˜ì œê³µ</a></li>
<li class="toc-entry toc-h5"><a href="#httprequestì†-queryparamì—ëŠ”-repo-sqlalchemyì—-ì‚¬ìš©ë -ì„ íƒí˜•ì¸ìê°€-ë‹´ê²¨ìˆë‹¤-ì—¬ê¸°ì„œëŠ”-select_allì„-ì• ì´ˆì—-ì •ì˜í•˜ì§€-ì•Šì•˜ìœ¼ë¯€ë¡œ-ë©”ì„œë“œë¡œ-ì²˜ë¦¬ëŠ”-ì•ˆí–ˆì§€ë§Œ-query-paramì—†ëŠ”-findë„-ìˆì„-ê²ƒì´ë‹¤">HttpRequestì† query(param)ì—ëŠ” repo-&gt;sqlalchemyì— ì‚¬ìš©ë  ì„ íƒí˜•ì¸ìê°€ ë‹´ê²¨ìˆë‹¤. [ì—¬ê¸°ì„œëŠ” select_allì„ ì• ì´ˆì— ì •ì˜í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë©”ì„œë“œë¡œ ì²˜ë¦¬ëŠ” ì•ˆí–ˆì§€ë§Œ, query paramì—†ëŠ” findë„ ìˆì„ ê²ƒì´ë‹¤.]</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#find-usecaseì˜-ê²°ê³¼responseì˜--if-responsesuccessê°€-is-falseì¸-ê²½ìš°---validate_entry-falseë¼ë©´-controllerì—ì„œëŠ”-status_code-422ë¡œ-ì‘ë‹µí•´ì¤˜ì•¼í•œë‹¤">Find usecaseì˜ ê²°ê³¼responseì˜  if response[â€œSuccessâ€]ê°€ is Falseì¸ ê²½ìš° -&gt; validate_entry Falseë¼ë©´, controllerì—ì„œëŠ” status_code 422ë¡œ ì‘ë‹µí•´ì¤˜ì•¼í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#05-errors--http_errospyë¡œ-errorë³„-statue_code--bodyë°ì´í„°-dict-ë°˜í™˜-httperrors-static-class-ì •ì˜í•˜ê¸°">05 errors &gt; http_erros.pyë¡œ [errorë³„ statue_code + bodyë°ì´í„° dict ë°˜í™˜] HttpErrors (static) class ì •ì˜í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h4"><a href="#use_case_controller-handleë©”ì„œë“œ-ë‚´-response-successê°€-falseì¸-ê²½ìš°ë¥¼-ì²˜ë¦¬í•˜ê¸°-ìœ„í•œ-ê°œë³„-httpresponseë¥¼-ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤-ê·¸-ë‚´ìš©ë¬¼ë¡œ-ë“¤ì–´ê°ˆ-errorìš©-status_code--bodyë¥¼-dictë¡œ-ë¬¶ì–´ë†“ì€-httperrors-static-classë¥¼-ì •ì˜í•œë‹¤">use_case_controller handleë©”ì„œë“œ ë‚´ response â€œSuccessâ€ê°€ Falseì¸ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê°œë³„ HttpResponseë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤. ê·¸ ë‚´ìš©ë¬¼ë¡œ ë“¤ì–´ê°ˆ [errorìš© status_code + body]ë¥¼ dictë¡œ ë¬¶ì–´ë†“ì€ HttpErrors (static) classë¥¼ ì •ì˜í•œë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#06-ë‹¤ì‹œ-handle-controllerë¡œ-ë³µê·€">06 ë‹¤ì‹œ handle controllerë¡œ ë³µê·€</a>
<ul>
<li class="toc-entry toc-h4"><a href="#if-http_requestqueryê°€-ìˆì–´ì„œ-usecase-ë©”ì„œë“œë³„-ì²˜ë¦¬í•˜ê³ -responseê²°ê³¼ë¥¼-ë°›ì•˜ëŠ”ë°-responsesuccessê°€-validì¸-ê²½ìš°-httperrosë¥¼-ì´ìš©í•´-httpresponseê°ì²´-ë§Œë“¤ì–´ì„œ-early-return">if http_request.queryê°€ ìˆì–´ì„œ usecase ë©”ì„œë“œë³„ ì²˜ë¦¬í•˜ê³  responseê²°ê³¼ë¥¼ ë°›ì•˜ëŠ”ë°, response[â€œSuccessâ€]ê°€ validì¸ ê²½ìš° HttpErrosë¥¼ ì´ìš©í•´ HttpResponseê°ì²´ ë§Œë“¤ì–´ì„œ early return</a></li>
<li class="toc-entry toc-h4"><a href="#if-http_requestqueryê°€-ìˆê³ --responsesuccessê°€-falseì•„ë‹ˆë¼ë©´-200-ì„±ê³µcode--ê°œë³„-ì‘ë‹µdataë¥¼-ë°˜í™˜í•œë‹¤">if http_request.queryê°€ ìˆê³ ,  response[â€œSuccessâ€]ê°€ Falseì•„ë‹ˆë¼ë©´, [200 ì„±ê³µcode + ê°œë³„ ì‘ë‹µDataë¥¼ ë°˜í™˜í•œë‹¤]</a>
<ul>
<li class="toc-entry toc-h5"><a href="#usecaseëŠ”-validate_entry--ì‘ë‹µdata----controllerëŠ”-status_code200--ì‘ë‹µdata">usecaseëŠ” validate_entry + ì‘ë‹µData  -&gt; controllerëŠ” status_code200 + ì‘ë‹µData</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#ì ì–´ë„-selectìš©-paramì´-ìˆì–´ì•¼-í•˜ëŠ”-find_user-controllerì—ì„œ-ë§Œí¼ì€-http_requestì—--queryê°€-ì—†ë‹¤ë©´-ì‚¬ì‹¤ìƒ-400ì—ëŸ¬">ì ì–´ë„ selectìš© paramì´ ìˆì–´ì•¼ í•˜ëŠ” find_user controllerì—ì„œ ë§Œí¼ì€, http_requestì—  queryê°€ ì—†ë‹¤ë©´, ì‚¬ì‹¤ìƒ 400ì—ëŸ¬</a></li>
<li class="toc-entry toc-h4"><a href="#ì™„ì„±ëœ-find_user_controllerëŠ”-init-ì—--ì˜¬ë ¤ì¤€ë‹¤">ì™„ì„±ëœ find_user_controllerëŠ” init ì—  ì˜¬ë ¤ì¤€ë‹¤.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#2--usecase-controller-test">2  usecase controller test</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-usecase-controllerëŠ”-usecaseë¥¼-ì¸ìë¡œ-ë°›ìœ¼ë‹ˆ-test-ì‚¬ìš©í• --usecasespy-í˜¸ì¶œê°ì§€--argsë³´ê´€ë°˜í™˜ì€mock-ë¥¼-ë¨¼ì €-ë§Œë“¤ì–´ì•¼í•œë‹¤">01 usecase ControllerëŠ” usecaseë¥¼ ì¸ìë¡œ ë°›ìœ¼ë‹ˆ, test ì‚¬ìš©í•   usecaseSpy( í˜¸ì¶œê°ì§€ = argsë³´ê´€+ë°˜í™˜ì€mock )ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì•¼í•œë‹¤.</a></li>
<li class="toc-entry toc-h3"><a href="#02-usecase-controllerëŠ”-repoë¥¼-í’ˆê³ -ìˆëŠ”-usecaseê°ì²´ë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë‹¤">02 UseCase ControllerëŠ” repoë¥¼ í’ˆê³  ìˆëŠ” UseCaseê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#ê·¸ëŸ¬ë¯€ë¡œ-repospyê°ì²´ë¥¼-í’ˆëŠ”-usecasespyê°ì²´ë¥¼-ìƒì„±í•´ì„œ-testí• -controllerì—-ë„£ì–´ì¤€ë‹¤">ê·¸ëŸ¬ë¯€ë¡œ repoSpyê°ì²´ë¥¼ í’ˆëŠ” UseCaseSpyê°ì²´ë¥¼ ìƒì„±í•´ì„œ testí•  Controllerì— ë„£ì–´ì¤€ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#03-controllerì˜-handle-method-í…ŒìŠ¤íŠ¸ëŠ”-httprequestì˜-ì„ íƒí˜•ì¸ìheaders-body-query-ì¤‘-queryë§Œ-í•„ìš”í•œ-paramì„-ë„£ì–´ì„œí•œë‹¤">03 Controllerì˜ handle method í…ŒìŠ¤íŠ¸ëŠ” HttpRequestì˜ ì„ íƒí˜•ì¸ì(headers, body, query) ì¤‘ queryë§Œ í•„ìš”í•œ paramì„ ë„£ì–´ì„œí•œë‹¤.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#usecaseëŠ”-attributes-dict---methodì—-1ê°œì”©-ë½‘ì•„ì„œ-í• ë‹¹í•´ì¤¬ì—ˆë‹¤-controllerë¶€í„°ëŠ”-method-inputì´-httprequestê°ì²´-by--query-ì†-í•„ìš”í•œ-paramë“¤ì´ë‹¤">usecaseëŠ” attributes dict -&gt; methodì— 1ê°œì”© ë½‘ì•„ì„œ í• ë‹¹í•´ì¤¬ì—ˆë‹¤. controllerë¶€í„°ëŠ” method inputì´ [httprequestê°ì²´ by  query ì† í•„ìš”í•œ param]ë“¤ì´ë‹¤.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#04-input-test---usecase-spyê°ì²´ê°€-í’ˆê³ -ìˆëŠ”-param_dict-test">04 input Test -&gt; usecase Spyê°ì²´ê°€ í’ˆê³  ìˆëŠ” param_dict test</a>
<ul>
<li class="toc-entry toc-h4"><a href="#usecasespy-ì—­ì‹œ-repospyì²˜ëŸ¼-ê°œë³„ë©”ì„œë“œë§ˆë‹¤-param-dictì—-í’ˆê³ -ìˆìœ¼ë‹ˆ-input-testëŠ”-usecasespyê°ì²´param_dict--http_requestqueryë¡œ-í•œë‹¤">UseCaseSpy ì—­ì‹œ RepoSpyì²˜ëŸ¼, ê°œë³„ë©”ì„œë“œë§ˆë‹¤ param dictì— í’ˆê³  ìˆìœ¼ë‹ˆ, input testëŠ” UseCaseSpyê°ì²´.param_dict == http_request.queryë¡œ í•œë‹¤</a></li>
<li class="toc-entry toc-h4"><a href="#input-testë§Œ-ëë‚˜ë„-printreponseì™€-í•¨ê»˜-ì¼ë‹¨-pytest--vsí•œë‹¤">input testë§Œ ëë‚˜ë„ print(reponse)ì™€ í•¨ê»˜ ì¼ë‹¨ pytest -vsí•œë‹¤</a>
<ul>
<li class="toc-entry toc-h5"><a href="#input-test-ì‹¤íŒ¨-ë¶„ì„">input test ì‹¤íŒ¨ ë¶„ì„</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#05-outputtest--">05 OutputTest -&gt;</a>
<ul>
<li class="toc-entry toc-h4"><a href="#usecaseì˜-outputì€-dictbool-listdto-or-dto--ouput-testëŠ”-success-trueì™€-data-is-not-noneì´ì—ˆë‹¤">useCaseì˜ outputì€ Dict[bool, List[Dto] or Dto] =&gt; Ouput testëŠ” â€œSuccessâ€ Trueì™€ â€œDataâ€ is not Noneì´ì—ˆë‹¤.</a></li>
<li class="toc-entry toc-h4"><a href="#controller-outputì€-ì‹¤íŒ¨ë§Œ-ì•ˆí•œë‹¤ë©´-httprequeststatus_code200-bodyusecaseì˜resonsedata">Controller outputì€ ì‹¤íŒ¨ë§Œ ì•ˆí•œë‹¤ë©´ HttpRequest(status_code=200, body=usecaseì˜Resonse[â€œDataâ€])</a>
<ul>
<li class="toc-entry toc-h5"><a href="#contoller-output-testëŠ”-controllerhandleì˜-ê²°ê³¼ì¸-responsehttp_responseê°ì²´ì˜-status_code-200-body-is-not-noneì´ë‹¤">Contoller Output testëŠ” controller.handle()ì˜ ê²°ê³¼ì¸ response(http_response)ê°ì²´ì˜ .status_code ==200, .body is Not Noneì´ë‹¤.</a></li>
<li class="toc-entry toc-h5"><a href="#output-testë„-ëë‚˜ë©´-pytest">output testë„ ëë‚˜ë©´ pytest</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#3-usecase-controller-fail-test-no-query-param-in-httprequest">3 usecase controller fail test (no query param in HttpRequest)</a>
<ul>
<li class="toc-entry toc-h3"><a href="#01-no-query-param-fail-testëŠ”-ì„±ê³µtestì—ì„œ-httprequestê°ì²´-ì¸ìë§Œ-ì‚­ì œí•˜ê³ -printresponseë¥¼-ì°ì€-ìƒíƒœì—ì„œ-í…ŒìŠ¤íŠ¸ë¥¼-ë¨¼ì €-ëŒë ¤ë³´ì">01 no query param fail testëŠ” ì„±ê³µtestì—ì„œ HttpRequestê°ì²´ ì¸ìë§Œ ì‚­ì œí•˜ê³  print(response)ë¥¼ ì°ì€ ìƒíƒœì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ëŒë ¤ë³´ì.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#responseë¥¼-ì°ì–´ì„œ-ì–´ë–¤-status_codeë¥¼-í™•ì¸í•´ì•¼í• ì§€-ìˆ™ë ¨ì•ˆë˜ì—ˆìœ¼ë©´-í™•ì¸í•´ì•¼í•œë‹¤">responseë¥¼ ì°ì–´ì„œ, ì–´ë–¤ status_codeë¥¼ í™•ì¸í•´ì•¼í• ì§€ ìˆ™ë ¨ì•ˆë˜ì—ˆìœ¼ë©´ í™•ì¸í•´ì•¼í•œë‹¤</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#02-not-query-param-input-test-spyì†-ëª¨ë“ -param-dict---ë¹ˆ-dict">02 not query param Input test: spyì† ëª¨ë“  param dict == {} (ë¹ˆ dict)</a></li>
<li class="toc-entry toc-h3"><a href="#03-not-query-param-output-test-status_code--400-body---codeë³„-ì—ëŸ¬ë©”ì„¸ì§€ê°€-error-keyì—-ìˆìœ¼ë‹ˆ-keyê²€ì‚¬ë§Œ-í•œë‹¤">03 not query param Output test: .status_code == 400, .body -&gt; codeë³„ ì—ëŸ¬ë©”ì„¸ì§€ê°€ â€œerrorâ€ keyì— ìˆìœ¼ë‹ˆ keyê²€ì‚¬ë§Œ í•œë‹¤!</a>
<ul>
<li class="toc-entry toc-h4"><a href="#ì°¸ê³ ë¡œ-validate_entry-ì‹¤íŒ¨ëŠ”-status_code-422">ì°¸ê³ ë¡œ validate_entry ì‹¤íŒ¨ëŠ” status_code 422</a></li>
<li class="toc-entry toc-h4"><a href="#pytest-ëŒë¦¬ê³ -í†µê³¼í–ˆìœ¼ë©´-í™•ì¸ìš©-printresponse-ì‚­ì œí›„-ì»¤ë°‹">pytest ëŒë¦¬ê³  í†µê³¼í–ˆìœ¼ë©´ í™•ì¸ìš© print(response) ì‚­ì œí›„ ì»¤ë°‹</a></li>
<li class="toc-entry toc-h4"><a href="#masterëŠ”-pushí›„-mergeì•ˆí•´ì¤˜ë„-ëœë‹¤">masterëŠ” pushí›„ mergeì•ˆí•´ì¤˜ë„ ëœë‹¤.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#ì°¸ê³ ">ì°¸ê³ </a>
<ul>
<li class="toc-entry toc-h4"><a href="#gitignore">gitignore</a></li>
<li class="toc-entry toc-h4"><a href="#sqlalchemyíŒ¨í‚¤ì§€">sqlalchemyíŒ¨í‚¤ì§€</a></li>
<li class="toc-entry toc-h4"><a href="#githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</a>
<ul>
<li class="toc-entry toc-h5"><a href="#1-1-githubì—ì„œ-brìƒì„±--clone">[1-1] githubì—ì„œ brìƒì„± ~ clone</a></li>
<li class="toc-entry toc-h5"><a href="#cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</a></li>
<li class="toc-entry toc-h5"><a href="#1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</a></li>
<li class="toc-entry toc-h5"><a href="#1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</a></li>
<li class="toc-entry toc-h5"><a href="#2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#vscode-ì„¤ì •">vscode ì„¤ì •</a></li>
<li class="toc-entry toc-h4"><a href="#testì •ë¦¬">testì •ë¦¬</a></li>
<li class="toc-entry toc-h4"><a href="#status_code">status_code</a></li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="í´ë¦°-ì•„í‚¤í…ì³-4ì¥">
<a class="anchor" href="#%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-4%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>í´ë¦° ì•„í‚¤í…ì³ 4ì¥</h1>

<h2 id="1-presenters-layerì—ì„œ-usecase-controller-ë§Œë“¤ê¸°">
<a class="anchor" href="#1-presenters-layer%EC%97%90%EC%84%9C-usecase-controller-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>1 presenters layerì—ì„œ usecase controller ë§Œë“¤ê¸°</h2>

<h3 id="01-ì´ë²ˆë¶€í„°ëŠ”-masterì—ì„œ-ë°”ë¡œì‘ì—…-bì—†ì´-checkoutí›„-git-pull">
<a class="anchor" href="#01-%EC%9D%B4%EB%B2%88%EB%B6%80%ED%84%B0%EB%8A%94-master%EC%97%90%EC%84%9C-%EB%B0%94%EB%A1%9C%EC%9E%91%EC%97%85-b%EC%97%86%EC%9D%B4-checkout%ED%9B%84-git-pull" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 ì´ë²ˆë¶€í„°ëŠ” masterì—ì„œ ë°”ë¡œì‘ì—…(-bì—†ì´ checkoutí›„ git pull)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch
* feat/registry_pet

git checkout master
Switched to a new branch 'master'
Branch 'master' set up to track remote branch 'master' from 'origin'.

git branch
  feat/registry_pet
* master

git pull
Already up to date.
</code></pre></div></div>

<h3 id="02-controllerë„ì…ì‹œë¶€í„°-srcpresentersí´ë”initì„-ë¨¼ì €-ë§Œë“¤ê³ -ë‚´ë¶€ì—-controllers-helpers-erros--ê°ê°ì˜-initì„-ë§Œë“ ë‹¤">
<a class="anchor" href="#02-controller%EB%8F%84%EC%9E%85%EC%8B%9C%EB%B6%80%ED%84%B0-srcpresenters%ED%8F%B4%EB%8D%94init%EC%9D%84-%EB%A8%BC%EC%A0%80-%EB%A7%8C%EB%93%A4%EA%B3%A0-%EB%82%B4%EB%B6%80%EC%97%90-controllers-helpers-erros--%EA%B0%81%EA%B0%81%EC%9D%98-init%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 controllerë„ì…ì‹œë¶€í„° src&gt;presenters(í´ë”+init)ì„ ë¨¼ì € ë§Œë“¤ê³ , ë‚´ë¶€ì— controllers, helpers, erros + ê°ê°ì˜ initì„ ë§Œë“ ë‹¤.</h3>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004165242326.png" alt="image-20221004165242326"></p>

<h3 id="03-helpers---http_modelspyë¥¼-ë¨¼ì €-ë§Œë“ ë‹¤">
<a class="anchor" href="#03-helpers---http_modelspy%EB%A5%BC-%EB%A8%BC%EC%A0%80-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 helpers &gt;  http_models.pyë¥¼ ë¨¼ì € ë§Œë“ ë‹¤.</h3>

<h4 id="httprequest-class">
<a class="anchor" href="#httprequest-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>HttpRequest class</h4>

<h5 id="ìƒì„±ìì—-header-dict-body-dict-query-dictê°€-ìƒì„±ìì˜-ì„ íƒí˜•kwargsì¸ìë¡œ--ì˜¤ë©°-í•„ë“œë¡œ-ê°€ì§„ë‹¤-reprë„-ê°™ì´-ì •ì˜í•´ì¤€ë‹¤">
<a class="anchor" href="#%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-header-dict-body-dict-query-dict%EA%B0%80-%EC%83%9D%EC%84%B1%EC%9E%90%EC%9D%98-%EC%84%A0%ED%83%9D%ED%98%95kwargs%EC%9D%B8%EC%9E%90%EB%A1%9C--%EC%98%A4%EB%A9%B0-%ED%95%84%EB%93%9C%EB%A1%9C-%EA%B0%80%EC%A7%84%EB%8B%A4-repr%EB%8F%84-%EA%B0%99%EC%9D%B4-%EC%A0%95%EC%9D%98%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ìƒì„±ìì— header Dict, body Dict, query Dictê°€ <strong>ìƒì„±ìì˜ ì„ íƒí˜•kwargsì¸ì</strong>ë¡œ  ì˜¤ë©° í•„ë“œë¡œ ê°€ì§„ë‹¤. reprë„ ê°™ì´ ì •ì˜í•´ì¤€ë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>


<span class="k">class</span> <span class="nc">HttpRequest</span><span class="p">:</span>
    <span class="s">""" Class to http_request representation """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">header</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">f"HttpRequest (header=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">header</span><span class="si">}</span><span class="s">, body=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">body</span><span class="si">}</span><span class="s">, query=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">query</span><span class="si">}</span><span class="s">)"</span>

</code></pre></div></div>

<h4 id="httpresponse-class">
<a class="anchor" href="#httpresponse-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>HttpResponse class</h4>

<h5 id="ìƒì„±ìì—-status_code-int-body-anyê°€-í•„ìˆ˜argsë¡œ-ì˜¤ë©°-í•„ë“œë¡œ-ê°€ì§„ë‹¤">
<a class="anchor" href="#%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-status_code-int-body-any%EA%B0%80-%ED%95%84%EC%88%98args%EB%A1%9C-%EC%98%A4%EB%A9%B0-%ED%95%84%EB%93%9C%EB%A1%9C-%EA%B0%80%EC%A7%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ìƒì„±ìì— status_code int, body anyê°€ í•„ìˆ˜argsë¡œ ì˜¤ë©° í•„ë“œë¡œ ê°€ì§„ë‹¤.</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HttpResponse</span><span class="p">:</span>
    <span class="s">""" Class to http_response representation """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status_code</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="n">status_code</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">f"HttpResponse (status_code=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">, body=</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">body</span><span class="si">}</span><span class="s">)"</span>

</code></pre></div></div>

<h4 id="initì—-2ê°œ-classë¥¼-ì˜¬ë ¤ì¤€ë‹¤">
<a class="anchor" href="#init%EC%97%90-2%EA%B0%9C-class%EB%A5%BC-%EC%98%AC%EB%A0%A4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>initì— 2ê°œ classë¥¼ ì˜¬ë ¤ì¤€ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.http_models</span> <span class="kn">import</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="n">HttpResponse</span>
</code></pre></div></div>

<h3 id="04-controllers--use_case_controllerpyë¥¼-ë§Œë“ ë‹¤">
<a class="anchor" href="#04-controllers--use_case_controllerpy%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 controllers &gt; use_case_controller.pyë¥¼ ë§Œë“ ë‹¤.</h3>

<h4 id="use_caseë³„-controllerpy---usecasecontroller-classë¥¼-ë§Œë“ ë‹¤">
<a class="anchor" href="#use_case%EB%B3%84-controllerpy---usecasecontroller-class%EB%A5%BC-%EB%A7%8C%EB%93%A0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>use_caseë³„ controller.py -&gt; UseCaseController classë¥¼ ë§Œë“ ë‹¤.</h4>

<h5 id="usecaseë³„controllerëŠ”-usecaseê°ì²´ë¥¼-ìƒì„±ìì¸ìë¡œ-ë°›ëŠ”ë‹¤">
<a class="anchor" href="#usecase%EB%B3%84controller%EB%8A%94-usecase%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1%EC%9E%90%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecaseë³„controllerëŠ” usecaseê°ì²´ë¥¼ ìƒì„±ìì¸ìë¡œ ë°›ëŠ”ë‹¤</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">find_user_controller.py</code> ìƒì„±</p>
  </li>
  <li>
    <p><strong>usecase class ê°ì²´ë¥¼ ìƒì„±ìë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤</strong></p>

    <ol>
      <li>
<strong>usecase class ëŠ” repoê¹Œì§€</strong> ë‹¤ ë¨¹ê³  ìˆëŠ” serviceê³„ì¸µì´ë‹¤.</li>
      <li>
<strong>usecaseì¸ìì˜ Type[]ì— interfaceë¥¼ src.domain.usecaseì—ì„œ ì°¾ì•„ì„œ ì£¼ë©´ëœë‹¤.</strong>
        <ul>
          <li>interfaceë¥¼ ì›ë˜ classëª…ê³¼ ê°™ì´ ì •ì˜í•œë°ëŠ” ì¸ìì˜ Typeìœ¼ë¡œ ì£¼ëŠ”ë° ìˆë‹¤.</li>
          <li><strong>ëŒ€ì‹  ì‹¤ì œ usecase class ì •ì˜ì‹œì—ë§Œ as -Interface ë¡œ importí–ˆì—ˆë‹¤.</strong></li>
        </ul>
      </li>
    </ol>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>
   
<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">FindUser</span>
   
   
<span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="s">""" Class to define controller to find_user use case"""</span>
   
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">find_user_use_case</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">find_user_use_case</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="usecasecontrollerrê°ì²´ëŠ”-handleë©”ì„œë“œë¥¼-ê°€ì§€ë©°-http_requestë¥¼-ì¸ìë¡œ-ë°›ê³ -http_responseë¥¼-ë°˜í™˜í•œë‹¤">
<a class="anchor" href="#usecasecontrollerr%EA%B0%9D%EC%B2%B4%EB%8A%94-handle%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EA%B0%80%EC%A7%80%EB%A9%B0-http_request%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EA%B3%A0-http_response%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecaseControllerrê°ì²´ëŠ” handleë©”ì„œë“œë¥¼ ê°€ì§€ë©°, http_requestë¥¼ ì¸ìë¡œ ë°›ê³  http_responseë¥¼ ë°˜í™˜í•œë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">src.domain.use_cases</span> <span class="kn">import</span> <span class="n">FindUser</span>
<span class="kn">from</span> <span class="nn">src.presenters.helpers</span> <span class="kn">import</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="n">HttpResponse</span>


<span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="s">""" Class to define controller to find_user use case"""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">find_user_use_case</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">find_user_use_case</span>

    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_request</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpRequest</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
        <span class="s">""" Method to call use case """</span>

</code></pre></div></div>

<h4 id="handleë©”ì„œë“œ-ì¸ì-http_request-ì†-queryqueryparamì—-ë”°ë¼-usecaseê°ì²´ì˜-í˜¸ì¶œmethod-ê²½ìš°ì˜ìˆ˜ê°€-ë‹¬ë¼ì§„ë‹¤">
<a class="anchor" href="#handle%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B8%EC%9E%90-http_request-%EC%86%8D-queryqueryparam%EC%97%90-%EB%94%B0%EB%9D%BC-usecase%EA%B0%9D%EC%B2%B4%EC%9D%98-%ED%98%B8%EC%B6%9Cmethod-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98%EA%B0%80-%EB%8B%AC%EB%9D%BC%EC%A7%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>handleë©”ì„œë“œ ì¸ì http_request ì† query(queryparam)ì— ë”°ë¼ usecaseê°ì²´ì˜ í˜¸ì¶œmethod ê²½ìš°ì˜ìˆ˜ê°€ ë‹¬ë¼ì§„ë‹¤.</h4>

<ul>
  <li>ì´ê²ƒ ë•Œë¬¸ì—.. ë” ìƒìœ„ì—ì„œë„ query paramì´ ê°ˆë¼ì§€ê¸° ë•Œë¬¸ì—, use caseì—ì„œë„ ë‚˜ëˆ ë†¨êµ¬ë‚˜..</li>
  <li>sqlalchemy query.filter -&gt; ì„ íƒí˜•ì¸ì  1ê°œ ë©”ì„œë“œ -&gt; keywordë³„ë¡œ ì¤˜ì„œ ì²˜ë¦¬
    <ul>
      <li>repo select -&gt; ì„ íƒí˜•ì¸ì  1ê°œë©”ì„œë“œ -&gt; ifë¡œ ë‚˜ëˆ ì„œ í•˜ìœ„1ê°œë©”ì„œë“œë¡œ ì²˜ë¦¬ (ìƒìœ„ê°€ ì„ íƒí˜•ì¸ì 1ê°œë©”ì„œë“œë©´, ë‚´ë¶€ì—ì„œ ifë¡œ ë‚˜ëˆ„ë˜, í•˜ìœ„ë„ ì„ íƒí˜•ì¸ìë©´, ifì•ˆì— 1ê°œ ë©”ì„œë“œë¡œ ì²˜ë¦¬ ëœë‹¤.)
        <ul>
          <li>use case find -&gt; <strong>ì¸ìë³„ë¡œ methodì²˜ë¦¬ -&gt; repoëŠ” ë‚´ë¶€ì—ì„œ ì„ íƒí˜•ì¸ìë¡œ ifë¡œ ë‚˜ëˆ„ë˜, 1ê°œ ë©”ì„œë“œë¡œ ì²˜ë¦¬</strong>
            <ul>
              <li>use case find controller -&gt; <strong>ì‚¬ì‹¤ìƒ quer param dictì—ì„œ</strong> í•˜ë‚˜ì”© í™•ì¸í•´ì•¼í•˜ëŠ” keys() í™•ì¸í›„ ì²˜ë¦¬í•˜ëŠ” <strong>ì„ íƒí˜•ì¸ì</strong> -&gt; <strong>ifë¡œ ë‚˜ëˆ ì„œ ì²˜ë¦¬</strong> -&gt;
                <ul>
                  <li><strong>use case findëŠ” ifìƒìœ„ ì¸ìë³„ë¡œ ê°œë³„ method í˜¸ì¶œë¡œì„œ -&gt; ìƒìœ„ ifê²½ìš°ì˜ìˆ˜ë§ˆë‹¤ ì •í•´ì§„ë©”ì„œë“œ ì—¬ëŸ¬ê°œë¡œ ê°œë³„ì²˜ë¦¬</strong></li>
                  <li>
                  <li>ë§Œì•½ use case findë„ ì„ íƒí˜•ì¸ìë¡œ 1ê°œë©”ì„œë“œ ì²˜ë¦¬í–ˆë‹¤ë©´? -&gt; ìƒìœ„ if ê²½ìš°ì˜ìˆ˜ë§ˆë‹¤ 1ê°œë©”ì„œë“œë¡œ ì²˜ë¦¬
                    <ul>
                      <li><strong>use caseëŠ” <code class="language-plaintext highlighter-rouge">í•˜ìœ„ repoë©”ì„œë“œê°€ ì„ íƒí˜•ì¸ ê²ƒì„ ì´ìš©</code>í•´ì„œ, <code class="language-plaintext highlighter-rouge">ë‚´ë¶€ ifë¥¼ ë‚˜ëˆ„ì§€ ì•Šê³  ê°œë³„ ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ê°œ ì •ì˜í•¨</code>ìœ¼ë¡œì„œ <code class="language-plaintext highlighter-rouge">ìƒìœ„ê°€ ifë¥¼ ë‚˜ëˆ„ì–´ì„œ í¸í•˜ê²Œ ì“°ê¸°</code>ê°œë³„ ì •ì˜ëœ ë©”ì„œë“œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í¸ì˜ë¥¼ ì œê³µí–ˆë‹¤.</strong></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>my) selectëŠ” ì–´ì©”ìˆ˜ ì—†ì´ repo-&gt;usecase-&gt;controllerìƒìœ„ë¡œ ê°ˆë•Œê¹Œì§€ param ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì† í™•ì¸í•´ì•¼í•œë‹¤.
    <ul>
      <li>ë§Œì•½, ì¤‘ê°„ì˜  usecaseë¥¼ ì„ íƒí˜•ì¸ì ë©”ì„œë“œ1ê°œë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šê³ , ë¯¸ë¦¬ ê²½ìš°ì˜ ìˆ˜ë³„ methodë¥¼ ì •ì˜í•´ë†“ëŠ”ë‹¤ë©´,  usecaseì˜ ìƒìœ„ëŠ” paramê²½ìš°ì˜ ìˆ˜ë§ˆë‹¤ ê°œë³„ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</li>
      <li>ë§Œì•½, ì„ íƒí˜•ì¸ì ë©”ì„œë“œ1ê°œë¡œ ì²˜ë¦¬í–ˆë‹¤ë©´, paramê²½ìš°ì˜ ìˆ˜ë§ˆë‹¤ ì„ íƒí˜•ë©”ì„œë“œ 1ê°œë¥¼ ë„£ì–´ì„œ í˜¸ì¶œí•˜ë©´ ëœë‹¤.</li>
      <li>
<strong>ì™œ repoëŠ” ì„ íƒí˜•ì¸ì 1ê°œë©”ì†Œë“œë¡œ ì²˜ë¦¬í•˜ë©´ì„œ, usecaseëŠ” ê²½ìš°ì˜ìˆ˜ë³„ ë©”ì„œë“œë¥¼ ë”°ë¡œ ì •ì˜í•´ë†“ì„ê¹Œ???</strong>
        <ul>
          <li><strong>sqlalchemy -&gt; repoê¹Œì§€ëŠ” ì„ íƒí˜•ìœ¼ë¡œ ì²˜ë¦¬í•˜ë”ë¼ë„ <code class="language-plaintext highlighter-rouge">usecaseëŠ” controllerì— ì‚¬ìš©ë  serviceë¡œì„œ, í¸ì˜ì„± ì œê³µ</code>ì„ í•´ì•¼í•  ê²ƒ ê°™ë‹¤.</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="ì˜ë¬¸ì -í•´ê²°-ì„ íƒí˜•ì¸ìë“¤ì´-ë“¤ì–´ì™€ì„œ-ë‚´ë ¤ê°€ë„-ì¤‘ê°„service-usecaseëŠ”-ê²½ìš°ì˜-ìˆ˜ë³„-ë©”ì„œë“œë¡œ-í¸ì˜ì œê³µ">
<a class="anchor" href="#%EC%9D%98%EB%AC%B8%EC%A0%90-%ED%95%B4%EA%B2%B0-%EC%84%A0%ED%83%9D%ED%98%95%EC%9D%B8%EC%9E%90%EB%93%A4%EC%9D%B4-%EB%93%A4%EC%96%B4%EC%99%80%EC%84%9C-%EB%82%B4%EB%A0%A4%EA%B0%80%EB%8F%84-%EC%A4%91%EA%B0%84service-usecase%EB%8A%94-%EA%B2%BD%EC%9A%B0%EC%9D%98-%EC%88%98%EB%B3%84-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%ED%8E%B8%EC%9D%98%EC%A0%9C%EA%B3%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì˜ë¬¸ì  í•´ê²°: ì„ íƒí˜•ì¸ìë“¤ì´ ë“¤ì–´ì™€ì„œ ë‚´ë ¤ê°€ë„, ì¤‘ê°„service usecaseëŠ” ê²½ìš°ì˜ ìˆ˜ë³„ ë©”ì„œë“œë¡œ í¸ì˜ì œê³µ</h5>

<h5 id="httprequestì†-queryparamì—ëŠ”-repo-sqlalchemyì—-ì‚¬ìš©ë -ì„ íƒí˜•ì¸ìê°€-ë‹´ê²¨ìˆë‹¤-ì—¬ê¸°ì„œëŠ”-select_allì„-ì• ì´ˆì—-ì •ì˜í•˜ì§€-ì•Šì•˜ìœ¼ë¯€ë¡œ-ë©”ì„œë“œë¡œ-ì²˜ë¦¬ëŠ”-ì•ˆí–ˆì§€ë§Œ-query-paramì—†ëŠ”-findë„-ìˆì„-ê²ƒì´ë‹¤">
<a class="anchor" href="#httprequest%EC%86%8D-queryparam%EC%97%90%EB%8A%94-repo-sqlalchemy%EC%97%90-%EC%82%AC%EC%9A%A9%EB%90%A0-%EC%84%A0%ED%83%9D%ED%98%95%EC%9D%B8%EC%9E%90%EA%B0%80-%EB%8B%B4%EA%B2%A8%EC%9E%88%EB%8B%A4-%EC%97%AC%EA%B8%B0%EC%84%9C%EB%8A%94-select_all%EC%9D%84-%EC%95%A0%EC%B4%88%EC%97%90-%EC%A0%95%EC%9D%98%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%98%EC%9C%BC%EB%AF%80%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%B2%98%EB%A6%AC%EB%8A%94-%EC%95%88%ED%96%88%EC%A7%80%EB%A7%8C-query-param%EC%97%86%EB%8A%94-find%EB%8F%84-%EC%9E%88%EC%9D%84-%EA%B2%83%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>HttpRequestì† query(param)ì—ëŠ” repo-&gt;sqlalchemyì— ì‚¬ìš©ë  ì„ íƒí˜•ì¸ìê°€ ë‹´ê²¨ìˆë‹¤. [ì—¬ê¸°ì„œëŠ” select_allì„ ì• ì´ˆì— ì •ì˜í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë©”ì„œë“œë¡œ ì²˜ë¦¬ëŠ” ì•ˆí–ˆì§€ë§Œ, query paramì—†ëŠ” findë„ ìˆì„ ê²ƒì´ë‹¤.]</h5>

<ol>
  <li>use caseì²˜ëŸ¼ response = Noneìœ¼ë¡œ ì‹œì‘í•œë‹¤
    <ul>
      <li><strong>ì„±ê³µì‹œë§Œ í•´ë‹¹í•˜ë©´ Falseì‹œì‘(flag) or Noneì‹œì‘(data)ì´ë‹¤.</strong></li>
      <li>ë§Œì•½, íƒˆë½ì¡°ê±´ í•´ë‹¹ì‹œë§Œ ì²˜ë¦¬ë˜ë©´ <strong>Trueì‹œì‘</strong>ì´ë‹¤.</li>
    </ul>
  </li>
  <li>queryê°€ ì¡´ì¬í•œë‹¤ë©´, ì„ íƒí˜•ì¸ìë¥¼ ê²½ìš°ì˜ìˆ˜ë³„ë¡œ í™•ì¸í•˜ê¸° ìœ„í•´ query param dictë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸í•œë‹¤.</li>
  <li>
<strong>DTO, entity Modelë§Œ<code class="language-plaintext highlighter-rouge">sqlalchemyì— ë„£ê¸° ìœ„í•œ id</code>ë¼ê³  ì‚¬ìš©í•˜ê³ , <code class="language-plaintext highlighter-rouge">repoì˜ ë©”ì„œë“œ</code>ë¶€í„°ëŠ” ì¸ìì— <code class="language-plaintext highlighter-rouge">user_id</code>ë¥¼ ì‚¬ìš©í•œë‹¤.</strong>
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">nameì˜ ì¼ë°˜ëª…ì‚¬ëŠ”, sqlalchemy, repo, usecaseì˜ ë©”ì„œë“œê¹Œì§€ëŠ” ê°œë³„ë©”ì„œë“œêµ¬ì„±ì„ ìœ„í•´ name</code>ì„ ì‚¬ìš©í•˜ë˜, <code class="language-plaintext highlighter-rouge">controllerì—ì„œëŠ” ì™¸ë¶€ì˜ ë‹¤ë¥¸nameë„ ìˆìœ¼ë‹ˆ, user_name</code>ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</strong></li>
      <li>ë³€ìˆ˜ì •ë¦¬
        <ul>
          <li>id : sqlalchemy -&gt; <strong>repoë¶€í„°ëŠ”</strong> fk_idë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">pk_id</code>
</li>
          <li>name: sqlalchemy-&gt;repo-&gt;usecase(ì„ íƒì¸ìê°œë³„ë©”ì„œë“œì—by_name)-&gt; <strong>controllerë¶€í„°ëŠ” ì™¸ë¶€ì—ì„  ë‹¤ë¥¸(pet)_nameë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">pk_name</code></strong>
</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>controllerë¡œ ì˜¤ëŠ” http_request.query ì† keys ê²½ìš°ì˜ìˆ˜ë³„ë¡œ <strong>serviceë¡œì„œ ì¸ì ê²½ìš°ì˜ìˆ˜ë³„ë¡œ ê°œë³„ì œê³µë˜ëŠ” usecaseì˜ methodë¥¼ í˜¸ì¶œí•˜ì—¬ response ì¬í• ë‹¹</strong>
</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="s">""" Class to define controller to find_user use case"""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">find_user_use_case</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FindUser</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">find_user_use_case</span>

    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_request</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpRequest</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
        <span class="s">""" Method to call use case """</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
            <span class="c1"># If query
</span>
            <span class="n">query_string_params</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span>

            <span class="k">if</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_id</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
                <span class="n">user_name</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name</span><span class="p">(</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">user_name</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_name</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_name</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">user_name</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_id</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Success'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>

</code></pre></div></div>

<h4 id="find-usecaseì˜-ê²°ê³¼responseì˜--if-responsesuccessê°€-is-falseì¸-ê²½ìš°---validate_entry-falseë¼ë©´-controllerì—ì„œëŠ”-status_code-422ë¡œ-ì‘ë‹µí•´ì¤˜ì•¼í•œë‹¤">
<a class="anchor" href="#find-usecase%EC%9D%98-%EA%B2%B0%EA%B3%BCresponse%EC%9D%98--if-responsesuccess%EA%B0%80-is-false%EC%9D%B8-%EA%B2%BD%EC%9A%B0---validate_entry-false%EB%9D%BC%EB%A9%B4-controller%EC%97%90%EC%84%9C%EB%8A%94-status_code-422%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Find usecaseì˜ ê²°ê³¼responseì˜  if response[â€œSuccessâ€]ê°€ is Falseì¸ ê²½ìš° -&gt; validate_entry Falseë¼ë©´, controllerì—ì„œëŠ” status_code 422ë¡œ ì‘ë‹µí•´ì¤˜ì•¼í•œë‹¤.</h4>

<ul>
  <li>
    <p>http <code class="language-plaintext highlighter-rouge">422</code>: ì´ ì‘ë‹µì€ ì„œë²„ê°€ ìš”ì²­ì„ ì´í•´í•˜ê³  ìš”ì²­ ë¬¸ë²•ë„ ì˜¬ë°”ë¥´ì§€ë§Œ ìš”ì²­ëœ ì§€ì‹œë¥¼ ë”°ë¥¼ ìˆ˜ ì—†ìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>

    <ul>
      <li><strong>íŒŒë¼ë¯¸í„° typeì—ëŸ¬ì— ê±¸ë¦´ ê²½ìš° validate_entryê°€ Falseê°€ ë˜ë¯€ë¡œ ì´ ê²½ìš° <code class="language-plaintext highlighter-rouge">422</code>ë¡œ ì‘ë‹µí•œë‹¤.</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="c1">#...
</span>        <span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
            <span class="c1"># If query
</span>  
            <span class="n">query_string_params</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">.</span><span class="n">keys</span><span class="p">()</span>
  
            <span class="c1">#...
</span>  
            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_id</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
                <span class="p">)</span>
  
            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Success'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
  
              
            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="c1"># validate_entry False -&gt; 422
</span></code></pre></div>    </div>
  </li>
</ul>

<h3 id="05-errors--http_errospyë¡œ-errorë³„-statue_code--bodyë°ì´í„°-dict-ë°˜í™˜-httperrors-static-class-ì •ì˜í•˜ê¸°">
<a class="anchor" href="#05-errors--http_errospy%EB%A1%9C-error%EB%B3%84-statue_code--body%EB%8D%B0%EC%9D%B4%ED%84%B0-dict-%EB%B0%98%ED%99%98-httperrors-static-class-%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 errors &gt; http_erros.pyë¡œ [errorë³„ statue_code + bodyë°ì´í„° dict ë°˜í™˜] HttpErrors (static) class ì •ì˜í•˜ê¸°</h3>

<h4 id="use_case_controller-handleë©”ì„œë“œ-ë‚´-response-successê°€-falseì¸-ê²½ìš°ë¥¼-ì²˜ë¦¬í•˜ê¸°-ìœ„í•œ-ê°œë³„-httpresponseë¥¼-ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤-ê·¸-ë‚´ìš©ë¬¼ë¡œ-ë“¤ì–´ê°ˆ-errorìš©-status_code--bodyë¥¼-dictë¡œ-ë¬¶ì–´ë†“ì€-httperrors-static-classë¥¼-ì •ì˜í•œë‹¤">
<a class="anchor" href="#use_case_controller-handle%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4-response-success%EA%B0%80-false%EC%9D%B8-%EA%B2%BD%EC%9A%B0%EB%A5%BC-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EA%B0%9C%EB%B3%84-httpresponse%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4-%EA%B7%B8-%EB%82%B4%EC%9A%A9%EB%AC%BC%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%88-error%EC%9A%A9-status_code--body%EB%A5%BC-dict%EB%A1%9C-%EB%AC%B6%EC%96%B4%EB%86%93%EC%9D%80-httperrors-static-class%EB%A5%BC-%EC%A0%95%EC%9D%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>use_case_controller handleë©”ì„œë“œ ë‚´ response â€œSuccessâ€ê°€ Falseì¸ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê°œë³„ HttpResponseë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤. ê·¸ ë‚´ìš©ë¬¼ë¡œ ë“¤ì–´ê°ˆ [errorìš© status_code + body]ë¥¼ dictë¡œ ë¬¶ì–´ë†“ì€ HttpErrors (static) classë¥¼ ì •ì˜í•œë‹¤.</h4>

<ul>
  <li>my) <code class="language-plaintext highlighter-rouge">ì •í•´ì§„ dictë“¤</code> ë§¤í•‘ì„ <code class="language-plaintext highlighter-rouge">errors.py</code>ì•ˆì— <code class="language-plaintext highlighter-rouge">staticë©”ì„œë“œë³„ë¡œ ë§¤í•‘</code>í•´ë†“ê³ , <code class="language-plaintext highlighter-rouge">Class.staticë©”ì„œë“œë¥¼ í˜¸ì¶œë¡œ ë§¤í•‘dictë¥¼ ë°˜í™˜</code>í•´ì„œ êº¼ë‚´ì“°ë„¤?!</li>
</ul>

<ol>
  <li>src&gt; presenter &gt; errors &gt; <code class="language-plaintext highlighter-rouge">http_erros.py</code>ë¥¼ ìƒì„±</li>
  <li>ê° ì—ëŸ¬ë³„ë¡œ <code class="language-plaintext highlighter-rouge">@staticmethod</code>ë¡œ <strong>ê°ì²´ ì—†ì´ í´ë˜ìŠ¤ë¡œ ë°”ë¡œ í˜¸ì¶œí•˜ì—¬ ` (errorìš© status_code, (errorìš©)bodyë¥¼ dict`ë¡œ ë¬¶ì–´ì„œ ë°˜í™˜í•´ì¤„ methodë¥¼ ë§Œë“ ë‹¤.</strong>
</li>
  <li><strong>bodyì—­ì‹œ ê°œë³„dictì´ë©°, â€œerrorâ€ keyì•ˆì— â€œcodeë³„ messageâ€ ë¥¼ ë‹´ëŠ”ë‹¤.</strong></li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HttpErrors</span><span class="p">:</span>
    <span class="s">""" Class to define errors in http """</span>

    <span class="o">@</span><span class="nb">staticmethod</span>
    <span class="k">def</span> <span class="nf">error_422</span><span class="p">():</span>
        <span class="s">""" HTTP 422 """</span>

        <span class="k">return</span> <span class="p">{</span><span class="s">"status_code"</span><span class="p">:</span> <span class="mi">422</span><span class="p">,</span> <span class="s">"body"</span><span class="p">:</span> <span class="p">{</span><span class="s">"error"</span><span class="p">:</span> <span class="s">"Unprocessable Entity"</span><span class="p">}}</span>

</code></pre></div></div>

<ul>
  <li>initì— ì˜¬ë ¤ì„œ contollerë“¤ì´ importí•´ì„œ ì‚¬ìš©í•˜ê¸°</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">.http_errors</span> <span class="kn">import</span> <span class="n">HttpErrors</span>
</code></pre></div></div>

<ul>
  <li>
<strong>cf) <code class="language-plaintext highlighter-rouge">ëª©ê°ì²´</code>ë„ ì •í•´ì§„ í˜•íƒœì˜ ë°ì´í„°ë°˜í™˜</strong>ì´ì§€ë§Œ, **<code class="language-plaintext highlighter-rouge">1ê°œì˜ ëœë¤ë°ì´í„° ë°˜í™˜</code>ì´ë¯€ë¡œ Static(method) Classë¡œ ì •ì˜í•˜ì§€ ì•Šê³ , ê·¸ëƒ¥ <code class="language-plaintext highlighter-rouge">ë©”ì„œë“œ 1ê°œ </code>ë¡œ **
    <ul>
      <li><strong>http errosëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ë°ì´í„°ë“¤ ë°˜í™˜ -&gt; classë¡œ ë¬¶ì–´ì„œ statiac ë©”ì„œë“œë³„ë¡œ 1ê°œì˜ ë°ì´í„°ì”© ë°˜í™˜</strong></li>
    </ul>
  </li>
</ul>

<h3 id="06-ë‹¤ì‹œ-handle-controllerë¡œ-ë³µê·€">
<a class="anchor" href="#06-%EB%8B%A4%EC%8B%9C-handle-controller%EB%A1%9C-%EB%B3%B5%EA%B7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>06 ë‹¤ì‹œ handle controllerë¡œ ë³µê·€</h3>

<h4 id="if-http_requestqueryê°€-ìˆì–´ì„œ-usecase-ë©”ì„œë“œë³„-ì²˜ë¦¬í•˜ê³ -responseê²°ê³¼ë¥¼-ë°›ì•˜ëŠ”ë°-responsesuccessê°€-validì¸-ê²½ìš°-httperrosë¥¼-ì´ìš©í•´-httpresponseê°ì²´-ë§Œë“¤ì–´ì„œ-early-return">
<a class="anchor" href="#if-http_requestquery%EA%B0%80-%EC%9E%88%EC%96%B4%EC%84%9C-usecase-%EB%A9%94%EC%84%9C%EB%93%9C%EB%B3%84-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B3%A0-response%EA%B2%B0%EA%B3%BC%EB%A5%BC-%EB%B0%9B%EC%95%98%EB%8A%94%EB%8D%B0-responsesuccess%EA%B0%80-valid%EC%9D%B8-%EA%B2%BD%EC%9A%B0-httperros%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4-httpresponse%EA%B0%9D%EC%B2%B4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-early-return" aria-hidden="true"><span class="octicon octicon-link"></span></a>if http_request.queryê°€ ìˆì–´ì„œ usecase ë©”ì„œë“œë³„ ì²˜ë¦¬í•˜ê³  responseê²°ê³¼ë¥¼ ë°›ì•˜ëŠ”ë°, response[â€œSuccessâ€]ê°€ validì¸ ê²½ìš° HttpErrosë¥¼ ì´ìš©í•´ HttpResponseê°ì²´ ë§Œë“¤ì–´ì„œ early return</h4>

<ol>
  <li>usecase ë©”ì„œë“œì˜ ë°˜í™˜ì´ Successê°€ Falseë¼ë©´ validate_entryê°€ ì‹¤íŒ¨í•œ ê²ƒ-&gt; 422 ì—ëŸ¬ë¥¼ HttpErrors ìŠ¤íƒœí‹± í´ë˜ìŠ¤ì—ì„œ ë½‘ì•„ì„œ <strong>HttpResoponseê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•´ì¤€ë‹¤.</strong>
</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#...
</span><span class="kn">from</span> <span class="nn">src.presenters.errors</span> <span class="kn">import</span> <span class="n">HttpErrors</span>

<span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="c1">#...
</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_request</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpRequest</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
        <span class="c1">#...
</span>
        <span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
            <span class="c1">#...
</span>
            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_id</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Success'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>

            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_422</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
                <span class="p">)</span>

</code></pre></div></div>

<h4 id="if-http_requestqueryê°€-ìˆê³ --responsesuccessê°€-falseì•„ë‹ˆë¼ë©´-200-ì„±ê³µcode--ê°œë³„-ì‘ë‹µdataë¥¼-ë°˜í™˜í•œë‹¤">
<a class="anchor" href="#if-http_requestquery%EA%B0%80-%EC%9E%88%EA%B3%A0--responsesuccess%EA%B0%80-false%EC%95%84%EB%8B%88%EB%9D%BC%EB%A9%B4-200-%EC%84%B1%EA%B3%B5code--%EA%B0%9C%EB%B3%84-%EC%9D%91%EB%8B%B5data%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>if http_request.queryê°€ ìˆê³ ,  response[â€œSuccessâ€]ê°€ Falseì•„ë‹ˆë¼ë©´, [200 ì„±ê³µcode + ê°œë³„ ì‘ë‹µDataë¥¼ ë°˜í™˜í•œë‹¤]</h4>

<h5 id="usecaseëŠ”-validate_entry--ì‘ë‹µdata----controllerëŠ”-status_code200--ì‘ë‹µdata">
<a class="anchor" href="#usecase%EB%8A%94-validate_entry--%EC%9D%91%EB%8B%B5data----controller%EB%8A%94-status_code200--%EC%9D%91%EB%8B%B5data" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecaseëŠ” validate_entry + ì‘ë‹µData  -&gt; controllerëŠ” status_code200 + ì‘ë‹µData</h5>

<ul>
  <li>ì•„â€¦ usecaseì˜ response[â€œSuccessâ€]ëŠ” controllerì˜ status_code=200ì´ ì•„ë‹Œ 422 ìƒí™© ì²˜ë¦¬ë¥¼ ìœ„í•¨ì´ì—ˆêµ¬ë‚˜.</li>
  <li>ì•„â€¦ usecaseì˜ <strong>response[â€œDataâ€]</strong>ì•¼ ë§ë¡œ, controllerì˜ ì‘ë‹µ<strong>body</strong>ê°€ ë˜ëŠ” êµ¬ë‚˜</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="c1">#...
</span>    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_request</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpRequest</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
        <span class="c1">#...
</span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
            <span class="c1">#...
</span>
            <span class="k">elif</span> <span class="s">"user_id"</span> <span class="ow">in</span> <span class="n">query_string_params</span> <span class="ow">and</span> <span class="s">"user_name"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_string_params</span><span class="p">:</span>
                <span class="n">user_id</span> <span class="o">=</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id</span><span class="p">(</span>
                    <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Success'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">"Data"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>

            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_422</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span>
            <span class="p">)</span>
</code></pre></div></div>

<h4 id="ì ì–´ë„-selectìš©-paramì´-ìˆì–´ì•¼-í•˜ëŠ”-find_user-controllerì—ì„œ-ë§Œí¼ì€-http_requestì—--queryê°€-ì—†ë‹¤ë©´-ì‚¬ì‹¤ìƒ-400ì—ëŸ¬">
<a class="anchor" href="#%EC%A0%81%EC%96%B4%EB%8F%84-select%EC%9A%A9-param%EC%9D%B4-%EC%9E%88%EC%96%B4%EC%95%BC-%ED%95%98%EB%8A%94-find_user-controller%EC%97%90%EC%84%9C-%EB%A7%8C%ED%81%BC%EC%9D%80-http_request%EC%97%90--query%EA%B0%80-%EC%97%86%EB%8B%A4%EB%A9%B4-%EC%82%AC%EC%8B%A4%EC%83%81-400%EC%97%90%EB%9F%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì ì–´ë„ selectìš© paramì´ ìˆì–´ì•¼ í•˜ëŠ” find_user controllerì—ì„œ ë§Œí¼ì€, http_requestì—  queryê°€ ì—†ë‹¤ë©´, ì‚¬ì‹¤ìƒ 400ì—ëŸ¬</h4>

<ol>
  <li>
    <p>HttpErros static classì— 400 ì—ëŸ¬ ì •ì˜í•´ì£¼ê¸°</p>

    <ul>
      <li><strong>queryì† paramë“¤ì´ í•„ìš”í•œ controllerì¸ë° ì•„ì˜ˆ ì¡´ì¬ë„ ì•ˆí–ˆë‹¤ë©´, 400 Bad Requestì—ëŸ¬</strong></li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HttpErrors</span><span class="p">:</span>
    <span class="c1">#...
</span>   
    <span class="o">@</span><span class="nb">staticmethod</span>
    <span class="k">def</span> <span class="nf">error_400</span><span class="p">():</span>
        <span class="s">""" HTTP 400 """</span>
   
        <span class="k">return</span> <span class="p">{</span><span class="s">"status_code"</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s">"body"</span><span class="p">:</span> <span class="p">{</span><span class="s">"error"</span><span class="p">:</span> <span class="s">"Bad request"</span><span class="p">}}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>if http.query -&gt; ealry return ì•„ë˜ -&gt; <code class="language-plaintext highlighter-rouge">if not http.query ë¶€ë¶„</code></strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FindUserController</span><span class="p">:</span>
    <span class="c1">#...
</span>    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">http_request</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">HttpRequest</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
        <span class="c1">#...
</span>        <span class="n">response</span> <span class="o">=</span> <span class="bp">None</span>
   
        <span class="k">if</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">:</span>
            <span class="c1"># if query
</span>            <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">"Success"</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_422</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
                    <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
                <span class="p">)</span>
   
            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
                <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">response</span><span class="p">[</span><span class="s">"Data"</span><span class="p">]</span>
            <span class="p">)</span>
           
   
        <span class="c1"># If no query in http request
</span>        <span class="n">http_error</span> <span class="o">=</span> <span class="n">HttpErrors</span><span class="p">.</span><span class="n">error_400</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"status_code"</span><span class="p">],</span> <span class="n">body</span><span class="o">=</span><span class="n">http_error</span><span class="p">[</span><span class="s">"body"</span><span class="p">]</span>
        <span class="p">)</span>
   
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="ì™„ì„±ëœ-find_user_controllerëŠ”-init-ì—--ì˜¬ë ¤ì¤€ë‹¤">
<a class="anchor" href="#%EC%99%84%EC%84%B1%EB%90%9C-find_user_controller%EB%8A%94-init-%EC%97%90--%EC%98%AC%EB%A0%A4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì™„ì„±ëœ find_user_controllerëŠ” init ì—  ì˜¬ë ¤ì¤€ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">.find_user_controller</span> <span class="kn">import</span> <span class="n">FindUserController</span>
</code></pre></div></div>

<h2 id="2--usecase-controller-test">
<a class="anchor" href="#2--usecase-controller-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>2  usecase controller test</h2>

<ol>
  <li>
    <p>src&gt;presenter&gt;controllers&gt;<code class="language-plaintext highlighter-rouge">find_user_controller_test.py</code> ìƒì„±</p>
  </li>
  <li>
    <p>testí•  controller  + faker import</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.find_user_controller</span> <span class="kn">import</span> <span class="n">FindUserController</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="01-usecase-controllerëŠ”-usecaseë¥¼-ì¸ìë¡œ-ë°›ìœ¼ë‹ˆ-test-ì‚¬ìš©í• --usecasespy-í˜¸ì¶œê°ì§€--argsë³´ê´€ë°˜í™˜ì€mock-ë¥¼-ë¨¼ì €-ë§Œë“¤ì–´ì•¼í•œë‹¤">
<a class="anchor" href="#01-usecase-controller%EB%8A%94-usecase%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EC%9C%BC%EB%8B%88-test-%EC%82%AC%EC%9A%A9%ED%95%A0--usecasespy-%ED%98%B8%EC%B6%9C%EA%B0%90%EC%A7%80--args%EB%B3%B4%EA%B4%80%EB%B0%98%ED%99%98%EC%9D%80mock-%EB%A5%BC-%EB%A8%BC%EC%A0%80-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 usecase ControllerëŠ” usecaseë¥¼ ì¸ìë¡œ ë°›ìœ¼ë‹ˆ, test ì‚¬ìš©í•   usecaseSpy( í˜¸ì¶œê°ì§€ = argsë³´ê´€+ë°˜í™˜ì€mock )ë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì•¼í•œë‹¤.</h3>

<ul>
  <li>ì´ì „ì—ëŠ” <strong>ManyEntity Register usecase</strong>ì—ì„œ fkì •ë³´ì— ëŒ€í•œ Fkentityì— ì¡´ì¬í•˜ëŠ”ì§€ ìœ ë¬´ë¥¼ usecaseë ˆë²¨ì—ì„œ í™•ì¸í•˜ê¸° ìœ„í•´ <strong>FindFK UseCaseë¥¼ ì¸ì</strong>ë¡œ ë°›ì•„ì•¼í•´ì„œ <strong>FindFK(User)Spy</strong>ë¥¼ ê°œë°œí–ˆì—ˆë”°.
    <ul>
      <li><strong>ì—¬ê¸°ì„œëŠ”, usecase controllerë¼ë©´, í•´ë‹¹usecaseë¥¼ ì¸ìë¡œ ë°›ì•„ì•¼í•˜ê¸° ë•Œë¬¸ì— UseCaseSpyë¥¼ ìƒì„±í•œë‹¤</strong></li>
    </ul>
  </li>
  <li>RegisterPet usecaseë¥¼ testí•˜ê¸° ìœ„í•´ FKì¸ <strong>FindUserSpy</strong>ë¥¼ ì´ë¯¸ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ importí•´ì„œ ì‚¬ìš©í•œë‹¤
    <ul>
      <li>src&gt;data&gt;test&gt;<code class="language-plaintext highlighter-rouge">find_user_spy</code>.py</li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">from</span> <span class="nn">.find_user_controller</span> <span class="kn">import</span> <span class="n">FindUserController</span>
<span class="kn">from</span> <span class="nn">src.data.test</span> <span class="kn">import</span> <span class="n">FindUserSpy</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">test_handler</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>
    
</code></pre></div></div>

<h3 id="02-usecase-controllerëŠ”-repoë¥¼-í’ˆê³ -ìˆëŠ”-usecaseê°ì²´ë¥¼-ì¸ìë¡œ-ë°›ëŠ”ë‹¤">
<a class="anchor" href="#02-usecase-controller%EB%8A%94-repo%EB%A5%BC-%ED%92%88%EA%B3%A0-%EC%9E%88%EB%8A%94-usecase%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 UseCase ControllerëŠ” repoë¥¼ í’ˆê³  ìˆëŠ” UseCaseê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.</h3>

<h4 id="ê·¸ëŸ¬ë¯€ë¡œ-repospyê°ì²´ë¥¼-í’ˆëŠ”-usecasespyê°ì²´ë¥¼-ìƒì„±í•´ì„œ-testí• -controllerì—-ë„£ì–´ì¤€ë‹¤">
<a class="anchor" href="#%EA%B7%B8%EB%9F%AC%EB%AF%80%EB%A1%9C-repospy%EA%B0%9D%EC%B2%B4%EB%A5%BC-%ED%92%88%EB%8A%94-usecasespy%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%B4%EC%84%9C-test%ED%95%A0-controller%EC%97%90-%EB%84%A3%EC%96%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ê·¸ëŸ¬ë¯€ë¡œ repoSpyê°ì²´ë¥¼ í’ˆëŠ” UseCaseSpyê°ì²´ë¥¼ ìƒì„±í•´ì„œ testí•  Controllerì— ë„£ì–´ì¤€ë‹¤.</h4>

<ul>
  <li>
    <p>ì°¸ê³ : <strong>ManyEntityì˜ FindëŠ” FK_id valueë¡œ ê²€ìƒ‰ë§Œ í•˜ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">ManyEntity Register</code>ì˜ ê²½ìš°ë§Œ, Fkê°ì²´ë¥¼ UseCase FindFkë¥¼ ì¨ì•¼í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">ìì‹ useacseí’ˆëŠ” Repo</code> + <code class="language-plaintext highlighter-rouge">FKusecaseë¥¼ ì“°ê¸° ìœ„í•œ, í’ˆì–´ì•¼í•˜ëŠ” Fk Repo</code> 2ê°œê°€ í•„ìš”í•˜ë‹¤</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221004234048437.png" alt="image-20221004234048437"></p>
  </li>
</ul>

<ol>
  <li>
    <p>usecaseê°€ í’ˆì„ repo spy ê°ì²´ -&gt; controllerê°€ í’ˆì„ usecase Spy ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸í•  controller ê°ì²´ë¥¼ ë§Œë“ ë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_handler</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>
   
    <span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>
    <span class="n">find_user_controller</span> <span class="o">=</span> <span class="n">FindUserController</span><span class="p">(</span><span class="n">find_user_use_case</span><span class="p">)</span>
       
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="03-controllerì˜-handle-method-í…ŒìŠ¤íŠ¸ëŠ”-httprequestì˜-ì„ íƒí˜•ì¸ìheaders-body-query-ì¤‘-queryë§Œ-í•„ìš”í•œ-paramì„-ë„£ì–´ì„œí•œë‹¤">
<a class="anchor" href="#03-controller%EC%9D%98-handle-method-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-httprequest%EC%9D%98-%EC%84%A0%ED%83%9D%ED%98%95%EC%9D%B8%EC%9E%90headers-body-query-%EC%A4%91-query%EB%A7%8C-%ED%95%84%EC%9A%94%ED%95%9C-param%EC%9D%84-%EB%84%A3%EC%96%B4%EC%84%9C%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 Controllerì˜ handle method í…ŒìŠ¤íŠ¸ëŠ” HttpRequestì˜ ì„ íƒí˜•ì¸ì(headers, body, query) ì¤‘ queryë§Œ í•„ìš”í•œ paramì„ ë„£ì–´ì„œí•œë‹¤.</h3>

<h4 id="usecaseëŠ”-attributes-dict---methodì—-1ê°œì”©-ë½‘ì•„ì„œ-í• ë‹¹í•´ì¤¬ì—ˆë‹¤-controllerë¶€í„°ëŠ”-method-inputì´-httprequestê°ì²´-by--query-ì†-í•„ìš”í•œ-paramë“¤ì´ë‹¤">
<a class="anchor" href="#usecase%EB%8A%94-attributes-dict---method%EC%97%90-1%EA%B0%9C%EC%94%A9-%EB%BD%91%EC%95%84%EC%84%9C-%ED%95%A0%EB%8B%B9%ED%95%B4%EC%A4%AC%EC%97%88%EB%8B%A4-controller%EB%B6%80%ED%84%B0%EB%8A%94-method-input%EC%9D%B4-httprequest%EA%B0%9D%EC%B2%B4-by--query-%EC%86%8D-%ED%95%84%EC%9A%94%ED%95%9C-param%EB%93%A4%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>usecaseëŠ” attributes dict -&gt; methodì— 1ê°œì”© ë½‘ì•„ì„œ í• ë‹¹í•´ì¤¬ì—ˆë‹¤. controllerë¶€í„°ëŠ” method inputì´ [httprequestê°ì²´ by  query ì† í•„ìš”í•œ param]ë“¤ì´ë‹¤.</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">test_handler</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>

    <span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>
    <span class="n">find_user_controller</span> <span class="o">=</span> <span class="n">FindUserController</span><span class="p">(</span><span class="n">find_user_use_case</span><span class="p">)</span>

    <span class="n">http_request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s">"user_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(),</span> <span class="s">"user_name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()}</span>
        <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">find_user_controller</span><span class="p">.</span><span class="n">handle</span><span class="p">(</span><span class="n">http_request</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="04-input-test---usecase-spyê°ì²´ê°€-í’ˆê³ -ìˆëŠ”-param_dict-test">
<a class="anchor" href="#04-input-test---usecase-spy%EA%B0%9D%EC%B2%B4%EA%B0%80-%ED%92%88%EA%B3%A0-%EC%9E%88%EB%8A%94-param_dict-test" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 input Test -&gt; usecase Spyê°ì²´ê°€ í’ˆê³  ìˆëŠ” param_dict test</h3>

<h4 id="usecasespy-ì—­ì‹œ-repospyì²˜ëŸ¼-ê°œë³„ë©”ì„œë“œë§ˆë‹¤-param-dictì—-í’ˆê³ -ìˆìœ¼ë‹ˆ-input-testëŠ”-usecasespyê°ì²´param_dict--http_requestqueryë¡œ-í•œë‹¤">
<a class="anchor" href="#usecasespy-%EC%97%AD%EC%8B%9C-repospy%EC%B2%98%EB%9F%BC-%EA%B0%9C%EB%B3%84%EB%A9%94%EC%84%9C%EB%93%9C%EB%A7%88%EB%8B%A4-param-dict%EC%97%90-%ED%92%88%EA%B3%A0-%EC%9E%88%EC%9C%BC%EB%8B%88-input-test%EB%8A%94-usecasespy%EA%B0%9D%EC%B2%B4param_dict--http_requestquery%EB%A1%9C-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>UseCaseSpy ì—­ì‹œ RepoSpyì²˜ëŸ¼, ê°œë³„ë©”ì„œë“œë§ˆë‹¤ param dictì— í’ˆê³  ìˆìœ¼ë‹ˆ, input testëŠ” UseCaseSpyê°ì²´.param_dict == http_request.queryë¡œ í•œë‹¤</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005001633572.png" alt="image-20221005001633572"></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_handler</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>

    <span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>
    <span class="n">find_user_controller</span> <span class="o">=</span> <span class="n">FindUserController</span><span class="p">(</span><span class="n">find_user_use_case</span><span class="p">)</span>

    <span class="n">http_request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s">"user_id"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">random_number</span><span class="p">(),</span> <span class="s">"user_name"</span><span class="p">:</span> <span class="n">faker</span><span class="p">.</span><span class="n">word</span><span class="p">()}</span>
    <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">find_user_controller</span><span class="p">.</span><span class="n">handle</span><span class="p">(</span><span class="n">http_request</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    
    <span class="c1"># Testing Inputs
</span>    <span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">]</span>

</code></pre></div></div>

<h4 id="input-testë§Œ-ëë‚˜ë„-printreponseì™€-í•¨ê»˜-ì¼ë‹¨-pytest--vsí•œë‹¤">
<a class="anchor" href="#input-test%EB%A7%8C-%EB%81%9D%EB%82%98%EB%8F%84-printreponse%EC%99%80-%ED%95%A8%EA%BB%98-%EC%9D%BC%EB%8B%A8-pytest--vs%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>input testë§Œ ëë‚˜ë„ print(reponse)ì™€ í•¨ê»˜ ì¼ë‹¨ pytest -vsí•œë‹¤</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\presenters\controllers -vs
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005002714887.png" alt="image-20221005002714887"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005002637412.png" alt="image-20221005002637412"></p>

<h5 id="input-test-ì‹¤íŒ¨-ë¶„ì„">
<a class="anchor" href="#input-test-%EC%8B%A4%ED%8C%A8-%EB%B6%84%EC%84%9D" aria-hidden="true"><span class="octicon octicon-link"></span></a>input test ì‹¤íŒ¨ ë¶„ì„</h5>

<ol>
  <li>
    <p><strong>controllerê°€ UseCaseSpyë¥¼ í’ˆê³  ìˆì§€ë§Œ, <code class="language-plaintext highlighter-rouge">SpyëŠ” mock_dto()</code>ë¥¼ í†µí•´ ëª©ê°ì²´ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ, <code class="language-plaintext highlighter-rouge">printìƒ ì°íŒ responseì† Data: List[DTO]</code>ëŠ” ì˜ ì°íŒë‹¤.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005002912279.png" alt="image-20221005002912279"></p>
  </li>
  <li>
    <p><strong>key_errorì¸ë°, <code class="language-plaintext highlighter-rouge">UseCaseSpyëŠ” nameë“±ì˜ idì œì™¸ ì¼ë°˜ëª…ì‚¬ëŠ” ê·¸ëƒ¥ ì¸ìë¡œ ì‚¬ìš©(not user_name)</code>í•˜ê³  ìˆê³ , <code class="language-plaintext highlighter-rouge">Controllerì˜ HttpRequestëŠ” ì™¸ë¶€ì—ì„œ user_nameìœ¼ë¡œ ì¼ë°˜ëª…ì‚¬ì— entityëª…ì„ ë¶™ì—¬ì„œ ì‚¬ìš©</code>í•˜ê³  ìˆë‹¤.</strong></p>

    <ul>
      <li>UseCaseSpyì˜ param dictëŠ” ì¼ë°˜ëª…ì‚¬ <code class="language-plaintext highlighter-rouge">name</code>ì„ keyë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ë°”ê¿”ì¤€ë‹¤.</li>
    </ul>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Inputs
</span><span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span> <span class="o">==</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_id"</span><span class="p">]</span>
<span class="c1"># user_name -&gt; name in use case
</span><span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name_param</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">==</span> <span class="n">http_request</span><span class="p">.</span><span class="n">query</span><span class="p">[</span><span class="s">"user_name"</span><span class="p">]</span>
   
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005003829152.png" alt="image-20221005003829152"></p>
  </li>
</ol>

<h3 id="05-outputtest--">
<a class="anchor" href="#05-outputtest--" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 OutputTest -&gt;</h3>

<h4 id="usecaseì˜-outputì€-dictbool-listdto-or-dto--ouput-testëŠ”-success-trueì™€-data-is-not-noneì´ì—ˆë‹¤">
<a class="anchor" href="#usecase%EC%9D%98-output%EC%9D%80-dictbool-listdto-or-dto--ouput-test%EB%8A%94-success-true%EC%99%80-data-is-not-none%EC%9D%B4%EC%97%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>useCaseì˜ outputì€ Dict[bool, List[Dto] or Dto] =&gt; Ouput testëŠ” â€œSuccessâ€ Trueì™€ â€œDataâ€ is not Noneì´ì—ˆë‹¤.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005004143865.png" alt="image-20221005004143865"></p>

<h4 id="controller-outputì€-ì‹¤íŒ¨ë§Œ-ì•ˆí•œë‹¤ë©´-httprequeststatus_code200-bodyusecaseì˜resonsedata">
<a class="anchor" href="#controller-output%EC%9D%80-%EC%8B%A4%ED%8C%A8%EB%A7%8C-%EC%95%88%ED%95%9C%EB%8B%A4%EB%A9%B4-httprequeststatus_code200-bodyusecase%EC%9D%98resonsedata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Controller outputì€ ì‹¤íŒ¨ë§Œ ì•ˆí•œë‹¤ë©´ HttpRequest(status_code=200, body=usecaseì˜Resonse[â€œDataâ€])</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005004439758.png" alt="image-20221005004439758"></p>

<h5 id="contoller-output-testëŠ”-controllerhandleì˜-ê²°ê³¼ì¸-responsehttp_responseê°ì²´ì˜-status_code-200-body-is-not-noneì´ë‹¤">
<a class="anchor" href="#contoller-output-test%EB%8A%94-controllerhandle%EC%9D%98-%EA%B2%B0%EA%B3%BC%EC%9D%B8-responsehttp_response%EA%B0%9D%EC%B2%B4%EC%9D%98-status_code-200-body-is-not-none%EC%9D%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contoller Output testëŠ” controller.handle()ì˜ ê²°ê³¼ì¸ response(http_response)ê°ì²´ì˜ .status_code ==200, .body is Not Noneì´ë‹¤.</h5>

<ul>
  <li>usecaseëŠ” dictë¡œ ë‹´ì•„ì„œ ë°˜í™˜.</li>
  <li>controllerëŠ” HttpResponseê°ì²´ì— í•„ë“œë¡œ ë‹´ì•„ì„œ ë°˜í™˜</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Testing Outputs
</span><span class="k">assert</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
<span class="k">assert</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
</code></pre></div></div>

<h5 id="output-testë„-ëë‚˜ë©´-pytest">
<a class="anchor" href="#output-test%EB%8F%84-%EB%81%9D%EB%82%98%EB%A9%B4-pytest" aria-hidden="true"><span class="octicon octicon-link"></span></a>output testë„ ëë‚˜ë©´ pytest</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pytest</span> <span class="n">src</span>\<span class="n">presenters</span>\<span class="n">controllers</span> <span class="o">-</span><span class="n">vs</span>
</code></pre></div></div>

<h2 id="3-usecase-controller-fail-test-no-query-param-in-httprequest">
<a class="anchor" href="#3-usecase-controller-fail-test-no-query-param-in-httprequest" aria-hidden="true"><span class="octicon octicon-link"></span></a>3 usecase controller fail test (no query param in HttpRequest)</h2>

<h3 id="01-no-query-param-fail-testëŠ”-ì„±ê³µtestì—ì„œ-httprequestê°ì²´-ì¸ìë§Œ-ì‚­ì œí•˜ê³ -printresponseë¥¼-ì°ì€-ìƒíƒœì—ì„œ-í…ŒìŠ¤íŠ¸ë¥¼-ë¨¼ì €-ëŒë ¤ë³´ì">
<a class="anchor" href="#01-no-query-param-fail-test%EB%8A%94-%EC%84%B1%EA%B3%B5test%EC%97%90%EC%84%9C-httprequest%EA%B0%9D%EC%B2%B4-%EC%9D%B8%EC%9E%90%EB%A7%8C-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B3%A0-printresponse%EB%A5%BC-%EC%B0%8D%EC%9D%80-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EB%A8%BC%EC%A0%80-%EB%8F%8C%EB%A0%A4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 no query param fail testëŠ” ì„±ê³µtestì—ì„œ HttpRequestê°ì²´ ì¸ìë§Œ ì‚­ì œí•˜ê³  print(response)ë¥¼ ì°ì€ ìƒíƒœì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ëŒë ¤ë³´ì.</h3>

<ol>
  <li>
    <p>ì„±ê³µ testë¥¼ ë³µì‚¬í•´ì„œ <strong>def</strong> test_handle_no_query_param ë§Œë“ ë‹¤.</p>
  </li>
  <li>
    <p>HttpRequestì˜ queryì¸ìë¥¼ ì‚­ì œí•˜ê³  ë¹ˆ ê°ì²´ë¥¼ ë§Œë“ ë‹¤</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">print(response)ë¥¼ í¬í•¨í•œ ìƒíƒœë¡œ pytest</code>ë¥¼ ëŒë ¤ ì—ëŸ¬ë¥¼ ë‚´ë³¸ë‹¤.</strong></p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_handler_no_query_param</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>
   
    <span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>
    <span class="n">find_user_controller</span> <span class="o">=</span> <span class="n">FindUserController</span><span class="p">(</span><span class="n">find_user_use_case</span><span class="p">)</span>
   
    <span class="n">http_request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">()</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005013332634.png" alt="image-20221005013332634"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221005013340723.png" alt="image-20221005013340723"></p>
  </li>
</ol>

<h4 id="responseë¥¼-ì°ì–´ì„œ-ì–´ë–¤-status_codeë¥¼-í™•ì¸í•´ì•¼í• ì§€-ìˆ™ë ¨ì•ˆë˜ì—ˆìœ¼ë©´-í™•ì¸í•´ì•¼í•œë‹¤">
<a class="anchor" href="#response%EB%A5%BC-%EC%B0%8D%EC%96%B4%EC%84%9C-%EC%96%B4%EB%96%A4-status_code%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%B4%EC%95%BC%ED%95%A0%EC%A7%80-%EC%88%99%EB%A0%A8%EC%95%88%EB%90%98%EC%97%88%EC%9C%BC%EB%A9%B4-%ED%99%95%EC%9D%B8%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>responseë¥¼ ì°ì–´ì„œ, ì–´ë–¤ status_codeë¥¼ í™•ì¸í•´ì•¼í• ì§€ ìˆ™ë ¨ì•ˆë˜ì—ˆìœ¼ë©´ í™•ì¸í•´ì•¼í•œë‹¤</h4>

<h3 id="02-not-query-param-input-test-spyì†-ëª¨ë“ -param-dict---ë¹ˆ-dict">
<a class="anchor" href="#02-not-query-param-input-test-spy%EC%86%8D-%EB%AA%A8%EB%93%A0-param-dict---%EB%B9%88-dict" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 not query param Input test: spyì† ëª¨ë“  param dict == {} (ë¹ˆ dict)</h3>

<ul>
  <li>
    <p>ë¹ˆ dictëŠ” ë¹„êµë˜ë‚˜ë³´ë‹¤.</p>

    <ul>
      <li>
        <p><strong>ì–´ë–¤ ê¸°ë³¸ ìë£Œêµ¬ì¡°ë“  ê°ì²´ì—†ì´ ê°’ìœ¼ë¡œë§Œ êµ¬ì„±ë˜ê³  (seqëŠ” ìˆœì„œê¹Œì§€), ë¹„êµëœë‹¤.</strong></p>

        <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">{}</span> <span class="o">==</span> <span class="p">{}</span>
<span class="bp">True</span>
    
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s">"abc"</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s">"abc"</span><span class="p">}</span>
<span class="bp">True</span>
    
 <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s">"abc"</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s">"abc"</span><span class="p">}</span>
<span class="bp">True</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_handler_no_query_param</span><span class="p">():</span>
    <span class="s">""" Testing Handle method """</span>

    <span class="n">find_user_use_case</span> <span class="o">=</span> <span class="n">FindUserSpy</span><span class="p">(</span><span class="n">UserRepositorySpy</span><span class="p">())</span>
    <span class="n">find_user_controller</span> <span class="o">=</span> <span class="n">FindUserController</span><span class="p">(</span><span class="n">find_user_use_case</span><span class="p">)</span>

    <span class="n">http_request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">()</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">find_user_controller</span><span class="p">.</span><span class="n">handle</span><span class="p">(</span><span class="n">http_request</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="c1"># Testing Inputs
</span>    <span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_param</span> <span class="o">==</span> <span class="p">{}</span>
    <span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_name_param</span> <span class="o">==</span> <span class="p">{}</span>
    <span class="k">assert</span> <span class="n">find_user_use_case</span><span class="p">.</span><span class="n">by_id_and_name_param</span> <span class="o">==</span> <span class="p">{}</span>
</code></pre></div></div>

<h3 id="03-not-query-param-output-test-status_code--400-body---codeë³„-ì—ëŸ¬ë©”ì„¸ì§€ê°€-error-keyì—-ìˆìœ¼ë‹ˆ-keyê²€ì‚¬ë§Œ-í•œë‹¤">
<a class="anchor" href="#03-not-query-param-output-test-status_code--400-body---code%EB%B3%84-%EC%97%90%EB%9F%AC%EB%A9%94%EC%84%B8%EC%A7%80%EA%B0%80-error-key%EC%97%90-%EC%9E%88%EC%9C%BC%EB%8B%88-key%EA%B2%80%EC%82%AC%EB%A7%8C-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 not query param Output test: .status_code == 400, .body -&gt; codeë³„ ì—ëŸ¬ë©”ì„¸ì§€ê°€ â€œerrorâ€ keyì— ìˆìœ¼ë‹ˆ keyê²€ì‚¬ë§Œ í•œë‹¤!</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># Testing Outputs
</span>    <span class="k">assert</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">400</span>
    <span class="k">assert</span> <span class="s">"error"</span> <span class="ow">in</span> <span class="n">response</span><span class="p">.</span><span class="n">body</span>
</code></pre></div></div>

<h4 id="ì°¸ê³ ë¡œ-validate_entry-ì‹¤íŒ¨ëŠ”-status_code-422">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0%EB%A1%9C-validate_entry-%EC%8B%A4%ED%8C%A8%EB%8A%94-status_code-422" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ ë¡œ validate_entry ì‹¤íŒ¨ëŠ” status_code 422</h4>

<h4 id="pytest-ëŒë¦¬ê³ -í†µê³¼í–ˆìœ¼ë©´-í™•ì¸ìš©-printresponse-ì‚­ì œí›„-ì»¤ë°‹">
<a class="anchor" href="#pytest-%EB%8F%8C%EB%A6%AC%EA%B3%A0-%ED%86%B5%EA%B3%BC%ED%96%88%EC%9C%BC%EB%A9%B4-%ED%99%95%EC%9D%B8%EC%9A%A9-printresponse-%EC%82%AD%EC%A0%9C%ED%9B%84-%EC%BB%A4%EB%B0%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>pytest ëŒë¦¬ê³  í†µê³¼í–ˆìœ¼ë©´ í™•ì¸ìš© print(response) ì‚­ì œí›„ ì»¤ë°‹</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pytest src\presenters\controllers -vs
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
git add .


git commit -am "feat: Implementing FindUserController"
git commit -am "feat: Implementing FindUserController"
</code></pre></div></div>

<h4 id="masterëŠ”-pushí›„-mergeì•ˆí•´ì¤˜ë„-ëœë‹¤">
<a class="anchor" href="#master%EB%8A%94-push%ED%9B%84-merge%EC%95%88%ED%95%B4%EC%A4%98%EB%8F%84-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>masterëŠ” pushí›„ mergeì•ˆí•´ì¤˜ë„ ëœë‹¤.</h4>

<h2 id="ì°¸ê³ ">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì°¸ê³ </h2>

<ul>
  <li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Robert C. Martin (Uncle Bob)ì˜ Clean Code Blog</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-Clean-Architecture-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 1í¸</a></li>
  <li><a href="https://velog.io/@jahoy/Python%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%A6%B0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B02">ìš©ì–´ ì°¸ê³  ë¸”ë¡œê·¸ 2í¸</a></li>
</ul>

<h4 id="gitignore">
<a class="anchor" href="#gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a>gitignore</h4>

<ul>
  <li>
    <p>gitì— commitë˜ì—ˆë˜ ê²ƒì„ ignoreí•˜ê³  ì‹¶ì„ ë•Œ</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git rm [íŒŒì¼ëª…] --cached
</code></pre></div>    </div>
  </li>
  <li>
    <p>git amend</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git commit --amend --no-edit
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>console ë“±ì—ì„œ init importë¶€í„° ìƒê¸°ëŠ” pycacheí´ë”</li>
  <li>venv</li>
  <li>ì—°ìŠµìš© sqlite .dbíŒŒì¼</li>
  <li>pytestì‹œ ìƒê¸°ëŠ” .pytest_cache í´ë”</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**/__pycache__
venv
storage.db
.pytest_cache
</code></pre></div></div>

<h4 id="sqlalchemyíŒ¨í‚¤ì§€">
<a class="anchor" href="#sqlalchemy%ED%8C%A8%ED%82%A4%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>sqlalchemyíŒ¨í‚¤ì§€</h4>

<ul>
  <li>ì¼ë°˜ íŒ¨í‚¤ì§€: create_engine / ì¹¼ëŸ¼ì¬ë£Œë“¤</li>
  <li>.orm íŒ¨í‚¤ì§€:
    <ul>
      <li>relatioship: 1:Mì—ì„œ 1ì— í•´ë‹¹í•˜ëŠ” tableì´ ë“¤ê³  ìˆëŠ” ê°€ì§œì¹¼ëŸ¼</li>
      <li>sessionmaker: handler class ì† enterì—ì„œ engineì„ ë¬¶ì–´ì„œ sessionì„ ë°˜í™˜í•´ì£¼ëŠ” ë†ˆ</li>
    </ul>
  </li>
  <li>ê³„ì¸µë³„ ë³€ìˆ˜ì •ë¦¬
    <ul>
      <li>id : sqlalchemy -&gt; <strong>repoë¶€í„°ëŠ”</strong> fk_idë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">pk_id</code>
</li>
      <li>name: sqlalchemy-&gt;repo-&gt;usecaseê¹Œì§€ëŠ” ê·¸ëƒ¥ name (ì„ íƒì¸ì ê°œë³„ë©”ì„œë“œì—by_name)-&gt; <strong>controllerë¶€í„°ëŠ” ì™¸ë¶€ì—ì„  ë‹¤ë¥¸(pet)_nameë„ ìˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">pk_name</code></strong>
</li>
    </ul>
  </li>
</ul>

<h4 id="githubì—ì„œ-brë”°ì„œ-ì‘ì—…í•˜ê¸°">
<a class="anchor" href="#github%EC%97%90%EC%84%9C-br%EB%94%B0%EC%84%9C-%EC%9E%91%EC%97%85%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>githubì—ì„œ brë”°ì„œ ì‘ì—…í•˜ê¸°</h4>

<h5 id="1-1-githubì—ì„œ-brìƒì„±--clone">
<a class="anchor" href="#1-1-github%EC%97%90%EC%84%9C-br%EC%83%9D%EC%84%B1--clone" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-1] githubì—ì„œ brìƒì„± ~ clone</h5>

<ol>
  <li>
    <p>githubì— ë“¤ì–´ê°€ì„œ <code class="language-plaintext highlighter-rouge">feat/~</code>ë¡œ ë¸Œëœì¹˜ ìƒì„±</p>
  </li>
  <li>
    <p>í•´ë‹¹ brë§Œ clone</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone -b [branch] [gitì£¼ì†Œ]
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="cloneí›„-ì´ˆê¸°-ì‘ì—…-ì„¸íŒ…">
<a class="anchor" href="#clone%ED%9B%84-%EC%B4%88%EA%B8%B0-%EC%9E%91%EC%97%85-%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>cloneí›„ ì´ˆê¸° ì‘ì—… ì„¸íŒ…</h5>

<ol>
  <li>gitignoreì¤‘ì— dbíŒŒì¼ ìˆìœ¼ë©´ ì˜®ê²¨ì£¼ê¸°
    <ul>
      <li>ì—†ìœ¼ë©´ config importí•´ì„œ Base + handler -&gt; get_enigne -&gt; bindí•œ ë‹¤ìŒ, create_all()í•´ì¤˜ì•¼í• ë“¯??</li>
    </ul>
  </li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220929154256052.png" alt="image-20220929154256052"></p>

<ol>
  <li>githubì—ì„œ ë”°ì˜¨ ë¹ˆ ìƒˆbrì— ëŒ€í•´, venvë¥¼ ë§Œë“¤ê³  í™œì„±í™”í•˜ê³   vscodeë¥¼ ì—°ë‹¤</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python -m virtualenv -p python310 venv

.\venv\Scripts\activate
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ requirements.txt ì§ì ‘ ì„¤ì¹˜</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install -r requirements.txt
</code></pre></div></div>

<ol>
  <li>ìµœì´ˆ pre-commit install ì§ì ‘ ì„¸íŒ…</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pre-commit install
</code></pre></div></div>

<ol>
  <li>vscode ì—´ê³  interpreter venvë¡œ ì§€ì •</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code .
</code></pre></div></div>

<h5 id="1-2-ì‘ì—…ëë‚œ-brì˜-í´ë”ì—ì„œ-ìƒˆ-ì‘ì—…-brìƒì„±--ë¶„ê¸°ê²Œì‹œ-ì´ˆê¸°ì„¸íŒ…-ë˜-ì•ˆí•´ë„-ë˜ëŠ”-ì¥ì ">
<a class="anchor" href="#1-2-%EC%9E%91%EC%97%85%EB%81%9D%EB%82%9C-br%EC%9D%98-%ED%8F%B4%EB%8D%94%EC%97%90%EC%84%9C-%EC%83%88-%EC%9E%91%EC%97%85-br%EC%83%9D%EC%84%B1--%EB%B6%84%EA%B8%B0%EA%B2%8C%EC%8B%9C-%EC%B4%88%EA%B8%B0%EC%84%B8%ED%8C%85-%EB%98%90-%EC%95%88%ED%95%B4%EB%8F%84-%EB%90%98%EB%8A%94-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-2] ì‘ì—…ëë‚œ brì˜ í´ë”ì—ì„œ ìƒˆ ì‘ì—… brìƒì„± ~ ë¶„ê¸°ê²Œì‹œ (ì´ˆê¸°ì„¸íŒ… ë˜ ì•ˆí•´ë„ ë˜ëŠ” ì¥ì )</h5>

<ol>
  <li>
    <p>í˜„ì¬ brë¥¼ í™•ì¸í•œë‹¤.</p>

    <div class="language-python highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">branch</span>
<span class="o">*</span> <span class="n">feat</span><span class="o">/</span><span class="n">register_user_use_case</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>checkout -b</strong>ë¡œ ìƒˆ br ìƒì„±í•˜ì—¬ ì§„ì…í•˜ê¸°</p>

    <ul>
      <li>ì›ë˜ëŠ” githubì—ì„œ create branchí–ˆì—ˆìŒ.</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout -b feat/generic_use_cases
   
git branch
   
* feat/generic_use_cases
  feat/register_user_use_case
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git push -u origin [branchëª…]ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">ìƒˆë¡œìƒì„±í•œ brë¥¼ pushí•´ì„œ githubì— ìƒì„±í•˜ê¸°</code></strong></p>

    <ul>
      <li>vscodeì—ì„œëŠ” push -u origin [branch] ëŒ€ì‹   <strong><code class="language-plaintext highlighter-rouge">ë¶„ê¸°ê²Œì‹œ</code>ê°€ ëœ¬ë‹¤.</strong>
</li>
    </ul>
  </li>
  <li>
    <p>githubì—ì„œ <strong>ë¹ˆ ë¶„ê¸°ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸°</strong></p>

    <ul>
      <li>githubì— mergeë˜ê¸° ìœ„í•´ì„œëŠ” <strong>ì§ì „ ì‘ì—…ì´í›„ <code class="language-plaintext highlighter-rouge">githubì— ìƒˆ ì‘ì—… brë¥¼ ë¨¼ì € ìƒì„±í•´ë†“ê³  ì‘ì—…</code>ì— ë“¤ì–´ê°€ì•¼í•œë‹¤</strong>
</li>
    </ul>
  </li>
</ol>

<h5 id="1-3--ì˜›ë‚ ì—-ë”°ë‘”-brì—ì„œ-ì‘ì—…ì‹œì‘í• -ë•-ìµœì‹ -masterë¥¼-rebaseí›„ì—-ì‘ì—…ì‹œì‘í•˜ê¸°">
<a class="anchor" href="#1-3--%EC%98%9B%EB%82%A0%EC%97%90-%EB%94%B0%EB%91%94-br%EC%97%90%EC%84%9C-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%A0-%EB%95%90-%EC%B5%9C%EC%8B%A0-master%EB%A5%BC-rebase%ED%9B%84%EC%97%90-%EC%9E%91%EC%97%85%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[1-3]  ì˜›ë‚ ì— ë”°ë‘” brì—ì„œ ì‘ì—…ì‹œì‘í•  ë•, ìµœì‹  masterë¥¼ rebaseí›„ì— ì‘ì—…ì‹œì‘í•˜ê¸°</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git checkout master</code>ë¥¼ í†µí•´ <strong>ì•ˆê°€ì ¸ì™€ì„œ ì•ˆë³´ì´ë˜ master</strong>ë¥¼ ë§Œë“ ë‹¤</p>

    <ul>
      <li>
<strong>-bì˜ ìƒˆë¡œë§Œë“  ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ</strong> remoteì™€ ì—°ê²°ëœ masterê°€ ëœë‹¤.</li>
      <li>
<code class="language-plaintext highlighter-rouge">git branch</code>ë¡œ í™•ì¸</li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout master
   
git branch
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">git pull</code>ë¡œ masterì— ìµœì‹  ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>rebaseë°›ì„ ì—…ëƒì•ˆëœ ì‘ì—…brë¡œ ë„˜ì–´ê°„ ë’¤, <code class="language-plaintext highlighter-rouge">matserì˜ ë‚´ìš©ì„ rebaseë¡œ ë°›ì•„ì˜¨ë‹¤</code></strong></p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git checkout [ì‘ì—…br]
   
git rebase master
   
git log --oneline
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="2-í•´ë‹¹br-ì‘ì—…í…ŒìŠ¤íŠ¸-ì™„ë£Œí›„--mergeê¹Œì§€-ì •ë¦¬">
<a class="anchor" href="#2-%ED%95%B4%EB%8B%B9br-%EC%9E%91%EC%97%85%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%99%84%EB%A3%8C%ED%9B%84--merge%EA%B9%8C%EC%A7%80-%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>[2] í•´ë‹¹br ì‘ì—…(í…ŒìŠ¤íŠ¸) ì™„ë£Œí›„ ~ mergeê¹Œì§€ ì •ë¦¬</h5>

<ol>
  <li>
    <p>status í™•ì¸í›„ add . í›„  -amìœ¼ë¡œ ì»¤ë°‹-&gt;ì‹¤íŒ¨-&gt;-amì»¤ë°‹</p>

    <ul>
      <li><strong>addë¥¼ ë¨¼ì € ë‚ ë ¤ì•¼ addëœìƒíƒœë¡œ pytestí•˜ëŠ” ê²ƒ ê°™ë‹¤?!</strong></li>
    </ul>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git status
   
git add 
   
git commit -am "feat: implementing data interfaces"
   
git commit -am "feat: implementing data interfaces"
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>git pushëŠ” í˜„ì¬ ë¡œê·¸ì¸ëœ vscodeì—ì„œ í•˜ê³  ìˆìŒ.</strong></p>
  </li>
  <li>
    <p><strong>githubì— ë“¤ì–´ê°€ë³´ë©´, <code class="language-plaintext highlighter-rouge">Compare &amp; pull request</code>ê°€ ë– ìˆë”ë¼ë„ <code class="language-plaintext highlighter-rouge">PRíƒ­ &gt; new PR</code>ë¡œ ë“¤ì–´ê°€ëŠ” ë²„ë¦‡ì„ ë“¤ì—¬ë³´ì.</strong></p>
  </li>
</ol>

<ul>
  <li>Comparing changeê¹Œì§€ ë“¤ì–´ê°€ì„œ ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <code class="language-plaintext highlighter-rouge">Able to merge</code> ë° <code class="language-plaintext highlighter-rouge">ì„¸ë¶€ì½”ë“œ</code>ë¥¼ í™•ì¸í•˜ê³  <strong>ì§ì ‘ Create PRê¹Œì§€ ê°€ì</strong>
</li>
</ul>

<ol>
  <li><strong>mergeí›„ masterì— ë°˜ì˜ë˜ì—ˆëŠ”ì§€ê¹Œì§€ í™•ì¸í•˜ì</strong></li>
</ol>

<h4 id="vscode-ì„¤ì •">
<a class="anchor" href="#vscode-%EC%84%A4%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>vscode ì„¤ì •</h4>

<ul>
  <li>ìºì‰¬íŒŒì¼ ì•ˆë³´ì´ê¸°</li>
</ul>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"**/__pycache__"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"**/.pytest_cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<ul>
  <li>
    <p>tabì‹œ spaceë¡œ ì…ë ¥ë˜ê¸°</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20221001015405760.png" alt="image-20221001015405760"></p>
  </li>
  <li>
    <p>íƒìƒ‰ê¸° ì—´ê¸° ë‹¨ì¶•í‚¤ : <code class="language-plaintext highlighter-rouge">shift + alt + R</code></p>

    <ul>
      <li>íŒŒì¼: íŒŒì¼ íƒìƒ‰ê¸°ì— í‘œì‹œ</li>
    </ul>
  </li>
</ul>

<h4 id="testì •ë¦¬">
<a class="anchor" href="#test%EC%A0%95%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>testì •ë¦¬</h4>

<ol>
  <li>
    <p>repo_insert_X</p>

    <ol>
      <li>idì œì™¸ faker + insertë©”ì„œë“œ -&gt; new_dto</li>
      <li>new_dtoì† ë°°ì •id + engine db select -&gt; query_data -&gt; engine db delete</li>
      <li>assert new_dto.í•„ë“œ == query_dataí•„ë“œ ë¹„êµ</li>
    </ol>
  </li>
  <li>
    <p>repo_select_X</p>
    <ol>
      <li>idí¬í•¨ faker -&gt; entityëª¨ë¸ ê°ì²´</li>
      <li>idí¬í•¨ ì¬ë£Œë“¤ + engine db insert -&gt; dbë°ì´í„°ë§Œë“¤ì–´ë†“ê¸°</li>
      <li>id, fkì¬ë£Œë“¤ + selectë©”ì„œë“œ -&gt; List[entityëª¨ë¸ê°ì²´ë“¤]</li>
      <li>engine db delete</li>
    </ol>
  </li>
</ol>

<h4 id="status_code">
<a class="anchor" href="#status_code" aria-hidden="true"><span class="octicon octicon-link"></span></a>status_code</h4>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">422</code>: validate_entryì‹¤íŒ¨í•˜ëŠ” query ì† paramë“¤ -&gt; usecaseë©”ì„œë“œì˜ ê²°ê³¼ë¬¼ responseì˜ [â€œSuccessâ€]ê°€ False</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>if reponse["Success"] is False:
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">400</code>: queryì† paramë“¤ì´ í•„ìš”í•œ controllerì¸ë° http_requestì•ˆì— ì•„ì˜ˆ ì¡´ì¬ë„ ì•ˆí–ˆë‹¤ë©´, 400 Bad Requestì—ëŸ¬</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>if http_request.query:
	# if query
# if not query
</code></pre></div>    </div>
  </li>
</ol>


  </div><a class="u-url" href="/python/flask/cleanarchitecture/2022/09/04/%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90_04_presenter_layer(controllers,-errors,-helpers)_and_%EB%8B%A8%EC%9D%BCUseCaseController.html" hidden></a>
</article>


<!-- <script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>í‰ë²”í•œ í•œì˜ì‚¬ ëŒë²”ì˜ ì—”ì§€ë‹ˆì–´ ë„ì „ê¸°</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
