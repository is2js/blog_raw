<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>의연방05) 코호트연구와 단면조사연구 | 돌범텤놑</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="의연방05) 코호트연구와 단면조사연구" />
<meta name="author" content="tingstyle1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Cohort study &amp; Cross-sectional study" />
<meta property="og:description" content="Cohort study &amp; Cross-sectional study" />
<link rel="canonical" href="blog.chojaeseong.com/r/r%EA%B3%A0%EA%B8%89/dplyr/broom/tidy/%ED%86%B5%EA%B3%84/%EB%8C%80%ED%95%99%EC%9B%90/%EC%9D%98%EC%97%B0%EB%B0%A9/%EC%BD%94%ED%98%B8%ED%8A%B8/cohort/%EB%8B%A8%EB%A9%B4%EC%A1%B0%EC%82%AC%EC%97%B0%EA%B5%AC/cross-sectional/2022/03/25/%EC%9D%98%EC%97%B0%EB%B0%A905)-Cohort-study-&-Cross-sectional-study.html" />
<meta property="og:url" content="blog.chojaeseong.com/r/r%EA%B3%A0%EA%B8%89/dplyr/broom/tidy/%ED%86%B5%EA%B3%84/%EB%8C%80%ED%95%99%EC%9B%90/%EC%9D%98%EC%97%B0%EB%B0%A9/%EC%BD%94%ED%98%B8%ED%8A%B8/cohort/%EB%8B%A8%EB%A9%B4%EC%A1%B0%EC%82%AC%EC%97%B0%EA%B5%AC/cross-sectional/2022/03/25/%EC%9D%98%EC%97%B0%EB%B0%A905)-Cohort-study-&-Cross-sectional-study.html" />
<meta property="og:site_name" content="돌범텤놑" />
<meta property="og:image" content="blog.chojaeseong.com/images/posts/data.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-25T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-03-25T00:00:00-05:00","url":"blog.chojaeseong.com/r/r%EA%B3%A0%EA%B8%89/dplyr/broom/tidy/%ED%86%B5%EA%B3%84/%EB%8C%80%ED%95%99%EC%9B%90/%EC%9D%98%EC%97%B0%EB%B0%A9/%EC%BD%94%ED%98%B8%ED%8A%B8/cohort/%EB%8B%A8%EB%A9%B4%EC%A1%B0%EC%82%AC%EC%97%B0%EA%B5%AC/cross-sectional/2022/03/25/%EC%9D%98%EC%97%B0%EB%B0%A905)-Cohort-study-&-Cross-sectional-study.html","@type":"BlogPosting","image":"blog.chojaeseong.com/images/posts/data.png","headline":"의연방05) 코호트연구와 단면조사연구","dateModified":"2022-03-25T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"blog.chojaeseong.com/r/r%EA%B3%A0%EA%B8%89/dplyr/broom/tidy/%ED%86%B5%EA%B3%84/%EB%8C%80%ED%95%99%EC%9B%90/%EC%9D%98%EC%97%B0%EB%B0%A9/%EC%BD%94%ED%98%B8%ED%8A%B8/cohort/%EB%8B%A8%EB%A9%B4%EC%A1%B0%EC%82%AC%EC%97%B0%EA%B5%AC/cross-sectional/2022/03/25/%EC%9D%98%EC%97%B0%EB%B0%A905)-Cohort-study-&-Cross-sectional-study.html"},"author":{"@type":"Person","name":"tingstyle1"},"description":"Cohort study &amp; Cross-sectional study","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- 폰트추가를 위한 link태그 삽입 -->
  <!-- 폰트1:  기본 spoqa 웹폰트 -->
  <!-- css에서 * {} 다 뒤집어씀. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- 폰트2:  블로그 제목들 sunflower 웹폰트 -->
  <!-- 쥬피터 등 포스트 내부 글자 h1, h2 제목은 sunflower체 도입 -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="blog.chojaeseong.com/feed.xml" title="돌범텤놑" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">돌범텤놑</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">의연방05) 코호트연구와 단면조사연구</h1><p class="page-description">Cohort study & Cross-sectional study</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-03-25T00:00:00-05:00" itemprop="datePublished">
        Mar 25, 2022
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">tingstyle1</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      31 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#R">R</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#R고급">R고급</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#dplyr">dplyr</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#broom">broom</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#tidy">tidy</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#통계">통계</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#대학원">대학원</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#의연방">의연방</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#코호트">코호트</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cohort">cohort</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#단면조사연구">단면조사연구</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#cross-sectional">cross-sectional</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/is2js/blog_raw/tree/master/_notebooks/2022-03-25-의연방05) Cohort study & Cross-sectional study.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/is2js/blog_raw/master?filepath=_notebooks%2F2022-03-25-%EC%9D%98%EC%97%B0%EB%B0%A905%29+Cohort+study+%26+Cross-sectional+study.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/is2js/blog_raw/blob/master/_notebooks/2022-03-25-의연방05) Cohort study & Cross-sectional study.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- toc가 먼저 나오므로 h3로 안내하기 -->
    <h3>📜 제목으로 보기</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#학습개요">학습개요 </a>
<ul>
<li class="toc-entry toc-h3"><a href="#학습목표">학습목표 </a></li>
<li class="toc-entry toc-h3"><a href="#주요-용어">주요 용어 </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Cohort-study">Cohort study </a>
<ul>
<li class="toc-entry toc-h3"><a href="#연구디자인과-cohort-study">연구디자인과 cohort study </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Cohort-study">Cohort study </a></li>
<li class="toc-entry toc-h4"><a href="#cohort-수행-2가지-방법">cohort 수행 2가지 방법 </a>
<ul>
<li class="toc-entry toc-h5"><a href="#방법1:-연구시작시점에서-(위험요소노출-O/X-등)-그룹을-먼저-나눈-뒤,-질병발생률만-관찰">방법1: 연구시작시점에서 (위험요소노출 O/X 등) 그룹을 먼저 나눈 뒤, 질병발생률만 관찰 </a></li>
<li class="toc-entry toc-h5"><a href="#방법2:-연구시작시점에서-위험요소노출-X-집단을-선택하여,-노출여부-->-빌병발생률-2가지를-순서대로-관찰">방법2: 연구시작시점에서 위험요소노출 X 집단을 선택하여, 노출여부 -&gt; 빌병발생률 2가지를 순서대로 관찰 </a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#Cohort-study의-장점">Cohort study의 장점 </a></li>
<li class="toc-entry toc-h4"><a href="#Cohort-study의-단점">Cohort study의 단점 </a></li>
<li class="toc-entry toc-h4"><a href="#코호트-대표-예제">코호트 대표 예제 </a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#코호트의-목적:-위험요소---질병발생-상관관계-탐구">코호트의 목적: 위험요소 - 질병발생 상관관계 탐구 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#RR-&-OR-in-cohort-study">RR &amp; OR in cohort study </a>
<ul>
<li class="toc-entry toc-h5"><a href="#Review-:-RR-&-OR">Review : RR &amp; OR </a></li>
<li class="toc-entry toc-h5"><a href="#RR-in-cohort-study">RR in cohort study </a></li>
<li class="toc-entry toc-h5"><a href="#OR-in-cohort-study">OR in cohort study </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#예제로-보는-cohort-study-속-위험요소-질병발생-상관관계-by-RR,-OR">예제로 보는 cohort study 속 위험요소-질병발생 상관관계 by RR, OR </a>
<ul>
<li class="toc-entry toc-h4"><a href="#상관관계의-크기를-보고-싶어-RR,-OR의-값-추정(점-추정치)">상관관계의 크기를 보고 싶어 RR, OR의 값 추정(점 추정치) </a></li>
<li class="toc-entry toc-h4"><a href="#상관관계-크기를-점-추정한-RR,-OR에-신뢰구간-더해주기">상관관계 크기를 점 추정한 RR, OR에 신뢰구간 더해주기 </a></li>
<li class="toc-entry toc-h4"><a href="#위험요소-노출-질병과의-상관관계가-통계적으로-있는--=--2개가-독립이-아닌지-통계적-검정까지-by-RR,OR">위험요소 노출-질병과의 상관관계가 통계적으로 있는  =  2개가 독립이 아닌지 통계적 검정까지 by RR,OR </a>
<ul>
<li class="toc-entry toc-h5"><a href="#독립성검정(자세히-설명X)">독립성검정(자세히 설명X) </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#R-실습(상관관계를-위한-RR,OR,신뢰구간,독립성검정까지-반영한-상관관계)">R 실습(상관관계를 위한 RR,OR,신뢰구간,독립성검정까지 반영한 상관관계) </a>
<ul>
<li class="toc-entry toc-h4"><a href="#my)-카이제곱검정-->-독립성검정-->-상관관계로-해석해도-됨-h0:(독립성)상관관계-유의하지-않다-h1:(독립성X)상관관계-유의하다">my) 카이제곱검정 -&gt; 독립성검정 -&gt; 상관관계로 해석해도 됨 h0:(독립성)상관관계 유의하지 않다 h1:(독립성X)상관관계 유의하다 </a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#confounding까지-고려한-코호트-속-위험요소-질병간-상관관계">confounding까지 고려한 코호트 속 위험요소-질병간 상관관계 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Mantel-Haenszel-방법">Mantel-Haenszel 방법 </a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#R-실습(confounding-or-interaction까지-고려한-상관관계)">R 실습(confounding or interaction까지 고려한 상관관계) </a>
<ul>
<li class="toc-entry toc-h4"><a href="#dplyr">dplyr </a>
<ul>
<li class="toc-entry toc-h5"><a href="#매핑(ifelse)한-칼럼추가(mutate)">매핑(ifelse)한 칼럼추가(mutate) </a>
<ul>
<li class="toc-entry toc-h6"><a href="#위험요소-변수를-연속형-->-특정값을-기준으로--0or1의-이분형으로-매핑(ifelse)-칼럼-추가(mutate)">위험요소 변수를 연속형 -&gt; 특정값을 기준으로  0or1의 이분형으로 매핑(ifelse) 칼럼 추가(mutate) </a></li>
<li class="toc-entry toc-h6"><a href="#boolean형-칼럼들-->-일괄-factor형으로-type변환-by-mutate_at()">boolean형 칼럼들 -&gt; 일괄 factor형으로 type변환 by mutate_at() </a></li>
</ul>
</li>
<li class="toc-entry toc-h5"><a href="#이제-만들어진-범주형변수들-중-필요한-위험요소1---질병1을-뽑아-2by2-table을-만든다.">이제 만들어진 범주형변수들 중 필요한 위험요소1 - 질병1을 뽑아 2by2 table을 만든다. </a></li>
<li class="toc-entry toc-h5"><a href="#범주형-0,1-factor의-레벨-순서를-바꿔주기-by-relevel()-+-mutate()-칼럼추가-외-칼럼-덮어쓰기를-이용해서">범주형 0,1 factor의 레벨 순서를 바꿔주기 by relevel() + mutate() 칼럼추가 외 칼럼 덮어쓰기를 이용해서 </a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#confounder를-고려-및-보정(핸들)해주며-코호트-속-상관관계-실습">confounder를 고려 및 보정(핸들)해주며 코호트 속 상관관계 실습 </a>
<ul>
<li class="toc-entry toc-h5"><a href="#핸들1:-Stratification(confounder를-선택후-값별(strrata)로-나눠서-2by2-테이블을-보는-층화)">핸들1: Stratification(confounder를 선택후 값별(strrata)로 나눠서 2by2 테이블을 보는 층화) </a>
<ul>
<li class="toc-entry toc-h6"><a href="#위험요소1-+-질병여부1-+-confounder변수까지-추출해서-table을-만든다.">위험요소1 + 질병여부1 + confounder변수까지 추출해서 table을 만든다. </a></li>
</ul>
</li>
<li class="toc-entry toc-h5"><a href="#핸들2:-adjustment">핸들2: adjustment </a></li>
<li class="toc-entry toc-h5"><a href="#실습전-코호트-confounder-핸들을-위한-Logistic-regression">실습전 코호트-confounder 핸들을 위한 Logistic regression </a>
<ul>
<li class="toc-entry toc-h6"><a href="#Logistic-regression에서-가장-중요한-OR(odds-rations)와-B(회귀계수)의-관계">Logistic regression에서 가장 중요한 OR(odds rations)와 B(회귀계수)의 관계 </a></li>
<li class="toc-entry toc-h6"><a href="#암기-->-회귀계수에다가-지수함를-취하면--[질병여부에-대한-해당-위험요소의-Odds-ratio]다">암기 -&gt; 회귀계수에다가 지수함를 취하면  [질병여부에 대한 해당 위험요소의 Odds ratio]다 </a></li>
<li class="toc-entry toc-h6"><a href="#multivariable-logistic-regression">multivariable logistic regression </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#interaction를-고려">interaction를 고려 </a>
<ul>
<li class="toc-entry toc-h6"><a href="#my)-confounder-값별로,-인터렉션-유발-변수-값별로--RR,-OR를-보고-검정하고-하네..">my) confounder 값별로, 인터렉션 유발 변수 값별로  RR, OR를 보고 검정하고 하네.. </a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#R실습(adjustment-및-interaction-고려한-)">R실습(adjustment 및 interaction 고려한 ) </a>
<ul>
<li class="toc-entry toc-h5"><a href="#logistric-regression을-이용한-confounding과-interaction-알아보기">logistric regression을 이용한 confounding과 interaction 알아보기 </a>
<ul>
<li class="toc-entry toc-h6"><a href="#위험요소노출여부(X)-질병여부(Y)만-고려하기">위험요소노출여부(X) 질병여부(Y)만 고려하기 </a></li>
<li class="toc-entry toc-h6"><a href="#회귀분석-결과-분석">회귀분석 결과 분석 </a></li>
<li class="toc-entry toc-h6"><a href="#위험요소노출여부(X)-병여부(Y)-+-@의심되는-confounder(age1st.grp)까지-고려해서-로지스틱-회귀-모델">위험요소노출여부(X)-병여부(Y) + @의심되는 confounder(age1st.grp)까지 고려해서 로지스틱 회귀 모델 </a></li>
<li class="toc-entry toc-h6"><a href="#위험요소노출여부(X)-병여부(Y)-+-@-age1st.grp가-confounder가-아니라-effective-modifier로-의심되서-interaction-term까지-고려해서-로지스틱-회귀-모델">위험요소노출여부(X)-병여부(Y) + @ age1st.grp가 confounder가 아니라 effective modifier로 의심되서 interaction term까지 고려해서 로지스틱 회귀 모델 </a></li>
<li class="toc-entry toc-h6"><a href="#interaction-term이-유의하게-나온-경우?!--의심변수-0일때와-1일때의-OR을-각각-확인한다.">interaction term이 유의하게 나온 경우?!  의심변수 0일때와 1일때의 OR을 각각 확인한다. </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#연구에서-Confounding과-Interaction(effect-modifier)를-만났을-때-설계">연구에서 Confounding과 Interaction(effect modifier)를 만났을 때 설계 </a></li>
<li class="toc-entry toc-h3"><a href="#2분형-결과변수의-코호트-분석-제한점">2분형 결과변수의 코호트 분석 제한점 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#2분형-결과변수(O/X)로는-제대로-코호트-분석이-안된다?-이상적이진-않다">2분형 결과변수(O/X)로는 제대로 코호트 분석이 안된다? 이상적이진 않다 </a></li>
<li class="toc-entry toc-h4"><a href="#이분형의-발병여부-->-분석시점에만-고려하면,-FU기간-기준이-없어서-통계적으로-invalid">이분형의 발병여부 -&gt; 분석시점에만 고려하면, FU기간 기준이 없어서 통계적으로 invalid </a></li>
<li class="toc-entry toc-h4"><a href="#이분형의-발병여부-->-분석시점-기준-FU기간만-제일-짧은(제일-최근-등록)환자-기준으로-바꾸면-통계적으로-valid?-but-FU기준을-넘어가는-정보들을-미반영">이분형의 발병여부 -&gt; 분석시점 기준 FU기간만 제일 짧은(제일 최근 등록)환자 기준으로 바꾸면 통계적으로 valid? but FU기준을 넘어가는 정보들을 미반영 </a></li>
<li class="toc-entry toc-h4"><a href="#생존자료분석-기법을-이용하면,-통계적-valid-&-모든-정보-반영">생존자료분석 기법을 이용하면, 통계적 valid &amp; 모든 정보 반영 </a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#코호트-스터디-논문예제">코호트 스터디 논문예제 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#N-E-J-med에-발표된-천식관련-코호트">N E J med에 발표된 천식관련 코호트 </a></li>
<li class="toc-entry toc-h4"><a href="#결과-해석">결과 해석 </a></li>
<li class="toc-entry toc-h4"><a href="#코호트-논문에서-관심있는-결과해석은-OR-분석표다">코호트 논문에서 관심있는 결과해석은 OR 분석표다 </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Cross-sectional-Study">Cross-sectional Study </a>
<ul>
<li class="toc-entry toc-h3"><a href="#bias-생길-확률이-높다">bias 생길 확률이 높다 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Temporal-bias">Temporal bias </a></li>
<li class="toc-entry toc-h4"><a href="#survival/selection-bias(prevalence-incidence-bias)">survival/selection bias(prevalence-incidence bias) </a></li>
<li class="toc-entry toc-h4"><a href="#한계점이-많은-연구">한계점이 많은 연구 </a></li>
<li class="toc-entry toc-h4"><a href="#크로스-섹셔널에서의-RR-&-OR">크로스-섹셔널에서의 RR &amp; OR </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#정리하기">정리하기 </a>
<ul>
<li class="toc-entry toc-h3"><a href="#cohort-study-연습문제">cohort study 연습문제 </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Q1.-다음-중-cohort-study에-대한-설명으로-적절하지-않은-것은?">Q1. 다음 중 cohort study에 대한 설명으로 적절하지 않은 것은? </a></li>
<li class="toc-entry toc-h4"><a href="#Q2.-다음은-어떤-cohort-study에서-흡연과-CHD의-관계를-알아보기-위해,-흡연자-300명,-비흡연자-500명을-10년간-추적하여-CHD-발병-여부를-조사한-것이다.">Q2. 다음은 어떤 cohort study에서 흡연과 CHD의 관계를 알아보기 위해, 흡연자 300명, 비흡연자 500명을 10년간 추적하여 CHD 발병 여부를 조사한 것이다. </a></li>
<li class="toc-entry toc-h4"><a href="#풀이">풀이 </a></li>
</ul>
</li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-03-25-의연방05) Cohort study & Cross-sectional study.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>R  고급 실습(cohort study with dplyr-pipeline, broom-tidy) 포함됨</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="학습개요">
<a class="anchor" href="#%ED%95%99%EC%8A%B5%EA%B0%9C%EC%9A%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>학습개요<a class="anchor-link" href="#%ED%95%99%EC%8A%B5%EA%B0%9C%EC%9A%94"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="학습목표">
<a class="anchor" href="#%ED%95%99%EC%8A%B5%EB%AA%A9%ED%91%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>학습목표<a class="anchor-link" href="#%ED%95%99%EC%8A%B5%EB%AA%A9%ED%91%9C"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>Cohort study의 정의를 설명할 수 있다.</p>
</li>
<li>
<p>Cohort study에서 RR과 OR을 추정하고, 위험요소와 질병의 독립성을 검정할 수 있다.</p>
</li>
<li>
<p>로지스틱 회귀분석을 이용하여 confounding과 interaction에 대한 분석을 수행할 수 있다.</p>
</li>
<li>
<p>Cross-sectional study의 정의를 설명하고, cohort study와의 차이점을 설명할 수 있다.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="주요-용어">
<a class="anchor" href="#%EC%A3%BC%EC%9A%94-%EC%9A%A9%EC%96%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>주요 용어<a class="anchor-link" href="#%EC%A3%BC%EC%9A%94-%EC%9A%A9%EC%96%B4"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>Cohort study : 연구자가 위험요소에 노출된 그룹과 노출되지 않은 그룹을 일정기간 동안 추적관찰하여, 두 그룹 간 질병 발생률(incidence)이나 질병에 의한 사망률 등을 비교하는 연구</p>
</li>
<li>
<p>Mantel-Haenszel 방법 : Confounder값 별로 나눈 stratum에서 각각 구한 OR(또는 RR)을, 그 OR의 분산의 역수를 weight로 준 weighted average(가중평균)으로 종합하는 방법</p>
</li>
<li>
<p>Logistic regression : 결과변수(반응변수, 종속변수)가 이분형인 회귀분석</p>
</li>
<li>
<p>Cross-sectional study : 위험요소 노출여부와 질병유무를 한 시점에 동시에 조사하는 연구</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cohort-study">
<a class="anchor" href="#Cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cohort study<a class="anchor-link" href="#Cohort-study"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="연구디자인과-cohort-study">
<a class="anchor" href="#%EC%97%B0%EA%B5%AC%EB%94%94%EC%9E%90%EC%9D%B8%EA%B3%BC-cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>연구디자인과 cohort study<a class="anchor-link" href="#%EC%97%B0%EA%B5%AC%EB%94%94%EC%9E%90%EC%9D%B8%EA%B3%BC-cohort-study"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417132324635.png" alt="image-20220417132324635"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>연구종류에는 <ul>
<li>
<strong>대상자에게 뭔가를 가하는 <code>Experimental(익스페리멘탈) study</code></strong>과 </li>
<li>
<strong>대상자에게 뭔가를 하지않고 관찰만하는 <code>Observational(옵져베이셔널) study</code></strong>가 있다.</li>
</ul>
</li>
<li>대상자에게 뭔가를 가하지 않는 <code>옵져베이셔널 스터디(관찰연구)</code>에는<ul>
<li>
<strong>전향적인 연구인 Prospective study와 후향적인 연구인 Retrospective study</strong>가 있다.<ul>
<li>전향적인 연구: 연구시점부터 무슨일이 일어나는지 관찰한다.</li>
<li>후향적인 연구: 다 끝난 뒤에서 무슨일이 일어났었는지 관찰한다.</li>
</ul>
</li>
<li><strong><code>전향적인 관찰연구(→) 중 적어도 2시점 이상을 관찰</code>하는 연구를 <code>Cohort Study</code>(=Longitudinal Study)라 한다.</strong></li>
<li><strong><code>전향이든, 후향이든 관찰연구(→, ←) 중 딱 1시점에서만 관찰</code>하는 연구를 <code>Cross-sectional Study</code>(=? Case-control study?)라 한다.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Cohort-study">
<a class="anchor" href="#Cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cohort study<a class="anchor-link" href="#Cohort-study"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417133356197.png" alt="image-20220417133356197"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>
<p><strong>연구자가 <code>위험요소 1개</code>에 대해 <code>노출O(group)/ 노출X(group)의 그룹을 나누고</code></strong></p>
<ul>
<li>위험요소 뿐만 아니라 <code>치료법 O/X</code> or <code>환자 특정 특성 O/X</code>(ex나이)의 2그룹으로 나눌 수 있다.<ul>
<li>ex&gt; 남성/여성</li>
</ul>
</li>
<li>실제로는 2그룹 뿐만 아니라 3그룹 이상도 나눌 수 있다.<ul>
<li>ex&gt; 20-40세 / 40-60세 / 60세이상의 3그룹</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong><code>일정기간 동안 추적 관찰</code>하여, <code>그룹간 질병 발생률(incidence)나 질병 사망률(또는 다른 이벤트) 등을 비교</code>하는 연구</strong></p>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="cohort-수행-2가지-방법">
<a class="anchor" href="#cohort-%EC%88%98%ED%96%89-2%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>cohort 수행 2가지 방법<a class="anchor-link" href="#cohort-%EC%88%98%ED%96%89-2%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="방법1:-연구시작시점에서-(위험요소노출-O/X-등)-그룹을-먼저-나눈-뒤,-질병발생률만-관찰">
<a class="anchor" href="#%EB%B0%A9%EB%B2%951:-%EC%97%B0%EA%B5%AC%EC%8B%9C%EC%9E%91%EC%8B%9C%EC%A0%90%EC%97%90%EC%84%9C-(%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C-O/X-%EB%93%B1)-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EB%A8%BC%EC%A0%80-%EB%82%98%EB%88%88-%EB%92%A4,-%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D%EB%A5%A0%EB%A7%8C-%EA%B4%80%EC%B0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>방법1: 연구시작시점에서 (위험요소노출 O/X 등) 그룹을 먼저 나눈 뒤, 질병발생률만 관찰<a class="anchor-link" href="#%EB%B0%A9%EB%B2%951:-%EC%97%B0%EA%B5%AC%EC%8B%9C%EC%9E%91%EC%8B%9C%EC%A0%90%EC%97%90%EC%84%9C-(%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C-O/X-%EB%93%B1)-%EA%B7%B8%EB%A3%B9%EC%9D%84-%EB%A8%BC%EC%A0%80-%EB%82%98%EB%88%88-%EB%92%A4,-%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D%EB%A5%A0%EB%A7%8C-%EA%B4%80%EC%B0%B0"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>연구 <code>시작 시점</code>에 위험요소(치료법, 특성) <strong><code>노출O 그룹 vs 노출X 그룹을 먼저 나누고</code></strong> -&gt; <code>각 그룹별 질병 발생/사망률 추적 관찰</code><ul>
<li>예&gt; 방사능 노출이라는 위험요소에 대해, 노출시 아웃컴이 어떻게 변하는가?<ol>
<li>
<code>원전사고가 있는 지역 = exposed group</code>과 <code>원전사고가 없지만, 비슷한 지역 = not exposed group</code> 그룹을 먼저 나누고</li>
<li>질병 발생률이나 사망률을 follow up</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417143658209.png" alt="image-20220417143658209"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="방법2:-연구시작시점에서-위험요소노출-X-집단을-선택하여,-노출여부--&gt;-빌병발생률-2가지를-순서대로-관찰">
<a class="anchor" href="#%EB%B0%A9%EB%B2%952:-%EC%97%B0%EA%B5%AC%EC%8B%9C%EC%9E%91%EC%8B%9C%EC%A0%90%EC%97%90%EC%84%9C-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C-X-%EC%A7%91%EB%8B%A8%EC%9D%84-%EC%84%A0%ED%83%9D%ED%95%98%EC%97%AC,-%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80--&gt;-%EB%B9%8C%EB%B3%91%EB%B0%9C%EC%83%9D%EB%A5%A0-2%EA%B0%80%EC%A7%80%EB%A5%BC-%EC%88%9C%EC%84%9C%EB%8C%80%EB%A1%9C-%EA%B4%80%EC%B0%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>방법2: 연구시작시점에서 위험요소노출 X 집단을 선택하여, 노출여부 -&gt; 빌병발생률 2가지를 순서대로 관찰<a class="anchor-link" href="#%EB%B0%A9%EB%B2%952:-%EC%97%B0%EA%B5%AC%EC%8B%9C%EC%9E%91%EC%8B%9C%EC%A0%90%EC%97%90%EC%84%9C-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C-X-%EC%A7%91%EB%8B%A8%EC%9D%84-%EC%84%A0%ED%83%9D%ED%95%98%EC%97%AC,-%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80--&gt;-%EB%B9%8C%EB%B3%91%EB%B0%9C%EC%83%9D%EB%A5%A0-2%EA%B0%80%EC%A7%80%EB%A5%BC-%EC%88%9C%EC%84%9C%EB%8C%80%EB%A1%9C-%EA%B4%80%EC%B0%B0"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>연구 시작 시점에 <code>아직 위험요소(치료법, 특성)에 노출X 집단만 선택</code>해놓고 -&gt; <code>위험요소 노출여부O/X</code> 관찰 -&gt; <code>질병발생률</code> 다시 관찰(2가지를 관찰)<ul>
<li>이 때, 노출여부O/X는 랜덤화 하지않고, 자연스럽게 그룹이 나뉘게 한다.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417144449374.png" alt="image-20220417144449374"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Cohort-study의-장점">
<a class="anchor" href="#Cohort-study%EC%9D%98-%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cohort study의 장점<a class="anchor-link" href="#Cohort-study%EC%9D%98-%EC%9E%A5%EC%A0%90"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>연구 시작시점(방법1) or 연구기간(방법2) 중 <strong><code>위험요소 노출여부가 먼저</code> 관측</strong> -&gt;  <strong>그 이후에 <code>새로 발생한 질병</code> 관측</strong>하기 때문에<ul>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>질병발생 시점이 명확 -&gt; incidence(질병발생 속도와 관련) 추정이 가능</strong>
</li>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>인과관계 추론에 결정적 단서</strong>
</li>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>위험요소 노출O/X이후 나올 수 있는 여러 질병들을 동시에 연구 가능하다.(타겟질병말고도 다른 질병이 나타나면 연구가능)</strong>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417145235716.png" alt="image-20220417145235716"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Cohort-study의-단점">
<a class="anchor" href="#Cohort-study%EC%9D%98-%EB%8B%A8%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cohort study의 단점<a class="anchor-link" href="#Cohort-study%EC%9D%98-%EB%8B%A8%EC%A0%90"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>질병 종류에 따라서 너무 오래걸리거나 비용이 많이 들 수 있다.<ul>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>질병 발생할때까지 계속 기다려야한다.</strong>
</li>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>희귀병은 기다려도 몇 명 발생안하므로, 많은 수의 연구대상자가 확보되어야하고, 계속 follow up해야한다</strong><ul>
<li>
<strong>대안: <code>retrospective cohort study</code></strong><ul>
<li>전통적인 코호트 스터디는 전향적 연구( 연구시작 -&gt; 노출O/X그룹 -&gt; 질병발생률 관찰)인데</li>
<li>요즘은 레트로스펙티브 코호트 스터디도 소개되고 있다.</li>
<li>
<code>연구시작 시점 이후</code> <strong>발병하는 질병을 follow 하는 것은 동일</strong>하나, </li>
<li>
<code>연구시작 시점 이전</code> <strong>위험요소 노출O/X를 &lt;기록(데이터),기억(인터뷰)&gt;를 통해 결정하는 것</strong><ul>
<li>질병발생률은 prospective / 위험요소 노출여부는 retrospective로서 2가지가 섞여있는 디자인이라고도 볼 수 있다.</li>
</ul>
</li>
<li>위험요소 노출O/X를 기다렸다가 나누었다가 할 필요가 없이 바로 질병발생률만 관찰하므로 전체적인 연구기간이 짧아진다.</li>
</ul>
</li>
</ul>
</li>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>질병 발생할때까지 계속 기다리다가 위험요소 노출여부가 중간에 바뀌어버릴 수 있다.</strong><ul>
<li>예&gt; 흡연으로 위험요소 노출O였다가, 연구 중간에 금연해서 not/un exposed group으로 가버릴 수 있다</li>
<li>대안: 위험요소 노출여부를 여러번 측정 -&gt; longitudinal study(여러번 측정시)</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417145655473.png" alt="image-20220417145655473"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="코호트-대표-예제">
<a class="anchor" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%8C%80%ED%91%9C-%EC%98%88%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>코호트 대표 예제<a class="anchor-link" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%8C%80%ED%91%9C-%EC%98%88%EC%A0%9C"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>전형적이지 않게, 1948년 연구 시작으로 지금까지 연구중 </li>
<li>위험요소가 무엇인지 모를 때 -&gt; 심혈관계 질환 발생에 어떤 것들이?? <ul>
<li>위험요소라는 결정적인 증거가 없었을 때, 위험요소들을 모아보기 위해 연구 시작</li>
<li>식생활, 비만 등</li>
</ul>
</li>
<li>맨 첨 시작할 때는 위험요소노출O/X 이후 -&gt; 질병발생까지 기다리는 시간이 오래 걸리니 30세 이상부터 연구 -&gt; 5000명 정도 시작<ul>
<li>자식세대인 offspring cohort는 5000명 정도 follow 중</li>
<li>3세대는 80세 미만으로 400명 정도가 follow 중
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417152222107.png" alt="image-20220417152222107">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="코호트의-목적:-위험요소---질병발생-상관관계-탐구">
<a class="anchor" href="#%EC%BD%94%ED%98%B8%ED%8A%B8%EC%9D%98-%EB%AA%A9%EC%A0%81:-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C---%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%ED%83%90%EA%B5%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>코호트의 목적: 위험요소 - 질병발생 상관관계 탐구<a class="anchor-link" href="#%EC%BD%94%ED%98%B8%ED%8A%B8%EC%9D%98-%EB%AA%A9%EC%A0%81:-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C---%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%ED%83%90%EA%B5%AC"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>이 상관관계를 탐구하기 위해 사용하는 메져가 무엇이 있었는가?</p>
<ol>
<li><strong>RR 랠러티브 리스크 for 상관관계</strong></li>
<li><strong>OR 오즈 레이시오 for 상관관계</strong></li>
<li>attributable risk for 상관관계</li>
</ol>
</li>
<li>
<p><strong>RR과 OR을 코호트 스터디에선 어떻게 측정하는지 알아보자</strong></p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="RR-&amp;-OR-in-cohort-study">
<a class="anchor" href="#RR-&amp;-OR-in-cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>RR &amp; OR in cohort study<a class="anchor-link" href="#RR-&amp;-OR-in-cohort-study"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="Review-:-RR-&amp;-OR">
<a class="anchor" href="#Review-:-RR-&amp;-OR" aria-hidden="true"><span class="octicon octicon-link"></span></a>Review : RR &amp; OR<a class="anchor-link" href="#Review-:-RR-&amp;-OR"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417152833247.png" alt="image-20220417152833247"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>RR을 구하려면 <ol>
<li>
<code>exposed risk</code>(위험요소 노출 O group에서의 질병발생 확률)을 <code>p1</code>로 구한다.</li>
<li>
<code>unexposed risk</code>(위험요소 노출 X group에서의 질병발생 확률)을 <code>p0</code>로 구한다.</li>
<li>
<code>RR</code>는 p1/p0로 <code>위험요소 노출X 그룹의 risk</code> 분에 <code>노출O 그룹의 risk</code>로 <strong>위험요소노출 그룹별로 구한 risk들의 비율</strong>이다.</li>
</ol>
</li>
</ul>
<ul>
<li>OR을 구하려면<ol>
<li>
<code>exposed risk</code> p1을 구한다</li>
<li>
<code>unexposed risk</code> p0을 구한다</li>
<li>
<code>exposed Odds</code>를 p1/1-p1으로 구한다.</li>
<li>
<code>unexposed Odds</code>를 p0/1-p0으로 구한다.</li>
<li>
<code>OR</code>는 <code>위험요소 노출X 그룹의 odds</code> 분에 <code>노출O 그룹의 odds</code>로 <strong>위험요소노출 그룹별로 구한 odds의 비율</strong>이다.</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="RR-in-cohort-study">
<a class="anchor" href="#RR-in-cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>RR in cohort study<a class="anchor-link" href="#RR-in-cohort-study"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417154258531.png" alt="image-20220417154258531"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>
<p>표에서 row/col을 보고 <strong>질병발생여부보다 <code>위험요소 노출 여부</code>가 있는 row별로 확인</strong>한다.</p>
<ul>
<li>위험요소 노출O -&gt; 질병발생 a명 / 질병발생안한 사람 b명</li>
<li>위험요소 노출X -&gt; 질병발생 c명 / 질병발생안한 사람 d명</li>
</ul>
</li>
<li>
<p><strong>RR은 각 <code>위험요소 노출O/X group별 risk</code>의 비율</strong>이므로 각 group별 risk를 구한다.</p>
<ol>
<li>exposed risk(p1) : a/a+b</li>
<li>unexposed risk(p0) : c/c+d</li>
<li>rr : p1/p0 = a/a+b   /   c/c+d
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417155327297.png" alt="image-20220417155327297">
</li>
</ol>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="OR-in-cohort-study">
<a class="anchor" href="#OR-in-cohort-study" aria-hidden="true"><span class="octicon octicon-link"></span></a>OR in cohort study<a class="anchor-link" href="#OR-in-cohort-study"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417155530944.png" alt="image-20220417155530944"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>
<p>표에서 <strong>row/col을 보고 질병발생여부보다 <code>위험요소 노출 여부</code>가 있는 row별로 확인한다.</strong>
2.<strong>OR는 각 <code>위험요소 노출O/X group별 odds의 비율</code>이므로 각 group별 odds를 구해야한다.</strong></p>
<ol>
<li>각 위험요소 노출여부 group별 <strong>odds는 <code>그룹별 risk(p)</code>부터 구한뒤 -&gt; <code>그룹별 odds(p/1-p)</code>를 구해야한다</strong>.<ol>
<li>exposed odds<ol>
<li>exposed risk(p1) : a/a+b</li>
<li>exposed odds(p1/1-p1) : a/a+b  /  (1 - a/a+b) = a/b</li>
</ol>
</li>
<li>unexposed odds<ol>
<li>unexposed risk(p0) : c/c+d</li>
<li>unexposed odds(p0/1-p0) : c/c+d  /  (1 - c/c+d) = c/d</li>
</ol>
</li>
</ol>
</li>
<li>OR = exposed odds / unexposed odds = a/b  / c/d   =  ad/bc
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417155613768.png" alt="image-20220417155613768">
</li>
</ol>
</li>
<li>
<p><strong>구하고 보니 <code>위험요소여부-질병발생여부 표</code>에서 cross-product하면, <code>odds ratio</code>를 바로 구할 수 도 있다.</strong></p>
<ul>
<li>이 때, a는 위험요소노출o-&gt;질병o, d는 위험요소노출x-&gt;질병x 이다.
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417160310053.png" alt="image-20220417160310053">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417160344988.png" alt="image-20220417160344988">
</li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="예제로-보는-cohort-study-속-위험요소-질병발생-상관관계-by-RR,-OR">
<a class="anchor" href="#%EC%98%88%EC%A0%9C%EB%A1%9C-%EB%B3%B4%EB%8A%94-cohort-study-%EC%86%8D-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-by-RR,-OR" aria-hidden="true"><span class="octicon octicon-link"></span></a>예제로 보는 cohort study 속 위험요소-질병발생 상관관계 by RR, OR<a class="anchor-link" href="#%EC%98%88%EC%A0%9C%EB%A1%9C-%EB%B3%B4%EB%8A%94-cohort-study-%EC%86%8D-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EC%A7%88%EB%B3%91%EB%B0%9C%EC%83%9D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-by-RR,-OR"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="상관관계의-크기를-보고-싶어-RR,-OR의-값-추정(점-추정치)">
<a class="anchor" href="#%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EC%9D%98-%ED%81%AC%EA%B8%B0%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EC%96%B4-RR,-OR%EC%9D%98-%EA%B0%92-%EC%B6%94%EC%A0%95(%EC%A0%90-%EC%B6%94%EC%A0%95%EC%B9%98)" aria-hidden="true"><span class="octicon octicon-link"></span></a>상관관계의 크기를 보고 싶어 RR, OR의 값 추정(점 추정치)<a class="anchor-link" href="#%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EC%9D%98-%ED%81%AC%EA%B8%B0%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EC%96%B4-RR,-OR%EC%9D%98-%EA%B0%92-%EC%B6%94%EC%A0%95(%EC%A0%90-%EC%B6%94%EC%A0%95%EC%B9%98)"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417160458677.png" alt="image-20220417160458677"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>표를 보고 <strong>위험요소 노출O/X(row for group) -&gt; 질병 발생여부(col) 순서로 확인</strong>한다.<ul>
<li>아~ 위험요소 2개의 interaction문제는 아니구나</li>
<li><strong>아~ <code>위험요소 1개 O/X별 -&gt; 질병발생 O/X 의 관계</code>이므로 -&gt; 상관관계가 목적이고 -&gt; RR, OR로 계산하겠구나. 그럴려면 <code>위험요소 O/X를 group으로 나눠서 risk/odds</code>를 계산하겠구나</strong></li>
</ul>
</li>
</ol>
<ol>
<li>
<p>RR를 <code>각 위험요소 노출여부 그룹별(→row별) risk 비율</code>로 구한다.</p>
<ul>
<li>RR = exposed risk(p1) / unexposed risk(p0) = (9/9+291) / (10/10+490) = 9/300 / 10/500 = 1.5</li>
</ul>
</li>
<li>
<p>OR는 <strong>위험요소노출여부-질병여부 표에서 <code>ad/bc</code>의 cross-product로 빠르게 구한다</strong></p>
<ul>
<li>원래는 <code>각 위험요소 노출여부 그룹별(→row별) odds(risk/1-risk) 비율</code>로 구해야한다.</li>
<li>OR = a(oo)d(xx) / bc = 9 x 490 / 291 x 10 = 1.52
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417161612247.png" alt="image-20220417161612247">
</li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="상관관계-크기를-점-추정한-RR,-OR에-신뢰구간-더해주기">
<a class="anchor" href="#%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%ED%81%AC%EA%B8%B0%EB%A5%BC-%EC%A0%90-%EC%B6%94%EC%A0%95%ED%95%9C-RR,-OR%EC%97%90-%EC%8B%A0%EB%A2%B0%EA%B5%AC%EA%B0%84-%EB%8D%94%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>상관관계 크기를 점 추정한 RR, OR에 신뢰구간 더해주기<a class="anchor-link" href="#%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%ED%81%AC%EA%B8%B0%EB%A5%BC-%EC%A0%90-%EC%B6%94%EC%A0%95%ED%95%9C-RR,-OR%EC%97%90-%EC%8B%A0%EB%A2%B0%EA%B5%AC%EA%B0%84-%EB%8D%94%ED%95%B4%EC%A3%BC%EA%B8%B0"> </a>
</h4>
<ul>
<li><strong>RR, OR의 정확한 값 추정(점 추정치)는 95%신뢰구간으로 불확실성을 표시해줘야한다.</strong></li>
<li>신뢰구간의 여러계산법이 있지만, 거의다 비슷하게 나온다.</li>
<li>다른 소프트웨어를 쓴다고 다른 값으로 나온다고 해도 의심안해도 된다.</li>
<li>
<strong>가장 많이 쓰는 방법은 Wald method(왈드 방법)</strong>인데, 좋은 방법이 아니라 계산이 쉬워서 흔하게 사용되는 것
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417161744879.png" alt="image-20220417161744879">
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="위험요소-노출-질병과의-상관관계가-통계적으로-있는--=--2개가-독립이-아닌지-통계적-검정까지-by-RR,OR">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EB%85%B8%EC%B6%9C-%EC%A7%88%EB%B3%91%EA%B3%BC%EC%9D%98-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EA%B0%80-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%9E%88%EB%8A%94--=--2%EA%B0%9C%EA%B0%80-%EB%8F%85%EB%A6%BD%EC%9D%B4-%EC%95%84%EB%8B%8C%EC%A7%80-%ED%86%B5%EA%B3%84%EC%A0%81-%EA%B2%80%EC%A0%95%EA%B9%8C%EC%A7%80-by-RR,OR" aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소 노출-질병과의 상관관계가 통계적으로 있는  =  2개가 독립이 아닌지 통계적 검정까지 by RR,OR<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EB%85%B8%EC%B6%9C-%EC%A7%88%EB%B3%91%EA%B3%BC%EC%9D%98-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EA%B0%80-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%9E%88%EB%8A%94--=--2%EA%B0%9C%EA%B0%80-%EB%8F%85%EB%A6%BD%EC%9D%B4-%EC%95%84%EB%8B%8C%EC%A7%80-%ED%86%B5%EA%B3%84%EC%A0%81-%EA%B2%80%EC%A0%95%EA%B9%8C%EC%A7%80-by-RR,OR"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>RR, OR을 계산하는 이유는 위험요소 - 질병의 <code>상관관계의 크기</code>를 보기 위함이고,</li>
<li>RR, OR의 점추정에 대한 불확실성 때문에 <code>상관관계의 크기 신뢰구간</code>까지 더해준다.</li>
<li>
<strong>위험요소 - 질병의 <code>상관관계가 통계적으로 유의한지</code>를 <code>2개가 독립이 아닌지로 통계적 검정</code>까지 해줘야한다</strong><ul>
<li>위험요소 - 질병 상관관계는 RR, OR로 구한다며... 근데.. <code>신뢰구간</code>과 <code>독립아닌지 검정까지</code> 해줘야해?</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>상관관계의 크기(RR, OR) 및 신뢰구간을 구했다면, <strong>그래서 이것이 유의한 상관관계이냐를 <code>독립이 아니냐</code>의 통계적 검정(하이퍼 시시스 테스트)을 통해 증명한다.</strong></p>
<ul>
<li>일반: <code>위험요소 - 질병간 상관관계가 있느냐?</code>
</li>
<li>통계적 표현: <code>위험요소노출여부</code>라는 변수와 <code>질병발생여부</code>라는 변수가 <code>서로 독립이냐?</code>(독립아니다의 대립가설을 채택해야함)</li>
</ul>
</li>
<li>
<p><strong>위험요소 노출여부는 2그룹 이외에 3~4그룹으로도 나눌수 있지만, <code>질병발생여부는 무조건 2분형</code>이어야한다.</strong></p>
</li>
<li>
<p><strong>위험요소여부, 질병여부 -&gt; <code>2개의 범주형 변수</code>에 대한 <code>독립성 검정</code>은 <code>카이스퀘어 검정</code>을 이용한다</strong></p>
<ul>
<li>H0(귀무가설): 독립이다. RR=1 or OR=1</li>
<li>H1(대립가설): 독립이 아니다(상관관계 있다) RR != 1 or OR != 1</li>
<li>
<strong>카시스퀘어 검정은 샘플작을 때 작동을 잘 안하므로 <code>Fisher's exact Test</code>를 이용한다</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417161854119.png" alt="image-20220417161854119">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="독립성검정(자세히-설명X)">
<a class="anchor" href="#%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95(%EC%9E%90%EC%84%B8%ED%9E%88-%EC%84%A4%EB%AA%85X)" aria-hidden="true"><span class="octicon octicon-link"></span></a>독립성검정(자세히 설명X)<a class="anchor-link" href="#%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95(%EC%9E%90%EC%84%B8%ED%9E%88-%EC%84%A4%EB%AA%85X)"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>서로 독립이다를 수식으로 나타내면 Pij = Pi x Pj로 나타낸다.<ul>
<li>첫째 범주 i, 2번째 범주 j
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417163526215.png" alt="image-20220417163526215">
</li>
</ul>
</li>
<li>테스트하는 검정통계량<ul>
<li>귀무가설 하에서의 기대도수를 이용하여 계산된 검정통계량을 사용한다(공식)
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417163452119.png" alt="image-20220417163452119">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="R-실습(상관관계를-위한-RR,OR,신뢰구간,독립성검정까지-반영한-상관관계)">
<a class="anchor" href="#R-%EC%8B%A4%EC%8A%B5(%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%9C%84%ED%95%9C-RR,OR,%EC%8B%A0%EB%A2%B0%EA%B5%AC%EA%B0%84,%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95%EA%B9%8C%EC%A7%80-%EB%B0%98%EC%98%81%ED%95%9C-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84)" aria-hidden="true"><span class="octicon octicon-link"></span></a>R 실습(상관관계를 위한 RR,OR,신뢰구간,독립성검정까지 반영한 상관관계)<a class="anchor-link" href="#R-%EC%8B%A4%EC%8A%B5(%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%9C%84%ED%95%9C-RR,OR,%EC%8B%A0%EB%A2%B0%EA%B5%AC%EA%B0%84,%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95%EA%B9%8C%EC%A7%80-%EB%B0%98%EC%98%81%ED%95%9C-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84)"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>여러 방법이 있지만, <code>epiR</code> 패키지로 계산한다.</p>
<ul>
<li>업데이트에 민감하니, epiR패키지를 업데이를 하고 R을 최신버전으로 업그레이드까지.. 안되면 epiR 제거후 다시 설치</li>
</ul>
</li>
<li>
<p>2by2 table을 입력할 때, 이미 형식이 정해져있다.</p>
<ul>
<li>위험요소가 row / 질병여부가 col에 있다고 가정하고<ul>
<li>위험o : 질병o(a) 질병x(b)</li>
<li>위험x : 질병o(c) 질병x(d) </li>
</ul>
</li>
<li>의 순서대로 <code>c(a, b, c, d)</code>순서대로 입력해줘야한다.<ul>
<li>my) 앞이 위험요소/뒤가 질병여부라 치면  <code>row1: oo(a) ox(b) //row2: xo(c) xx(d)</code>순으로 입력
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417164351082.png" alt="image-20220417164351082">
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># 아나콘다에서 epiR 검색후 r-epir 설치</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">epiR</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Loading required package: survival
Package epiR 1.0-4 is loaded
Type help(epi.about) for summary information


</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417164901121.png" alt="image-20220417164901121"></p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1">#     9, 291, </span>
<span class="c1">#     10, 490</span>
<span class="c1"># )</span>

<span class="c1"># tab &lt;- c(9, 291, 10, 490)</span>

<span class="c1"># 바로 벡터만 넣어주면 안되더라... matrix nrow=2 byrow 써서 matrix를 만들어줘야함</span>
<span class="c1"># ?epi.2by2</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">tab</span> <span class="o">&lt;-</span> <span class="nf">matrix</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="m">291</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">490</span><span class="p">),</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">,</span> <span class="n">byrow</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="c1"># rownames(dat) &lt;- c("Expose+", "Expose-"); </span>
<span class="c1"># colnames(dat) &lt;- c("Disease+", "Disease-");</span>

<span class="c1"># epi.2by2(dat = as.table(dat), method = "cross.sectional", </span>
<span class="c1">#    conf.level = 0.95, units = 100, outcome = "as.columns")</span>

<span class="n">tab</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<tbody>
	<tr>
<td> 9 </td>
<td>291</td>
</tr>
	<tr>
<td>10 </td>
<td>490</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">epi.2by2</span><span class="p">(</span><span class="n">dat</span><span class="o">=</span><span class="n">tab</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">"cohort.count"</span><span class="p">)</span> <span class="c1"># method 코호트.카운트가 default긴 하다.</span>

<span class="c1"># case-control인 경우, method옵션을 바꾸면 된다.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>             Outcome +    Outcome -      Total        Inc risk *        Odds
Exposed +            9          291        300              3.00      0.0309
Exposed -           10          490        500              2.00      0.0204
Total               19          781        800              2.38      0.0243

Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio                               1.50 (0.62, 3.65)
Odds ratio                                   1.52 (0.61, 3.77)
Attrib risk *                                1.00 (-1.29, 3.29)
Attrib risk in population *                  0.38 (-1.24, 1.99)
Attrib fraction in exposed (%)               33.33 (-62.19, 72.60)
Attrib fraction in population (%)            15.79 (-28.34, 44.75)
-------------------------------------------------------------------
 Test that odds ratio = 1: chi2(1) = 0.809 Pr&gt;chi2 = 0.369
 Wald confidence limits
 CI: confidence interval
 * Outcomes per 100 population units </pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># -&gt; RR ( 95% 신뢰구간이 자동 제공된다.)</span>

<span class="c1"># Odds ratio                                   1.52 (0.61, 3.77)</span>
<span class="c1"># -&gt; OR ( 95% 신뢰구간)</span>

<span class="c1"># 신뢰구간은 wald방법으로 뽑아진 것</span>


<span class="c1"># 아래 attributable risk로 계산 한 것</span>
<span class="c1"># Attrib risk *                                1.00 (-1.29, 3.29)</span>
<span class="c1"># Attrib risk in population *                  0.38 (-1.24, 1.99)</span>
<span class="c1"># Attrib fraction in exposed (%)               33.33 (-62.19, 72.60)</span>
<span class="c1"># Attrib fraction in population (%)            15.79 (-28.34, 44.75)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Test that odds ratio = 1: chi2(1) = 0.809 Pr&gt;chi2 = 0.369</span>
<span class="c1"># 0.05보다 높아서 -&gt; H0 독립성 보장 -&gt; **상관관계 유의하지 않다**</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="my)-카이제곱검정--&gt;-독립성검정--&gt;-상관관계로-해석해도-됨-h0:(독립성)상관관계-유의하지-않다-h1:(독립성X)상관관계-유의하다">
<a class="anchor" href="#my)-%EC%B9%B4%EC%9D%B4%EC%A0%9C%EA%B3%B1%EA%B2%80%EC%A0%95--&gt;-%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95--&gt;-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EB%A1%9C-%ED%95%B4%EC%84%9D%ED%95%B4%EB%8F%84-%EB%90%A8-h0:(%EB%8F%85%EB%A6%BD%EC%84%B1)%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%9C%A0%EC%9D%98%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4-h1:(%EB%8F%85%EB%A6%BD%EC%84%B1X)%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%9C%A0%EC%9D%98%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) 카이제곱검정 -&gt; 독립성검정 -&gt; 상관관계로 해석해도 됨 h0:(독립성)상관관계 유의하지 않다 h1:(독립성X)상관관계 유의하다<a class="anchor-link" href="#my)-%EC%B9%B4%EC%9D%B4%EC%A0%9C%EA%B3%B1%EA%B2%80%EC%A0%95--&gt;-%EB%8F%85%EB%A6%BD%EC%84%B1%EA%B2%80%EC%A0%95--&gt;-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84%EB%A1%9C-%ED%95%B4%EC%84%9D%ED%95%B4%EB%8F%84-%EB%90%A8-h0:(%EB%8F%85%EB%A6%BD%EC%84%B1)%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%9C%A0%EC%9D%98%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4-h1:(%EB%8F%85%EB%A6%BD%EC%84%B1X)%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%9C%A0%EC%9D%98%ED%95%98%EB%8B%A4"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="confounding까지-고려한-코호트-속-위험요소-질병간-상관관계">
<a class="anchor" href="#confounding%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%9C-%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%86%8D-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EC%A7%88%EB%B3%91%EA%B0%84-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>confounding까지 고려한 코호트 속 위험요소-질병간 상관관계<a class="anchor-link" href="#confounding%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%9C-%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%86%8D-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EC%A7%88%EB%B3%91%EA%B0%84-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>데이터분석 단계에서 confouning해결책 3가지 중에 2가지만 제시(후속강의에서 3번째 방법 진행)</li>
</ul>
<ol>
<li>Stratification : 각 confounder 값 별로 strata를 나누어, <code>각 stratum별로 상관관계를 따로 추정</code>한다<ul>
<li>
<strong>각 confouder값 별로 따로 추정한 상관관계를 종합하는 방법이 <code>Mantel-Haenszel 방법</code></strong><ul>
<li>각 stratum별 RR이나 OR을 종합</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Adjustment : 기본적으로 Multivariable logistic <strong>regression를 하는 것</strong>으로 confounder를 공변량으로 넣은 회귀분석을 통해, <strong>confounder 값이 고정되어 있을 때의 X와 Y의 상관관계를 추정</strong>한다</p>
<ul>
<li>
<p>Multivariable logistic regression: adjusted OR</p>
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417170848737.png" alt="image-20220417170848737"></p>
</li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Mantel-Haenszel-방법">
<a class="anchor" href="#Mantel-Haenszel-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mantel-Haenszel 방법<a class="anchor-link" href="#Mantel-Haenszel-%EB%B0%A9%EB%B2%95"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417171320215.png" alt="image-20220417171320215"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>
<code>confounder 값별로 따로</code> 2by2 table을 만들고 -&gt; OR(RR)을 계산한다</li>
<li>각 confounder값별로 나온 OR1,OR2 .. 를 평균을 내는데, <strong>자신이 있는 지에 따라 <code>분산의 역수를 weight로 준 가중 평균</code>을 구한다.</strong><ul>
<li>좀 더 계산에 자신 있는 OR에 비중을 많이 둬서 평균을 구하는데</li>
<li>
<code>(추정값에 대한) 자신 있다 없다</code>는 <code>분산(불확실성)으로 표현</code>된다. 분산이 크면 -&gt; 불확실성 크다 -&gt; 자신 없다 -&gt; 분산의 역수 = 자신 있다 -&gt; 분산의 역수를 weight로 줘서 자신있는 곳에 비중을 둔다.</li>
</ul>
</li>
</ol>
<ul>
<li>예<ol>
<li>confoudner가 성별이라고 치면, 여성에 대한 2by2 table , 남성에 대한 2by2 table을 따로 만들고, OR도 따로 구한다.</li>
<li>
<strong>OR의 평균을 분산의 역수로 가중평균을 구한다. -&gt; <code>추정값에 대한 변동이 적은</code>=<code>추정값에 대해 불확실성이 적은</code> = <code>추정값에 대해 내가 더 자신있는</code> = <code>대체로 샘플사이즈가 더 큰 confounder의</code> OR을 더 많이 반영할 수 있다.</strong>
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417172039782.png" alt="image-20220417172039782">
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>계산과정을 생략하고, 전체적으로 보면<ul>
<li>confounder 값의 갯수만큼(I개)로 2by2 table -&gt; OR이 나오며, 계산방법을 따라서 OR를 종합할 수 있다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417172352912.png" alt="image-20220417172352912">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="R-실습(confounding-or-interaction까지-고려한-상관관계)">
<a class="anchor" href="#R-%EC%8B%A4%EC%8A%B5(confounding-or-interaction%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%9C-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84)" aria-hidden="true"><span class="octicon octicon-link"></span></a>R 실습(confounding or interaction까지 고려한 상관관계)<a class="anchor-link" href="#R-%EC%8B%A4%EC%8A%B5(confounding-or-interaction%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%9C-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84)"> </a>
</h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># install.packages("Epi")</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>also installing the dependencies 'RcppArmadillo', 'cmprsk', 'etm'

</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
  There are binary versions available but the source versions are later:
                  binary     source needs_compilation
RcppArmadillo 0.10.4.0.0 0.11.0.0.0              TRUE
cmprsk            2.2-10     2.2-11              TRUE
Epi                 2.44       2.46              TRUE

  Binaries will be installed
package 'RcppArmadillo' successfully unpacked and MD5 sums checked
package 'cmprsk' successfully unpacked and MD5 sums checked
package 'etm' successfully unpacked and MD5 sums checked
package 'Epi' successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Users\cho_desktop\AppData\Local\Temp\RtmpgfxhqH\downloaded_packages
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">epiR</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">Epi</span><span class="p">)</span> <span class="c1"># 데이터용</span>
<span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span> <span class="c1"># 데이터정리용</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Warning message:
"package 'dplyr' was built under R version 3.6.3"
Attaching package: 'dplyr'

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union

</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">?</span><span class="n">nickel</span> <span class="c1"># lung cancer (ICDs 162 and 163), nasal cancer (ICD 160)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">data</span><span class="p">(</span><span class="n">nickel</span><span class="p">)</span> <span class="c1"># 예제데이터</span>

<span class="n">dat1</span> <span class="o">&lt;-</span> <span class="n">nickel</span>
<span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>

<span class="c1"># exposure: 위험요소 노출된 정도 -&gt; 위험요소 그룹은 2개를 넘어선다</span>
<span class="c1"># age1st : 위험요소에 노출된 첫번째 나이</span>
<span class="c1"># icd : 어떤이유로 사망했는지 알 수 있는데, 죽지 않았으면 0 </span>
<span class="c1"># - lung cancer는 162, 163으로 코딩되어있고 / nasal cancer 는 160으로 코딩</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="dplyr">
<a class="anchor" href="#dplyr" aria-hidden="true"><span class="octicon octicon-link"></span></a>dplyr<a class="anchor-link" href="#dplyr"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="매핑(ifelse)한-칼럼추가(mutate)">
<a class="anchor" href="#%EB%A7%A4%ED%95%91(ifelse)%ED%95%9C-%EC%B9%BC%EB%9F%BC%EC%B6%94%EA%B0%80(mutate)" aria-hidden="true"><span class="octicon octicon-link"></span></a>매핑(ifelse)한 칼럼추가(mutate)<a class="anchor-link" href="#%EB%A7%A4%ED%95%91(ifelse)%ED%95%9C-%EC%B9%BC%EB%9F%BC%EC%B6%94%EA%B0%80(mutate)"> </a>
</h5>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># ifelse()로 삼항연산자를 이용한 매핑을 한다.</span>

<span class="n">dat1</span> <span class="o">&lt;-</span> <span class="n">nickel</span> <span class="o">%&gt;%</span> 
    <span class="nf">mutate</span><span class="p">(</span><span class="n">lung.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">162</span> <span class="o">|</span> <span class="n">icd</span> <span class="o">==</span> <span class="m">163</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span>

<span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">dat1</span> <span class="o">&lt;-</span> <span class="n">nickel</span> <span class="o">%&gt;%</span> <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">lung.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">162</span> <span class="o">|</span> <span class="n">icd</span> <span class="o">==</span> <span class="m">163</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="n">nasal.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">160</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
<span class="p">)</span>

<span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
<th scope="col">nasal.cancer</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
<td>0       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
<td>0       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
<td>0       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="위험요소-변수를-연속형--&gt;-특정값을-기준으로--0or1의-이분형으로-매핑(ifelse)-칼럼-추가(mutate)">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EB%B3%80%EC%88%98%EB%A5%BC-%EC%97%B0%EC%86%8D%ED%98%95--&gt;-%ED%8A%B9%EC%A0%95%EA%B0%92%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C--0or1%EC%9D%98-%EC%9D%B4%EB%B6%84%ED%98%95%EC%9C%BC%EB%A1%9C-%EB%A7%A4%ED%95%91(ifelse)-%EC%B9%BC%EB%9F%BC-%EC%B6%94%EA%B0%80(mutate)" aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소 변수를 연속형 -&gt; 특정값을 기준으로  0or1의 이분형으로 매핑(ifelse) 칼럼 추가(mutate)<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C-%EB%B3%80%EC%88%98%EB%A5%BC-%EC%97%B0%EC%86%8D%ED%98%95--&gt;-%ED%8A%B9%EC%A0%95%EA%B0%92%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C--0or1%EC%9D%98-%EC%9D%B4%EB%B6%84%ED%98%95%EC%9C%BC%EB%A1%9C-%EB%A7%A4%ED%95%91(ifelse)-%EC%B9%BC%EB%9F%BC-%EC%B6%94%EA%B0%80(mutate)"> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">dat1</span> <span class="o">&lt;-</span> <span class="n">nickel</span> <span class="o">%&gt;%</span> <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">lung.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">162</span> <span class="o">|</span> <span class="n">icd</span> <span class="o">==</span> <span class="m">163</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="n">nasal.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">160</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="c1"># 연속형 변수로 표현되어있던 위험요소 노출 정도를 -&gt; 특정값 기준으로 위험요소 노출여부(1or0)로 매핑</span>
    <span class="n">exposure.grp</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">exposure</span> <span class="o">&gt;=</span>  <span class="m">10</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="c1"># 위험요소노출 나이 또한 2분형 범주칼럼으로 매핑</span>
    <span class="n">age1st.grp</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">age1st</span> <span class="o">&gt;=</span>  <span class="m">25</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span>

<span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
<th scope="col">nasal.cancer</th>
<th scope="col">exposure.grp</th>
<th scope="col">age1st.grp</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
<td>0       </td>
<td>1       </td>
<td>1       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>1       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="boolean형-칼럼들--&gt;-일괄-factor형으로-type변환-by-mutate_at()">
<a class="anchor" href="#boolean%ED%98%95-%EC%B9%BC%EB%9F%BC%EB%93%A4--&gt;-%EC%9D%BC%EA%B4%84-factor%ED%98%95%EC%9C%BC%EB%A1%9C-type%EB%B3%80%ED%99%98-by-mutate_at()" aria-hidden="true"><span class="octicon octicon-link"></span></a>boolean형 칼럼들 -&gt; 일괄 factor형으로 type변환 by mutate_at()<a class="anchor-link" href="#boolean%ED%98%95-%EC%B9%BC%EB%9F%BC%EB%93%A4--&gt;-%EC%9D%BC%EA%B4%84-factor%ED%98%95%EC%9C%BC%EB%A1%9C-type%EB%B3%80%ED%99%98-by-mutate_at()"> </a>
</h6>
<ul>
<li>여러개의 작업에 대해 똑같은 작업을 할 때 <code>mutate_at( vars( 변수들 나열), list(~ 개별로 적용할 작업(.))</code><ul>
<li>참고) <code>%&gt;%</code> 직전메서드 바로 뒤에 달아주고, <code>다음 메서드</code>는 다음줄에 가능하다</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">dat1</span> <span class="o">&lt;-</span> <span class="n">nickel</span> <span class="o">%&gt;%</span> <span class="nf">mutate</span><span class="p">(</span>
    <span class="n">lung.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">162</span> <span class="o">|</span> <span class="n">icd</span> <span class="o">==</span> <span class="m">163</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="n">nasal.cancer</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">icd</span><span class="o">==</span><span class="m">160</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="n">exposure.grp</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">exposure</span> <span class="o">&gt;=</span>  <span class="m">10</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="n">age1st.grp</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">age1st</span> <span class="o">&gt;=</span>  <span class="m">25</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span> <span class="o">%&gt;%</span>
                    <span class="nf">mutate_at</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">lung.cancer</span><span class="p">,</span> <span class="n">nasal.cancer</span><span class="p">,</span> 
                                   <span class="n">exposure.grp</span><span class="p">,</span> <span class="n">age1st.grp</span><span class="p">),</span>
                              <span class="nf">list</span><span class="p">(</span><span class="o">~</span><span class="nf">as.factor</span><span class="p">(</span><span class="n">.</span><span class="p">)))</span>

<span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
<th scope="col">nasal.cancer</th>
<th scope="col">exposure.grp</th>
<th scope="col">age1st.grp</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
<td>0       </td>
<td>1       </td>
<td>1       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>1       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="이제-만들어진-범주형변수들-중-필요한-위험요소1---질병1을-뽑아-2by2-table을-만든다.">
<a class="anchor" href="#%EC%9D%B4%EC%A0%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%84-%EB%B2%94%EC%A3%BC%ED%98%95%EB%B3%80%EC%88%98%EB%93%A4-%EC%A4%91-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C1---%EC%A7%88%EB%B3%911%EC%9D%84-%EB%BD%91%EC%95%84-2by2-table%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4." aria-hidden="true"><span class="octicon octicon-link"></span></a>이제 만들어진 범주형변수들 중 필요한 위험요소1 - 질병1을 뽑아 2by2 table을 만든다.<a class="anchor-link" href="#%EC%9D%B4%EC%A0%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A7%84-%EB%B2%94%EC%A3%BC%ED%98%95%EB%B3%80%EC%88%98%EB%93%A4-%EC%A4%91-%ED%95%84%EC%9A%94%ED%95%9C-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C1---%EC%A7%88%EB%B3%911%EC%9D%84-%EB%BD%91%EC%95%84-2by2-table%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4."> </a>
</h5>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># 질병 여부 -&gt; nasal.cancer</span>

<span class="c1"># 정해진 범주형 칼럼을 table()로 만든다. -&gt; 알아서 범주종류별로 n by m을 만들어주나보다.</span>
<span class="c1"># -&gt; 만약, 값만 있다면? as.matrix( a,b,c,d , row=2, byrow=true)</span>

<span class="c1"># 먼저 적어준 범주형칼럼이 row로 오게 된다?</span>
<span class="nf">table</span><span class="p">(</span><span class="n">dat1</span><span class="o">$</span><span class="n">exposure.grp</span><span class="p">,</span> <span class="n">dat1</span><span class="o">$</span><span class="n">nasal.cancer</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>   
      0   1
  0 595  41
  1  28  15</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">tab2</span> <span class="o">&lt;-</span> <span class="nf">table</span><span class="p">(</span><span class="n">dat1</span><span class="o">$</span><span class="n">exposure.grp</span><span class="p">,</span> <span class="n">dat1</span><span class="o">$</span><span class="n">nasal.cancer</span><span class="p">,</span>
              <span class="n">dnn</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"exposure.grp"</span><span class="p">,</span> <span class="s">"nasal.cancer"</span><span class="p">))</span>

<span class="n">tab2</span> 

<span class="c1"># 출력해보니, 위험요소/질병여부 oo -&gt; ox 순이 아니라  xx -&gt; xo 순으로 나온다.</span>
<span class="c1"># -&gt; 코호트나 분석을 위해선, oo, ox xo xx 순으로 나타나도록 </span>
<span class="c1"># --&gt; 데이터 dat1 속 factor의 level순서를 재설정해줘야한다.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>            nasal.cancer
exposure.grp   0   1
           0 595  41
           1  28  15</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="범주형-0,1-factor의-레벨-순서를-바꿔주기-by-relevel()-+-mutate()-칼럼추가-외-칼럼-덮어쓰기를-이용해서">
<a class="anchor" href="#%EB%B2%94%EC%A3%BC%ED%98%95-0,1-factor%EC%9D%98-%EB%A0%88%EB%B2%A8-%EC%88%9C%EC%84%9C%EB%A5%BC-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B8%B0-by-relevel()-+-mutate()-%EC%B9%BC%EB%9F%BC%EC%B6%94%EA%B0%80-%EC%99%B8-%EC%B9%BC%EB%9F%BC-%EB%8D%AE%EC%96%B4%EC%93%B0%EA%B8%B0%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>범주형 0,1 factor의 레벨 순서를 바꿔주기 by relevel() + mutate() 칼럼추가 외 칼럼 덮어쓰기를 이용해서<a class="anchor-link" href="#%EB%B2%94%EC%A3%BC%ED%98%95-0,1-factor%EC%9D%98-%EB%A0%88%EB%B2%A8-%EC%88%9C%EC%84%9C%EB%A5%BC-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B8%B0-by-relevel()-+-mutate()-%EC%B9%BC%EB%9F%BC%EC%B6%94%EA%B0%80-%EC%99%B8-%EC%B9%BC%EB%9F%BC-%EB%8D%AE%EC%96%B4%EC%93%B0%EA%B8%B0%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C"> </a>
</h5>
<ul>
<li>relevel(, ref="1"): reference 그룹 = 첫번째 기준그룹을 직접 지정해준다. default로 0, 1중 작은 수인 "0"으로 지정되어있다.</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">dat2</span> <span class="o">&lt;-</span> <span class="n">dat1</span> <span class="o">%&gt;%</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">lung.cancer</span><span class="o">=</span><span class="nf">relevel</span><span class="p">(</span><span class="n">lung.cancer</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s">"1"</span><span class="p">),</span> 
                        <span class="n">nasal.cancer</span><span class="o">=</span><span class="nf">relevel</span><span class="p">(</span><span class="n">nasal.cancer</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s">"1"</span><span class="p">),</span> 
                        <span class="n">exposure.grp</span><span class="o">=</span><span class="nf">relevel</span><span class="p">(</span><span class="n">exposure.grp</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="s">"1"</span><span class="p">),</span> 
                        <span class="p">)</span>
<span class="c1">#                         age1st.grp=relevel(age1st.grp, ref="1")) </span>
                        <span class="c1"># 이놈은 나중에 confounder로 사용될 변수라서.. 딱히 1의 그룹을 첫번째그룹으로 안주어도 된다.</span>

<span class="nf">head</span><span class="p">(</span><span class="n">dat2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
<th scope="col">nasal.cancer</th>
<th scope="col">exposure.grp</th>
<th scope="col">age1st.grp</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
<td>0       </td>
<td>1       </td>
<td>1       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>1       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">tab2</span> <span class="o">&lt;-</span> <span class="nf">table</span><span class="p">(</span><span class="n">dat2</span><span class="o">$</span><span class="n">exposure.grp</span><span class="p">,</span> <span class="n">dat2</span><span class="o">$</span><span class="n">nasal.cancer</span><span class="p">,</span>
              <span class="n">dnn</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"exposure.grp"</span><span class="p">,</span> <span class="s">"nasal.cancer"</span><span class="p">))</span>

<span class="n">tab2</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>            nasal.cancer
exposure.grp   1   0
           1  15  28
           0  41 595</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">epi.2by2</span><span class="p">(</span><span class="n">tab2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>             Outcome +    Outcome -      Total        Inc risk *        Odds
Exposed +           15           28         43             34.88      0.5357
Exposed -           41          595        636              6.45      0.0689
Total               56          623        679              8.25      0.0899

Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio                               5.41 (3.27, 8.96)
Odds ratio                                   7.77 (3.85, 15.69)
Attrib risk *                                28.44 (14.06, 42.81)
Attrib risk in population *                  1.80 (-1.01, 4.62)
Attrib fraction in exposed (%)               81.52 (69.40, 88.84)
Attrib fraction in population (%)            21.84 (9.26, 32.67)
-------------------------------------------------------------------
 Test that odds ratio = 1: chi2(1) = 43.042 Pr&gt;chi2 = &lt; 0.001
 Wald confidence limits
 CI: confidence interval
 * Outcomes per 100 population units </pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="confounder를-고려-및-보정(핸들)해주며-코호트-속-상관관계-실습">
<a class="anchor" href="#confounder%EB%A5%BC-%EA%B3%A0%EB%A0%A4-%EB%B0%8F-%EB%B3%B4%EC%A0%95(%ED%95%B8%EB%93%A4)%ED%95%B4%EC%A3%BC%EB%A9%B0-%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%86%8D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%8B%A4%EC%8A%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>confounder를 고려 및 보정(핸들)해주며 코호트 속 상관관계 실습<a class="anchor-link" href="#confounder%EB%A5%BC-%EA%B3%A0%EB%A0%A4-%EB%B0%8F-%EB%B3%B4%EC%A0%95(%ED%95%B8%EB%93%A4)%ED%95%B4%EC%A3%BC%EB%A9%B0-%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%86%8D-%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-%EC%8B%A4%EC%8A%B5"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="핸들1:-Stratification(confounder를-선택후-값별(strrata)로-나눠서-2by2-테이블을-보는-층화)">
<a class="anchor" href="#%ED%95%B8%EB%93%A41:-Stratification(confounder%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%9B%84-%EA%B0%92%EB%B3%84(strrata)%EB%A1%9C-%EB%82%98%EB%88%A0%EC%84%9C-2by2-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%84-%EB%B3%B4%EB%8A%94-%EC%B8%B5%ED%99%94)" aria-hidden="true"><span class="octicon octicon-link"></span></a>핸들1: Stratification(confounder를 선택후 값별(strrata)로 나눠서 2by2 테이블을 보는 층화)<a class="anchor-link" href="#%ED%95%B8%EB%93%A41:-Stratification(confounder%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%9B%84-%EA%B0%92%EB%B3%84(strrata)%EB%A1%9C-%EB%82%98%EB%88%A0%EC%84%9C-2by2-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%84-%EB%B3%B4%EB%8A%94-%EC%B8%B5%ED%99%94)"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>age1st.grp도 0or1로 매핑했었다 -&gt; 이걸 confounder라고 가정하고, <strong>confounder값별로 나눠서 2by2 테이블을 그리는 것을 <code>Stratification</code>라 한다</strong>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="위험요소1-+-질병여부1-+-confounder변수까지-추출해서-table을-만든다.">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C1-+-%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%801-+-confounder%EB%B3%80%EC%88%98%EA%B9%8C%EC%A7%80-%EC%B6%94%EC%B6%9C%ED%95%B4%EC%84%9C-table%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4." aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소1 + 질병여부1 + confounder변수까지 추출해서 table을 만든다.<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C1-+-%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%801-+-confounder%EB%B3%80%EC%88%98%EA%B9%8C%EC%A7%80-%EC%B6%94%EC%B6%9C%ED%95%B4%EC%84%9C-table%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4."> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">tab3</span> <span class="o">&lt;-</span> <span class="nf">table</span><span class="p">(</span><span class="n">dat2</span><span class="o">$</span><span class="n">exposure.grp</span><span class="p">,</span> <span class="n">dat2</span><span class="o">$</span><span class="n">nasal.cancer</span><span class="p">,</span> <span class="n">dat2</span><span class="o">$</span><span class="n">age1st.grp</span><span class="p">,</span>
              <span class="n">dnn</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"exposure.grp"</span><span class="p">,</span> <span class="s">"nasal.cancer"</span><span class="p">,</span> <span class="s">"age1st.grp"</span><span class="p">))</span>

<span class="n">tab3</span> 
<span class="c1"># table()에 3번째 인자를 주면, 그 값별로 1,2번째 칼럼으로 만든 table을 나눠서 보여준다.</span>
<span class="c1"># 3번째칼럼의 범주종류별로 3차원을 table이 완성된다고 생각하자.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>, , age1st.grp = 0

            nasal.cancer
exposure.grp   1   0
           1   1   9
           0  12 269

, , age1st.grp = 1

            nasal.cancer
exposure.grp   1   0
           1  14  19
           0  29 326
</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">epi.2by2</span><span class="p">(</span> <span class="n">tab3</span> <span class="p">)</span>

<span class="c1"># 데이터 자체는 위에서 만든 table과 유사하나, 아래 요약글을 보면</span>
<span class="c1"># RR, OR이 여러줄로 나타난다.( cf) rsk ratio = relative risk</span>


<span class="c1"># Inc risk ratio (crude)   -&gt; crude: confounder(age1st.grp)을 무시한 rr + 신뢰구간</span>

<span class="c1"># Inc risk ratio (M-H) -&gt; [맨틀-핸젤 방법으로 confounder별 (다른 table-&gt;) 다른 RR을 가중평균한] RR + 신뢰구간</span>

<span class="c1"># Odds ratio (crude)                           7.77 (3.85, 15.69)</span>
<span class="c1"># Odds ratio (M-H)                             7.08 (3.45, 14.54)</span>
<span class="c1"># -&gt; confounder 무시한 OR   +   cofounder별 OR구한 뒤 맨틀-핸젤방법으로 가중평균한 OR</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>             Outcome +    Outcome -      Total        Inc risk *        Odds
Exposed +           15           28         43             34.88      0.5357
Exposed -           41          595        636              6.45      0.0689
Total               56          623        679              8.25      0.0899


Point estimates and 95% CIs:
-------------------------------------------------------------------
Inc risk ratio (crude)                       5.41 (3.27, 8.96)
Inc risk ratio (M-H)                         4.78 (2.87, 7.97)
Inc risk ratio (crude:M-H)                   1.13
Odds ratio (crude)                           7.77 (3.85, 15.69)
Odds ratio (M-H)                             7.08 (3.45, 14.54)
Odds ratio (crude:M-H)                       1.10
Attrib risk (crude) *                        28.44 (14.06, 42.81)
Attrib risk (M-H) *                          27.34 (-32.35, 87.03)
Attrib risk (crude:M-H)                      1.04
-------------------------------------------------------------------
 M-H test of homogeneity of incidence risk ratios: chi2(1) = 0.603 Pr&gt;chi2 = 0.438
 M-H test of homogeneity of odds ratios: chi2(1) = 0.769 Pr&gt;chi2 = 0.38
 Test that M-H adjusted odds ratio = 1: chi2(1) = 34.954 Pr&gt;chi2 = &lt;0.001
 Wald confidence limits
 M-H: Mantel-Haenszel; CI: confidence interval
 * Outcomes per 100 population units </pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># [m]easure of [assoc] iation의 detail이라는 뜻.</span>
<span class="nf">epi.2by2</span><span class="p">(</span> <span class="n">tab3</span> <span class="p">)</span><span class="o">$</span><span class="n">massoc.detail</span><span class="o">$</span><span class="n">OR.strata.wald</span>
<span class="nf">epi.2by2</span><span class="p">(</span> <span class="n">tab3</span> <span class="p">)</span><span class="o">$</span><span class="n">massoc.detail</span><span class="o">$</span><span class="n">RR.strata.wald</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>NULL</pre>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea ">
<pre>NULL</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<p>나는 안되네..
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417214555170.png" alt="image-20220417214555170"></p>
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417214605495.png" alt="image-20220417214605495"></p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="핸들2:-adjustment">
<a class="anchor" href="#%ED%95%B8%EB%93%A42:-adjustment" aria-hidden="true"><span class="octicon octicon-link"></span></a>핸들2: adjustment<a class="anchor-link" href="#%ED%95%B8%EB%93%A42:-adjustment"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>confounder를 <strong>어저스트먼트(adjustment)로 보정하기 위해선 <code>Multivaraible logistic regression</code>이 필요하므로 logisitic regression에 대해 먼저 알아보자</strong>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="실습전-코호트-confounder-핸들을-위한-Logistic-regression">
<a class="anchor" href="#%EC%8B%A4%EC%8A%B5%EC%A0%84-%EC%BD%94%ED%98%B8%ED%8A%B8-confounder-%ED%95%B8%EB%93%A4%EC%9D%84-%EC%9C%84%ED%95%9C-Logistic-regression" aria-hidden="true"><span class="octicon octicon-link"></span></a>실습전 코호트-confounder 핸들을 위한 Logistic regression<a class="anchor-link" href="#%EC%8B%A4%EC%8A%B5%EC%A0%84-%EC%BD%94%ED%98%B8%ED%8A%B8-confounder-%ED%95%B8%EB%93%A4%EC%9D%84-%EC%9C%84%ED%95%9C-Logistic-regression"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>결과 변수가 이분형(binary)인 회귀분석</li>
<li>우리는 지금 코호트 속 설명변수 <code>위험요소 노출여부</code>에 대한 <strong><code>질병여부</code>로서 결과변수를 이분형을 사용중이니 이분형 결과변수를 사용하는 logisitic regression을 적절한 회귀분석으로 사용할 수 있다</strong><ul>
<li>위험요소 노출여부를 x(설명변수) , 질병<code>여부</code>를 <code>y결과변수(종속변수)</code>로 <strong>로지스틱 회귀분석 모델</strong>을 잡을 수 있는데</li>
<li>
<strong>회귀식의 좌항은 ln(<code>질병발생O 그룹의 odds</code>) = 1차 회귀식(<code>독립변수의 linear combination</code>)</strong>으로 성립한다.<ul>
<li>즉, <strong>로지스틱 회귀 모델은 <code>질병발생O의 odds에 자연로그 취한 값</code>을 = <code>독립변수들의 linear combination</code>으로 설명하겠다는 뜻이 된다.</strong>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417220454071.png" alt="image-20220417220454071"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417215046958.png" alt="image-20220417215046958"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="Logistic-regression에서-가장-중요한-OR(odds-rations)와-B(회귀계수)의-관계">
<a class="anchor" href="#Logistic-regression%EC%97%90%EC%84%9C-%EA%B0%80%EC%9E%A5-%EC%A4%91%EC%9A%94%ED%95%9C-OR(odds-rations)%EC%99%80-B(%ED%9A%8C%EA%B7%80%EA%B3%84%EC%88%98)%EC%9D%98-%EA%B4%80%EA%B3%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logistic regression에서 가장 중요한 OR(odds rations)와 B(회귀계수)의 관계<a class="anchor-link" href="#Logistic-regression%EC%97%90%EC%84%9C-%EA%B0%80%EC%9E%A5-%EC%A4%91%EC%9A%94%ED%95%9C-OR(odds-rations)%EC%99%80-B(%ED%9A%8C%EA%B7%80%EA%B3%84%EC%88%98)%EC%9D%98-%EA%B4%80%EA%B3%84"> </a>
</h6>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<code>ln(질병O의 odds) = b0 + b1*X</code>의 로지스틱 회귀 식에서<ol>
<li>X=1을 대입 후, 양변에 exponentiate(e, 지수함수)을 취해주자.<ul>
<li>X=1이면, 위험요소 노출O의 상황이므로 risk를 <code>p1</code>이라고 표현한다(앞에서는 위험여부O일 때의 risk를 p1로 취급함)
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417221216636.png" alt="image-20220417221216636">
</li>
</ul>
</li>
<li>X=0을 대입후, 위험요소 노출O의 상황이므로 risk를 <code>p0</code>이라 표현하고, 양변에 지수함수를 취한다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417221220788.png" alt="image-20220417221220788">
</li>
<li>OR(odds ratio)는 X=0일 때의 odds 분에 X=1일때의 odds (odds의 비율)이므로, 우항을 나눠보면 e^b1이 된다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417221511346.png" alt="image-20220417221511346">
</li>
<li><strong>결과적으로 위험요소 노출여부 변수(X)의 <code>회귀계수B1에다가 e^x지수함수를 취해주면 -&gt; 질병에 대한 위험요소의 OR</code>(odds ratio)다</strong></li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="암기--&gt;-회귀계수에다가-지수함를-취하면--[질병여부에-대한-해당-위험요소의-Odds-ratio]다">
<a class="anchor" href="#%EC%95%94%EA%B8%B0--&gt;-%ED%9A%8C%EA%B7%80%EA%B3%84%EC%88%98%EC%97%90%EB%8B%A4%EA%B0%80-%EC%A7%80%EC%88%98%ED%95%A8%EB%A5%BC-%EC%B7%A8%ED%95%98%EB%A9%B4--%5B%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%80%EC%97%90-%EB%8C%80%ED%95%9C-%ED%95%B4%EB%8B%B9-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EC%9D%98-Odds-ratio%5D%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>암기 -&gt; 회귀계수에다가 지수함를 취하면  [질병여부에 대한 해당 위험요소의 Odds ratio]다<a class="anchor-link" href="#%EC%95%94%EA%B8%B0--&gt;-%ED%9A%8C%EA%B7%80%EA%B3%84%EC%88%98%EC%97%90%EB%8B%A4%EA%B0%80-%EC%A7%80%EC%88%98%ED%95%A8%EB%A5%BC-%EC%B7%A8%ED%95%98%EB%A9%B4--%5B%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%80%EC%97%90-%EB%8C%80%ED%95%9C-%ED%95%B4%EB%8B%B9-%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EC%9D%98-Odds-ratio%5D%EB%8B%A4"> </a>
</h6>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="multivariable-logistic-regression">
<a class="anchor" href="#multivariable-logistic-regression" aria-hidden="true"><span class="octicon octicon-link"></span></a>multivariable logistic regression<a class="anchor-link" href="#multivariable-logistic-regression"> </a>
</h6>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>설명변수가 1-&gt; d개로 늘어났다.</li>
<li>
<code>설변변수 1개일 때와 똑같은 식</code>에다가 각 설명변수 + 곱해질 회귀변수를 더해주기만 하면 된다.
   <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417223259059.png" alt="image-20220417223259059">
</li>
</ul>
<p>-“Adjusted” logistic regression model이라고 부르기도 한다</p>
<ul>
<li>
<strong>설명변수 1개일 때의 <code>OR &lt;-&gt; b</code>간의 관계가 똑같다.</strong><ul>
<li>즉, Xj의 회귀계수에 지수함수 -&gt; 결과변수에 대한 j번째 위험요소의 OR (나머지 독립변수들은 고정)
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417223634130.png" alt="image-20220417223634130">
</li>
</ul>
</li>
</ul>
<ul>
<li>
<strong>만일 X1만 위험요소 노출여부라고 보고, 나머지 X2~Xd를 confounder들이라고 가정하면</strong><ul>
<li>e^b1 = 위험요소의 OR (단, 나머지 confounder 값들이 고정되어있을 때!)</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>주의점: <strong>sample size에 비해 너무 많은 독립변수들</strong>을 넣으면 안된다.<ul>
<li><strong><code>오버피팅</code>: 내가 가진 <code>데이터의 정보량에 비해, 너무 복잡한 모델</code>(변수가 많은 모델)을 fitting하게 됨으로서, 그 데이터의 signal뿐만 아니라 <code>데이터가 가진 noise까지 fitting에 사용</code>되어 문제가 발생한다.</strong></li>
<li>기준은 없지만, <strong>일반적으로 <code>1개 독립변수</code> 추가시 마다 환자 수 <code>10~20명(데이터)가 필요</code>하다</strong><ul>
<li>즉, 데이터 10개마다 1개 변수, 20개마다 1개 변수를 사용할 수 있다.</li>
<li>예를 들어, 100명의 연구대상자를 가지고 연구한다<ul>
<li>10으로 나누면 10개까지 독립변수 가능</li>
<li>20으로 나누면 5개까지 독립변수 가능</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="interaction를-고려">
<a class="anchor" href="#interaction%EB%A5%BC-%EA%B3%A0%EB%A0%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>interaction를 고려<a class="anchor-link" href="#interaction%EB%A5%BC-%EA%B3%A0%EB%A0%A4"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>위험요소 X가 있을 때, <code>X의 효과( = 질병과의 상관관계)</code>를 <code>OR</code>(or RR)로 젤 수 있는데<ul>
<li>X의 OR이, 다른 변수 A에 의해 달라질 때, X와 A간의 인터렉션이 있다고 한다.</li>
</ul>
</li>
<li>
<strong>X와 A간 인터렉션이 통계적으로 유의한가?</strong>도 판단해야한다.<ul>
<li>
<strong><code>A값별</code> X의 y에 대한 <code>OR이 통계적으로 다른가?</code></strong>를 판단해야한다.</li>
<li>로지스틱 회귀분석의 옵션 중 <code>interaction term</code>을 넣어서 분석하면 된다. <ul>
<li><strong><code>interaction term</code>: 두 변수 X와 A를 곱한 변수(<code>X X A</code>)</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>왜 두 변수를 곱한 것이 interaction term이라는  로지스틱 회귀분석의 추가 변수가 되는가<ul>
<li>앞에서 <code>석면</code>과 <code>흡연</code>간에 인터렉션이 있는가?를 본적 있다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417231152292.png" alt="image-20220417231152292">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="my)-confounder-값별로,-인터렉션-유발-변수-값별로--RR,-OR를-보고-검정하고-하네..">
<a class="anchor" href="#my)-confounder-%EA%B0%92%EB%B3%84%EB%A1%9C,-%EC%9D%B8%ED%84%B0%EB%A0%89%EC%85%98-%EC%9C%A0%EB%B0%9C-%EB%B3%80%EC%88%98-%EA%B0%92%EB%B3%84%EB%A1%9C--RR,-OR%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EA%B2%80%EC%A0%95%ED%95%98%EA%B3%A0-%ED%95%98%EB%84%A4.." aria-hidden="true"><span class="octicon octicon-link"></span></a>my) confounder 값별로, 인터렉션 유발 변수 값별로  RR, OR를 보고 검정하고 하네..<a class="anchor-link" href="#my)-confounder-%EA%B0%92%EB%B3%84%EB%A1%9C,-%EC%9D%B8%ED%84%B0%EB%A0%89%EC%85%98-%EC%9C%A0%EB%B0%9C-%EB%B3%80%EC%88%98-%EA%B0%92%EB%B3%84%EB%A1%9C--RR,-OR%EB%A5%BC-%EB%B3%B4%EA%B3%A0-%EA%B2%80%EC%A0%95%ED%95%98%EA%B3%A0-%ED%95%98%EB%84%A4.."> </a>
</h6>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<code>X석면(X1)의 효과가, A흡연(X2)에 따라 다른가?</code>의 인터렉션에 관심있다고 가정하고 보면<ol>
<li>로지스틱 모델 회귀식을 쓰되, <strong>인터렉션 텀인 <code>b3(X1 * X2)</code>도 추가해서 작성하자</strong><ul>
<li>ln(질병O 그룹의 오즈) = b0 + b1X1(석면노출여부에 대한 term) + b2X2(흡연노출여부에 대한 term) + b3X1X2(두 변수를 곱한 인터렉션 term)
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417231535449.png" alt="image-20220417231535449">
</li>
</ul>
</li>
<li>이제 interaction을 발생시키는 <code>A(흡연, X2)변수의 값별로 X의 OR</code>을 봐야한다.<ol>
<li>
<code>X2 = 0</code> (흡연여부가 비흡연인 경우)일 때, <code>X1의 OR</code>(X1 앞에 달려있는 회귀계수에 지수함수 취하면 됨)을 보기
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417232002440.png" alt="image-20220417232002440">
</li>
<li>
<code>X2 = 1</code> (흡연여부가 흡연인 경우)일 때, <code>X1의 OR</code>을 보기<ul>
<li>
<strong>X1의 회귀계수가 인터랙션 term때문에 <code>(b1 + b3)</code>X1으로 바뀌게 되었다.</strong>
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220417232005888.png" alt="image-20220417232005888">
</li>
</ul>
</li>
</ol>
</li>
<li>이제 A값별 구한 OR들을 비교해보자. <ul>
<li>비흡연자의 석면OR <code>e^b1</code> vs 흡연자의 석면OR <code>e^(b1+b3)</code>
</li>
<li><strong>만약, b3가 0이라면, 비흡연자와 흡연자의 석면OR이 동일해진다.</strong></li>
<li>
<strong>즉, b3 = 0이라면 인터랙션이 없다</strong>라는 뜻이다.</li>
</ul>
</li>
<li><strong>b3 = 9인지 아닌지 검정 -&gt; 인터랙션 없는지 있는지 검정하는 것과 같다 -&gt; 흡연여부에 따른 석면OR이 변화가 있는지 없는지 검정하는 것과 같다</strong></li>
</ol>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="R실습(adjustment-및-interaction-고려한-)">
<a class="anchor" href="#R%EC%8B%A4%EC%8A%B5(adjustment-%EB%B0%8F-interaction-%EA%B3%A0%EB%A0%A4%ED%95%9C-)" aria-hidden="true"><span class="octicon octicon-link"></span></a>R실습(adjustment 및 interaction 고려한 )<a class="anchor-link" href="#R%EC%8B%A4%EC%8A%B5(adjustment-%EB%B0%8F-interaction-%EA%B3%A0%EB%A0%A4%ED%95%9C-)"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h5 id="logistric-regression을-이용한-confounding과-interaction-알아보기">
<a class="anchor" href="#logistric-regression%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-confounding%EA%B3%BC-interaction-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>logistric regression을 이용한 confounding과 interaction 알아보기<a class="anchor-link" href="#logistric-regression%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-confounding%EA%B3%BC-interaction-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0"> </a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="위험요소노출여부(X)-질병여부(Y)만-고려하기">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%80(Y)%EB%A7%8C-%EA%B3%A0%EB%A0%A4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소노출여부(X) 질병여부(Y)만 고려하기<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EC%A7%88%EB%B3%91%EC%97%AC%EB%B6%80(Y)%EB%A7%8C-%EA%B3%A0%EB%A0%A4%ED%95%98%EA%B8%B0"> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">dat1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">id</th>
<th scope="col">icd</th>
<th scope="col">exposure</th>
<th scope="col">dob</th>
<th scope="col">age1st</th>
<th scope="col">agein</th>
<th scope="col">ageout</th>
<th scope="col">lung.cancer</th>
<th scope="col">nasal.cancer</th>
<th scope="col">exposure.grp</th>
<th scope="col">age1st.grp</th>
</tr></thead>
<tbody>
	<tr>
<td> 3      </td>
<td>  0     </td>
<td> 5      </td>
<td>1889.019</td>
<td>17.4808 </td>
<td>45.2273 </td>
<td>92.9808 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 4      </td>
<td>162     </td>
<td> 5      </td>
<td>1885.978</td>
<td>23.1864 </td>
<td>48.2684 </td>
<td>63.2712 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 6      </td>
<td>163     </td>
<td>10      </td>
<td>1881.255</td>
<td>25.2452 </td>
<td>52.9917 </td>
<td>54.1644 </td>
<td>1       </td>
<td>0       </td>
<td>1       </td>
<td>1       </td>
</tr>
	<tr>
<td> 8      </td>
<td>527     </td>
<td> 9      </td>
<td>1886.340</td>
<td>24.7206 </td>
<td>47.9067 </td>
<td>69.6794 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
	<tr>
<td> 9      </td>
<td>150     </td>
<td> 0      </td>
<td>1879.500</td>
<td>29.9575 </td>
<td>54.7465 </td>
<td>76.8442 </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
<td>1       </td>
</tr>
	<tr>
<td>10      </td>
<td>163     </td>
<td> 2      </td>
<td>1889.915</td>
<td>21.2877 </td>
<td>44.3314 </td>
<td>62.5413 </td>
<td>1       </td>
<td>0       </td>
<td>0       </td>
<td>0       </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># -&gt; logistic regression으로 보기</span>

<span class="c1"># 로지스틱 회귀분석은 glm()메서드를 이용한다.</span>
<span class="c1"># - 칼럼만 입력하며, 자동완성 안되는 메서드임.</span>
<span class="c1"># - family에 회귀 종류 기입</span>
<span class="c1"># - 회기분석은 메서드 결과를 변수에 받아놓고, summary()해서 보는게 좋다.</span>
<span class="n">obj1</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">nasal.cancer</span> <span class="o">~</span> <span class="n">exposure.grp</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dat1</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="s">"binomial"</span><span class="p">)</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea ">
<pre>
Call:
glm(formula = nasal.cancer ~ exposure.grp, family = "binomial", 
    data = dat1)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-0.9263  -0.3651  -0.3651  -0.3651   2.3416  

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)    -2.6750     0.1615 -16.567  &lt; 2e-16 ***
exposure.grp1   2.0508     0.3584   5.722 1.05e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 386.72  on 678  degrees of freedom
Residual deviance: 359.73  on 677  degrees of freedom
AIC: 363.73

Number of Fisher Scoring iterations: 5
</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="회귀분석-결과-분석">
<a class="anchor" href="#%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D-%EA%B2%B0%EA%B3%BC-%EB%B6%84%EC%84%9D" aria-hidden="true"><span class="octicon octicon-link"></span></a>회귀분석 결과 분석<a class="anchor-link" href="#%ED%9A%8C%EA%B7%80%EB%B6%84%EC%84%9D-%EA%B2%B0%EA%B3%BC-%EB%B6%84%EC%84%9D"> </a>
</h6>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>제일 중요한 것은 <code>Coefficents:</code>의 회귀계수(코 에피션트) 부분이다.
<pre><code>Coefficients:
                   Estimate Std. Error z value Pr(&gt;|z|)    
b0 &lt;- (Intercept)    -2.6750     0.1615 -16.567  &lt; 2e-16 ***
# 상수항
b1 &lt;-exposure.grp1   2.0508     0.3584   5.722 1.05e-08 ***
# b1의 추정치</code></pre>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<strong>glm()의 결과물 obj -&gt;  <code>summary()</code>가지고는 우리가 관심있는 <code>measure of association인 e^b의 OR가 안보인다.</code></strong><ul>
<li>exp( 각 회귀계수 Eistimaated 추정치)를 넣으면 직접계산도 가능하다.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<strong><code>"broom"패키지dml tidy()</code>를 이용하여 glm() -&gt; obj -&gt; <code>tidy()</code>로</strong><ul>
<li><strong>회귀계수(Coefficient)들 대신 e^(b)의 OR을 구할 수 있다.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
  There is a binary version available but the source version is later:
      binary source needs_compilation
broom  0.7.6  0.8.0             FALSE

</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>installing the source package 'broom'

</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span>

<span class="n">obj1</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">nasal.cancer</span> <span class="o">~</span> <span class="n">exposure.grp</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dat1</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="s">"binomial"</span><span class="p">)</span>
<span class="c1"># summary(obj1)</span>

<span class="c1"># tidy(obj1) # 특별한 옵션을 주지 않으면, 그냥 b의 추정치가 나온다.</span>

<span class="c1"># exponentiate = T 옵션을 주면, estimate(변수명)은 똑같지만, OR이 찍혀있게 된다.</span>
<span class="c1"># tidy(obj1, exponentiate = T)</span>

<span class="c1"># OR에 대한 신뢰구간(conf idential int  erval)옵션까지 줄 수 있다.</span>
<span class="nf">tidy</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">exponentiate</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">conf.int</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">term</th>
<th scope="col">estimate</th>
<th scope="col">std.error</th>
<th scope="col">statistic</th>
<th scope="col">p.value</th>
<th scope="col">conf.low</th>
<th scope="col">conf.high</th>
</tr></thead>
<tbody>
	<tr>
<td>(Intercept)  </td>
<td>0.06890756   </td>
<td>0.1614641    </td>
<td>-16.567079   </td>
<td>1.205399e-61 </td>
<td>0.04944691   </td>
<td> 0.09326859  </td>
</tr>
	<tr>
<td>exposure.grp1</td>
<td>7.77439024   </td>
<td>0.3584015    </td>
<td>  5.722172   </td>
<td>1.051706e-08 </td>
<td>3.78406082   </td>
<td>15.55773863  </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>intercept의 b0의 OR은 볼 필요 없다</li>
<li>
<strong>exposure.grp1(X)의 OR을 (e^회귀계수 없이) 바로 볼 수 있다.</strong><ul>
<li>OR -&gt; estimate:7.77</li>
<li>p.value -&gt; 1.051706e-08</li>
<li>conf.low ~ conf.high</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="위험요소노출여부(X)-병여부(Y)-+-@의심되는-confounder(age1st.grp)까지-고려해서-로지스틱-회귀-모델">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EB%B3%91%EC%97%AC%EB%B6%80(Y)-+-@%EC%9D%98%EC%8B%AC%EB%90%98%EB%8A%94-confounder(age1st.grp)%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%84%9C-%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80-%EB%AA%A8%EB%8D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소노출여부(X)-병여부(Y) + @의심되는 confounder(age1st.grp)까지 고려해서 로지스틱 회귀 모델<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EB%B3%91%EC%97%AC%EB%B6%80(Y)-+-@%EC%9D%98%EC%8B%AC%EB%90%98%EB%8A%94-confounder(age1st.grp)%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%84%9C-%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80-%EB%AA%A8%EB%8D%B8"> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># confounder로 생각되는 변수(첫 노출 나이)를 + 공변량으로 넣어서</span>
<span class="c1"># -&gt; OR이 아니라 adjustment OR로 계산되도록 한다.</span>
<span class="n">obj2</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">nasal.cancer</span> <span class="o">~</span> <span class="n">exposure.grp</span> <span class="o">+</span> <span class="n">age1st.grp</span>
            <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dat1</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="s">"binomial"</span><span class="p">)</span>

<span class="nf">tidy</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="n">exponentiate</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">conf.int</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># exposure.grp1의 OR age1st.grp1dml OR이 각각 나온다.</span>
<span class="c1"># 해석: age1st.grp1그룹의 값이 일정할 경우 -&gt; exposure.grp1의 OR이 6.86으로 추정된다</span>
<span class="c1">#       OR의 p-value가 작고 + 신뢰구간까지 제시</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">term</th>
<th scope="col">estimate</th>
<th scope="col">std.error</th>
<th scope="col">statistic</th>
<th scope="col">p.value</th>
<th scope="col">conf.low</th>
<th scope="col">conf.high</th>
</tr></thead>
<tbody>
	<tr>
<td>(Intercept)  </td>
<td>0.04012872   </td>
<td>0.2916948    </td>
<td>-11.024065   </td>
<td>2.925420e-28 </td>
<td>0.02151766   </td>
<td> 0.06810862  </td>
</tr>
	<tr>
<td>exposure.grp1</td>
<td>6.86108670   </td>
<td>0.3635830    </td>
<td>  5.296908   </td>
<td>1.177802e-07 </td>
<td>3.30603509   </td>
<td>13.86633962  </td>
</tr>
	<tr>
<td>age1st.grp1  </td>
<td>2.31360264   </td>
<td>0.3340699    </td>
<td>  2.510869   </td>
<td>1.204342e-02 </td>
<td>1.23213568   </td>
<td> 4.61419281  </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="위험요소노출여부(X)-병여부(Y)-+-@-age1st.grp가-confounder가-아니라-effective-modifier로-의심되서-interaction-term까지-고려해서-로지스틱-회귀-모델">
<a class="anchor" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EB%B3%91%EC%97%AC%EB%B6%80(Y)-+-@-age1st.grp%EA%B0%80-confounder%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-effective-modifier%EB%A1%9C-%EC%9D%98%EC%8B%AC%EB%90%98%EC%84%9C-interaction-term%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%84%9C-%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80-%EB%AA%A8%EB%8D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>위험요소노출여부(X)-병여부(Y) + @ age1st.grp가 confounder가 아니라 effective modifier로 의심되서 interaction term까지 고려해서 로지스틱 회귀 모델<a class="anchor-link" href="#%EC%9C%84%ED%97%98%EC%9A%94%EC%86%8C%EB%85%B8%EC%B6%9C%EC%97%AC%EB%B6%80(X)-%EB%B3%91%EC%97%AC%EB%B6%80(Y)-+-@-age1st.grp%EA%B0%80-confounder%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-effective-modifier%EB%A1%9C-%EC%9D%98%EC%8B%AC%EB%90%98%EC%84%9C-interaction-term%EA%B9%8C%EC%A7%80-%EA%B3%A0%EB%A0%A4%ED%95%B4%EC%84%9C-%EB%A1%9C%EC%A7%80%EC%8A%A4%ED%8B%B1-%ED%9A%8C%EA%B7%80-%EB%AA%A8%EB%8D%B8"> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># R에서는  a + b + a*b 대신  -&gt; a*b만 넣어주면, 각각의 main effect가 반영된 interaction term까지 고려 모델이 된다.</span>
<span class="n">obj3</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">nasal.cancer</span> <span class="o">~</span> <span class="n">exposure.grp</span> <span class="o">*</span> <span class="n">age1st.grp</span>
            <span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dat1</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="s">"binomial"</span><span class="p">)</span>

<span class="nf">tidy</span><span class="p">(</span><span class="n">obj3</span><span class="p">,</span> <span class="n">exponentiate</span> <span class="o">=</span> <span class="bp">T</span><span class="p">,</span> <span class="n">conf.int</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>

<span class="c1"># 해석: interaction term을 의미하는 [exposure.grp1:age1st.grp1]는 OR이 중요한게 아니라 p-value가 중요하다.</span>
<span class="c1"># -&gt; 3.02 x 10^-1 = 0.3 으로 유의하지가 않다.</span>
<span class="c1"># --&gt; inetraction term(exposure.grp1:age1st.grp1)의 p-value가 유의하지 않으면 -&gt; interaction이 유의하지 않다로 해석한다.</span>
<span class="c1"># --&gt; 첫노출나이 그룹에 따른, exposure이 바뀌는 것이 통계적으로 유의하진 않다.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table>
<thead><tr>
<th scope="col">term</th>
<th scope="col">estimate</th>
<th scope="col">std.error</th>
<th scope="col">statistic</th>
<th scope="col">p.value</th>
<th scope="col">conf.low</th>
<th scope="col">conf.high</th>
</tr></thead>
<tbody>
	<tr>
<td>(Intercept)              </td>
<td>0.04460967               </td>
<td>0.2949937                </td>
<td>-10.5419359              </td>
<td>5.534766e-26             </td>
<td>0.02364332               </td>
<td> 0.07594055              </td>
</tr>
	<tr>
<td>exposure.grp1            </td>
<td>2.49074058               </td>
<td>1.0945923                </td>
<td>  0.8337169              </td>
<td>4.044406e-01             </td>
<td>0.12977341               </td>
<td>14.95214891              </td>
</tr>
	<tr>
<td>age1st.grp1              </td>
<td>1.99412053               </td>
<td>0.3529469                </td>
<td>  1.9555438              </td>
<td>5.051892e-02             </td>
<td>1.02220683               </td>
<td> 4.13027193              </td>
</tr>
	<tr>
<td>exposure.grp1:age1st.grp1</td>
<td>3.32556576               </td>
<td>1.1660801                </td>
<td>  1.0304951              </td>
<td>3.027777e-01             </td>
<td>0.45951598               </td>
<td>68.82990394              </td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h6 id="interaction-term이-유의하게-나온-경우?!--의심변수-0일때와-1일때의-OR을-각각-확인한다.">
<a class="anchor" href="#interaction-term%EC%9D%B4-%EC%9C%A0%EC%9D%98%ED%95%98%EA%B2%8C-%EB%82%98%EC%98%A8-%EA%B2%BD%EC%9A%B0?!--%EC%9D%98%EC%8B%AC%EB%B3%80%EC%88%98-0%EC%9D%BC%EB%95%8C%EC%99%80-1%EC%9D%BC%EB%95%8C%EC%9D%98-OR%EC%9D%84-%EA%B0%81%EA%B0%81-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4." aria-hidden="true"><span class="octicon octicon-link"></span></a>interaction term이 유의하게 나온 경우?!  의심변수 0일때와 1일때의 OR을 각각 확인한다.<a class="anchor-link" href="#interaction-term%EC%9D%B4-%EC%9C%A0%EC%9D%98%ED%95%98%EA%B2%8C-%EB%82%98%EC%98%A8-%EA%B2%BD%EC%9A%B0?!--%EC%9D%98%EC%8B%AC%EB%B3%80%EC%88%98-0%EC%9D%BC%EB%95%8C%EC%99%80-1%EC%9D%BC%EB%95%8C%EC%9D%98-OR%EC%9D%84-%EA%B0%81%EA%B0%81-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4."> </a>
</h6>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># -&gt; 만약, interaction이 유의한 경우라고 가정한다면???</span>

<span class="c1"># interaction을 일으키는 첫노출나이의  0일때의 OR  과   1일때의 OR을 확인해야한다.</span>
<span class="c1"># -&gt; 각 변수들의 회귀계수를 구해야 -&gt; 각 OR을 알 수 있다.</span>

<span class="c1"># summary(obj3) # 회귀계수를 포함한 전체 정보가 나온다.</span>
<span class="nf">coef</span><span class="p">(</span><span class="n">obj3</span><span class="p">)</span><span class="c1"># 회귀계수만 벡터정보로 얻을 수 있다.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
&lt;dl class=dl-horizontal&gt;
	<dt>(Intercept)</dt>
		<dd>-3.10980466691791</dd>
	<dt>exposure.grp1</dt>
		<dd>0.912580089581693</dd>
	<dt>age1st.grp1</dt>
		<dd>0.690203115537809</dd>
	<dt>exposure.grp1:age1st.grp1</dt>
		<dd>1.20163981224723</dd>
&lt;/dl&gt;

</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># -&gt; 단일 변수의 회귀계수로 OR을 구하면,  interaction변수 0일 때의 OR임</span>
<span class="nf">exp</span><span class="p">(</span><span class="nf">coef</span><span class="p">(</span><span class="n">obj3</span><span class="p">)[</span><span class="m">2</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<strong>exposure.grp1:</strong> 2.4907405840833
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># -&gt; 단일 변수의 회귀계수  +   interaction term의 회귀계수의 합  에 exp</span>
<span class="nf">exp</span><span class="p">(</span> <span class="nf">coef</span><span class="p">(</span><span class="n">obj3</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span> <span class="o">+</span> <span class="nf">coef</span><span class="p">(</span><span class="n">obj3</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<strong>exposure.grp1:</strong> 8.2831215970951
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="연구에서-Confounding과-Interaction(effect-modifier)를-만났을-때-설계">
<a class="anchor" href="#%EC%97%B0%EA%B5%AC%EC%97%90%EC%84%9C-Confounding%EA%B3%BC-Interaction(effect-modifier)%EB%A5%BC-%EB%A7%8C%EB%82%AC%EC%9D%84-%EB%95%8C-%EC%84%A4%EA%B3%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>연구에서 Confounding과 Interaction(effect modifier)를 만났을 때 설계<a class="anchor-link" href="#%EC%97%B0%EA%B5%AC%EC%97%90%EC%84%9C-Confounding%EA%B3%BC-Interaction(effect-modifier)%EB%A5%BC-%EB%A7%8C%EB%82%AC%EC%9D%84-%EB%95%8C-%EC%84%A4%EA%B3%84"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>실제 연구 중 confounder와 effect modifier(interactio n유발변수)가 있다고 의심이 된다?</p>
<ol>
<li>일단은 <code>confounder와 effect modifier 의심변수(A)을 무시</code>하고, 관심있는 위험노출변수의 OR(<code>crude</code> OR)만 계산한다.</li>
<li>A변수의 값별로 따로 따로 OR (stratum-specific OR)을 계산한다.<ul>
<li>A변수=0은 a*b로 만든 회귀 모델 중 자신의 회귀계수로 OR</li>
<li>A변수=1은 a*b로 만든 회귀 모델 중 (자신의 회귀계수 + axb의 회귀계수)로 OR을 구했다.</li>
</ul>
</li>
<li>아래와 같이 경우를 나눠 판단한다.<ol>
<li>Stratum-specific OR들이 비슷하고 crude OR과도 비슷할 경우<ul>
<li>confoundin이나 interactio이 없다</li>
</ul>
</li>
<li>
<strong>Stratum-specific OR들은 비슷(interaction없다)하지만 crude OR과는 차이가 클 경우</strong><ul>
<li>A가 <code>confounder</code>이다. M-H OR(종합 OR)이나 adjusted OR(로지스틱 회귀를 이용)을 계산한다</li>
</ul>
</li>
<li>
<strong>Stratum-specific OR이 많이 다르다</strong><ul>
<li>
<code>interaction</code>이 있다. 로지스틱 회귀분석을 이용하여 interaction이 있는지 검정하고
A변수 값 별 OR을 보고한다</li>
</ul>
</li>
</ol>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2분형-결과변수의-코호트-분석-제한점">
<a class="anchor" href="#2%EB%B6%84%ED%98%95-%EA%B2%B0%EA%B3%BC%EB%B3%80%EC%88%98%EC%9D%98-%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%B6%84%EC%84%9D-%EC%A0%9C%ED%95%9C%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>2분형 결과변수의 코호트 분석 제한점<a class="anchor-link" href="#2%EB%B6%84%ED%98%95-%EA%B2%B0%EA%B3%BC%EB%B3%80%EC%88%98%EC%9D%98-%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%B6%84%EC%84%9D-%EC%A0%9C%ED%95%9C%EC%A0%90"> </a>
</h3>
<h4 id="2분형-결과변수(O/X)로는-제대로-코호트-분석이-안된다?-이상적이진-않다">
<a class="anchor" href="#2%EB%B6%84%ED%98%95-%EA%B2%B0%EA%B3%BC%EB%B3%80%EC%88%98(O/X)%EB%A1%9C%EB%8A%94-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%B6%84%EC%84%9D%EC%9D%B4-%EC%95%88%EB%90%9C%EB%8B%A4?-%EC%9D%B4%EC%83%81%EC%A0%81%EC%9D%B4%EC%A7%84-%EC%95%8A%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>2분형 결과변수(O/X)로는 제대로 코호트 분석이 안된다? 이상적이진 않다<a class="anchor-link" href="#2%EB%B6%84%ED%98%95-%EA%B2%B0%EA%B3%BC%EB%B3%80%EC%88%98(O/X)%EB%A1%9C%EB%8A%94-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%B6%84%EC%84%9D%EC%9D%B4-%EC%95%88%EB%90%9C%EB%8B%A4?-%EC%9D%B4%EC%83%81%EC%A0%81%EC%9D%B4%EC%A7%84-%EC%95%8A%EB%8B%A4"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="이분형의-발병여부--&gt;-분석시점에만-고려하면,-FU기간-기준이-없어서-통계적으로-invalid">
<a class="anchor" href="#%EC%9D%B4%EB%B6%84%ED%98%95%EC%9D%98-%EB%B0%9C%EB%B3%91%EC%97%AC%EB%B6%80--&gt;-%EB%B6%84%EC%84%9D%EC%8B%9C%EC%A0%90%EC%97%90%EB%A7%8C-%EA%B3%A0%EB%A0%A4%ED%95%98%EB%A9%B4,-FU%EA%B8%B0%EA%B0%84-%EA%B8%B0%EC%A4%80%EC%9D%B4-%EC%97%86%EC%96%B4%EC%84%9C-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-invalid" aria-hidden="true"><span class="octicon octicon-link"></span></a>이분형의 발병여부 -&gt; 분석시점에만 고려하면, FU기간 기준이 없어서 통계적으로 invalid<a class="anchor-link" href="#%EC%9D%B4%EB%B6%84%ED%98%95%EC%9D%98-%EB%B0%9C%EB%B3%91%EC%97%AC%EB%B6%80--&gt;-%EB%B6%84%EC%84%9D%EC%8B%9C%EC%A0%90%EC%97%90%EB%A7%8C-%EA%B3%A0%EB%A0%A4%ED%95%98%EB%A9%B4,-FU%EA%B8%B0%EA%B0%84-%EA%B8%B0%EC%A4%80%EC%9D%B4-%EC%97%86%EC%96%B4%EC%84%9C-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-invalid"> </a>
</h4>
<p>실제로 코호트 연구에서 2분형 변수가 ideal하진 않다. 그 이유는 많은 경우가 <strong>코호트 스터디 환자마다 follow up기간이 다르기 때문</strong></p>
<ul>
<li>동시에 시작해서 동시에 관찰이 끝나면 문제가 없지만</li>
<li>많은 경우, <strong>연구 시작 -&gt; 환자 등록은 중간 중간 이루어져서 추가됨</strong><ul>
<li><strong>반면, 연구가 끝나는/분석하는 시점은 딱 한 시점</strong></li>
</ul>
</li>
</ul>
<ul>
<li>
<p>예를 들어, 1년마다 환자 등록이 각각된, 시작은 2010년 코호트 연구</p>
<ul>
<li>
<strong>Q. 4번 환자가, 연구시점/분석시점(2015)엔 발병안했지만, 2016에 발병했다면? 어떻게 해석해야할까?</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423122306391.png" alt="image-20220423122306391">
</li>
<li>
<p>2015 시점 분석시, 2,3번 발병 / 1,4번 발병안함 -&gt; 2016년엔 ??</p>
<ul>
<li>4번이 2016년에 발병했다면?, 2번과 똑같이 3년만에 발병인데, 분석시점이후라서 카운팅 안해도 되는가? <ul>
<li>공평한 분석이 아닌 것 같다.
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423123032051.png" alt="image-20220423123032051">
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>FU(follow up) duration의 차이를 무시하고, 딱 분석시점에 잘라서 해도 되는 걸까?(코호트는 추가되는 환자등록이 다르고, 마지막 자르는 시점은 같음)</p>
<ul>
<li>각 환자별 동일한 기준으로 질병발병여부를 젠 것이 아니므로, 통계적으로 valid하지 않은 것이 된다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="이분형의-발병여부--&gt;-분석시점-기준-FU기간만-제일-짧은(제일-최근-등록)환자-기준으로-바꾸면-통계적으로-valid?-but-FU기준을-넘어가는-정보들을-미반영">
<a class="anchor" href="#%EC%9D%B4%EB%B6%84%ED%98%95%EC%9D%98-%EB%B0%9C%EB%B3%91%EC%97%AC%EB%B6%80--&gt;-%EB%B6%84%EC%84%9D%EC%8B%9C%EC%A0%90-%EA%B8%B0%EC%A4%80-FU%EA%B8%B0%EA%B0%84%EB%A7%8C-%EC%A0%9C%EC%9D%BC-%EC%A7%A7%EC%9D%80(%EC%A0%9C%EC%9D%BC-%EC%B5%9C%EA%B7%BC-%EB%93%B1%EB%A1%9D)%ED%99%98%EC%9E%90-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BE%B8%EB%A9%B4-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-valid?-but-FU%EA%B8%B0%EC%A4%80%EC%9D%84-%EB%84%98%EC%96%B4%EA%B0%80%EB%8A%94-%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%84-%EB%AF%B8%EB%B0%98%EC%98%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>이분형의 발병여부 -&gt; 분석시점 기준 FU기간만 제일 짧은(제일 최근 등록)환자 기준으로 바꾸면 통계적으로 valid? but FU기준을 넘어가는 정보들을 미반영<a class="anchor-link" href="#%EC%9D%B4%EB%B6%84%ED%98%95%EC%9D%98-%EB%B0%9C%EB%B3%91%EC%97%AC%EB%B6%80--&gt;-%EB%B6%84%EC%84%9D%EC%8B%9C%EC%A0%90-%EA%B8%B0%EC%A4%80-FU%EA%B8%B0%EA%B0%84%EB%A7%8C-%EC%A0%9C%EC%9D%BC-%EC%A7%A7%EC%9D%80(%EC%A0%9C%EC%9D%BC-%EC%B5%9C%EA%B7%BC-%EB%93%B1%EB%A1%9D)%ED%99%98%EC%9E%90-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BE%B8%EB%A9%B4-%ED%86%B5%EA%B3%84%EC%A0%81%EC%9C%BC%EB%A1%9C-valid?-but-FU%EA%B8%B0%EC%A4%80%EC%9D%84-%EB%84%98%EC%96%B4%EA%B0%80%EB%8A%94-%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%84-%EB%AF%B8%EB%B0%98%EC%98%81"> </a>
</h4>
<ul>
<li>
<strong>Q. 발병되서 끝난 여부와는 상관없이 <code>FU기간이 제일 짧은(분석시점에서 제일 가깝게 등록)한 환자를 기준</code>으로 모든 환자를 똑같이 <code>등록이후 같은 기간만 FU</code>해서  판단한다면?</strong><ul>
<li>젤 짧은 4번 환자 2년<ul>
<li>1번은 2년내 발병 X</li>
<li>2번은 2년내 발병 X</li>
<li>3번은 2년내 발병 O</li>
<li>4번은 2년내 발병 X
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423123630720.png" alt="image-20220423123630720">
</li>
</ul>
</li>
<li>통계적으로는 valid하겠지만, 안타깝게도, 2번 환자가 <code>FU기간 기준 내</code>에선 발병X지만, 실제로 3년차에 발병O한다는 사실을 분석에 반영못하게 된다. <strong>사실 정보를 가지고 있지만 반영 못하게 된다</strong>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="생존자료분석-기법을-이용하면,-통계적-valid-&amp;-모든-정보-반영">
<a class="anchor" href="#%EC%83%9D%EC%A1%B4%EC%9E%90%EB%A3%8C%EB%B6%84%EC%84%9D-%EA%B8%B0%EB%B2%95%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%A9%B4,-%ED%86%B5%EA%B3%84%EC%A0%81-valid-&amp;-%EB%AA%A8%EB%93%A0-%EC%A0%95%EB%B3%B4-%EB%B0%98%EC%98%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>생존자료분석 기법을 이용하면, 통계적 valid &amp; 모든 정보 반영<a class="anchor-link" href="#%EC%83%9D%EC%A1%B4%EC%9E%90%EB%A3%8C%EB%B6%84%EC%84%9D-%EA%B8%B0%EB%B2%95%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%A9%B4,-%ED%86%B5%EA%B3%84%EC%A0%81-valid-&amp;-%EB%AA%A8%EB%93%A0-%EC%A0%95%EB%B3%B4-%EB%B0%98%EC%98%81"> </a>
</h4>
<ul>
<li>
<p>1번과 4번를 보면, <code>분석시점에 발병X</code>뿐만 아니라 <strong><code>분석시점 이후에는 발병했을 수도/안했을 수 있고 모른다</code>를 분석에 반영할 수 있다.</strong></p>
<ul>
<li>코호트 분석에서 더 이상적이긴하지만, 하나의 토픽이라서 지금 다루진 않는다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423130045870.png" alt="image-20220423130045870">
</li>
</ul>
</li>
<li>
<p>만약, 생존자료분석을 이용하지 않는다면, <strong>최근등록된 제일 짧은FU을 기준으로 삼는게 아니라 <code>FU기간을 반영한 Person-time incidence 위주의 분석</code>도 가능하지만 다루진 않는다</strong></p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="코호트-스터디-논문예제">
<a class="anchor" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%8A%A4%ED%84%B0%EB%94%94-%EB%85%BC%EB%AC%B8%EC%98%88%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>코호트 스터디 논문예제<a class="anchor-link" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EC%8A%A4%ED%84%B0%EB%94%94-%EB%85%BC%EB%AC%B8%EC%98%88%EC%A0%9C"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="N-E-J-med에-발표된-천식관련-코호트">
<a class="anchor" href="#N-E-J-med%EC%97%90-%EB%B0%9C%ED%91%9C%EB%90%9C-%EC%B2%9C%EC%8B%9D%EA%B4%80%EB%A0%A8-%EC%BD%94%ED%98%B8%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>N E J med에 발표된 천식관련 코호트<a class="anchor-link" href="#N-E-J-med%EC%97%90-%EB%B0%9C%ED%91%9C%EB%90%9C-%EC%B2%9C%EC%8B%9D%EA%B4%80%EB%A0%A8-%EC%BD%94%ED%98%B8%ED%8A%B8"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423130412452.png" alt="image-20220423130412452"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>뉴질랜드 어느 마을에서 72년 4월 ~ 73년 3월까지 태어난 나이 1000명 중 90%가 참여</li>
<li>이후 5, 7, 9, 11, 13, 15, 18, 21, 26세에 FU<ul>
<li>skin-prick test: 알러지 테스트</li>
<li>폐기능 검사</li>
<li>airway responsiveness : 천식관련 outcome</li>
</ul>
</li>
<li>
<strong>천식 발병O/X를 나누기 위해 여러가지 outcome 정의(2분형 -&gt; 여러가지로)</strong><ul>
<li>발병이후 쭉 위징 : 펄시스턴스 위징</li>
<li>발병이후 쭉 위징있었다가 나아지면: 리미션</li>
<li>발병이후 쭉 위징 나았다가 다시 생기면: 릴랩스
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423130654803.png" alt="image-20220423130654803">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="결과-해석">
<a class="anchor" href="#%EA%B2%B0%EA%B3%BC-%ED%95%B4%EC%84%9D" aria-hidden="true"><span class="octicon octicon-link"></span></a>결과 해석<a class="anchor-link" href="#%EA%B2%B0%EA%B3%BC-%ED%95%B4%EC%84%9D"> </a>
</h4>
<ol>
<li>모든 FU에 다 참여한 아기 -&gt; 613명</li>
<li>전체 FU에 다 참여하지 않은 아기 - &gt; 그외 로 나눠서 분석한다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423131457473.png" alt="image-20220423131457473">
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>모든 FU에 다 참여한 아기 대상으로 <ul>
<li>여러가지 정의했던 outcome(이분형X)에 대해 얼마나 발생했는지 본다</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423131616383.png" alt="image-20220423131616383"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>각 환자 특성별로 나누어 여러 outcome의 분포를 확인<ul>
<li><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423131709352.png" alt="image-20220423131709352"></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="코호트-논문에서-관심있는-결과해석은-OR-분석표다">
<a class="anchor" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%85%BC%EB%AC%B8%EC%97%90%EC%84%9C-%EA%B4%80%EC%8B%AC%EC%9E%88%EB%8A%94-%EA%B2%B0%EA%B3%BC%ED%95%B4%EC%84%9D%EC%9D%80-OR-%EB%B6%84%EC%84%9D%ED%91%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>코호트 논문에서 관심있는 결과해석은 OR 분석표다<a class="anchor-link" href="#%EC%BD%94%ED%98%B8%ED%8A%B8-%EB%85%BC%EB%AC%B8%EC%97%90%EC%84%9C-%EA%B4%80%EC%8B%AC%EC%9E%88%EB%8A%94-%EA%B2%B0%EA%B3%BC%ED%95%B4%EC%84%9D%EC%9D%80-OR-%EB%B6%84%EC%84%9D%ED%91%9C%EB%8B%A4"> </a>
</h4>
<ul>
<li>
<p>2분형 결과변수는 아니였지만, 2가지 outcome만 OR을 계산하게 되었음.</p>
</li>
<li>
<p>1) 위험 요소 <strong>O인 경우가 (그렇지 않은 경우에 비해) <code>OR</code>이 몇 배</strong>고, 2) <code>P value</code> 통계적으로 유의한지 보고 3) 점추정값의 <code>신뢰구간</code>도 보자</p>
</li>
<li>4) 해석은 <strong><code>(위험요소 O)~ 한 경우</code>가 ~하지 않는 경우에 비해 <code>outcome O될 확률이 OR 배</code>였다</strong><ul>
<li>Persistence하고 Relapse에 대해 OR을 계산했는데, </li>
<li>
<strong>21세에 스모킹 O인 그룹이 (그렇지 않은 그룹에 비해) Persistence가 있을 오즈가 2.05배였다</strong>
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423162154170.png" alt="image-20220423162154170">
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<strong><code>다변량 모델</code> = <code>컨파운딩 등을 보기 위해(나머지 설명변수 고정상태를 만드는 모델)</code> OR이 유의한 설명 변수만 집어넣고 다시 모델을 만든 것.</strong><ul>
<li><strong><code>각 변수에 대해 나머지 변수는 고정일 때</code>로 해석가능하다</strong></li>
<li><strong>(다변량모델에서, 나머지 변수들이 고정되어있는데도~) 21세 흡연여부가 -&gt; OR이 1보다 높고 통계적으로 유의하다.</strong></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cross-sectional-Study">
<a class="anchor" href="#Cross-sectional-Study" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cross-sectional Study<a class="anchor-link" href="#Cross-sectional-Study"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>
<strong><code>딱 1시점</code>에서 데이터를 보고 <code>위험요소 노출 O/X 여부</code> 및 <code>질병 발병 O/X 여부</code>를 보게 됨</strong><ul>
<li>변화하는 관심 인구집단의 한 시점의 <code>스냅샷</code>으로</li>
<li>
<code>incidence(속도)를 볼 수 없</code>고, prevalence만 보게 된다.<ul>
<li>위험요소가 먼저였는지, 질병이 먼저였는지  알 수 없음
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423164453610.png" alt="image-20220423164453610">
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="bias-생길-확률이-높다">
<a class="anchor" href="#bias-%EC%83%9D%EA%B8%B8-%ED%99%95%EB%A5%A0%EC%9D%B4-%EB%86%92%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>bias 생길 확률이 높다<a class="anchor-link" href="#bias-%EC%83%9D%EA%B8%B8-%ED%99%95%EB%A5%A0%EC%9D%B4-%EB%86%92%EB%8B%A4"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Temporal-bias">
<a class="anchor" href="#Temporal-bias" aria-hidden="true"><span class="octicon octicon-link"></span></a>Temporal bias<a class="anchor-link" href="#Temporal-bias"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>템포럴 바이러스는 <strong><code>위험요소노출 여부 vs 질병여부 어떤 것이 먼저인지 알 수 없을 때</code> 오는 bias다</strong><ul>
<li>예를 들어, 운동 여부 vs CHD 발병 여부<ul>
<li>CHD진단 받은 환자들이 운동을 늘렸을 가능성이 있다. <ul>
<li>그 때 Crross-section study에 잡히면 ? 상관관계가 과소추정된다.</li>
</ul>
</li>
<li>운동량 적을 수록 -&gt; CHD 많이 발견되는 상관관계를 발견했을 지라도<ul>
<li>운동량 적 -&gt; CHD 많?  or   CHD 많 -&gt; 운동량 적어짐 선후관계를 알 수가 없다
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423164550664.png" alt="image-20220423164550664">
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="survival/selection-bias(prevalence-incidence-bias)">
<a class="anchor" href="#survival/selection-bias(prevalence-incidence-bias)" aria-hidden="true"><span class="octicon octicon-link"></span></a>survival/selection bias(prevalence-incidence bias)<a class="anchor-link" href="#survival/selection-bias(prevalence-incidence-bias)"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>서바이벌 바이어스 / 셀렉션 바이어스 / 프리벌런스-인시턴스 바이어스 라고도 한다.<ul>
<li><strong><code>위험요소 노출후 (질병O는 물론이고) 금방 사망해버린 환자들은 연구에 포함되기가 어렵다</code>에서 오는 바이어스다</strong></li>
<li>예를 들어, 흡연 -&gt; 폐기종 환자에 있어서<ul>
<li>흡연에 의해 폐기종 발생 환자들은 비흡연 -&gt; 폐기종 환자들에 비해, 빨리 사망함 -&gt; Cross-sectional study에 포함되기 힘들어진다</li>
<li>살아남아 Cross-sectional study에 포함된 폐기종 환자들의 흡연률(흡연노출여부O)는, 전체 폐기종 발병 환자의 실제 흡연률보다 낮아지게 됨 -&gt; 흡연과 폐기종의 상관관계를 과소추정하게 된다.
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423164929839.png" alt="image-20220423164929839">
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="한계점이-많은-연구">
<a class="anchor" href="#%ED%95%9C%EA%B3%84%EC%A0%90%EC%9D%B4-%EB%A7%8E%EC%9D%80-%EC%97%B0%EA%B5%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>한계점이 많은 연구<a class="anchor-link" href="#%ED%95%9C%EA%B3%84%EC%A0%90%EC%9D%B4-%EB%A7%8E%EC%9D%80-%EC%97%B0%EA%B5%AC"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>bias를 많이 가질 수 밖에 없는 study이므로, Cross-sectional Study의 결과는 다른 연구 시간의 <strong>선후관계를 가진 파악 다른 연구로 가기 전의 전 단계로서, 살펴볼 가치가 있는 가설인지 확인용</strong>으로 쓴다.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="크로스-섹셔널에서의-RR-&amp;-OR">
<a class="anchor" href="#%ED%81%AC%EB%A1%9C%EC%8A%A4-%EC%84%B9%EC%85%94%EB%84%90%EC%97%90%EC%84%9C%EC%9D%98-RR-&amp;-OR" aria-hidden="true"><span class="octicon octicon-link"></span></a>크로스-섹셔널에서의 RR &amp; OR<a class="anchor-link" href="#%ED%81%AC%EB%A1%9C%EC%8A%A4-%EC%84%B9%EC%85%94%EB%84%90%EC%97%90%EC%84%9C%EC%9D%98-RR-&amp;-OR"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>크로스-섹셔널 연구에서는 incidence 계산 불가 -&gt; risk 계산 불가 -&gt; Relative Ratio의 RR대신 <code>Prevalence Ratio</code>로 부른다.</li>
<li>OR에 들어가는 p1, p0가 risk가 아닌 prevalence -&gt; <code>prevalence OR</code> 로 부른다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423165805421.png" alt="image-20220423165805421">
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="정리하기">
<a class="anchor" href="#%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>정리하기<a class="anchor-link" href="#%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Cohort study는 연구자가 위험요소에 노출된 그룹과 노출되지 않은 그룹을 일정기간 동안 추적관찰하여, 두 그룹 간 질병 발생률 (incidence)이나 질병에 의한 사망률 등을 비교하는 연구이다 </li>
<li>Cohort study에서는 RR과 OR을 추정하고 신뢰구간을 계산할 수 있다 </li>
<li>Confounding이 있을 경우 Mantel-Haenszel 방법으로 OR을 계산하거나 로지스틱 회귀분석으로 Adjusted OR을 계산할 수 있다 </li>
<li>Interaction이 있을 경우 로지스틱 회귀분석으로 interaction의 유의성을 검정하고 stratum-specific OR을 계산할 수 있다 </li>
<li>Cross-section study에서는 prevalence ratio와 prevalence OR을 계산할 수 있다</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="cohort-study-연습문제">
<a class="anchor" href="#cohort-study-%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>cohort study 연습문제<a class="anchor-link" href="#cohort-study-%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C"> </a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Q1.-다음-중-cohort-study에-대한-설명으로-적절하지-않은-것은?">
<a class="anchor" href="#Q1.-%EB%8B%A4%EC%9D%8C-%EC%A4%91-cohort-study%EC%97%90-%EB%8C%80%ED%95%9C-%EC%84%A4%EB%AA%85%EC%9C%BC%EB%A1%9C-%EC%A0%81%EC%A0%88%ED%95%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EA%B2%83%EC%9D%80?" aria-hidden="true"><span class="octicon octicon-link"></span></a>Q1. 다음 중 cohort study에 대한 설명으로 적절하지 않은 것은?<a class="anchor-link" href="#Q1.-%EB%8B%A4%EC%9D%8C-%EC%A4%91-cohort-study%EC%97%90-%EB%8C%80%ED%95%9C-%EC%84%A4%EB%AA%85%EC%9C%BC%EB%A1%9C-%EC%A0%81%EC%A0%88%ED%95%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EA%B2%83%EC%9D%80?"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>관찰연구의 일종이다.<ul>
<li>연구는 실험연구 vs 관찰연구로 나뉘는데 관찰만 한다.<ul>
<li>cf) 실험연구 아니면 관찰연구 -&gt; 현재시점 기준으로 이후(전향적) 아니면 이전(후향적) 관찰 -&gt; 이후든 이전이든  1시점만(cross-sectional) 보냐 vs 2시점 이상(Longitudinal-이후Cohort/이전Case-control)보냐</li>
</ul>
</li>
</ul>
</li>
<li>여러개의 질병을 동시에 연구할 수 없다.<ul>
<li>위험요소 -&gt; 질병발생의 선후가 정해져 있어서 질병발생 시점이 명확 -&gt; incidence(질병발생 속도와 관련) 추정이 가능</li>
<li>위험요소 -&gt; 질병발생의 선후가 정해져 있어서 인과관계 추론에 결정적 단서</li>
<li>위험요소 -&gt; 질병발생의 선후가 정해져 있어서 위험요소 노출O/X이후 나올 수 있는 여러 질병들을 동시에 연구 가능하다.(타겟질병말고도 다른 질병이 나타나면 연구가능)</li>
</ul>
</li>
<li>
<p>희귀병은 연구하기 어렵다.</p>
<ul>
<li>코호트는 <code>위험요소 -&gt; 질병발생의 선후</code>가 정해져 있어서 희귀병은 기다려도 몇 명 발생안하므로, 많은 수의 연구대상자가 확보되어야하고, 계속 follow up해야한다</li>
<li>대안: retrospective cohort study<ul>
<li>
<code>연구시작 시점 이후</code> <strong>발병하는 질병을 follow 하는 것은 동일</strong>하나, </li>
<li>
<code>연구시작 시점 이전</code> <strong>위험요소 노출O/X를 &lt;기록(데이터),기억(인터뷰)&gt;를 통해 결정하는 것</strong><ul>
<li>질병발생률은 prospective / 위험요소 노출여부는 retrospective로서 2가지가 섞여있는 디자인이라고도 볼 수 있다.</li>
<li>위험요소 노출O/X를 기다렸다가 나누었다가 할 필요가 없이 바로 질병발생률만 관찰하므로 전체적인 연구기간이 짧아진다.</li>
<li>
<code>위험요소 -&gt; 질병발생</code>의 선후가 정해져 있어서 <strong>질병 발생할때까지 계속 기다리다가 위험요소 노출여부가 중간에 바뀌어버릴 수 있다.</strong><ul>
<li>예&gt; 흡연으로 위험요소 노출O였다가, 연구 중간에 금연해서 not/un exposed group으로 가버릴 수 있다</li>
<li>대안: 위험요소 노출여부를 여러번 측정 -&gt; longitudinal study(여러번 측정시)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>위험요소 노출부터 질병 발병까지의 기간이 너무 긴 질병은 연구하기 어렵다.</p>
</li>
</ol>
<ul>
<li>정답 : 2</li>
<li>해설 : Cohort study에서는 여러개의 질병을 동시에 연구하는 것이 가능하다.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Q2.-다음은-어떤-cohort-study에서-흡연과-CHD의-관계를-알아보기-위해,-흡연자-300명,-비흡연자-500명을-10년간-추적하여-CHD-발병-여부를-조사한-것이다.">
<a class="anchor" href="#Q2.-%EB%8B%A4%EC%9D%8C%EC%9D%80-%EC%96%B4%EB%96%A4-cohort-study%EC%97%90%EC%84%9C-%ED%9D%A1%EC%97%B0%EA%B3%BC-CHD%EC%9D%98-%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-%EC%9C%84%ED%95%B4,-%ED%9D%A1%EC%97%B0%EC%9E%90-300%EB%AA%85,-%EB%B9%84%ED%9D%A1%EC%97%B0%EC%9E%90-500%EB%AA%85%EC%9D%84-10%EB%85%84%EA%B0%84-%EC%B6%94%EC%A0%81%ED%95%98%EC%97%AC-CHD-%EB%B0%9C%EB%B3%91-%EC%97%AC%EB%B6%80%EB%A5%BC-%EC%A1%B0%EC%82%AC%ED%95%9C-%EA%B2%83%EC%9D%B4%EB%8B%A4." aria-hidden="true"><span class="octicon octicon-link"></span></a>Q2. 다음은 어떤 cohort study에서 흡연과 CHD의 관계를 알아보기 위해, 흡연자 300명, 비흡연자 500명을 10년간 추적하여 CHD 발병 여부를 조사한 것이다.<a class="anchor-link" href="#Q2.-%EB%8B%A4%EC%9D%8C%EC%9D%80-%EC%96%B4%EB%96%A4-cohort-study%EC%97%90%EC%84%9C-%ED%9D%A1%EC%97%B0%EA%B3%BC-CHD%EC%9D%98-%EA%B4%80%EA%B3%84%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-%EC%9C%84%ED%95%B4,-%ED%9D%A1%EC%97%B0%EC%9E%90-300%EB%AA%85,-%EB%B9%84%ED%9D%A1%EC%97%B0%EC%9E%90-500%EB%AA%85%EC%9D%84-10%EB%85%84%EA%B0%84-%EC%B6%94%EC%A0%81%ED%95%98%EC%97%AC-CHD-%EB%B0%9C%EB%B3%91-%EC%97%AC%EB%B6%80%EB%A5%BC-%EC%A1%B0%EC%82%AC%ED%95%9C-%EA%B2%83%EC%9D%B4%EB%8B%A4."> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220423170946709.png" alt="image-20220423170946709"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>RR(relative risk) = (10/300)/(10/500) = 1.67</li>
<li>OR(odds ratio) = (290×10)/(490×10) = 0.59</li>
<li>이 데이터에서는 흡연자의 CHD 발병 위험이 더 높다.</li>
<li>흡연 여부와 CHD 발병 여부가 독립인지 검정하려면 카이제곱 검정을 시행하면 된다.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="풀이">
<a class="anchor" href="#%ED%92%80%EC%9D%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>풀이<a class="anchor-link" href="#%ED%92%80%EC%9D%B4"> </a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>row -&gt; col 순으로 보고 위험요소2개 = <code>interaction문제</code>인지 / 위험요소1 질병여부1의 <code>상관관계 문제</code>인지 확인한다<ul>
<li><strong>위험요소노출O/X -&gt; 질병여부O/X 의 <code>상관관계</code>는 <code>위험요소O/X에 따라 group을 나눈  -&gt;  RR/OR</code>로 판단한다.</strong></li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>
<p>상관관계를 위한 RR, OR계산은 <strong><code>위험요소노출 O/X group별로 나눈 질병 risk</code>인 <code>p1/p0</code>를 계산한다</strong></p>
<ul>
<li>p1(위험요소 노출O risk)  =  10/10+290</li>
<li>p0(위험요소 노출O risk)  =  10/10+490</li>
<li>rr = p1/p0 = 500/300 = 1.67</li>
</ul>
</li>
<li>
<p><strong>OR계산은 <code>위험요소노출 O/X group별로 나눈 질병 odds</code>(risk / 1-risk)를 구한뒤 비율을 구해야하지만 <code>위험요소-질병 표</code>에서는 <code>a(oo)d(xx) / bc</code>로 계산해버리면 된다.</strong></p>
<ul>
<li>a(oo) = 흡연-&gt;발병 = 10</li>
<li>d(xx) = 흡연x-&gt;발병x = 490</li>
<li>bc = 반대 대각선 = 10 x 290</li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>추가적으로 범주(위험요소 노출O/X)형 범주형(질병O/X) -&gt; 독립성 검정으로 상관관계 없음을 검정할 수 도 있다.(카이제곱 검정)</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>정답 : 2</li>
<li>해설 : 위의 표는 disease positive가 왼쪽이 아닌 오른쪽 열에 배치되어있다. 이를 일반적인 형태(disease positive가 왼쪽 열, exposed가 위쪽 행)로 바꾼 후 cross-product 공식으로 OR을 구하면 (10×490)/(10×290) = 1.69이다. </li>
</ul>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances 
<script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->

<div id="disqus_thread"></div>
<script>
  /**
   *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
   *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
  /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
  (function () {
    // DON'T EDIT BELOW THIS LINE
    var d = document,
      s = d.createElement('script');
    s.src = 'https://is2js-blog-raw.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>
<a class="u-url" href="/r/r%EA%B3%A0%EA%B8%89/dplyr/broom/tidy/%ED%86%B5%EA%B3%84/%EB%8C%80%ED%95%99%EC%9B%90/%EC%9D%98%EC%97%B0%EB%B0%A9/%EC%BD%94%ED%98%B8%ED%8A%B8/cohort/%EB%8B%A8%EB%A9%B4%EC%A1%B0%EC%82%AC%EC%97%B0%EA%B5%AC/cross-sectional/2022/03/25/%EC%9D%98%EC%97%B0%EB%B0%A905)-Cohort-study-&-Cross-sectional-study.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>평범한 한의사 돌범의 엔지니어 도전기</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
