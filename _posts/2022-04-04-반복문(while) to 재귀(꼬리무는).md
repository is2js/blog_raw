---
toc: true
layout: post
title: while 반복문 -> 재귀함수 변환
description: while 반복문을 재귀함수로 변경하여 에러시 재입력받도록 try/catch

categories: [java, try/catch, 재귀함수, 꼬리재귀함수, 재입력, try/catch, 체스, 우테코]
image: "images/posts/java.png"
---

### 반복문(while) to 재귀

#### 01 while문 내부 전체로직을 1개메서드로 추출

![image-20220415131410497](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415131410497.png)

```java
public void run() {
    final PairProgram pairProgram = new PairProgram();

    while (!pairProgram.isOff()) {
        final Menu menu = Menu.from(inputView.inputMenu());
        menu.execute(inputView, outputView, pairProgram);
    }
}
```



![image-20220415131342665](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415131342665.png)



```java
public void run() {
    final PairProgram pairProgram = new PairProgram();

    while (!pairProgram.isOff()) {
        start(pairProgram);
    }
}

private void start(final PairProgram pairProgram) {
    final Menu menu = Menu.from(inputView.inputMenu());
    menu.execute(inputView, outputView, pairProgram);
}
```



#### 02 while문을 벗겨내고, 반복되도록 마지막에 한번더 호출한다.(필요연산이 있다면, 재귀함수 파라미터 속에서 변수와 함께)

![image-20220415131544057](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415131544057.png)

```java
public void run() {
    final PairProgram pairProgram = new PairProgram();

    //        while (!pairProgram.isOff()) {
    start(pairProgram);
    //        }
}

private void start(final PairProgram pairProgram) {
    final Menu menu = Menu.from(inputView.inputMenu());
    menu.execute(inputView, outputView, pairProgram);

    start(pairProgram);
}
```





#### 03 while문의 `! 탈출조건`을 -> 재귀함수 맨위의 종착역으로서 `if 탈출조건 early return;`으로 지정해준다.

![image-20220415131731879](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415131731879.png)

```java
public void run() {
    final PairProgram pairProgram = new PairProgram();

    //        while (!pairProgram.isOff()) {
    start(pairProgram);
    //        }
}

private void start(final PairProgram pairProgram) {
    if (pairProgram.isOff()) {
        return;
    }
    final Menu menu = Menu.from(inputView.inputMenu());
    menu.execute(inputView, outputView, pairProgram);

    start(pairProgram);
}
```





#### 04 에러발생시 다시시작하고 싶은 부분(입력부분)부터 try{}로 째려보게 한다. -> 에러안나도 재귀함수는 flag에 걸리기전까지 반복해야하므로 재귀호출부까지 다 째려본다

![image-20220415132323653](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415132323653.png)

![image-20220415132423765](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415132423765.png)

```java
private void start(final PairProgram pairProgram) {
    if (pairProgram.isOff()) {
        return;
    }

    try {
        final Menu menu = Menu.from(inputView.inputMenu());
        menu.execute(inputView, outputView, pairProgram);

        start(pairProgram);
    } catch (Exception e) {
        System.out.println("[ERROR]" + e.getMessage());

        start(pairProgram);
    }
}
```

![image-20220415132450380](https://raw.githubusercontent.com/is2js/screenshots/main/image-20220415132450380.png)





### 꼬리재귀

- 