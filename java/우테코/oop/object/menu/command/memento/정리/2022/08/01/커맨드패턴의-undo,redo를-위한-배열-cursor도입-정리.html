<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">command패턴 중 cmd객체 외부저장소List에 cursor도입 정리</h1><p class="page-description">command패턴에서 사용된 redo를 위한 cursor</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-08-01T00:00:00-05:00" itemprop="datePublished">
        Aug 1, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#java">java</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#우테코">우테코</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#oop">oop</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#object">object</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#menu">menu</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#command">command</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#memento">memento</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#정리">정리</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- toc가 먼저 나오므로 h3로 안내하기 -->
    <h3>📜 제목으로 보기</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#command홀더객체-내-cmd객체들-외부저장소list배열과-cursor로-상태확인">command홀더객체 내, cmd객체들 외부저장소(List배열)과 cursor로 상태확인</a></li>
</ul><h3 id="command홀더객체-내-cmd객체들-외부저장소list배열과-cursor로-상태확인">
<a class="anchor" href="#command%ED%99%80%EB%8D%94%EA%B0%9D%EC%B2%B4-%EB%82%B4-cmd%EA%B0%9D%EC%B2%B4%EB%93%A4-%EC%99%B8%EB%B6%80%EC%A0%80%EC%9E%A5%EC%86%8Clist%EB%B0%B0%EC%97%B4%EA%B3%BC-cursor%EB%A1%9C-%EC%83%81%ED%83%9C%ED%99%95%EC%9D%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>command홀더객체 내, cmd객체들 외부저장소(List배열)과 cursor로 상태확인</h3>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220813133731095.png" alt="image-20220813133731095"></p>

<ol>
  <li>
    <p>redo는 undo로 인해 cursor가 원래배열의 끝보다 더 뒤에 있을 때, 한칸 앞으로 움직이므로</p>

    <ul>
      <li>
        <p><strong>cursor가 <code class="language-plaintext highlighter-rouge">배열의 맨끝</code>에 있지는 않은지</strong> 검사한다</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220813132600229.png" alt="image-20220813132600229"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>undo는 실행되어 기록이 저장된cmd가 1개라도 있어야한다.</p>

    <ul>
      <li>
        <p><strong>cursor가 <code class="language-plaintext highlighter-rouge">원소가 1개도 없을 경우인,  0보다 뒤에 있는지 확인</code></strong>한다</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220813132731535.png" alt="image-20220813132731535"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>execute후 add는, <strong>현재 add된 것이 배열의 제일 마지막에 위치</strong>하도록 <strong>(add를 단순 cursor++만 해선 안됨)</strong> 해야 <strong>add후 redo시 에러가 발생안하게</strong> 되는데, cursor는 undo로 인해 배열 끝보다 더 뒤에 있을 수 있으니, <strong>add하는 순간에는 cursor이동 전에, 배열 remove로직도 들어간다</strong>.</p>

    <ul>
      <li>
        <p>**cursor만 빽(undo)하고 redo를 위해 배열에는 cmd객체를 남겨놓는데, <code class="language-plaintext highlighter-rouge">cursor가 빽 한 상태에서 add한 것이 배열의 제일 끝에 위치하여, redo는 불가능</code>하도록 만들어놔야한다 **</p>
      </li>
      <li>
        <p><strong>그럴려면, <code class="language-plaintext highlighter-rouge">현재cursor(빽한 상황)보다 더 앞에 있는 cursor +  1 ~ 마지막까지는 먼저 배열에서 삭제</code>해놓아야 한다</strong></p>
      </li>
      <li>
        <p>그리고 난 뒤, <strong><code class="language-plaintext highlighter-rouge">요소를 배열 맨마지막에 add했으면, cursor의 업데이트는 불변식 size()-1로 업데이트</code></strong>한다</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220813133653313.png" alt="image-20220813133653313"></p>
      </li>
    </ul>
  </li>
</ol>

  </div><a class="u-url" href="/java/%EC%9A%B0%ED%85%8C%EC%BD%94/oop/object/menu/command/memento/%EC%A0%95%EB%A6%AC/2022/08/01/%EC%BB%A4%EB%A7%A8%EB%93%9C%ED%8C%A8%ED%84%B4%EC%9D%98-undo,redo%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%B0%B0%EC%97%B4-cursor%EB%8F%84%EC%9E%85-%EC%A0%95%EB%A6%AC.html" hidden></a>
</article>