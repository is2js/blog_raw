<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>TDD 6 로또(캐슁,Factory,전략) | 돌범텤놑</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="TDD 6 로또(캐슁,Factory,전략)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="캐슁-&gt;팩토리-&gt;전략 수동로또추가-&gt;마무리" />
<meta property="og:description" content="캐슁-&gt;팩토리-&gt;전략 수동로또추가-&gt;마무리" />
<link rel="canonical" href="blog.chojaeseong.com/java/%EC%9A%B0%ED%85%8C%EC%BD%94/%EC%BA%90%EC%8A%81/factory/%EC%A0%84%EB%9E%B5/tdd/%EA%B0%95%EC%9D%98/2022/03/14/TDD-6-%EB%A1%9C%EB%98%90(%EC%BA%90%EC%8A%81,Factory,%EC%88%98%EB%8F%99%EC%B6%94%EA%B0%80%EB%A7%88%EB%AC%B4%EB%A6%AC).html" />
<meta property="og:url" content="blog.chojaeseong.com/java/%EC%9A%B0%ED%85%8C%EC%BD%94/%EC%BA%90%EC%8A%81/factory/%EC%A0%84%EB%9E%B5/tdd/%EA%B0%95%EC%9D%98/2022/03/14/TDD-6-%EB%A1%9C%EB%98%90(%EC%BA%90%EC%8A%81,Factory,%EC%88%98%EB%8F%99%EC%B6%94%EA%B0%80%EB%A7%88%EB%AC%B4%EB%A6%AC).html" />
<meta property="og:site_name" content="돌범텤놑" />
<meta property="og:image" content="blog.chojaeseong.com/images/posts/wootech.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-14T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2022-03-14T00:00:00-05:00","url":"blog.chojaeseong.com/java/%EC%9A%B0%ED%85%8C%EC%BD%94/%EC%BA%90%EC%8A%81/factory/%EC%A0%84%EB%9E%B5/tdd/%EA%B0%95%EC%9D%98/2022/03/14/TDD-6-%EB%A1%9C%EB%98%90(%EC%BA%90%EC%8A%81,Factory,%EC%88%98%EB%8F%99%EC%B6%94%EA%B0%80%EB%A7%88%EB%AC%B4%EB%A6%AC).html","@type":"BlogPosting","image":"blog.chojaeseong.com/images/posts/wootech.png","headline":"TDD 6 로또(캐슁,Factory,전략)","dateModified":"2022-03-14T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"blog.chojaeseong.com/java/%EC%9A%B0%ED%85%8C%EC%BD%94/%EC%BA%90%EC%8A%81/factory/%EC%A0%84%EB%9E%B5/tdd/%EA%B0%95%EC%9D%98/2022/03/14/TDD-6-%EB%A1%9C%EB%98%90(%EC%BA%90%EC%8A%81,Factory,%EC%88%98%EB%8F%99%EC%B6%94%EA%B0%80%EB%A7%88%EB%AC%B4%EB%A6%AC).html"},"description":"캐슁-&gt;팩토리-&gt;전략 수동로또추가-&gt;마무리","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- 폰트추가를 위한 link태그 삽입 -->
  <!-- 폰트1:  기본 spoqa 웹폰트 -->
  <!-- css에서 * {} 다 뒤집어씀. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- 폰트2:  블로그 제목들 sunflower 웹폰트 -->
  <!-- 쥬피터 등 포스트 내부 글자 h1, h2 제목은 sunflower체 도입 -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="blog.chojaeseong.com/feed.xml" title="돌범텤놑" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">돌범텤놑</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">TDD 6 로또(캐슁,Factory,전략)</h1><p class="page-description">캐슁->팩토리->전략 수동로또추가->마무리</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-03-14T00:00:00-05:00" itemprop="datePublished">
        Mar 14, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      29 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#java">java</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#우테코">우테코</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#캐슁">캐슁</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Factory">Factory</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#전략">전략</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#TDD">TDD</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#강의">강의</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- toc가 먼저 나오므로 h3로 안내하기 -->
    <h3>📜 제목으로 보기</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#캐슁">캐슁</a>
<ul>
<li class="toc-entry toc-h4"><a href="#19-싱글톤을-이용한-단일객체-cache-적용과-tdd">19 싱글톤을 이용한 [단일객체 CACHE] 적용과 TDD</a>
<ul>
<li class="toc-entry toc-h5"><a href="#싱글톤을-이용한-cache-생성-2가지-방법정리용">싱글톤을 이용한 CACHE 생성 2가지 방법(정리용)</a></li>
<li class="toc-entry toc-h5"><a href="#test에서부터-빨간줄로-넘어가---캐쉬-적용하기">Test에서부터 빨간줄로 넘어가 -&gt; 캐쉬 적용하기</a></li>
<li class="toc-entry toc-h5"><a href="#검증이-넘어간-캐쉬-정팩메로-생성-테스트로-마무리">검증이 넘어간 캐쉬 정팩메로 생성 테스트로 마무리</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#갯수만큼-일급list-생성---메인로직이-도메인-생성이라-static-일급factory-를-거치도록--기능-분리">갯수만큼 일급&lt;List&gt; 생성 -&gt; 메인로직이 도메인 생성이라 static 일급Factory 를 거치도록  기능 분리</a>
<ul>
<li class="toc-entry toc-h4"><a href="#20-service에서-복잡한-도메인-생성-갯수만큼-일급list--생성을-호출한다면-service에서-호출해주는--정적static한-도메인facotry가--도메인로직으로서-생성을-담당한다">20 Service에서 복잡한 도메인 생성( 갯수만큼 일급List  생성)을 호출한다면, service에서 호출해주는  정적Static한 도메인Facotry가  도메인로직으로서 생성을 담당한다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#service에서-생성로직을-호출하되-메서드는-factory가-가져간다-가장-정제된-원시type을-인자로-받는다">Service에서 생성로직을 호출하되, 메서드는 Factory가 가져간다. 가장 정제된 원시Type을 인자로 받는다.</a></li>
<li class="toc-entry toc-h5"><a href="#실제-serivce내-도메인-생성관련-모든-로직은-도메인내부or도메인factory에-일임시킨다">실제 Serivce내 도메인 생성관련 모든 로직은 도메인내부or도메인Factory에 일임시킨다.</a></li>
<li class="toc-entry toc-h5"><a href="#메서드-생성이-컨셉과-파라미터가-잡힌-경우는-프로덕션-빨간줄로-생성하되-classtest-빨간줄까지-가서-메서드-생성-완료하기">메서드 생성이 [컨셉과 파라미터가 잡힌 경우]는 프로덕션 빨간줄로 생성하되 ClassTest 빨간줄까지 가서 메서드 생성 완료하기!</a></li>
<li class="toc-entry toc-h5"><a href="#갯수raw숫자만큼-반복로직은-vo로-바뀔-것-대비-틀을-잡아-while로-돌리기">[갯수(raw숫자)만큼 반복로직]은 VO로 바뀔 것 대비 [틀을 잡아 while로 돌리기]</a></li>
<li class="toc-entry toc-h5"><a href="#내부에서-정의될--1개당-도메인-생성로직도-도메인factory내-메서드로-정의">내부에서 정의될,  [1개당 도메인 생성]로직도 도메인Factory내 메서드로 정의</a></li>
<li class="toc-entry toc-h5"><a href="#프로덕션빨간줄-생성이라면---private이라도-public수정후-testgenerate로-classtest-생성---메서드호출까지-완료-시키기">프로덕션빨간줄 생성이라면 -&gt; private이라도 public수정후 TestGenerate로 ClassTest 생성 -&gt; 메서드호출까지 완료 시키기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#21-cache된-단일-객체는---static한-도메인factory의-static--블럭에서-미리-뽑아놓을-수-있다">21 CACHE된 단일 객체는 -&gt; Static한 [도메인Factory]의 Static {} 블럭에서 미리 뽑아놓을 수 있다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#재료가-되는-도메인은-의존갖다써도상수는-public으로-바꿔써도-된다">재료가 되는 도메인은 의존/갖다써도/상수는 public으로 바꿔써도 된다.</a></li>
<li class="toc-entry toc-h5"><a href="#suffle과-sublist를-통한-랜덤구현을-위해-미리cache된-재료만-다-static블럭에서-준비한다">suffle과 subList를 통한 랜덤구현을 위해 []미리CACHE된 재료만 다 static{}블럭]에서 준비한다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#21-정해진-갯수에서-일부-랜덤이다---정해진-갯수-셔플--sublistor-limit으로-랜덤을-구현">21 정해진 갯수에서 일부 랜덤이다? -&gt; 정해진 갯수 셔플 + subList(or .limit)으로 랜덤을 구현</a>
<ul>
<li class="toc-entry toc-h5"><a href="#random한-일급-테스트----getter후-size--제한된-범위단일객체의-경계값-검사">random한 일급 테스트 -&gt;  getter후 size + 제한된 범위(단일객체의 경계값) 검사</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#22-다시-횟수만큼-반복되는-도메인생성-메서드-처리">22 다시 [횟수만큼 반복되는 도메인생성] 메서드 처리</a>
<ul>
<li class="toc-entry toc-h5"><a href="#2번-이상의-add라면-지역변수-가변-new-arraylist에-add해서-반환">2번 이상의 add라면, 지역변수 가변 new ArrayList에 add해서 반환</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#23-다시-service로-돌아와-응답값-만들고---메서드-퉁-테스트">23 다시 Service로 돌아와 응답값 만들고 -&gt; 메서드 퉁 테스트</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#서비스의-메인로직-진행-중-추가-로직비교검증이-발생하는데-도메인의-영역이라면---대상들을-포장에-포장이라도-새로운-도메인으로">서비스의 메인로직 진행 중 추가 로직(비교&amp;검증)이 발생하는데, 도메인의 영역이라면? -&gt; 대상들을 포장에 포장이라도 새로운 도메인으로</a>
<ul>
<li class="toc-entry toc-h4"><a href="#24--service메서드-파라미터들의-검증로직에-의한-개별-포장-끝났는데-또-추가-검증-로직이-서비스에--늘날려고-한다">24  Service메서드 [파라미터들의 검증로직에 의한 개별 포장] 끝났는데, 또 [추가 검증 로직]이 서비스에  늘날려고 한다?</a>
<ul>
<li class="toc-entry toc-h5"><a href="#포장된-일급과-단일의-검증인데도-또-포장">포장된 일급과 단일의 검증인데도 또 포장?</a></li>
<li class="toc-entry toc-h5"><a href="#포장하기-전--service-테매-복붙하고-case반영한-테메이름-바꾸고---메서드-추가해주기">포장하기 전, [ service 테매 복붙]하고 case반영한 테메이름 바꾸고 -&gt; 메서드 추가해주기</a></li>
<li class="toc-entry toc-h5"><a href="#새롭게-포장된-파라미터를-받는-차후-새-기준이-될메소드도-추가---가장-위로-올린다">새롭게 포장된 파라미터를 받는 (차후 새 기준이 될)메소드도 추가 -&gt; 가장 위로 올린다.</a></li>
<li class="toc-entry toc-h5"><a href="#직전-기준-메소드의-내용을-복붙----포장된-파라미터에-맞추어-빨간줄을-없앤다-주로-getter로-임시처리">직전 기준 메소드의 내용을 복붙 -&gt;  포장된 파라미터에 맞추어 빨간줄을 없앤다. (주로 getter로 임시처리)</a></li>
<li class="toc-entry toc-h5"><a href="#포장--포장파라미터메서드-생성---새-기준-메서드로-지정하기---전-메소드는-전-파라미터---포장후-호출하도록-변경">포장 + 포장파라미터메서드 생성 -&gt; 새 기준 메서드로 지정하기- &gt; 전 메소드는 전 파라미터 -&gt; 포장후 호출하도록 변경</a></li>
<li class="toc-entry toc-h5"><a href="#포장에-원하던-생성자에-검증-로직-추가후-테스트하기">포장에 원하던 [생성자에 검증 로직 추가]후 테스트하기</a></li>
<li class="toc-entry toc-h5"><a href="#서비스로-퉁-치던-테스트를-도메인test-생성시-경계값test하기">서비스로 퉁 치던 테스트를 [도메인Test] 생성시 [경계값Test]하기</a></li>
<li class="toc-entry toc-h5"><a href="#새-기준-메서드에-임시처리포장getvalue-부분-메세지로-보내기-과정">새 기준 메서드에 임시처리(포장.getValue) 부분 메세지로 보내기 (과정)</a></li>
<li class="toc-entry toc-h5"><a href="#새-기준-메서드로-바꿨음에도-기존메서드가-다른데서-사용중인지-보고-가서-처리한다">새 기준 메서드로 바꿨음에도 [기존메서드]가 다른데서 사용중인지 보고 가서 처리한다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#단일-결과의-메인로직도1-vs-도2을-여러번-돌리며-결과값을-모으는-자료구조도-포장하는-로직">단일 결과의 메인로직(도1 vs 도2)을 여러번 돌리며 [결과값을 모으는 자료구조]도 포장하는 로직</a>
<ul>
<li class="toc-entry toc-h4"><a href="#25-단일결과by메인로직도메인1-vs-도메인2을-바깥에서-여러번-호출해서-발생하는-결과값을-저장할-새로운-자료구조가-나온다---결과값-저장-로직을-생성자로-넘겨----최종-결과값-자료구조를-시작-상태값으로-가지면서--관련로직을-메서드로-가지는-도메인3result도메인-만들기">25 단일결과by메인로직(도메인1 vs 도메인2)을 바깥에서 여러번 호출해서 발생하는 결과값을 저장할 새로운 자료구조가 나온다. -&gt; [결과값 저장 로직]을 생성자로 넘겨 -&gt;  [최종 결과값 자료구조를 시작 상태값]으로 가지면서 + 관련로직을 메서드로 가지는 도메인3(Result도메인) 만들기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#단일결과-로직도메인1-vs-도메인2인-메인-메서드의-파라미터-포장까지-완료된-상태여야만---바깥에서-여러번-돌릴-때-포장된-것을-받을-수-있음">단일결과 로직(도메인1 vs 도메인2)인 메인 메서드의 파라미터 포장까지 완료된 상태여야만 -&gt; 바깥에서 여러번 돌릴 때, 포장된 것을 받을 수 있음</a></li>
<li class="toc-entry toc-h5"><a href="#일단은-servicemethod내부에서-메인로직을-돌리기를-정의를-하다가---필요에-의해-옮기고-포장하자">일단은 Service.Method내부에서 [메인로직을 돌리기]를 정의를 하다가 -&gt; 필요에 의해 옮기고 포장하자.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#26-결과값을-모은-list를-카운팅하는-새로운-응답자료구조-만들기">26 [결과값을 모은 List를 카운팅하는 새로운 응답(자료구조)] 만들기</a></li>
<li class="toc-entry toc-h4"><a href="#enum-list----enummap에-카운팅하기정리용">Enum List -&gt;  EnumMap에 카운팅하기(정리용)</a>
<ul>
<li class="toc-entry toc-h5"><a href="#빈-map-선언-및-초기화">빈 Map 선언 및 초기화</a></li>
<li class="toc-entry toc-h5"><a href="#일급vs단일-로직을-먼저-수행한---응답결과list를-카운팅하는-3가지-방법">일급vs단일 로직을 먼저 수행한 -&gt; 응답결과List를 카운팅하는 3가지 방법</a></li>
<li class="toc-entry toc-h5"><a href="#enummap은-아니지만-일급vs단일-stream-단일vs단일-결과값객체key을-뽑아낼-로직--카운팅을-동시에-해주는-일급streamcollectcollectorsgroupingby-객체key를-뽑아낼-로직--summingint-value---1-">EnumMap은 아니지만, 일급vs단일 –stream–&gt; 단일vs단일 결과값(객체key)을 뽑아낼 로직 + 카운팅을 동시에 해주는 일급.stream().collect(Collectors.groupingBy( 객체key를 뽑아낼 로직 , summingInt( value -&gt; 1) )</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#27-결과값을-모은-list를-카운팅하는-새로운-응답자료구조을-포장하는데--그-생성-과정을-생성자에-넣어서-시작부터-상태값으로-가지자">27 결과값을 모은 List를 카운팅하는 새로운 응답(자료구조)을 포장하는데  그 생성 과정을 생성자에 넣어서 시작부터 상태값으로 가지자</a>
<ul>
<li class="toc-entry toc-h5"><a href="#응답값-포장하기">응답값 포장하기</a></li>
<li class="toc-entry toc-h5"><a href="#결과산출-로직은-포장결과값-생성자로-가져가되--new-포장결과--로-생성되도록-재료추출은-있어야함">결과산출 로직은 포장결과값 생성자로 가져가되,  new 포장결과( ) 로 생성되도록 재료추출은 있어야함.</a></li>
<li class="toc-entry toc-h5"><a href="#대박-메서드추출로-new-포장---생성자-or--결과class-정펙매--생성자-호출과-동시에-재료-추출하기">대박) 메서드추출로 new 포장( , ) 생성자 or  결과class 정펙매  생성자 호출과 동시에 재료 추출하기</a></li>
<li class="toc-entry toc-h5"><a href="#새-결과값-포장이-끝났으면-serivce-메서드-테스트-다시-해보기">새 결과값 포장이 끝났으면, Serivce 메서드 테스트 다시 해보기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#28-결과값-포장result-class의-자체-테스트">28 결과값 포장Result class의 자체 테스트</a>
<ul>
<li class="toc-entry toc-h5"><a href="#새로운-응답값-생성로직이-담긴-생성자-자체-테스트-with-view에서-쓰일-수도-있는-삭제될-count-getter객체key개발">[새로운 응답값 생성로직]이 담긴 [생성자 자체 테스트] with [view에서 쓰일 수도 있는? 삭제될? Count getter(객체key)개발]</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#29-새응답-결과값map에-계산-로직-더하기">29 새응답 결과값(map)에 계산 로직 더하기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#service에서-controller로-반환되므로-자체-resulttest에서-시작">Service에서 controller로 반환되므로 자체 ResultTest에서 시작</a></li>
<li class="toc-entry toc-h5"><a href="#countmap-처리-deafult--valueentryset--stream-map">countMap 처리 deafult : value.entrySet()  .stream() .map()</a></li>
<li class="toc-entry toc-h5"><a href="#map----로직에서-getter등장으로-보내야한다면---옆에-값도-같이-보내자--enumgetter---countitgetvalue---enum메세제-itgetvalue-">map( -&gt; ) 로직에서 getter등장으로 보내야한다면 -&gt; 옆에 값도 같이 보내자.  enum.getter  * count(it.getValue()) -&gt; enum.메세제( it.getValue() )</a></li>
<li class="toc-entry toc-h5"><a href="#없던-enum필드도-this필드명을-바로써서-빨간줄로-바로-생성">없던 Enum필드도 this.필드명을 바로써서 빨간줄로 바로 생성</a></li>
<li class="toc-entry toc-h5"><a href="#누적한다면-mattoint--sum-일까--mapreduce-일까">누적한다면, matToInt( ) .sum() 일까?  map().reduce( )일까?</a></li>
<li class="toc-entry toc-h5"><a href="#reduce의-불편함과-초기값장점">reduce의 불편함과 초기값장점</a></li>
<li class="toc-entry toc-h5"><a href="#maptotype---sum의-편리함과-불편성--없다---편한-것-쓰면-될듯">mapToType -&gt; .sum()의 편리함과 불편성(?-&gt; 없다) -&gt; 편한 것 쓰면 될듯</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#30-countmap에-none객체-존재--orelsenone가-있어야하는-이유---전체-갯수도-셀-수-있다">30 countMap에 NONE객체 존재 + orElse(NONE)가 있어야하는 이유 -&gt; 전체 갯수도 셀 수 있다.</a></li>
<li class="toc-entry toc-h4"><a href="#31-나눗셈하나-double의-test-return되는-것과-같이-구성해버리기">31 나눗셈(하나 double)의 Test return되는 것과 같이 구성해버리기</a></li>
<li class="toc-entry toc-h3"><a href="#단위가-정해져-있는-것의-포장-lottomoney-">단위가 정해져 있는 것의 포장( LottoMoney )</a>
<ul>
<li class="toc-entry toc-h4"><a href="#1-단위보다-작은지-검사---2--단위로-나눈-나머지-0-검사">(1) 단위보다 작은지 검사 -&gt; (2) % 단위로 나눈 나머지 !=0 검사</a></li>
<li class="toc-entry toc-h4"><a href="#32-대상의-필요성-확인후-포장-시작">32 대상의 필요성 확인후 포장 시작</a>
<ul>
<li class="toc-entry toc-h5"><a href="#test에서-포장-시작-정정-money---lottomoney-">Test에서 포장 시작( 정정: Money -&gt; LottoMoney )</a></li>
<li class="toc-entry toc-h5"><a href="#참고-포장으로-파라미터-달라지는-메테포장-자동생성-끌올--내용복붙후-새기준-vs-case늘릴려고-복사해서-만드는-테메메서드2테매-복-case반영-메서드2복--메서드2수정-메서드2통과--메서드1대체하여-삭제-등은-서로-다른-것">참고) 포장으로 파라미터 달라지는 메테(포장-&gt;자동생성-&gt;끌올-&gt; 내용복붙후 새기준) vs case늘릴려고 복사해서 만드는 테메+메서드2(테매 복-&gt;case반영-&gt;메서드2복 -&gt;메서드2수정-&gt;메서드2통과-&gt; 메서드1대체하여 삭제) 등..은 서로 다른 것</a></li>
<li class="toc-entry toc-h5"><a href="#생성한-예비-새-기준메서드를-기존메서드-위로-위치를-올린-뒤-내용-복붙---포장한-것으로-처리되도록---기존메서드는-포장용으로-변경">생성한 예비 새 기준메서드를 기존메서드 위로 위치를 올린 뒤, 내용 복붙 -&gt; 포장한 것으로 처리되도록 -&gt; 기존메서드는 포장용으로 변경</a></li>
<li class="toc-entry toc-h5"><a href="#새메서드의-내용을-포장된-것으로-바꿀-때-기존값getter로-대체해도-되지만---바로--기존값으로-연산---포장메서드---포장-내부에서-this값으로-연산하도록-처리해야한다">새메서드의 내용을 포장된 것으로 바꿀 때, 기존값.getter()로 대체해도 되지만 -&gt; 바로  [기존값으로 연산] -&gt; 포장.메서드() -&gt; 포장 내부에서 [this.값으로 연산]하도록 처리해야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#기존메서드는-내부에서-파라미터포장-새기준-호출만---기존내용은-다-삭제----회색으로-안쓰인다면-버려도-됨">기존메서드는 내부에서 파라미터포장+ 새기준 호출만 -&gt; 기존내용은 다 삭제 - &gt; 회색으로 안쓰인다면 버려도 됨.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#줄어드는-횟수count-vo의-포장정리용">줄어드는 횟수Count VO의 포장(정리용)</a></li>
<li class="toc-entry toc-h4"><a href="#33-countvo-hasnext패턴-가진-것--포장">33 count(VO, hasNext패턴 가진 것)  포장</a>
<ul>
<li class="toc-entry toc-h5"><a href="#미리-원시값도-줄어들-때-hasnext패턴을-만들어두었다">미리 원시값도 줄어들 때 hasNext패턴을 만들어두었다.</a></li>
<li class="toc-entry toc-h5"><a href="#메서드에서부터-파라미터로-전해지도록-count-포장-포장은-테매-인자에서부터-">메서드에서부터 파라미터로 전해지도록 Count 포장 (포장은 테매 인자에서부터~ )</a></li>
<li class="toc-entry toc-h5"><a href="#vo는-equalshc부터">VO는 equals/hC부터</a></li>
<li class="toc-entry toc-h5"><a href="#count-vo는-0까지는-허용해주도록-검증을-만든다-for-while문에서-0까지-간-뒤-0에서-탈출시킴">count VO는 0까지는 허용해주도록 검증을 만든다. (for while문에서 0까지 간 뒤 0에서 탈출시킴)</a></li>
<li class="toc-entry toc-h5"><a href="#새기준메서드-새로-만들어-기존메서드-위로-위치이동후-내용복붙후-처리">새기준메서드 새로 만들어, 기존메서드 위로 위치이동후, 내용복붙후, 처리</a></li>
<li class="toc-entry toc-h5"><a href="#값자리에는-포장getter를---연산이-할만하면-바로--메세지를">값자리에는 포장.getter()를 -&gt; 연산이 할만하면 바로  메세지를</a></li>
<li class="toc-entry toc-h5"><a href="#값의-연산---포장-안으로-잘라들고가서-this값으로-연산">값의 연산 -&gt; 포장 안으로 잘라들고가서 this.값으로 연산</a></li>
<li class="toc-entry toc-h5"><a href="#값의-재할당---vo에서는-연산만-들고-들어가면서-메서드를-만들고-포장--는-그대로-둔다-----내부에서는this값으로-연산한-뒤-에-대해-새vo로-응답하는--메세지로-작성한다">값의 재할당 -&gt; VO에서는 연산만 들고 들어가면서 메서드를 만들고, 포장 = 는 그대로 둔다. -&gt;   내부에서는this.값으로 연산한 뒤 =에 대해 새VO로 응답하는  [메세지]로 작성한다.</a></li>
<li class="toc-entry toc-h5"><a href="#연산을-들고들어갔더라도-바깥에서는-포장변수---이-새-vo응답을-기다리고-있으므로-내부연산-결과를-포장해서-응답해준다">연산을 들고들어갔더라도 바깥에서는 포장변수 =  이 새 VO응답을 기다리고 있으므로 내부연산 결과를 포장해서 응답해준다.</a></li>
<li class="toc-entry toc-h5"><a href="#포장전-기존메서드가-사용중이면-찾아가서-수정해준다">포장전 기존메서드가 사용중이면 찾아가서, 수정해준다.</a></li>
<li class="toc-entry toc-h5"><a href="#새-기준메서드-완성시-포장검증을-메서드로-퉁치는-테스트-1이하에서-에러">새 기준메서드 완성시, 포장검증을 메서드로 퉁치는 테스트(-1이하에서 에러)</a></li>
<li class="toc-entry toc-h5"><a href="#자체-도메인test생성후-count-vo-검사">자체 도메인Test생성후 Count VO 검사</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#랜덤구현---전략패턴으로-수동-더하기정리용">랜덤구현 -&gt; 전략패턴으로 수동 더하기(정리용)</a></li>
<li class="toc-entry toc-h4"><a href="#34-랜덤-최소단위-메서드를-전략메서드로-바꿔-수동도-가능하게-하기">34 [랜덤 최소단위 메서드]를 전략메서드로 바꿔 [수동]도 가능하게 하기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#전략부위가-만약-메서드화-안되어있으면ex조건식-메서드화-추출-등">전략부위가 만약, 메서드화 안되어있으면(ex&gt;조건식) 메서드화 (추출 등)</a></li>
<li class="toc-entry toc-h5"><a href="#랜덤-최소단위-메서드-정의부---호출부-찾기">랜덤 최소단위 메서드 정의부 -&gt; 호출()부 찾기</a></li>
<li class="toc-entry toc-h5"><a href="#랜덤전략객체전략메서드로----기존-랜덤-메서드-에-있던-랜덤-로직-옮겨주기">랜덤전략객체.전략메서드()로 &lt;- [ 기존 랜덤 메서드 ]에 있던 랜덤 로직 옮겨주기</a></li>
<li class="toc-entry toc-h5"><a href="#외부주입-전략객체를---외부파라미터로-받기-위해서---실제-전략인페-정의해주기">외부주입 전략객체를 -&gt; 외부파라미터로 받기 위해서 -&gt; 실제 전략인페 정의해주기</a></li>
<li class="toc-entry toc-h5"><a href="#new-외부전략객체-생성하던-곳으로-돌아가서----변수파라미터는-추상체로--외부주입-받아-추상체전략메서드하도록-한다">new 외부전략객체() 생성하던 곳으로 돌아가서  -&gt; 변수/파라미터는 추상체로  외부주입 받아, 추상체.전략메서드()하도록 한다.</a></li>
<li class="toc-entry toc-h5"><a href="#호출부-중-전략객체만-선택해서-파라미터로-추출">호출부 중 전략객체만 선택해서 파라미터로 추출</a></li>
<li class="toc-entry toc-h5"><a href="#처음에는-내부에서-특정-전략객체를-만들어썻찌만---파라미터-추출하면-알아서-외부에서-주입된다">처음에는 내부에서 특정 전략객체를 만들어썻찌만 -&gt; 파라미터 추출하면 알아서 외부에서 주입된다</a></li>
<li class="toc-entry toc-h5"><a href="#이제-전략인페를-impl-수동-구현만---tdd에서-수동메서드-완성해보자">이제 전략인페를 impl 수동 구현만 -&gt; TDD에서 수동메서드 완성해보자.</a></li>
<li class="toc-entry toc-h5"><a href="#대박-전략메서드-준비물을-메서드-인자가-아닌---각-전략별-전략객체-생성자정펙매에서-받아-준비해두자">대박) 전략메서드 준비물을 [메서드() 인자]가 아닌 -&gt; 각 전략별 [전략객체 생성자/정펙매]에서 받아 준비해두자</a></li>
<li class="toc-entry toc-h5"><a href="#초대박-테스트용-람다-전략은-전략객체-대신이-아니라-내부-전략메서호출될-응답까지를-미리-주는-것---테스트에서-내부랜덤결과전략메서드-응답type을-외부-객체주입시-넣어줄-수-있다">초대박) 테스트용 람다 전략은 전략객체 대신이 아니라 내부 전략메서호출()될 응답까지를 미리 주는 것 -&gt; 테스트에서 내부랜덤결과(전략메서드 응답type)을 외부 객체주입시 넣어줄 수 있다</a></li>
<li class="toc-entry toc-h5"><a href="#요약-전략객체-자리에-내부전략메서드호출-끝난-응답값까지-구현하여-전달하는-람다전략">요약: [전략객체 ]자리에 내부.전략메서드()호출 끝난 응답값까지 구현하여 전달하는 람다전략</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#횟수만큼-자동-로또-생성---횟수를-수동자동-나누어서-로또-생성">횟수만큼 자동 로또 생성 -&gt; 횟수를 수동+자동 나누어서 로또 생성</a>
<ul>
<li class="toc-entry toc-h4"><a href="#35-수동-로또를-input이-왔다고-치고-나눠서-수동--자동-생성하기">35 수동 로또를 input이 왔다고 치고, 나눠서 수동 + 자동 생성하기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#포장이-끝난-상태라면-메서드-파라미터-추가는--정제된-input보다는-포장된-것으로-추가해주자">포장이 끝난 상태라면, [메서드 파라미터 추가]는  정제된 input보다는 [포장]된 것으로 추가해주자.</a></li>
<li class="toc-entry toc-h5"><a href="#파라미터-변경하지말고-메서드를-새로-생성---기존메서드위로-가져와서-내용복붙후-처리">파라미터 변경하지말고, 메서드를 새로 생성 -&gt; 기존메서드위로 가져와서 내용복붙후 처리</a></li>
<li class="toc-entry toc-h5"><a href="#새-기준-메더드-완성시-기존메서드-사용처확인해서-삭제---메서드-이름-변경">새 기준 메더드 완성시, 기존메서드 사용처확인해서 삭제 -&gt; 메서드 이름 변경</a></li>
<li class="toc-entry toc-h5"><a href="#생성된-전체로또가-수동로또-포함하는지-테스트-하기">생성된 전체로또가 수동로또 포함하는지 테스트 하기</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul><h3 id="캐슁">
<a class="anchor" href="#%EC%BA%90%EC%8A%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>캐슁</h3>

<h4 id="19-싱글톤을-이용한-단일객체-cache-적용과-tdd">
<a class="anchor" href="#19-%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8B%A8%EC%9D%BC%EA%B0%9D%EC%B2%B4-cache-%EC%A0%81%EC%9A%A9%EA%B3%BC-tdd" aria-hidden="true"><span class="octicon octicon-link"></span></a>19 싱글톤을 이용한 [단일객체 CACHE] 적용과 TDD</h4>

<h5 id="싱글톤을-이용한-cache-생성-2가지-방법정리용">
<a class="anchor" href="#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-cache-%EC%83%9D%EC%84%B1-2%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95%EC%A0%95%EB%A6%AC%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>싱글톤을 이용한 CACHE 생성 2가지 방법(정리용)</h5>

<ol>
  <li>
    <p>싱글톤 생성 방법</p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">static final</code>으로 <code class="language-plaintext highlighter-rouge">클래스 CACHE변수;</code> 선언</p>

        <ul>
          <li>바로 옆에서  <code class="language-plaintext highlighter-rouge">= </code> 할당하며 초기화 or <strong>길어서</strong> <code class="language-plaintext highlighter-rouge">static { 클래스변수 = }</code> <strong>블럭(final도 가능)에서 초기화</strong>
            <ul>
              <li>바로 초기화하든, static블럭에서 초기화하든 <strong>null이 아닌 상태의 캐쉬변수</strong>
</li>
            </ul>
          </li>
          <li>
<strong>이후 <code class="language-plaintext highlighter-rouge">정팩메</code>로만</strong> <code class="language-plaintext highlighter-rouge">생성된 CACHE객체</code> or <code class="language-plaintext highlighter-rouge">생성된 CACHE자료구조에서 1개만 get</code>하여  제공
            <ul>
              <li><strong>이후 기본생성자는 CACHE 최초 초기화하며 채울때만 사용됨</strong></li>
            </ul>
          </li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">LOTTO_NUMBER_CACHE</span><span class="o">;</span>
        
 <span class="kd">static</span> <span class="o">{</span>
     <span class="no">LOTTO_NUMBER_CACHE</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="no">LOTTO_NUMBER_MIN</span><span class="o">,</span> <span class="no">LOTTO_NUMBER_MAX</span><span class="o">)</span>
         <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
         <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span><span class="o">,</span> <span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">));</span>
 <span class="o">}</span>
        
 <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>
        
 <span class="kd">public</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">this</span><span class="o">.</span><span class="na">number</span> <span class="o">=</span> <span class="n">inputNumber</span><span class="o">;</span>
 <span class="o">}</span>
        
 <span class="kd">public</span> <span class="kd">static</span> <span class="nc">LottoNumber</span> <span class="nf">from</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">inputNumber</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">inputNumber</span><span class="o">);</span>
     <span class="n">validateLottoNumberRange</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
     <span class="k">return</span> <span class="no">LOTTO_NUMBER_CACHE</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">static</code>으로 <code class="language-plaintext highlighter-rouge">클래스 CACHE변수;</code> 선언 (<strong>no final</strong>)</p>

        <ul>
          <li>
            <p><strong><code class="language-plaintext highlighter-rouge">이후 정팩메에 synchronized</code>달아주고</strong></p>
          </li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">정펙매</code>내부에서</strong> 초기화 한번도 안된 <strong>최초 <code class="language-plaintext highlighter-rouge">if (CACHE == null) 상태의 캐쉬변수</code>일 때만,</strong> <code class="language-plaintext highlighter-rouge">기본생성자로 CACHE변수 초기화</code>
</li>
          <li>
<strong><code class="language-plaintext highlighter-rouge">정펙매</code>로만</strong>  <code class="language-plaintext highlighter-rouge">생성된 CACHE객체</code> or <code class="language-plaintext highlighter-rouge">생성된 CACHE자료구조에서 1개만 get</code>하여  제공</li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">LOTTO_NUMBER_CACHE</span><span class="o">;</span>
 <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span><span class="o">;</span>
        
 <span class="kd">private</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">checkNumberRightRange</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
     <span class="k">this</span><span class="o">.</span><span class="na">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">;</span>
 <span class="o">}</span>
        
 <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="nc">LottoNumber</span> <span class="nf">valueOf</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">checkNumberRightRange</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
     <span class="k">if</span> <span class="o">(</span><span class="no">LOTTO_NUMBER_CACHE</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
         <span class="no">LOTTO_NUMBER_CACHE</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="no">MIN_LOTTO_NUMBER</span><span class="o">,</span> <span class="no">MAX_LOTTO_NUMBER</span><span class="o">)</span>
             <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
             <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">lottoNumber</span> <span class="o">-&gt;</span> <span class="n">lottoNumber</span><span class="o">,</span> <span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">));</span>
     <span class="o">}</span>
     <span class="k">return</span> <span class="no">LOTTO_NUMBER_CACHE</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h5 id="test에서부터-빨간줄로-넘어가---캐쉬-적용하기">
<a class="anchor" href="#test%EC%97%90%EC%84%9C%EB%B6%80%ED%84%B0-%EB%B9%A8%EA%B0%84%EC%A4%84%EB%A1%9C-%EB%84%98%EC%96%B4%EA%B0%80---%EC%BA%90%EC%89%AC-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test에서부터 빨간줄로 넘어가 -&gt; 캐쉬 적용하기</h5>

<ol>
  <li>
    <p><strong>캐쉬로 받아먹으려면 <code class="language-plaintext highlighter-rouge">싱글톤 받아주는 정펙매(getInstance())</code>로만 가져와야한다.</strong></p>

    <ul>
      <li>네이밍을 그렇게 했어도 <strong><code class="language-plaintext highlighter-rouge">기본 생성자에 넣어줄 파라미터</code>도 받아야한다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308230247397.png" alt="image-20220308230247397">
</li>
    </ul>
  </li>
  <li>
    <p>싱글톤의 <strong>동시성 잇슈를 처리하기 위해 <code class="language-plaintext highlighter-rouge">synchronized</code>를</strong> 접근제한자 &lt;-&gt; static 사이에 넣어준다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308230318968.png" alt="image-20220308230318968"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>앞으로 <code class="language-plaintext highlighter-rouge">정펙매</code>로만 제공되어야하므로 <code class="language-plaintext highlighter-rouge">도메인 검증</code>을 여기로 옮기자.</strong></p>

    <ul>
      <li>기존 도메인테스트가 <code class="language-plaintext highlighter-rouge">new 기본생성자()</code>로 진행되어있으니, 그냥 두고 -&gt;
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">맨 나중에 도메인검증을 정팩메코드로 + 기본생성자는 private + 검증은 삭제하도록 수정하자.</code></strong>.</li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// 지금은 임시로 살려둔다. 테스트를 나중에 바꿀 때 private로 변경 + 검증삭제</span>
     <span class="n">validate</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
     <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
 <span class="o">}</span>
    
 <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">//2. 검증은 여기로 옮긴다. 왜냐면, 앞으로 CACHE정팩메로만 제공될 것이기 때문.</span>
     <span class="c1">//   - 정적안에 들어가므로 검증메서드가 static으로 바뀐다. </span>
     <span class="n">validate</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">CACHE</code>의 <strong>static변수 선언을 직접 안하고 빨간줄생성</strong> 하기 위해,</p>

    <ul>
      <li>빨간줄로 <code class="language-plaintext highlighter-rouge">if ( == null )</code>부터 <code class="language-plaintext highlighter-rouge">static 초기화</code> 를 작성해줬다.
        <ul>
          <li>
<strong><code class="language-plaintext highlighter-rouge">기본생성자</code>는 이제 여기 캐쉬생성에서만 이용되어야한다.</strong>
            <ul>
              <li>원래는 private으로 바꾸고, TEST다 처내야함.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>static 메서드 내 자동 생성시 constant = static final이므로 그냥 <code class="language-plaintext highlighter-rouge">field -&gt; static</code>필드로 생성하자.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308232128686.png" alt="image-20220308232128686">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308232148140.png" alt="image-20220308232148140">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308232253457.png" alt="image-20220308232253457">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220308232419786.png" alt="image-20220308232419786"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoNumber</span> <span class="o">{</span>
    
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MIN</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX</span> <span class="o">=</span> <span class="mi">45</span><span class="o">;</span>
     <span class="c1">// 자동 생성한 CACHE field (static)</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">CACHE</span><span class="o">;</span>
    
     <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="n">validate</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
         <span class="c1">//3. 캐쉬로 제공될 static 변수;  만 선언하고 -&gt; if null일 때 = 최초에만 초기화 시켜준다.</span>
         <span class="c1">// - Map으로 만들거면</span>
         <span class="c1">// - 중간에 .map( number -&gt; )없이 맨 나중에 toMap으로 만들면 된다.</span>
         <span class="c1">// - intStream은 Integer가 아니다. toMap에 들어가려면 .boxed() 먼저 해주고 들어가야한다.</span>
         <span class="c1">// - toMap의 2번쨰 인자는 method reference만 사용 가능하다. new LottoNumber(Number하니 안되더라)</span>
         <span class="k">if</span> <span class="o">(</span><span class="no">CACHE</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
             <span class="no">CACHE</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="no">MIN</span><span class="o">,</span> <span class="no">MAX</span><span class="o">)</span>
                 <span class="c1">//.map( number -&gt; )</span>
                 <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
                 <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span><span class="o">,</span> <span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">));</span>
         <span class="o">}</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">정팩메</code>에서 <code class="language-plaintext highlighter-rouge">캐쉬객체</code> or <code class="language-plaintext highlighter-rouge">캐쉬 자료구조.get()</code>한 것을 응답해준다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="nc">LottoNumber</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">validate</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
     <span class="k">if</span> <span class="o">(</span><span class="no">CACHE</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
         <span class="no">CACHE</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="no">MIN</span><span class="o">,</span> <span class="no">MAX</span><span class="o">)</span>
             <span class="o">.</span><span class="na">boxed</span><span class="o">()</span>
             <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">number</span> <span class="o">-&gt;</span> <span class="n">number</span><span class="o">,</span> <span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">));</span>
     <span class="o">}</span>
    
     <span class="c1">// 제공은 이제 기본생성자가 아닌, CACHE에서 제공해준다.</span>
     <span class="k">return</span> <span class="no">CACHE</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="검증이-넘어간-캐쉬-정팩메로-생성-테스트로-마무리">
<a class="anchor" href="#%EA%B2%80%EC%A6%9D%EC%9D%B4-%EB%84%98%EC%96%B4%EA%B0%84-%EC%BA%90%EC%89%AC-%EC%A0%95%ED%8C%A9%EB%A9%94%EB%A1%9C-%EC%83%9D%EC%84%B1-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A1%9C-%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>검증이 넘어간 캐쉬 정팩메로 생성 테스트로 마무리</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">cache_create</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="갯수만큼-일급list-생성---메인로직이-도메인-생성이라-static-일급factory-를-거치도록--기능-분리">
<a class="anchor" href="#%EA%B0%AF%EC%88%98%EB%A7%8C%ED%81%BC-%EC%9D%BC%EA%B8%89list-%EC%83%9D%EC%84%B1---%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9D%B4-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1%EC%9D%B4%EB%9D%BC-static-%EC%9D%BC%EA%B8%89factory-%EB%A5%BC-%EA%B1%B0%EC%B9%98%EB%8F%84%EB%A1%9D--%EA%B8%B0%EB%8A%A5-%EB%B6%84%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>갯수만큼 <code class="language-plaintext highlighter-rouge">일급&lt;List&gt; 생성</code> -&gt; <code class="language-plaintext highlighter-rouge">메인로직이 도메인 생성</code>이라 static <code class="language-plaintext highlighter-rouge">일급Factory </code>를 거치도록  기능 분리</h3>

<ul>
  <li>static Service는 <strong>재료를 받아 메인로직의 흐름을 호출 및 처리한다.</strong>
    <ul>
      <li>**일급생성은 일급 생성자에서 하면 되지만, <code class="language-plaintext highlighter-rouge">일급List 생성 with Money만큼</code>은 단순히 한번 더 포장하는 것보다 복잡하다. **
        <ul>
          <li>
<strong>도메인 생성 로직을 서비스가 아닌<code class="language-plaintext highlighter-rouge">도메인Factory.메서드()</code>를 거친 뒤 -&gt;  <code class="language-plaintext highlighter-rouge">그 응답값(일급의 리스트)</code>을  필요에 따라 포장</strong>하던지 해야한다.</li>
        </ul>
      </li>
      <li><strong><code class="language-plaintext highlighter-rouge">도메인 생성</code>의 역할이므로 <code class="language-plaintext highlighter-rouge">service로직</code>이 아니라 <code class="language-plaintext highlighter-rouge">도메인 로직</code>쪽이라 서비스는 호출만 해준다.</strong></li>
    </ul>
  </li>
  <li>앞으로 <strong>생성의 방법이 여러갈래 (Manual/Auto)로 외부에서 주입될 가능성이 높아도 <code class="language-plaintext highlighter-rouge">도메인Factory</code>에서 외부 생성타입 주입을 받아주는 역할</strong>을 해준다.</li>
</ul>

<h4 id="20-service에서-복잡한-도메인-생성-갯수만큼-일급list--생성을-호출한다면-service에서-호출해주는--정적static한-도메인facotry가--도메인로직으로서-생성을-담당한다">
<a class="anchor" href="#20-service%EC%97%90%EC%84%9C-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1-%EA%B0%AF%EC%88%98%EB%A7%8C%ED%81%BC-%EC%9D%BC%EA%B8%89list--%EC%83%9D%EC%84%B1%EC%9D%84-%ED%98%B8%EC%B6%9C%ED%95%9C%EB%8B%A4%EB%A9%B4-service%EC%97%90%EC%84%9C-%ED%98%B8%EC%B6%9C%ED%95%B4%EC%A3%BC%EB%8A%94--%EC%A0%95%EC%A0%81static%ED%95%9C-%EB%8F%84%EB%A9%94%EC%9D%B8facotry%EA%B0%80--%EB%8F%84%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9C%BC%EB%A1%9C%EC%84%9C-%EC%83%9D%EC%84%B1%EC%9D%84-%EB%8B%B4%EB%8B%B9%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>20 Service에서 복잡한 도메인 생성( <code class="language-plaintext highlighter-rouge">갯수만큼 일급List</code>  생성)을 호출한다면, service에서 호출해주는  정적Static한 <code class="language-plaintext highlighter-rouge">도메인Facotry</code>가  도메인로직으로서 생성을 담당한다.</h4>

<h5 id="service에서-생성로직을-호출하되-메서드는-factory가-가져간다-가장-정제된-원시type을-인자로-받는다">
<a class="anchor" href="#service%EC%97%90%EC%84%9C-%EC%83%9D%EC%84%B1%EB%A1%9C%EC%A7%81%EC%9D%84-%ED%98%B8%EC%B6%9C%ED%95%98%EB%90%98-%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-factory%EA%B0%80-%EA%B0%80%EC%A0%B8%EA%B0%84%EB%8B%A4-%EA%B0%80%EC%9E%A5-%EC%A0%95%EC%A0%9C%EB%90%9C-%EC%9B%90%EC%8B%9Ctype%EC%9D%84-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8A%94%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service에서 생성로직을 호출하되, 메서드는 Factory가 가져간다. 가장 정제된 원시Type을 인자로 받는다.</h5>

<ul>
  <li>
    <p>사정상 여기선 정제된input으로 <strong><code class="language-plaintext highlighter-rouge">new LottoMonety(3000)</code>의 포장도메인 대신 <code class="language-plaintext highlighter-rouge">장제된 원시값</code>인 <code class="language-plaintext highlighter-rouge">3000</code>(원)을 인자로</strong> 넣어준다.</p>

    <ul>
      <li>**원래는 new LottoMoney(도메인)을 넣어줘야하는데, <code class="language-plaintext highlighter-rouge">도메인 클래스 포장은 나중</code>에 하고 <code class="language-plaintext highlighter-rouge">정제된 input을 가정하고 원시값으로 호출</code>해서 점점 포장해나가므로 **
        <ul>
          <li><strong><code class="language-plaintext highlighter-rouge">가장 원시값을</code>  [포장도메인VO 입력  -&gt; 도메인.getter를 내부에 호출하는] 대신  <code class="language-plaintext highlighter-rouge">바로 쓸 수 있는 원시값을 파라미터로 일단</code> 제공해서 생성한다.</strong></li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309202144837.png" alt="image-20220309202144837"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">issue_lotto_by_money</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoney</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="실제-serivce내-도메인-생성관련-모든-로직은-도메인내부or도메인factory에-일임시킨다">
<a class="anchor" href="#%EC%8B%A4%EC%A0%9C-serivce%EB%82%B4-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1%EA%B4%80%EB%A0%A8-%EB%AA%A8%EB%93%A0-%EB%A1%9C%EC%A7%81%EC%9D%80-%EB%8F%84%EB%A9%94%EC%9D%B8%EB%82%B4%EB%B6%80or%EB%8F%84%EB%A9%94%EC%9D%B8factory%EC%97%90-%EC%9D%BC%EC%9E%84%EC%8B%9C%ED%82%A8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>실제 Serivce내 <code class="language-plaintext highlighter-rouge">도메인 생성관련 모든 로직</code>은 <code class="language-plaintext highlighter-rouge">도메인내부or도메인Factory에 일임</code>시킨다.</h5>

<ol>
  <li>
    <p>Service내에서 <code class="language-plaintext highlighter-rouge">class</code>부터 생성해야한다면</p>

    <ol>
      <li>class -&gt; classTest -&gt; <strong><code class="language-plaintext highlighter-rouge">classTest에서 메서드 빨간줄 생성</code> -&gt; 메서드생성</strong>
</li>
    </ol>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309202906763.png" alt="image-20220309202906763"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// input으로 money -&gt; money에게 횟수로 치면 몇번이냐 물어볼 예정임.</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">money</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
    
     <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueByCount</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="메서드-생성이-컨셉과-파라미터가-잡힌-경우는-프로덕션-빨간줄로-생성하되-classtest-빨간줄까지-가서-메서드-생성-완료하기">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1%EC%9D%B4-%EC%BB%A8%EC%85%89%EA%B3%BC-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EA%B0%80-%EC%9E%A1%ED%9E%8C-%EA%B2%BD%EC%9A%B0%EB%8A%94-%ED%94%84%EB%A1%9C%EB%8D%95%EC%85%98-%EB%B9%A8%EA%B0%84%EC%A4%84%EB%A1%9C-%EC%83%9D%EC%84%B1%ED%95%98%EB%90%98-classtest-%EB%B9%A8%EA%B0%84%EC%A4%84%EA%B9%8C%EC%A7%80-%EA%B0%80%EC%84%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1-%EC%99%84%EB%A3%8C%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드 생성이 [컨셉과 파라미터가 잡힌 경우]는 프로덕션 빨간줄로 생성하되 <code class="language-plaintext highlighter-rouge">ClassTest 빨간줄</code>까지 가서 <code class="language-plaintext highlighter-rouge">메서드 생성 완료</code>하기!</h5>

<ul>
  <li>
    <p><strong>메서드 생성을 프로덕션</strong>에서 해야할 경우, <strong>컨셉과 파라미터가 잡힌 경우, Test에서 메서드 생성하기가 쉽지 않다.</strong></p>

    <ul>
      <li>
        <p>프로덕션에서 <code class="language-plaintext highlighter-rouge">메서드의 컨셉과 파라미터가 잡힌 경우</code> -&gt; <strong><code class="language-plaintext highlighter-rouge">프로덕션 빨간줄로 메서드 생성</code>하되 <code class="language-plaintext highlighter-rouge">ClassTest-&gt;해당 메서드호출</code>까지 작성 완료한다.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309203014315.png" alt="image-20220309203014315"></p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">클래스 생성후 바로 ClassTest</code>생성 -&gt; <code class="language-plaintext highlighter-rouge">생성 원하는 메서드 호출까지 완료</code>한 뒤 로직 작성할 것</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309203222763.png" alt="image-20220309203222763">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204021371.png" alt="image-20220309204021371"></p>
      </li>
    </ul>
  </li>
</ul>

<h5 id="갯수raw숫자만큼-반복로직은-vo로-바뀔-것-대비-틀을-잡아-while로-돌리기">
<a class="anchor" href="#%EA%B0%AF%EC%88%98raw%EC%88%AB%EC%9E%90%EB%A7%8C%ED%81%BC-%EB%B0%98%EB%B3%B5%EB%A1%9C%EC%A7%81%EC%9D%80-vo%EB%A1%9C-%EB%B0%94%EB%80%94-%EA%B2%83-%EB%8C%80%EB%B9%84-%ED%8B%80%EC%9D%84-%EC%9E%A1%EC%95%84-while%EB%A1%9C-%EB%8F%8C%EB%A6%AC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[갯수(raw숫자)만큼 반복로직]은 VO로 바뀔 것 대비 [틀을 잡아 while로 돌리기]</h5>

<ul>
  <li>
    <p><strong>차후 미래에</strong> VO로 포장시</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Count</span> <span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Count</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
    
      <span class="k">while</span> <span class="o">(</span><span class="n">count</span><span class="o">.</span><span class="na">isNotFinished</span><span class="o">())</span> <span class="o">{</span>
          <span class="n">count</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
          <span class="c1">// 반복되는 단일로직 issueLotto</span>
    
      <span class="o">}</span>
    
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>현재</p>

    <ul>
      <li>VO count를 0까지 허용하면서, 깍아내려가다가, 0일 때, 튕겨나가게 할 것이다.</li>
      <li>그전까진 내부에서 1개씩 깍으면서 반복하기</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">count</span><span class="o">-=</span><span class="mi">1</span><span class="o">;</span>
          <span class="c1">// 반복되는 단일 로직 issueLotto</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204339531.png" alt="image-20220309204339531">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204427219.png" alt="image-20220309204427219"></p>
  </li>
</ul>

<h5 id="내부에서-정의될--1개당-도메인-생성로직도-도메인factory내-메서드로-정의">
<a class="anchor" href="#%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%A0%95%EC%9D%98%EB%90%A0--1%EA%B0%9C%EB%8B%B9-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1%EB%A1%9C%EC%A7%81%EB%8F%84-%EB%8F%84%EB%A9%94%EC%9D%B8factory%EB%82%B4-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>내부에서 정의될,  [1개당 도메인 생성]로직도 도메인Factory내 메서드로 정의</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">프로덕션내 메서드 정의</code> 해야한다면, <strong><code class="language-plaintext highlighter-rouge">빨간줄 생성후 ClassTest에서 메서드 호출까지 완료</code>해라고 했다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204551443.png" alt="image-20220309204551443">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204622940.png" alt="image-20220309204622940"></p>
  </li>
</ol>

<h5 id="프로덕션빨간줄-생성이라면---private이라도-public수정후-testgenerate로-classtest-생성---메서드호출까지-완료-시키기">
<a class="anchor" href="#%ED%94%84%EB%A1%9C%EB%8D%95%EC%85%98%EB%B9%A8%EA%B0%84%EC%A4%84-%EC%83%9D%EC%84%B1%EC%9D%B4%EB%9D%BC%EB%A9%B4---private%EC%9D%B4%EB%9D%BC%EB%8F%84-public%EC%88%98%EC%A0%95%ED%9B%84-testgenerate%EB%A1%9C-classtest-%EC%83%9D%EC%84%B1---%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C%EA%B9%8C%EC%A7%80-%EC%99%84%EB%A3%8C-%EC%8B%9C%ED%82%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>프로덕션빨간줄 생성이라면 -&gt; private이라도 public수정후 <code class="language-plaintext highlighter-rouge">Test</code>Generate로 ClassTest 생성 -&gt; 메서드호출까지 완료 시키기</h5>

<ol>
  <li>
    <p>메서드의 접근제한자를 private -&gt; <code class="language-plaintext highlighter-rouge">public</code>으로 수정</p>

    <ul>
      <li>나중에 다 public 메서드들 조사하면 될 듯 -&gt; 테스트에서만 사용시 삭제or Private화 시키면 될 듯</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204855596.png" alt="image-20220309204855596">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309204953373.png" alt="image-20220309204953373">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309205001262.png" alt="image-20220309205001262"></p>
  </li>
  <li>
    <p>private -&gt; public 수정후에는 Test메서드로 자동생성 됨.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309205032341.png" alt="image-20220309205032341"></p>
  </li>
  <li>
    <p>생성된 테메에서 <strong>메서드 호출까지 완료</strong>하자</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309205133875.png" alt="image-20220309205133875"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309205149786.png" alt="image-20220309205149786"></p>
  </li>
</ol>

<h4 id="21-cache된-단일-객체는---static한-도메인factory의-static--블럭에서-미리-뽑아놓을-수-있다">
<a class="anchor" href="#21-cache%EB%90%9C-%EB%8B%A8%EC%9D%BC-%EA%B0%9D%EC%B2%B4%EB%8A%94---static%ED%95%9C-%EB%8F%84%EB%A9%94%EC%9D%B8factory%EC%9D%98-static--%EB%B8%94%EB%9F%AD%EC%97%90%EC%84%9C-%EB%AF%B8%EB%A6%AC-%EB%BD%91%EC%95%84%EB%86%93%EC%9D%84-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>21 CACHE된 단일 객체는 -&gt; Static한 [도메인Factory]의 Static {} 블럭에서 미리 뽑아놓을 수 있다.</h4>

<h5 id="재료가-되는-도메인은-의존갖다써도상수는-public으로-바꿔써도-된다">
<a class="anchor" href="#%EC%9E%AC%EB%A3%8C%EA%B0%80-%EB%90%98%EB%8A%94-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%80-%EC%9D%98%EC%A1%B4%EA%B0%96%EB%8B%A4%EC%8D%A8%EB%8F%84%EC%83%81%EC%88%98%EB%8A%94-public%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%8D%A8%EB%8F%84-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>재료가 되는 도메인은 의존/갖다써도/상수는 public으로 바꿔써도 된다.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309210020472.png" alt="image-20220309210020472"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoFactory</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="c1">//1. Factory는 재료도메인을 의존해서 사용해도 된다.</span>
        <span class="c1">// -&gt; 재료 도메인내 상수를 public으로 바꿔서 Facotry에서 같이 쓰자.</span>

        <span class="c1">//2. 캐쉬된 것들을 static 블록에 다 모아놓는다. (랜덤구현은 [메서드 호출시 shffle + subList]</span>
        <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MIN</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MAX</span><span class="o">)</span>
            <span class="o">.</span><span class="na">mapToObj</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">it</span><span class="o">))</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>
</code></pre></div></div>

<h5 id="suffle과-sublist를-통한-랜덤구현을-위해-미리cache된-재료만-다-static블럭에서-준비한다">
<a class="anchor" href="#suffle%EA%B3%BC-sublist%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%9E%9C%EB%8D%A4%EA%B5%AC%ED%98%84%EC%9D%84-%EC%9C%84%ED%95%B4-%EB%AF%B8%EB%A6%ACcache%EB%90%9C-%EC%9E%AC%EB%A3%8C%EB%A7%8C-%EB%8B%A4-static%EB%B8%94%EB%9F%AD%EC%97%90%EC%84%9C-%EC%A4%80%EB%B9%84%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>suffle과 subList를 통한 랜덤구현을 위해 []<code class="language-plaintext highlighter-rouge">미리</code>CACHE된 재료만 다 <code class="language-plaintext highlighter-rouge">static{}블럭</code>]에서 준비한다.</h5>

<ol>
  <li>
    <p>준비물들을 미리 뽑아놓고 -&gt; <strong><code class="language-plaintext highlighter-rouge">상수 추출</code>을 한다.</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309210612366.png" alt="image-20220309210612366">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309210617465.png" alt="image-20220309210617465"></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">split  선언 &lt;-&gt; 초기화</code>시키면 알아서 <strong><code class="language-plaintext highlighter-rouge">static블럭</code>에서 초기화시켜 미리 준비</strong>되도록 한다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309210740340.png" alt="image-20220309210740340"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309210648772.png" alt="image-20220309210648772"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoFactory</span> <span class="o">{</span>
    
    
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">LOTTO_NUMBERS</span><span class="o">;</span>
    
     <span class="kd">static</span> <span class="o">{</span>
         <span class="no">LOTTO_NUMBERS</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MIN</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MAX</span><span class="o">)</span>
             <span class="o">.</span><span class="na">mapToObj</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">it</span><span class="o">))</span>
             <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
     <span class="o">}</span>
        
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="21-정해진-갯수에서-일부-랜덤이다---정해진-갯수-셔플--sublistor-limit으로-랜덤을-구현">
<a class="anchor" href="#21-%EC%A0%95%ED%95%B4%EC%A7%84-%EA%B0%AF%EC%88%98%EC%97%90%EC%84%9C-%EC%9D%BC%EB%B6%80-%EB%9E%9C%EB%8D%A4%EC%9D%B4%EB%8B%A4---%EC%A0%95%ED%95%B4%EC%A7%84-%EA%B0%AF%EC%88%98-%EC%85%94%ED%94%8C--sublistor-limit%EC%9C%BC%EB%A1%9C-%EB%9E%9C%EB%8D%A4%EC%9D%84-%EA%B5%AC%ED%98%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>21 정해진 갯수에서 일부 랜덤이다? -&gt; 정해진 갯수 셔플 + subList(or .limit)으로 랜덤을 구현</h4>

<ol>
  <li>
    <p>CACHE(static 싱글톤)을 이용한 <strong>static {}블럭에 준비된 랜덤준비물들을</strong> <code class="language-plaintext highlighter-rouge">랜덤이 필요한곳</code>에서 <code class="language-plaintext highlighter-rouge">shuffle + subList or .limit</code>으로 구현하기</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Lotto</span> <span class="nf">issueLotto</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//3. [랜덤한 6개 뽑기] 구현을 [미리 준비된 cache 들] -&gt; shuffle &amp;&amp; 일부뽑기로 구현한다.</span>
     <span class="nc">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">);</span>
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                      <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
                      <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="random한-일급-테스트----getter후-size--제한된-범위단일객체의-경계값-검사">
<a class="anchor" href="#random%ED%95%9C-%EC%9D%BC%EA%B8%89-%ED%85%8C%EC%8A%A4%ED%8A%B8----getter%ED%9B%84-size--%EC%A0%9C%ED%95%9C%EB%90%9C-%EB%B2%94%EC%9C%84%EB%8B%A8%EC%9D%BC%EA%B0%9D%EC%B2%B4%EC%9D%98-%EA%B2%BD%EA%B3%84%EA%B0%92-%EA%B2%80%EC%82%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>random한 일급 테스트 -&gt;  getter후 size + 제한된 범위(단일객체의 경계값) 검사</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">issueLotto_count</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">lotto</span> <span class="o">=</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">lotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">issueLotto_range</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">lotto</span> <span class="o">=</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">();</span>
    <span class="kd">final</span> <span class="nc">ListIterator</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">lottoNumberIterator</span> <span class="o">=</span> <span class="n">lotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">listIterator</span><span class="o">();</span>

    <span class="k">while</span> <span class="o">(</span><span class="n">lottoNumberIterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">lottoNumberIterator</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">.</span><span class="na">isGreaterThanOrEqualTo</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span>
            <span class="o">.</span><span class="na">isLessThanOrEqualTo</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="mi">45</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="22-다시-횟수만큼-반복되는-도메인생성-메서드-처리">
<a class="anchor" href="#22-%EB%8B%A4%EC%8B%9C-%ED%9A%9F%EC%88%98%EB%A7%8C%ED%81%BC-%EB%B0%98%EB%B3%B5%EB%90%98%EB%8A%94-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%83%9D%EC%84%B1-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>22 다시 [횟수만큼 반복되는 도메인생성] 메서드 처리</h4>

<ul>
  <li>
    <p>단일 생성의 테스트를 마쳤다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">();</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="2번-이상의-add라면-지역변수-가변-new-arraylist에-add해서-반환">
<a class="anchor" href="#2%EB%B2%88-%EC%9D%B4%EC%83%81%EC%9D%98-add%EB%9D%BC%EB%A9%B4-%EC%A7%80%EC%97%AD%EB%B3%80%EC%88%98-%EA%B0%80%EB%B3%80-new-arraylist%EC%97%90-add%ED%95%B4%EC%84%9C-%EB%B0%98%ED%99%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>2번 이상의 add라면, 지역변수 가변 new ArrayList에 add해서 반환</h5>

<ul>
  <li>
    <p>count만큼 반복해서 로또 발급후 add해서 반환해야한다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    
      <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">());</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>테스트에서, 랜덤한 3개 로또 발급에 대해 갯수정도만 테스트한다.</p>

    <ul>
      <li>단일 생성 테스트보다 더 밑으로 테스트를 옮겨주자.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">issue_by_count</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">issue_by_count</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
    
      <span class="n">assertThat</span><span class="o">(</span><span class="n">lottos</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="23-다시-service로-돌아와-응답값-만들고---메서드-퉁-테스트">
<a class="anchor" href="#23-%EB%8B%A4%EC%8B%9C-service%EB%A1%9C-%EB%8F%8C%EC%95%84%EC%99%80-%EC%9D%91%EB%8B%B5%EA%B0%92-%EB%A7%8C%EB%93%A4%EA%B3%A0---%EB%A9%94%EC%84%9C%EB%93%9C-%ED%89%81-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>23 다시 Service로 돌아와 응답값 만들고 -&gt; 메서드 퉁 테스트</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// input으로 money -&gt; money에게 횟수로 치면 몇번이냐 물어볼 예정임.</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">money</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>

    <span class="k">return</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">issue_lotto_by_money</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoney</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">lottos</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3000</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="서비스의-메인로직-진행-중-추가-로직비교검증이-발생하는데-도메인의-영역이라면---대상들을-포장에-포장이라도-새로운-도메인으로">
<a class="anchor" href="#%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%98-%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81-%EC%A7%84%ED%96%89-%EC%A4%91-%EC%B6%94%EA%B0%80-%EB%A1%9C%EC%A7%81%EB%B9%84%EA%B5%90%EA%B2%80%EC%A6%9D%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94%EB%8D%B0-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%98-%EC%98%81%EC%97%AD%EC%9D%B4%EB%9D%BC%EB%A9%B4---%EB%8C%80%EC%83%81%EB%93%A4%EC%9D%84-%ED%8F%AC%EC%9E%A5%EC%97%90-%ED%8F%AC%EC%9E%A5%EC%9D%B4%EB%9D%BC%EB%8F%84-%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9C%BC%EB%A1%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>서비스의 메인로직 진행 중 <code class="language-plaintext highlighter-rouge">추가 로직(비교&amp;검증)이 발생</code>하는데, <code class="language-plaintext highlighter-rouge">도메인의 영역</code>이라면? -&gt; 대상들을 <code class="language-plaintext highlighter-rouge">포장에 포장이라도 새로운 도메인</code>으로</h3>

<h4 id="24--service메서드-파라미터들의-검증로직에-의한-개별-포장-끝났는데-또-추가-검증-로직이-서비스에--늘날려고-한다">
<a class="anchor" href="#24--service%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%93%A4%EC%9D%98-%EA%B2%80%EC%A6%9D%EB%A1%9C%EC%A7%81%EC%97%90-%EC%9D%98%ED%95%9C-%EA%B0%9C%EB%B3%84-%ED%8F%AC%EC%9E%A5-%EB%81%9D%EB%82%AC%EB%8A%94%EB%8D%B0-%EB%98%90-%EC%B6%94%EA%B0%80-%EA%B2%80%EC%A6%9D-%EB%A1%9C%EC%A7%81%EC%9D%B4-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90--%EB%8A%98%EB%82%A0%EB%A0%A4%EA%B3%A0-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>24  Service메서드 [파라미터들의 검증로직에 의한 개별 포장] 끝났는데, 또 [추가 검증 로직]이 서비스에  늘날려고 한다?</h4>

<h5 id="포장된-일급과-단일의-검증인데도-또-포장">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EB%90%9C-%EC%9D%BC%EA%B8%89%EA%B3%BC-%EB%8B%A8%EC%9D%BC%EC%9D%98-%EA%B2%80%EC%A6%9D%EC%9D%B8%EB%8D%B0%EB%8F%84-%EB%98%90-%ED%8F%AC%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장된 <code class="language-plaintext highlighter-rouge">일급과 단일</code>의 검증인데도 또 <code class="language-plaintext highlighter-rouge">포장</code>?</h5>

<ol>
  <li>**당첨로또와 보너스볼 번호는 <code class="language-plaintext highlighter-rouge">중복되면 안되며</code>므로 <code class="language-plaintext highlighter-rouge">추가 검증 로직이 필요</code>하고, 항상 붙어다닌다 -&gt; <code class="language-plaintext highlighter-rouge">2개 상태값을 가진 포장체</code> **
    <ul>
      <li>Lotto인데 굳이 포장해야하나? -&gt; 추가 검증이 필요하므로 <strong><code class="language-plaintext highlighter-rouge">일급vs단일의 검증</code>인데도 <code class="language-plaintext highlighter-rouge">2개 인변가지는 도메인으로 새로 포장</code></strong> 해야한다. <strong>안그러면 서비스 ( or 컨트롤러)에 로직이 늘어난다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309215710414.png" alt="image-20220309215710414">
</li>
    </ul>
  </li>
</ol>

<h5 id="포장하기-전--service-테매-복붙하고-case반영한-테메이름-바꾸고---메서드-추가해주기">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%ED%95%98%EA%B8%B0-%EC%A0%84--service-%ED%85%8C%EB%A7%A4-%EB%B3%B5%EB%B6%99%ED%95%98%EA%B3%A0-case%EB%B0%98%EC%98%81%ED%95%9C-%ED%85%8C%EB%A9%94%EC%9D%B4%EB%A6%84-%EB%B0%94%EA%BE%B8%EA%B3%A0---%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장하기 전, [ service 테매 복붙]하고 case반영한 테메이름 바꾸고 -&gt; 메서드 추가해주기</h5>

<ol>
  <li>
    <p>테메 복붙해서 case반영해서 이름 바꿔주기
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309220236299.png" alt="image-20220309220236299"></p>
  </li>
  <li>
    <p>포장해서 만들어나간다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309220329113.png" alt="image-20220309220329113"></p>
  </li>
  <li>
    <p>포장 도메인 만들어놓고, 생성자만 처리해준다.</p>

    <ul>
      <li>일단 하나는 <code class="language-plaintext highlighter-rouge">value</code> + 하는 구체적인 이름으로 적었다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">WinningLotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">value</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">WinningLotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">value</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">bonusNumber</span> <span class="o">=</span> <span class="n">bonusNumber</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="새롭게-포장된-파라미터를-받는-차후-새-기준이-될메소드도-추가---가장-위로-올린다">
<a class="anchor" href="#%EC%83%88%EB%A1%AD%EA%B2%8C-%ED%8F%AC%EC%9E%A5%EB%90%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%EC%B0%A8%ED%9B%84-%EC%83%88-%EA%B8%B0%EC%A4%80%EC%9D%B4-%EB%90%A0%EB%A9%94%EC%86%8C%EB%93%9C%EB%8F%84-%EC%B6%94%EA%B0%80---%EA%B0%80%EC%9E%A5-%EC%9C%84%EB%A1%9C-%EC%98%AC%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>새롭게 포장된 파라미터를 받는 (차후 새 기준이 될)메소드도 추가 -&gt; 가장 위로 올린다.</h5>

<ul>
  <li>
    <p>메서드 이름은 같고… 파라미터만 다른게 쌓여나간다.</p>

    <ul>
      <li>이놈이 새로운</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309220440359.png" alt="image-20220309220440359"></p>
  </li>
  <li>
    <p>새 기준이 될 메서드를 가장 위로 올려보자.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309220541237.png" alt="image-20220309220541237"></p>
  </li>
</ul>

<h5 id="직전-기준-메소드의-내용을-복붙----포장된-파라미터에-맞추어-빨간줄을-없앤다-주로-getter로-임시처리">
<a class="anchor" href="#%EC%A7%81%EC%A0%84-%EA%B8%B0%EC%A4%80-%EB%A9%94%EC%86%8C%EB%93%9C%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%9D%84-%EB%B3%B5%EB%B6%99----%ED%8F%AC%EC%9E%A5%EB%90%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EC%97%90-%EB%A7%9E%EC%B6%94%EC%96%B4-%EB%B9%A8%EA%B0%84%EC%A4%84%EC%9D%84-%EC%97%86%EC%95%A4%EB%8B%A4-%EC%A3%BC%EB%A1%9C-getter%EB%A1%9C-%EC%9E%84%EC%8B%9C%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>직전 기준 메소드의 내용을 복붙 -&gt;  포장된 파라미터에 맞추어 빨간줄을 없앤다. (주로 getter로 임시처리)</h5>

<ol>
  <li>직전의 파라미터명과 비교해서 맞춰준다.</li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309220645140.png" alt="image-20220309220645140"></p>

<ol>
  <li>
    <p>포장전 객체앞에다가 <strong>새롭게 포장.getter()을 통해 에러를 없앨 수 있다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309221227872.png" alt="image-20220309221227872">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309221332836.png" alt="image-20220309221332836"></p>
  </li>
</ol>

<h5 id="포장--포장파라미터메서드-생성---새-기준-메서드로-지정하기---전-메소드는-전-파라미터---포장후-호출하도록-변경">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5--%ED%8F%AC%EC%9E%A5%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1---%EC%83%88-%EA%B8%B0%EC%A4%80-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%A7%80%EC%A0%95%ED%95%98%EA%B8%B0---%EC%A0%84-%EB%A9%94%EC%86%8C%EB%93%9C%EB%8A%94-%EC%A0%84-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0---%ED%8F%AC%EC%9E%A5%ED%9B%84-%ED%98%B8%EC%B6%9C%ED%95%98%EB%8F%84%EB%A1%9D-%EB%B3%80%EA%B2%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장 + 포장파라미터메서드 생성 -&gt; 새 기준 메서드로 지정하기- &gt; <code class="language-plaintext highlighter-rouge">전 메소드는 전 파라미터 -&gt; 포장후 호출하도록 변경</code>
</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309221614169.png" alt="image-20220309221614169"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220309221631428.png" alt="image-20220309221631428"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
        <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getBonusNumber</span><span class="o">());</span>

        <span class="k">return</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">winningLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">return</span> <span class="nf">match</span><span class="o">(</span><span class="n">userLotto</span><span class="o">,</span>
                     <span class="k">new</span> <span class="nf">WinningLotto</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">,</span> <span class="n">bonusNumber</span><span class="o">));</span>
    <span class="o">}</span>
</code></pre></div></div>

<h5 id="포장에-원하던-생성자에-검증-로직-추가후-테스트하기">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EC%97%90-%EC%9B%90%ED%95%98%EB%8D%98-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-%EA%B2%80%EC%A6%9D-%EB%A1%9C%EC%A7%81-%EC%B6%94%EA%B0%80%ED%9B%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장에 원하던 [생성자에 검증 로직 추가]후 테스트하기</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">WinningLotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">value</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"당첨 번호와 보너스볼은 중복될 수 없습니다."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bonusNumber</span> <span class="o">=</span> <span class="n">bonusNumber</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>서비스에서</li>
</ul>

<h5 id="서비스로-퉁-치던-테스트를-도메인test-생성시-경계값test하기">
<a class="anchor" href="#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A1%9C-%ED%89%81-%EC%B9%98%EB%8D%98-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EB%8F%84%EB%A9%94%EC%9D%B8test-%EC%83%9D%EC%84%B1%EC%8B%9C-%EA%B2%BD%EA%B3%84%EA%B0%92test%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>서비스로 퉁 치던 테스트를 [도메인Test] 생성시 [경계값Test]하기</h5>

<ol>
  <li>
    <p>WinningLottoTest 만들어서 경계값 테스트하기</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@ParameterizedTest</span>
 <span class="nd">@CsvSource</span><span class="o">({</span><span class="s">"1"</span><span class="o">,</span> <span class="s">"2"</span><span class="o">,</span> <span class="s">"3"</span><span class="o">,</span> <span class="s">"4"</span><span class="o">,</span> <span class="s">"5"</span><span class="o">,</span> <span class="s">"6"</span><span class="o">})</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">WinningLotto</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">)))</span>
         <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
         <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">"중복"</span><span class="o">);</span>
 <span class="o">}</span>
    
 <span class="nd">@ParameterizedTest</span>
 <span class="nd">@CsvSource</span><span class="o">({</span><span class="s">"7"</span><span class="o">,</span> <span class="s">"8"</span><span class="o">,</span> <span class="s">"45"</span><span class="o">})</span>
 <span class="kt">void</span> <span class="nf">valid</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">WinningLotto</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">)));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="새-기준-메서드에-임시처리포장getvalue-부분-메세지로-보내기-과정">
<a class="anchor" href="#%EC%83%88-%EA%B8%B0%EC%A4%80-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%EC%9E%84%EC%8B%9C%EC%B2%98%EB%A6%AC%ED%8F%AC%EC%9E%A5getvalue-%EB%B6%80%EB%B6%84-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A1%9C-%EB%B3%B4%EB%82%B4%EA%B8%B0-%EA%B3%BC%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>새 기준 메서드에 <code class="language-plaintext highlighter-rouge">임시처리(포장.getValue) 부분</code> 메세지로 보내기 (과정)</h5>

<ul>
  <li>
    <p>기존 임시처리</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
      <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getBonusNumber</span><span class="o">());</span>
    
      <span class="k">return</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">getter()를 제거</code>해서 빨간줄을 낸다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310113434321.png" alt="image-20220310113434321"></p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">기존 사용처</code>에 대해 <code class="language-plaintext highlighter-rouge">바로 변경이 아니라</code>  <code class="language-plaintext highlighter-rouge">메서드 생성  -&gt; 내부 내용 복사</code>를 통해 백업한 체로 진행한다.</strong></p>

    <ul>
      <li>이 경우, 새로운 메서드를 정의해주고, <strong>기존 메서드 바로 밑으로 가져와서 비교하며 처리한다.</strong>
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310113828004.png" alt="image-20220310113828004"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310113838224.png" alt="image-20220310113838224">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310113950666.png" alt="image-20220310113950666"></p>
  </li>
  <li>
    <p><strong>새로운 기준을 만들어 나가며, 완성대면 완전히 대체한다.</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310114108485.png" alt="image-20220310114108485"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c1">//public int match(final Lotto other) {</span>
 <span class="c1">//    return (int) other.value.stream()</span>
 <span class="c1">//        .filter(this::contains)</span>
 <span class="c1">//        .count();</span>
 <span class="c1">//}</span>
    
 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">winningLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">value</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
         <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">contains</span><span class="o">)</span>
         <span class="o">.</span><span class="na">count</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>나머지도</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c1">//public boolean contains(final LottoNumber number) {</span>
 <span class="c1">//    return value.contains(number);</span>
 <span class="c1">//}</span>
    
 <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getBonusNumber</span><span class="o">());</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="새-기준-메서드로-바꿨음에도-기존메서드가-다른데서-사용중인지-보고-가서-처리한다">
<a class="anchor" href="#%EC%83%88-%EA%B8%B0%EC%A4%80-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EB%B0%94%EA%BF%A8%EC%9D%8C%EC%97%90%EB%8F%84-%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EB%8B%A4%EB%A5%B8%EB%8D%B0%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%A4%91%EC%9D%B8%EC%A7%80-%EB%B3%B4%EA%B3%A0-%EA%B0%80%EC%84%9C-%EC%B2%98%EB%A6%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>새 기준 메서드로 바꿨음에도 [기존메서드]가 다른데서 사용중인지 보고 가서 처리한다.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310114514409.png" alt="image-20220310114514409">
<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310114519868.png" alt="image-20220310114519868"></p>

<ul>
  <li>못바꾸는 부분이 있다면 그대로 둔다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310114618954.png" alt="image-20220310114618954">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310114635551.png" alt="image-20220310114635551">
</li>
</ul>

<h2 id="단일-결과의-메인로직도1-vs-도2을-여러번-돌리며-결과값을-모으는-자료구조도-포장하는-로직">
<a class="anchor" href="#%EB%8B%A8%EC%9D%BC-%EA%B2%B0%EA%B3%BC%EC%9D%98-%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EB%8F%841-vs-%EB%8F%842%EC%9D%84-%EC%97%AC%EB%9F%AC%EB%B2%88-%EB%8F%8C%EB%A6%AC%EB%A9%B0-%EA%B2%B0%EA%B3%BC%EA%B0%92%EC%9D%84-%EB%AA%A8%EC%9C%BC%EB%8A%94-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EB%8F%84-%ED%8F%AC%EC%9E%A5%ED%95%98%EB%8A%94-%EB%A1%9C%EC%A7%81" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">단일 결과의 메인로직(도1 vs 도2)</code>을 여러번 돌리며 <code class="language-plaintext highlighter-rouge">[결과값을 모으는 자료구조]도 포장</code>하는 로직</h2>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">match()</code>를 내부에서 여러번 호출하여 발생</strong>하는 것들을 <strong><code class="language-plaintext highlighter-rouge">map</code>에 모아서 <code class="language-plaintext highlighter-rouge">controller 응답</code></strong>한다.</p>
  </li>
  <li>
    <p>결과값 map에 대한 <strong><code class="language-plaintext highlighter-rouge">계산로직</code>도 포함될 예정</strong>이므로 <strong><code class="language-plaintext highlighter-rouge">생성될 자료구조(map)을 생성자에서 생성후 -&gt; 변수 포장</code>하도록 class로 뺀다.</strong></p>
  </li>
</ul>

<h4 id="25-단일결과by메인로직도메인1-vs-도메인2을-바깥에서-여러번-호출해서-발생하는-결과값을-저장할-새로운-자료구조가-나온다---결과값-저장-로직을-생성자로-넘겨----최종-결과값-자료구조를-시작-상태값으로-가지면서--관련로직을-메서드로-가지는-도메인3result도메인-만들기">
<a class="anchor" href="#25-%EB%8B%A8%EC%9D%BC%EA%B2%B0%EA%B3%BCby%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EB%8F%84%EB%A9%94%EC%9D%B81-vs-%EB%8F%84%EB%A9%94%EC%9D%B82%EC%9D%84-%EB%B0%94%EA%B9%A5%EC%97%90%EC%84%9C-%EC%97%AC%EB%9F%AC%EB%B2%88-%ED%98%B8%EC%B6%9C%ED%95%B4%EC%84%9C-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%B0%EA%B3%BC%EA%B0%92%EC%9D%84-%EC%A0%80%EC%9E%A5%ED%95%A0-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EA%B0%80-%EB%82%98%EC%98%A8%EB%8B%A4---%EA%B2%B0%EA%B3%BC%EA%B0%92-%EC%A0%80%EC%9E%A5-%EB%A1%9C%EC%A7%81%EC%9D%84-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A1%9C-%EB%84%98%EA%B2%A8----%EC%B5%9C%EC%A2%85-%EA%B2%B0%EA%B3%BC%EA%B0%92-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EB%A5%BC-%EC%8B%9C%EC%9E%91-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C-%EA%B0%80%EC%A7%80%EB%A9%B4%EC%84%9C--%EA%B4%80%EB%A0%A8%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EA%B0%80%EC%A7%80%EB%8A%94-%EB%8F%84%EB%A9%94%EC%9D%B83result%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>25 <code class="language-plaintext highlighter-rouge">단일결과by메인로직(도메인1 vs 도메인2)</code>을 <code class="language-plaintext highlighter-rouge">바깥에서 여러번 호출</code>해서 발생하는 <code class="language-plaintext highlighter-rouge">결과값을 저장할 새로운 자료구조</code>가 나온다. -&gt; <code class="language-plaintext highlighter-rouge">[결과값 저장 로직]을 생성자</code>로 넘겨 -&gt;  <code class="language-plaintext highlighter-rouge">[최종 결과값 자료구조를 시작 상태값]</code>으로 가지면서 + <code class="language-plaintext highlighter-rouge">관련로직을 메서드</code>로 가지는 도메인3(Result도메인) 만들기</h4>

<h5 id="단일결과-로직도메인1-vs-도메인2인-메인-메서드의-파라미터-포장까지-완료된-상태여야만---바깥에서-여러번-돌릴-때-포장된-것을-받을-수-있음">
<a class="anchor" href="#%EB%8B%A8%EC%9D%BC%EA%B2%B0%EA%B3%BC-%EB%A1%9C%EC%A7%81%EB%8F%84%EB%A9%94%EC%9D%B81-vs-%EB%8F%84%EB%A9%94%EC%9D%B82%EC%9D%B8-%EB%A9%94%EC%9D%B8-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%ED%8F%AC%EC%9E%A5%EA%B9%8C%EC%A7%80-%EC%99%84%EB%A3%8C%EB%90%9C-%EC%83%81%ED%83%9C%EC%97%AC%EC%95%BC%EB%A7%8C---%EB%B0%94%EA%B9%A5%EC%97%90%EC%84%9C-%EC%97%AC%EB%9F%AC%EB%B2%88-%EB%8F%8C%EB%A6%B4-%EB%95%8C-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EA%B2%83%EC%9D%84-%EB%B0%9B%EC%9D%84-%EC%88%98-%EC%9E%88%EC%9D%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">단일결과 로직(도메인1 vs 도메인2)</code>인 <code class="language-plaintext highlighter-rouge">메인 메서드의 파라미터 포장까지 완료</code>된 상태여야만 -&gt; 바깥에서 여러번 돌릴 때, 포장된 것을 받을 수 있음</h5>

<ul>
  <li>
    <p>내부 단일결과를 유발하는 메인로직 <strong>메서드의 파라미터가 이미 포장</strong>이 끝났다. -&gt; <strong>바깥에서 <code class="language-plaintext highlighter-rouge">개별 결과값을 모으는 메서드</code>도 포장된 값을 받는다.</strong></p>

    <ul>
      <li>
<strong>단일 결과</strong>(Enum)을 응답하는 메서드는 <strong>파라미터를 포장된 것</strong>을 받는다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310104707889.png" alt="image-20220310104707889">
</li>
      <li>
<strong>바깥에서</strong> 결과값들을 모을 <strong>메서드 -&gt; 포장된 것을 받아야 편하다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310110208060.png" alt="image-20220310110208060">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">get_result</span><span class="o">()</span> <span class="o">{</span>
    
      <span class="c1">//1. 메인로직(match)를 여러번 호출해서 결과값을 받을 Service.메서드</span>
      <span class="c1">// -&gt; 메인로직에 필요한 파라미터(Lotto여러개 + WinningLotto)는 넘겨줘야한다.</span>
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
          <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
          <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span>
          <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">)</span>
      <span class="o">);</span>
    
      <span class="c1">//0. 내부 메인로직(도1vs도2)의 파라미터 포장까지 완료되었을 때,</span>
      <span class="c1">// -&gt; 바깥에서 복수의 포장을 받아, 여러번 돌려 -&gt; 결과값을 저장할 수 있다.</span>
      <span class="nc">LottoService</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">lottos</span><span class="o">,</span>
                             <span class="k">new</span> <span class="nf">WinningLotto</span><span class="o">(</span>
                                 <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span>
                                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)));</span>
    
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="일단은-servicemethod내부에서-메인로직을-돌리기를-정의를-하다가---필요에-의해-옮기고-포장하자">
<a class="anchor" href="#%EC%9D%BC%EB%8B%A8%EC%9D%80-servicemethod%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0%EB%A5%BC-%EC%A0%95%EC%9D%98%EB%A5%BC-%ED%95%98%EB%8B%A4%EA%B0%80---%ED%95%84%EC%9A%94%EC%97%90-%EC%9D%98%ED%95%B4-%EC%98%AE%EA%B8%B0%EA%B3%A0-%ED%8F%AC%EC%9E%A5%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">일단은 Service.Method내부에서 [메인로직을 돌리기]를 정의</code>를 하다가 -&gt; 필요에 의해 옮기고 포장하자.</h5>

<ol>
  <li>
    <p>현재 Service.getResult( , )에서 자료를 받아서, <code class="language-plaintext highlighter-rouge">현재는 서비스에서 호출하고 있던 메인로직(도1vs도2 비교)를 호출</code>도 한다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">getResult</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">,</span>
                              <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="c1">//2. 일단 service내부에 도메인 계산로직을 작성한다.</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
         <span class="c1">// 3. Service를 통해 돌리다보니, 1:1 단일결과(메인로직)을 호출할 수 밖에 없는데</span>
         <span class="c1">// -&gt; 돌리는 이것 역시 서비스에서 호출하는 메서드였다.</span>
         <span class="c1">// -&gt; 만약, 결과값 모으는 곳으로 간다면 바뀌어야할 것 같다.</span>
         <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">lotto</span> <span class="o">-&gt;</span> <span class="n">match</span><span class="o">(</span><span class="n">lotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">))</span>
         <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="26-결과값을-모은-list를-카운팅하는-새로운-응답자료구조-만들기">
<a class="anchor" href="#26-%EA%B2%B0%EA%B3%BC%EA%B0%92%EC%9D%84-%EB%AA%A8%EC%9D%80-list%EB%A5%BC-%EC%B9%B4%EC%9A%B4%ED%8C%85%ED%95%98%EB%8A%94-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9D%91%EB%8B%B5%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>26 <code class="language-plaintext highlighter-rouge">[결과값을 모은 List를 카운팅하는 새로운 응답(자료구조)]</code> 만들기</h4>

<ol>
  <li>단일 결과값들을 돌아가며 <strong>호출결과값 List를 모은다.</strong>
</li>
</ol>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310122951652.png" alt="image-20220310122951652"></p>

<h4 id="enum-list----enummap에-카운팅하기정리용">
<a class="anchor" href="#enum-list----enummap%EC%97%90-%EC%B9%B4%EC%9A%B4%ED%8C%85%ED%95%98%EA%B8%B0%EC%A0%95%EB%A6%AC%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enum List -&gt;  EnumMap에 카운팅하기(정리용)</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">List&lt;객체&gt;</code>의 갯수를     객체를 key로 하는 hashMap <code class="language-plaintext highlighter-rouge">Map&lt;객체, Integer&gt;</code></strong> 에 세야한다.</li>
</ul>

<h5 id="빈-map-선언-및-초기화">
<a class="anchor" href="#%EB%B9%88-map-%EC%84%A0%EC%96%B8-%EB%B0%8F-%EC%B4%88%EA%B8%B0%ED%99%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>빈 Map 선언 및 초기화</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">객체</code>의 <code class="language-plaintext highlighter-rouge">Count</code>을 원한다면  **&lt;<code class="language-plaintext highlighter-rouge">객체key</code>, <code class="language-plaintext highlighter-rouge">Integer</code>&gt;로 Map을 선언한다. ** (cf) 원시적으로는 직접 0으로 초기화 한다.)</p>

    <ul>
      <li><strong>EnumMap이라면 <code class="language-plaintext highlighter-rouge">( )</code>생성자에 안에 <code class="language-plaintext highlighter-rouge">Enum클래스.class(클래스 자체)</code>를 지정해준다.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">final</span> <span class="nc">EnumMap</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EnumMap</span><span class="o">&lt;&gt;(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</code></pre></div>    </div>

    <ul>
      <li>
        <p>참고)</p>

        <ul>
          <li>
            <p><strong>(원시적) <code class="language-plaintext highlighter-rouge">모든 객체key들 stream화</code>해서 돌면서 -&gt; forEach -&gt; map.put(객체key, 0)으로 초기화해준다.</strong></p>

            <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EnumMap</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EnumMap</span><span class="o">&lt;&gt;(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            
  <span class="o">{</span>
      <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">values</span><span class="o">()).</span><span class="na">forEach</span><span class="o">(</span><span class="n">rank</span> <span class="o">-&gt;</span> <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">rank</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>EnumMap는 넣고난 뒤, 자동정렬되어있지만</strong></p>

        <ul>
          <li>
<strong>일반map넣고 난 뒤, key순으로 정렬되어야하면(순서가 중요하면)</strong>  hashMap대신 -&gt;  linkedHashMap을 사용한다.</li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h5 id="일급vs단일-로직을-먼저-수행한---응답결과list를-카운팅하는-3가지-방법">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89vs%EB%8B%A8%EC%9D%BC-%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%A8%BC%EC%A0%80-%EC%88%98%ED%96%89%ED%95%9C---%EC%9D%91%EB%8B%B5%EA%B2%B0%EA%B3%BClist%EB%A5%BC-%EC%B9%B4%EC%9A%B4%ED%8C%85%ED%95%98%EB%8A%94-3%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">일급vs단일 로직</code>을 먼저 수행한 -&gt; <code class="language-plaintext highlighter-rouge">응답결과List</code>를 카운팅하는 3가지 방법</h5>

<ol>
  <li>
    <p><strong>이제 갯수를 셀  <code class="language-plaintext highlighter-rouge">결과값List(Enum List or 객체 List)</code></strong>들을 돌면서 카운팅한다.</p>

    <ol>
      <li>
        <p><strong>결과List(객체List)를 먼저 계산</strong> -&gt; 돌면서 -&gt;</p>

        <ul>
          <li>이미 0으로 초기화해놓고 넣어놨어야한다.</li>
          <li>map.put( <code class="language-plaintext highlighter-rouge">객체Key</code>,   <code class="language-plaintext highlighter-rouge">map.get( 객체key )</code>의 value <code class="language-plaintext highlighter-rouge">+ 1</code> )</li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="o">{</span>
     <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">values</span><span class="o">()).</span><span class="na">forEach</span><span class="o">(</span><span class="n">rank</span> <span class="o">-&gt;</span> <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">rank</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>        </div>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">rankPrize</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">rankPrize</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>결과List(객체List)를 먼저 계산</strong> -&gt; 돌면서 -&gt;</p>

        <ul>
          <li><strong>미리 0 초기화 없이 <code class="language-plaintext highlighter-rouge">알아서 직전value(없으면 0부터) 누적</code>해주는 -&gt;  <code class="language-plaintext highlighter-rouge">map.merge( 객체key, 누적해넣을값, Integer.sum()으로 기존value와 누적방법 Bifunction )</code></strong></li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="n">result</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">rank</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">before</span><span class="o">,</span> <span class="n">after</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">sum</span><span class="o">(</span><span class="n">before</span><span class="o">,</span> <span class="n">after</span><span class="o">))</span>
</code></pre></div>        </div>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
     <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">lotto</span> <span class="o">-&gt;</span> <span class="n">match</span><span class="o">(</span><span class="n">lotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">))</span>
     <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
        
 <span class="kd">final</span> <span class="nc">EnumMap</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EnumMap</span><span class="o">&lt;&gt;(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        
 <span class="n">results</span>
     <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">rank</span> <span class="o">-&gt;</span> <span class="n">result</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">rank</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">before</span><span class="o">,</span> <span class="n">after</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">sum</span><span class="o">(</span><span class="n">before</span><span class="o">,</span> <span class="n">after</span><span class="o">)));</span>
</code></pre></div>        </div>

        <ul>
          <li>결과값을 찍어보니 merge로 카운팅이 1개씩 잘 된다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310150556475.png" alt="image-20220310150556475">
</li>
        </ul>
      </li>
    </ol>
  </li>
</ol>

<h5 id="enummap은-아니지만-일급vs단일-stream-단일vs단일-결과값객체key을-뽑아낼-로직--카운팅을-동시에-해주는-일급streamcollectcollectorsgroupingby-객체key를-뽑아낼-로직--summingint-value---1-">
<a class="anchor" href="#enummap%EC%9D%80-%EC%95%84%EB%8B%88%EC%A7%80%EB%A7%8C-%EC%9D%BC%EA%B8%89vs%EB%8B%A8%EC%9D%BC-stream-%EB%8B%A8%EC%9D%BCvs%EB%8B%A8%EC%9D%BC-%EA%B2%B0%EA%B3%BC%EA%B0%92%EA%B0%9D%EC%B2%B4key%EC%9D%84-%EB%BD%91%EC%95%84%EB%82%BC-%EB%A1%9C%EC%A7%81--%EC%B9%B4%EC%9A%B4%ED%8C%85%EC%9D%84-%EB%8F%99%EC%8B%9C%EC%97%90-%ED%95%B4%EC%A3%BC%EB%8A%94-%EC%9D%BC%EA%B8%89streamcollectcollectorsgroupingby-%EA%B0%9D%EC%B2%B4key%EB%A5%BC-%EB%BD%91%EC%95%84%EB%82%BC-%EB%A1%9C%EC%A7%81--summingint-value---1-" aria-hidden="true"><span class="octicon octicon-link"></span></a>EnumMap은 아니지만, 일급vs단일 –stream–&gt; 단일vs단일 <code class="language-plaintext highlighter-rouge">결과값(객체key)을 뽑아낼 로직</code> + <code class="language-plaintext highlighter-rouge">카운팅</code>을 동시에 해주는 <code class="language-plaintext highlighter-rouge">일급.stream().collect(Collectors.groupingBy(</code> 객체key를 뽑아낼 로직 , summingInt( value -&gt; 1)<code class="language-plaintext highlighter-rouge"> )</code>
</h5>

<ol>
  <li>
    <p>결과값List를 뽑는 로직 조차 <code class="language-plaintext highlighter-rouge">일급.stream -&gt; 단일vs단일로 객체Key뽑기</code>로직이 내부에 포함됨</p>

    <ul>
      <li>결과값List를 미리 뽑지 않는다. -&gt; <code class="language-plaintext highlighter-rouge">Collectors.groupingBy( , )</code>의 **첫번째 인자에 **</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c1">// (1)결과값 List를 미리 뽑는 과정 -&gt; 생략됨.</span>
 <span class="c1">//final List&lt;Rank&gt; results = lottos.stream()</span>
 <span class="c1">//    .map(lotto -&gt; match(lotto, winningLotto))</span>
 <span class="c1">//    .collect(Collectors.toList());</span>
    
 <span class="c1">// (2) map을 미리 선언해두기 -&gt; 생략됨</span>
 <span class="c1">//final EnumMap&lt;Rank, Integer&gt; result = new EnumMap&lt;&gt;(Rank.class);</span>
    
 <span class="c1">// (3) 결과값List를 돌면서 -&gt; merge로 1씩 카운팅 -&gt; 생략됨</span>
 <span class="c1">//results.stream()</span>
 <span class="c1">//    .forEach(rank -&gt; result.merge(rank, 1, (before, after) -&gt; Integer.sum(before, after)));</span>
    
 <span class="c1">// 일급을 돌면서 -&gt; groupingBy(단일vs단일의 [결과값 = 객체key]를 뽑는 로직 , 1씩 누적합하는 로직)</span>
 <span class="k">return</span> <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
     <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span>
         <span class="n">lotto</span> <span class="o">-&gt;</span> <span class="n">match</span><span class="o">(</span><span class="n">lotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">),</span>
         <span class="nc">Collectors</span><span class="o">.</span><span class="na">summingInt</span><span class="o">(</span><span class="n">value</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">)));</span>
    
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="27-결과값을-모은-list를-카운팅하는-새로운-응답자료구조을-포장하는데--그-생성-과정을-생성자에-넣어서-시작부터-상태값으로-가지자">
<a class="anchor" href="#27-%EA%B2%B0%EA%B3%BC%EA%B0%92%EC%9D%84-%EB%AA%A8%EC%9D%80-list%EB%A5%BC-%EC%B9%B4%EC%9A%B4%ED%8C%85%ED%95%98%EB%8A%94-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9D%91%EB%8B%B5%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%9D%84-%ED%8F%AC%EC%9E%A5%ED%95%98%EB%8A%94%EB%8D%B0--%EA%B7%B8-%EC%83%9D%EC%84%B1-%EA%B3%BC%EC%A0%95%EC%9D%84-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-%EB%84%A3%EC%96%B4%EC%84%9C-%EC%8B%9C%EC%9E%91%EB%B6%80%ED%84%B0-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C-%EA%B0%80%EC%A7%80%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>27 결과값을 모은 List를 카운팅하는 <code class="language-plaintext highlighter-rouge">새로운 응답(자료구조)을 포장</code>하는데  그 <code class="language-plaintext highlighter-rouge">생성 과정을 생성자에 넣어서 시작부터 상태값으로 가지자</code>
</h4>

<ul>
  <li>
    <p>현재 상황</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">getResult</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">,</span>
                                             <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span>
              <span class="n">lotto</span> <span class="o">-&gt;</span> <span class="n">match</span><span class="o">(</span><span class="n">lotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">),</span>
              <span class="nc">Collectors</span><span class="o">.</span><span class="na">summingInt</span><span class="o">(</span><span class="n">value</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">)));</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="응답값-포장하기">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EA%B0%92-%ED%8F%AC%EC%9E%A5%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>응답값 포장하기</h5>

<ol>
  <li>returntype 빨간줄 수정 -&gt; 생성
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153018402.png" alt="image-20220310153018402">
</li>
</ol>

<h5 id="결과산출-로직은-포장결과값-생성자로-가져가되--new-포장결과--로-생성되도록-재료추출은-있어야함">
<a class="anchor" href="#%EA%B2%B0%EA%B3%BC%EC%82%B0%EC%B6%9C-%EB%A1%9C%EC%A7%81%EC%9D%80-%ED%8F%AC%EC%9E%A5%EA%B2%B0%EA%B3%BC%EA%B0%92-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A1%9C-%EA%B0%80%EC%A0%B8%EA%B0%80%EB%90%98--new-%ED%8F%AC%EC%9E%A5%EA%B2%B0%EA%B3%BC--%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%98%EB%8F%84%EB%A1%9D-%EC%9E%AC%EB%A3%8C%EC%B6%94%EC%B6%9C%EC%9D%80-%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>결과산출 로직은 포장결과값 생성자로 가져가되,  <code class="language-plaintext highlighter-rouge">new 포장결과( ) </code>로 생성되도록 <code class="language-plaintext highlighter-rouge">재료추출</code>은 있어야함.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153445775.png" alt="image-20220310153445775"></p>

<h5 id="대박-메서드추출로-new-포장---생성자-or--결과class-정펙매--생성자-호출과-동시에-재료-추출하기">
<a class="anchor" href="#%EB%8C%80%EB%B0%95-%EB%A9%94%EC%84%9C%EB%93%9C%EC%B6%94%EC%B6%9C%EB%A1%9C-new-%ED%8F%AC%EC%9E%A5---%EC%83%9D%EC%84%B1%EC%9E%90-or--%EA%B2%B0%EA%B3%BCclass-%EC%A0%95%ED%8E%99%EB%A7%A4--%EC%83%9D%EC%84%B1%EC%9E%90-%ED%98%B8%EC%B6%9C%EA%B3%BC-%EB%8F%99%EC%8B%9C%EC%97%90-%EC%9E%AC%EB%A3%8C-%EC%B6%94%EC%B6%9C%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>대박) <code class="language-plaintext highlighter-rouge">메서드추출</code>로 <code class="language-plaintext highlighter-rouge">new 포장( , ) 생성자</code> or  <code class="language-plaintext highlighter-rouge">결과class 정펙매</code>  생성자 호출과 동시에 <code class="language-plaintext highlighter-rouge">재료 추출</code>하기</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153620211.png" alt="image-20220310153620211">
<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153706044.png" alt="image-20220310153706044">
<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153721980.png" alt="image-20220310153721980"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153741892.png" alt="image-20220310153741892">
<img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310153808598.png" alt="image-20220310153808598"></p>

<ul>
  <li>
    <p>밖으로 나가서 <code class="language-plaintext highlighter-rouge">아무거나 타자치면 invalid해도 완성</code>된다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154107874.png" alt="image-20220310154107874"></p>
  </li>
</ul>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">새로운 응답값</code> 을 <strong><code class="language-plaintext highlighter-rouge">시작부터 상태</code> 관리되도록 <code class="language-plaintext highlighter-rouge">생성자에서 처리해주고 초기화</code>하도록 잘라내서 가져가기</strong></p>

    <ul>
      <li>
        <p>기존에 추출된 <code class="language-plaintext highlighter-rouge">새로운 응답값 자료구조  추출 로직</code>을 -&gt; 결과값 포장클래스의 생성자로 가져간다.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154211758.png" alt="image-20220310154211758"></p>
      </li>
      <li>
        <p>가져와서 파라미터 부분 + 내용부분만 잘 가져다 생성자로 만든다.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154327007.png" alt="image-20220310154327007"></p>
      </li>
      <li>
        <p><strong>서비스 정의된 에서 <code class="language-plaintext highlighter-rouge">단일vs단일 메인 결과값</code>match 로직을 서비스에서 -&gt;  <code class="language-plaintext highlighter-rouge">결과 도메인인 여기로 가져오자</code></strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154421973.png" alt="image-20220310154421973"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154615494.png" alt="image-20220310154615494"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154719594.png" alt="image-20220310154719594"></p>
      </li>
      <li>
        <p>이제 생성자에서 뽑아진 result를 상태값으로 가지기</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154834798.png" alt="image-20220310154834798"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310154846864.png" alt="image-20220310154846864"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoResult</span> <span class="o">{</span>
        
      <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
        
      <span class="kd">public</span> <span class="nf">LottoResult</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Rank</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
              <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">groupingBy</span><span class="o">(</span>
                  <span class="n">lotto</span> <span class="o">-&gt;</span> <span class="n">match</span><span class="o">(</span><span class="n">lotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">),</span>
                  <span class="nc">Collectors</span><span class="o">.</span><span class="na">summingInt</span><span class="o">(</span><span class="n">count</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">)));</span>
          <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
      <span class="o">}</span>
        
      <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                               <span class="kd">final</span> <span class="nc">WinningLotto</span> <span class="n">winningLotto</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">);</span>
          <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">);</span>
        
          <span class="k">return</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">);</span>
      <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h5 id="새-결과값-포장이-끝났으면-serivce-메서드-테스트-다시-해보기">
<a class="anchor" href="#%EC%83%88-%EA%B2%B0%EA%B3%BC%EA%B0%92-%ED%8F%AC%EC%9E%A5%EC%9D%B4-%EB%81%9D%EB%82%AC%EC%9C%BC%EB%A9%B4-serivce-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8B%A4%EC%8B%9C-%ED%95%B4%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>새 결과값 포장이 끝났으면, Serivce 메서드 테스트 다시 해보기</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">get_result</span><span class="o">()</span> <span class="o">{</span>

<span class="c1">//1. 메인로직(match)를 여러번 호출해서 결과값을 받을 Service.메서드</span>
<span class="c1">// -&gt; 메인로직에 필요한 파라미터(Lotto여러개 + WinningLotto)는 넘겨줘야한다.</span>
<span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">),</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">),</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">)</span>
<span class="o">);</span>

<span class="kd">final</span> <span class="nc">LottoResult</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">lottos</span><span class="o">,</span>
<span class="k">new</span> <span class="nf">WinningLotto</span><span class="o">(</span>
<span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span>
<span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)));</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310155100157.png" alt="image-20220310155100157"></p>

<h4 id="28-결과값-포장result-class의-자체-테스트">
<a class="anchor" href="#28-%EA%B2%B0%EA%B3%BC%EA%B0%92-%ED%8F%AC%EC%9E%A5result-class%EC%9D%98-%EC%9E%90%EC%B2%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>28 결과값 포장Result class의 자체 테스트</h4>

<h5 id="새로운-응답값-생성로직이-담긴-생성자-자체-테스트-with-view에서-쓰일-수도-있는-삭제될-count-getter객체key개발">
<a class="anchor" href="#%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9D%91%EB%8B%B5%EA%B0%92-%EC%83%9D%EC%84%B1%EB%A1%9C%EC%A7%81%EC%9D%B4-%EB%8B%B4%EA%B8%B4-%EC%83%9D%EC%84%B1%EC%9E%90-%EC%9E%90%EC%B2%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8-with-view%EC%97%90%EC%84%9C-%EC%93%B0%EC%9D%BC-%EC%88%98%EB%8F%84-%EC%9E%88%EB%8A%94-%EC%82%AD%EC%A0%9C%EB%90%A0-count-getter%EA%B0%9D%EC%B2%B4key%EA%B0%9C%EB%B0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>[새로운 응답값 생성로직]이 담긴 [생성자 자체 테스트] with [view에서 쓰일 수도 있는? 삭제될? Count getter(객체key)개발]</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">결과값 Map</code>을 <strong>만들 재료 중 일부만</strong> setup에 준비한다. <strong>여러 재료라면 <code class="language-plaintext highlighter-rouge">가변쉬운것을 테스트에서</code> -&gt; <code class="language-plaintext highlighter-rouge">많고 복잡한 것을 setup</code>에 고정</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">class</span> <span class="nc">LottoResultTest</span> <span class="o">{</span>
    
     <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">;</span>
    
     <span class="nd">@BeforeEach</span>
     <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="o">{</span>
         <span class="c1">//new LottoResult(lottos, winningLotto);</span>
         <span class="c1">//새로운 응답값 생성(결과값 포장 클래스 생성자)에 필요한 재료 먼저 선언</span>
         <span class="c1">// -&gt; case별 변동이 쉬운 winningLotto는 놔두고, lottos를 미리 만들어놓자.</span>
         <span class="n">lottos</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">),</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">)</span>
         <span class="o">);</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>count Map이라면, 맘 편하게 <code class="language-plaintext highlighter-rouge">.getCount( 객체key )</code>를 맘편하게 만들자</strong></p>

    <ul>
      <li>
        <p>뷰에서 쓸 일 있으면 쓰고, 없으면 삭제하면 된다. default를 0으로 해서 count인 value값을 가져오자.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310161607226.png" alt="image-20220310161607226"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">getCountByRank</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Rank</span> <span class="n">rank</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">rank</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>해당 key의 Count를 꺼내와서 정확한지 확인하기</strong></p>

    <ul>
      <li>할수 있다면, debug 활용해서 내부값 까보면서 같이하면 될 듯.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310162521006.png" alt="image-20220310162521006">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">create</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//given -&gt; 1등이 1개 있도록 가정인자를 만들어줌</span>
     <span class="kd">final</span> <span class="nc">LottoResult</span> <span class="n">lottoResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LottoResult</span><span class="o">(</span><span class="n">lottos</span><span class="o">,</span>
                                                     <span class="k">new</span> <span class="nf">WinningLotto</span><span class="o">(</span>
                                                         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
                                                         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
                                                     <span class="o">));</span>
    
     <span class="c1">// map이 세고 있던 객체key를 넣어주고 -&gt; Count를 반환하는 메서드 개발</span>
     <span class="c1">//when</span>
     <span class="kd">final</span> <span class="nc">Integer</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">lottoResult</span><span class="o">.</span><span class="na">getCountByRank</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">RANK_1</span><span class="o">);</span>
    
     <span class="c1">//then</span>
     <span class="n">assertThat</span><span class="o">(</span><span class="n">actual</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="29-새응답-결과값map에-계산-로직-더하기">
<a class="anchor" href="#29-%EC%83%88%EC%9D%91%EB%8B%B5-%EA%B2%B0%EA%B3%BC%EA%B0%92map%EC%97%90-%EA%B3%84%EC%82%B0-%EB%A1%9C%EC%A7%81-%EB%8D%94%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>29 새응답 결과값(map)에 계산 로직 더하기</h4>

<h5 id="service에서-controller로-반환되므로-자체-resulttest에서-시작">
<a class="anchor" href="#service%EC%97%90%EC%84%9C-controller%EB%A1%9C-%EB%B0%98%ED%99%98%EB%90%98%EB%AF%80%EB%A1%9C-%EC%9E%90%EC%B2%B4-resulttest%EC%97%90%EC%84%9C-%EC%8B%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service에서 controller로 반환되므로 자체 ResultTest에서 시작</h5>

<ol>
  <li>
<strong>ServiceTest가 아니라 <code class="language-plaintext highlighter-rouge">ResultTest</code> 추가 로직 메서드 개발 시작</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310165832532.png" alt="image-20220310165832532">
</li>
</ol>

<h5 id="countmap-처리-deafult--valueentryset--stream-map">
<a class="anchor" href="#countmap-%EC%B2%98%EB%A6%AC-deafult--valueentryset--stream-map" aria-hidden="true"><span class="octicon octicon-link"></span></a>countMap 처리 deafult : value.entrySet()  .stream() .map()</h5>

<ol>
  <li>
    <p><strong>CountMap을 돌 때, 기본적인 으로 작성해서 돌아보자</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getPrize</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">value</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
         <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
         <span class="o">.</span><span class="na">map</span><span class="o">()</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="map----로직에서-getter등장으로-보내야한다면---옆에-값도-같이-보내자--enumgetter---countitgetvalue---enum메세제-itgetvalue-">
<a class="anchor" href="#map----%EB%A1%9C%EC%A7%81%EC%97%90%EC%84%9C-getter%EB%93%B1%EC%9E%A5%EC%9C%BC%EB%A1%9C-%EB%B3%B4%EB%82%B4%EC%95%BC%ED%95%9C%EB%8B%A4%EB%A9%B4---%EC%98%86%EC%97%90-%EA%B0%92%EB%8F%84-%EA%B0%99%EC%9D%B4-%EB%B3%B4%EB%82%B4%EC%9E%90--enumgetter---countitgetvalue---enum%EB%A9%94%EC%84%B8%EC%A0%9C-itgetvalue-" aria-hidden="true"><span class="octicon octicon-link"></span></a>map( -&gt; ) 로직에서 getter등장으로 보내야한다면 -&gt; 옆에 값도 같이 보내자.  <code class="language-plaintext highlighter-rouge">enum.getter</code>  * <code class="language-plaintext highlighter-rouge">count(it.getValue())</code> -&gt; enum.메세제( it.getValue() )</h5>

<ol>
  <li>
    <p>map안에서 <code class="language-plaintext highlighter-rouge">enum.getXXX()  * count숫자</code> 를  계산해야하는데, getter대신 메세지보낼 때, 같이 보내버리자.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171121105.png" alt="image-20220310171121105">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171142345.png" alt="image-20220310171142345"></p>
  </li>
</ol>

<h5 id="없던-enum필드도-this필드명을-바로써서-빨간줄로-바로-생성">
<a class="anchor" href="#%EC%97%86%EB%8D%98-enum%ED%95%84%EB%93%9C%EB%8F%84-this%ED%95%84%EB%93%9C%EB%AA%85%EC%9D%84-%EB%B0%94%EB%A1%9C%EC%8D%A8%EC%84%9C-%EB%B9%A8%EA%B0%84%EC%A4%84%EB%A1%9C-%EB%B0%94%EB%A1%9C-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>없던 Enum필드도 <code class="language-plaintext highlighter-rouge">this.필드명</code>을 바로써서 빨간줄로 바로 생성</h5>

<ol>
  <li>
    <p>아직 상금필드를  enum에 정의 안해뒀다. <code class="language-plaintext highlighter-rouge">this.필드</code>명을 기입해서 빨간줄로 생성해버리자.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171321759.png" alt="image-20220310171321759"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171339698.png" alt="image-20220310171339698"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171428501.png" alt="image-20220310171428501"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171434398.png" alt="image-20220310171434398"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171550145.png" alt="image-20220310171550145"></p>
  </li>
</ol>

<p>​  <br>
​    <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171544606.png" alt="image-20220310171544606"></p>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">it.getKey()</code>의 enum으로 메세지 보내도록 작성완료 
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171624587.png" alt="image-20220310171624587">
</li>
</ol>

<h5 id="누적한다면-mattoint--sum-일까--mapreduce-일까">
<a class="anchor" href="#%EB%88%84%EC%A0%81%ED%95%9C%EB%8B%A4%EB%A9%B4-mattoint--sum-%EC%9D%BC%EA%B9%8C--mapreduce-%EC%9D%BC%EA%B9%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>누적한다면, matToInt( ) .sum() 일까?  map().reduce( )일까?</h5>

<ul>
  <li>
    <p><strong>map()으로 반환받은 int(<code class="language-plaintext highlighter-rouge">stream&lt;Int&gt;</code>)</strong>는 <code class="language-plaintext highlighter-rouge">.sum()</code>이 안된다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171908172.png" alt="image-20220310171908172"></p>
  </li>
  <li>
    <p><strong>matToInt()로 반환받은 <code class="language-plaintext highlighter-rouge">IntStream</code>만 <code class="language-plaintext highlighter-rouge">.sum()</code>의 누적함수 적용된다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171937994.png" alt="image-20220310171937994"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310171833537.png" alt="image-20220310171833537"></p>
  </li>
</ul>

<h5 id="reduce의-불편함과-초기값장점">
<a class="anchor" href="#reduce%EC%9D%98-%EB%B6%88%ED%8E%B8%ED%95%A8%EA%B3%BC-%EC%B4%88%EA%B8%B0%EA%B0%92%EC%9E%A5%EC%A0%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>reduce의 불편함과 초기값장점</h5>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">mapToType</code> - <code class="language-plaintext highlighter-rouge">sum()</code>이 아닌 경우 -&gt; map의 returnType에 따라 <strong>reduce(누적)에  type에 맞는 합(누적할연산자)메서드를 직접</strong> 넣어준다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310173353936.png" alt="image-20220310173353936">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310173431208.png" alt="image-20220310173431208"></p>
  </li>
  <li>
    <p>직접 메서드와 초기값을 지정해주지만, stream이 비었어도 에러가 안나고 defaul값이 나온다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310173859208.png" alt="image-20220310173859208"></p>
  </li>
</ul>

<h5 id="maptotype---sum의-편리함과-불편성--없다---편한-것-쓰면-될듯">
<a class="anchor" href="#maptotype---sum%EC%9D%98-%ED%8E%B8%EB%A6%AC%ED%95%A8%EA%B3%BC-%EB%B6%88%ED%8E%B8%EC%84%B1--%EC%97%86%EB%8B%A4---%ED%8E%B8%ED%95%9C-%EA%B2%83-%EC%93%B0%EB%A9%B4-%EB%90%A0%EB%93%AF" aria-hidden="true"><span class="octicon octicon-link"></span></a>mapToType -&gt; .sum()의 편리함과 불편성(?-&gt; 없다) -&gt; 편한 것 쓰면 될듯</h5>

<ul>
  <li>
    <p>mapToInt를 써서<strong>, <code class="language-plaintext highlighter-rouge">.sum()</code>할 stream이 없을 때에도 <code class="language-plaintext highlighter-rouge">0</code>이 default</strong>로 전달된다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310174223857.png" alt="image-20220310174223857"></p>
  </li>
</ul>

<h4 id="30-countmap에-none객체-존재--orelsenone가-있어야하는-이유---전체-갯수도-셀-수-있다">
<a class="anchor" href="#30-countmap%EC%97%90-none%EA%B0%9D%EC%B2%B4-%EC%A1%B4%EC%9E%AC--orelsenone%EA%B0%80-%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0---%EC%A0%84%EC%B2%B4-%EA%B0%AF%EC%88%98%EB%8F%84-%EC%85%80-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>30 countMap에 NONE객체 존재 + orElse(NONE)가 있어야하는 이유 -&gt; 전체 갯수<code class="language-plaintext highlighter-rouge">도</code> 셀 수 있다.</h4>

<ul>
  <li>당첨못함 : 14명 / 1등: 1명 / 2등: 2명 -&gt; <strong>총 17명</strong>의 갯수..
    <ul>
      <li><strong>만약 당첨 못했다고 안셌으면.. ㅠ_ㅜ 전체 로또 갯수를 셀 수 없게 된다.</strong></li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>NONE(여기선 <code class="language-plaintext highlighter-rouge">OUT</code>)객체는 존재해야하며, 다른 것이 해당 없을 때도 반환되어야한다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>
    
     <span class="no">RANK_1</span><span class="o">(</span><span class="mi">2000_000_000</span><span class="o">,</span> <span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)),</span>
     <span class="no">RANK_2</span><span class="o">(</span><span class="mi">30_000_000</span><span class="o">,</span> <span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">matchBonus</span><span class="o">),</span>
     <span class="no">RANK_3</span><span class="o">(</span><span class="mi">1_500_000</span><span class="o">,</span> <span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">matchBonus</span><span class="o">),</span>
     <span class="no">RANK_4</span><span class="o">(</span><span class="mi">50_000</span><span class="o">,</span> <span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">4</span><span class="o">),</span>
     <span class="no">RANK_5</span><span class="o">(</span><span class="mi">5_000</span><span class="o">,</span> <span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">3</span><span class="o">),</span>
     <span class="no">OUT</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">),</span> <span class="c1">// 1.</span>
     <span class="o">;</span>
    
 <span class="c1">//...</span>
    
 <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                       <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
         <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">condition</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">))</span>
         <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
         <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="no">OUT</span><span class="o">);</span> <span class="c1">// 2. </span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>로또 전체 갯수를, <code class="language-plaintext highlighter-rouge">NONE객체 포함한 COUNTMAP</code>을 통해 구할 수 있다.</strong></p>

    <ul>
      <li>
        <p>values()에 모든 로직이 counting 포함되어있따.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220310180349901.png" alt="image-20220310180349901"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getPrize</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="kt">long</span> <span class="n">totalPrize</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
          <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">mapToLong</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">getPrize</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">getValue</span><span class="o">()))</span>
          <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
        
      <span class="c1">// 전체 로또 구매수를 countMap의 NONE까지 같이 센다.</span>
      <span class="c1">// -&gt; enum처럼 map도 둘다 values().stream 자동완성으로 돌 수 있다.</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">purchasePrice</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">values</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">)</span>
          <span class="o">.</span><span class="na">sum</span><span class="o">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">;</span>
      <span class="k">return</span> <span class="n">totalPrize</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>long  / int라도 둘자 정수니 <strong>한쪽에 (double)만 씌우면 된다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c1">// long vs int 든, int vs int든 나누기가 들어가면 한쪽에 (double)을 씌우자.</span>
 <span class="k">return</span> <span class="n">totalPrize</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">purchasePrice</span><span class="o">;</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPrize</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">long</span> <span class="n">totalPrize</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">entrySet</span><span class="o">()</span>
         <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
         <span class="o">.</span><span class="na">mapToLong</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">getPrize</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">getValue</span><span class="o">()))</span>
         <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
    
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">purchasePrice</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">values</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
         <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">)</span>
         <span class="o">.</span><span class="na">sum</span><span class="o">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">;</span>
    
     <span class="k">return</span> <span class="n">totalPrize</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">purchasePrice</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="31-나눗셈하나-double의-test-return되는-것과-같이-구성해버리기">
<a class="anchor" href="#31-%EB%82%98%EB%88%97%EC%85%88%ED%95%98%EB%82%98-double%EC%9D%98-test-return%EB%90%98%EB%8A%94-%EA%B2%83%EA%B3%BC-%EA%B0%99%EC%9D%B4-%EA%B5%AC%EC%84%B1%ED%95%B4%EB%B2%84%EB%A6%AC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>31 나눗셈(하나 double)의 Test return되는 것과 같이 구성해버리기</h4>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">0.0</code>을 넣어도 되긴 하지만  당첨금(long)   <code class="language-plaintext highlighter-rouge">0L</code> / <code class="language-plaintext highlighter-rouge">(double)</code> 구입금액(int) <code class="language-plaintext highlighter-rouge">4000</code> 으로 똑같이 줘서 구성하면 된다.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// create 테스트에 쓰던 것 그대로 활용</span>
    <span class="kd">final</span> <span class="nc">LottoResult</span> <span class="n">lottoResult</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LottoResult</span><span class="o">(</span><span class="n">lottos</span><span class="o">,</span>
                                                    <span class="k">new</span> <span class="nf">WinningLotto</span><span class="o">(</span>
                                                        <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">16</span><span class="o">),</span>
                                                        <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
                                                    <span class="o">));</span>

    <span class="kd">final</span> <span class="kt">double</span> <span class="n">prize</span> <span class="o">=</span> <span class="n">lottoResult</span><span class="o">.</span><span class="na">getPrize</span><span class="o">();</span>

    <span class="c1">//숫자 비교도 return되는 타입이랑 동일하게 expected주기</span>
    <span class="c1">// -&gt; totalPrize / (double) purchasePrice;</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">prize</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">0L</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="mi">4000</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="단위가-정해져-있는-것의-포장-lottomoney-">
<a class="anchor" href="#%EB%8B%A8%EC%9C%84%EA%B0%80-%EC%A0%95%ED%95%B4%EC%A0%B8-%EC%9E%88%EB%8A%94-%EA%B2%83%EC%9D%98-%ED%8F%AC%EC%9E%A5-lottomoney-" aria-hidden="true"><span class="octicon octicon-link"></span></a>단위가 정해져 있는 것의 포장( LottoMoney )</h3>

<h4 id="1-단위보다-작은지-검사---2--단위로-나눈-나머지-0-검사">
<a class="anchor" href="#1-%EB%8B%A8%EC%9C%84%EB%B3%B4%EB%8B%A4-%EC%9E%91%EC%9D%80%EC%A7%80-%EA%B2%80%EC%82%AC---2--%EB%8B%A8%EC%9C%84%EB%A1%9C-%EB%82%98%EB%88%88-%EB%82%98%EB%A8%B8%EC%A7%80-0-%EA%B2%80%EC%82%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>(1) 단위보다 작은지 검사 -&gt; (2) <code class="language-plaintext highlighter-rouge">% 단위</code>로 나눈 나머지 <code class="language-plaintext highlighter-rouge">!=0</code> 검사</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">validate</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="no">DIVIDE_UNIT</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">LottoMoneyLessException</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">%</span> <span class="no">DIVIDE_UNIT</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">LottoMoneyDivideException</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="32-대상의-필요성-확인후-포장-시작">
<a class="anchor" href="#32-%EB%8C%80%EC%83%81%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1-%ED%99%95%EC%9D%B8%ED%9B%84-%ED%8F%AC%EC%9E%A5-%EC%8B%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>32 대상의 필요성 확인후 포장 시작</h4>

<ul>
  <li>
    <p>메서드 실행시 정제된 input으로 <code class="language-plaintext highlighter-rouge">money</code>가 왔다고 가정했다. -&gt; <strong>근데 실제로 필요한 건 <code class="language-plaintext highlighter-rouge">money / 단위</code>로 산출되는 <code class="language-plaintext highlighter-rouge">횟수</code></strong>가 필요하다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">issue_lotto_by_money</span><span class="o">()</span> <span class="o">{</span>
      <span class="c1">// new Money(3000) 예약</span>
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoney</span><span class="o">(</span><span class="mi">3000</span><span class="o">);</span> 
    
      <span class="c1">// money.메세지() 보내서 횟수를 반환받아 그만큼 반복할 예정</span>
      <span class="n">assertThat</span><span class="o">(</span><span class="n">lottos</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3000</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>count도 뽑아내야한다. count도 결국엔 포장해야할 듯.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
      <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">// input으로 money -&gt; money에게 횟수로 치면 몇번이냐 물어볼 예정임.</span>
          <span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">money</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
    
          <span class="k">return</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="test에서-포장-시작-정정-money---lottomoney-">
<a class="anchor" href="#test%EC%97%90%EC%84%9C-%ED%8F%AC%EC%9E%A5-%EC%8B%9C%EC%9E%91-%EC%A0%95%EC%A0%95-money---lottomoney-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test에서 포장 시작( 정정: Money -&gt; LottoMoney )</h5>

<ol>
  <li>
    <p>Test에서 빨간줄로 시작하며 생성하기
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311231202001.png" alt="image-20220311231202001"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Money</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">money</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Money</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">money</span> <span class="o">=</span> <span class="n">money</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="참고-포장으로-파라미터-달라지는-메테포장-자동생성-끌올--내용복붙후-새기준-vs-case늘릴려고-복사해서-만드는-테메메서드2테매-복-case반영-메서드2복--메서드2수정-메서드2통과--메서드1대체하여-삭제-등은-서로-다른-것">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%ED%8F%AC%EC%9E%A5%EC%9C%BC%EB%A1%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%8B%AC%EB%9D%BC%EC%A7%80%EB%8A%94-%EB%A9%94%ED%85%8C%ED%8F%AC%EC%9E%A5-%EC%9E%90%EB%8F%99%EC%83%9D%EC%84%B1-%EB%81%8C%EC%98%AC--%EB%82%B4%EC%9A%A9%EB%B3%B5%EB%B6%99%ED%9B%84-%EC%83%88%EA%B8%B0%EC%A4%80-vs-case%EB%8A%98%EB%A6%B4%EB%A0%A4%EA%B3%A0-%EB%B3%B5%EC%82%AC%ED%95%B4%EC%84%9C-%EB%A7%8C%EB%93%9C%EB%8A%94-%ED%85%8C%EB%A9%94%EB%A9%94%EC%84%9C%EB%93%9C2%ED%85%8C%EB%A7%A4-%EB%B3%B5-case%EB%B0%98%EC%98%81-%EB%A9%94%EC%84%9C%EB%93%9C2%EB%B3%B5--%EB%A9%94%EC%84%9C%EB%93%9C2%EC%88%98%EC%A0%95-%EB%A9%94%EC%84%9C%EB%93%9C2%ED%86%B5%EA%B3%BC--%EB%A9%94%EC%84%9C%EB%93%9C1%EB%8C%80%EC%B2%B4%ED%95%98%EC%97%AC-%EC%82%AD%EC%A0%9C-%EB%93%B1%EC%9D%80-%EC%84%9C%EB%A1%9C-%EB%8B%A4%EB%A5%B8-%EA%B2%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) <code class="language-plaintext highlighter-rouge">포장으로 파라미터 달라지는 메테(포장-&gt;자동생성-&gt;끌올-&gt; 내용복붙후 새기준)</code> vs <code class="language-plaintext highlighter-rouge">case늘릴려고 복사해서 만드는 테메+메서드2(테매 복-&gt;case반영-&gt;메서드2복 -&gt;메서드2수정-&gt;메서드2통과-&gt; 메서드1대체하여 삭제)</code> 등..은 서로 다른 것</h5>

<h5 id="생성한-예비-새-기준메서드를-기존메서드-위로-위치를-올린-뒤-내용-복붙---포장한-것으로-처리되도록---기존메서드는-포장용으로-변경">
<a class="anchor" href="#%EC%83%9D%EC%84%B1%ED%95%9C-%EC%98%88%EB%B9%84-%EC%83%88-%EA%B8%B0%EC%A4%80%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9C%84%EB%A1%9C-%EC%9C%84%EC%B9%98%EB%A5%BC-%EC%98%AC%EB%A6%B0-%EB%92%A4-%EB%82%B4%EC%9A%A9-%EB%B3%B5%EB%B6%99---%ED%8F%AC%EC%9E%A5%ED%95%9C-%EA%B2%83%EC%9C%BC%EB%A1%9C-%EC%B2%98%EB%A6%AC%EB%90%98%EB%8F%84%EB%A1%9D---%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%ED%8F%AC%EC%9E%A5%EC%9A%A9%EC%9C%BC%EB%A1%9C-%EB%B3%80%EA%B2%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>생성한 <code class="language-plaintext highlighter-rouge">예비 새 기준메서드</code>를 기존메서드 위로 위치를 올린 뒤, 내용 복붙 -&gt; 포장한 것으로 처리되도록 -&gt; 기존메서드는 포장용으로 변경</h5>

<ol>
  <li>
    <p>메서드 파라미터를 바꾸는게 아니라, <code class="language-plaintext highlighter-rouge">메서드2</code>로 생성하고 새 기준 메서드가 되도록 <strong>포장 파라미터로 처리되도록 한다.</strong></p>

    <ul>
      <li>생성한 <code class="language-plaintext highlighter-rouge">예비 새 기준메서드</code>를 기존메서드위로 <strong>위치를 이동</strong>
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311231438444.png" alt="image-20220311231438444"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311231529740.png" alt="image-20220311231529740"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311231636794.png" alt="image-20220311231636794"></p>
  </li>
</ol>

<p>​</p>

<h5 id="새메서드의-내용을-포장된-것으로-바꿀-때-기존값getter로-대체해도-되지만---바로--기존값으로-연산---포장메서드---포장-내부에서-this값으로-연산하도록-처리해야한다">
<a class="anchor" href="#%EC%83%88%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EB%82%B4%EC%9A%A9%EC%9D%84-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EA%B2%83%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%80-%EB%95%8C-%EA%B8%B0%EC%A1%B4%EA%B0%92getter%EB%A1%9C-%EB%8C%80%EC%B2%B4%ED%95%B4%EB%8F%84-%EB%90%98%EC%A7%80%EB%A7%8C---%EB%B0%94%EB%A1%9C--%EA%B8%B0%EC%A1%B4%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%97%B0%EC%82%B0---%ED%8F%AC%EC%9E%A5%EB%A9%94%EC%84%9C%EB%93%9C---%ED%8F%AC%EC%9E%A5-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-this%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%97%B0%EC%82%B0%ED%95%98%EB%8F%84%EB%A1%9D-%EC%B2%98%EB%A6%AC%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>새메서드의 내용을 포장된 것으로 바꿀 때, <code class="language-plaintext highlighter-rouge">기존값.getter()로 대체</code>해도 되지만 -&gt; 바로  <code class="language-plaintext highlighter-rouge">[기존값으로 연산] -&gt; 포장.메서드() -&gt; 포장 내부에서 [this.값으로 연산]</code>하도록 처리해야한다.</h5>

<ol>
  <li>
    <p>기존메서드의 내용을 복붙해온 뒤 -&gt; 포장파라미터에 맞게 수정해준다. <strong>필요시 getter</strong>를 처리했었는데를 <strong>연산이 바로 보이는 곳에서는 .메서드()로 처리</strong> 해줘도 된다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311231733733.png" alt="image-20220311231733733"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311232026057.png" alt="image-20220311232026057"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311232135566.png" alt="image-20220311232135566"></p>
  </li>
</ol>

<p>​</p>

<p>​</p>

<h5 id="기존메서드는-내부에서-파라미터포장-새기준-호출만---기존내용은-다-삭제----회색으로-안쓰인다면-버려도-됨">
<a class="anchor" href="#%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%ED%8F%AC%EC%9E%A5-%EC%83%88%EA%B8%B0%EC%A4%80-%ED%98%B8%EC%B6%9C%EB%A7%8C---%EA%B8%B0%EC%A1%B4%EB%82%B4%EC%9A%A9%EC%9D%80-%EB%8B%A4-%EC%82%AD%EC%A0%9C----%ED%9A%8C%EC%83%89%EC%9C%BC%EB%A1%9C-%EC%95%88%EC%93%B0%EC%9D%B8%EB%8B%A4%EB%A9%B4-%EB%B2%84%EB%A0%A4%EB%8F%84-%EB%90%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>기존메서드는 <code class="language-plaintext highlighter-rouge">내부에서 파라미터포장+ 새기준 호출만</code> -&gt; 기존내용은 다 삭제 - &gt; 회색으로 안쓰인다면 버려도 됨.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220311233535533.png" alt="image-20220311233535533"></p>

<ul>
  <li>기존메서드가 테스트 등에서도 안쓰이니 삭제</li>
</ul>

<h4 id="줄어드는-횟수count-vo의-포장정리용">
<a class="anchor" href="#%EC%A4%84%EC%96%B4%EB%93%9C%EB%8A%94-%ED%9A%9F%EC%88%98count-vo%EC%9D%98-%ED%8F%AC%EC%9E%A5%EC%A0%95%EB%A6%AC%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>줄어드는 횟수Count VO의 포장(정리용)</h4>

<h4 id="33-countvo-hasnext패턴-가진-것--포장">
<a class="anchor" href="#33-countvo-hasnext%ED%8C%A8%ED%84%B4-%EA%B0%80%EC%A7%84-%EA%B2%83--%ED%8F%AC%EC%9E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>33 count(VO, hasNext패턴 가진 것)  포장</h4>

<h5 id="미리-원시값도-줄어들-때-hasnext패턴을-만들어두었다">
<a class="anchor" href="#%EB%AF%B8%EB%A6%AC-%EC%9B%90%EC%8B%9C%EA%B0%92%EB%8F%84-%EC%A4%84%EC%96%B4%EB%93%A4-%EB%95%8C-hasnext%ED%8C%A8%ED%84%B4%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%91%90%EC%97%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>미리 원시값도 줄어들 때 hasNext패턴을 만들어두었다.</h5>

<ul>
  <li>내 패턴으로는 <strong>0을 허용하면서 <code class="language-plaintext highlighter-rouge">더 큰 n부터 줄어들되 0이 아닐때까지, 즉, 1까지</code>도는 것이다.</strong>
</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">count</span> <span class="o">-=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="메서드에서부터-파라미터로-전해지도록-count-포장-포장은-테매-인자에서부터-">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C%EB%B6%80%ED%84%B0-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A1%9C-%EC%A0%84%ED%95%B4%EC%A7%80%EB%8F%84%EB%A1%9D-count-%ED%8F%AC%EC%9E%A5-%ED%8F%AC%EC%9E%A5%EC%9D%80-%ED%85%8C%EB%A7%A4-%EC%9D%B8%EC%9E%90%EC%97%90%EC%84%9C%EB%B6%80%ED%84%B0-" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드에서부터 파라미터로 전해지도록 Count 포장 (포장은 테매 인자에서부터~ )</h5>

<ul>
  <li>
    <p>이름은 도메인Count로 만들어야한다. <strong>포장하는 순간, 대명사가 아니다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003536372.png" alt="image-20220312003536372"></p>
  </li>
</ul>

<ol>
  <li>
    <p>포장하기</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoCount</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">LottoCount</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="vo는-equalshc부터">
<a class="anchor" href="#vo%EB%8A%94-equalshc%EB%B6%80%ED%84%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>VO는 equals/hC부터</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003656278.png" alt="image-20220312003656278"></p>

<h5 id="count-vo는-0까지는-허용해주도록-검증을-만든다-for-while문에서-0까지-간-뒤-0에서-탈출시킴">
<a class="anchor" href="#count-vo%EB%8A%94-0%EA%B9%8C%EC%A7%80%EB%8A%94-%ED%97%88%EC%9A%A9%ED%95%B4%EC%A3%BC%EB%8F%84%EB%A1%9D-%EA%B2%80%EC%A6%9D%EC%9D%84-%EB%A7%8C%EB%93%A0%EB%8B%A4-for-while%EB%AC%B8%EC%97%90%EC%84%9C-0%EA%B9%8C%EC%A7%80-%EA%B0%84-%EB%92%A4-0%EC%97%90%EC%84%9C-%ED%83%88%EC%B6%9C%EC%8B%9C%ED%82%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>count VO는 0까지는 허용해주도록 검증을 만든다. (for while문에서 0까지 간 뒤 0에서 탈출시킴)</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">LottoCount</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"0보다 작을 수 없습니다."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="새기준메서드-새로-만들어-기존메서드-위로-위치이동후-내용복붙후-처리">
<a class="anchor" href="#%EC%83%88%EA%B8%B0%EC%A4%80%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%88%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9C%84%EB%A1%9C-%EC%9C%84%EC%B9%98%EC%9D%B4%EB%8F%99%ED%9B%84-%EB%82%B4%EC%9A%A9%EB%B3%B5%EB%B6%99%ED%9B%84-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>새기준메서드 새로 만들어, 기존메서드 위로 위치이동후, 내용복붙후, 처리</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003800304.png" alt="image-20220312003800304"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003812864.png" alt="image-20220312003812864"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003835351.png" alt="image-20220312003835351"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003858891.png" alt="image-20220312003858891"></p>

<h5 id="값자리에는-포장getter를---연산이-할만하면-바로--메세지를">
<a class="anchor" href="#%EA%B0%92%EC%9E%90%EB%A6%AC%EC%97%90%EB%8A%94-%ED%8F%AC%EC%9E%A5getter%EB%A5%BC---%EC%97%B0%EC%82%B0%EC%9D%B4-%ED%95%A0%EB%A7%8C%ED%95%98%EB%A9%B4-%EB%B0%94%EB%A1%9C--%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>값자리에는 포장.getter()를 -&gt; 연산이 할만하면 바로  메세지를</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312003929036.png" alt="image-20220312003929036"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004010360.png" alt="image-20220312004010360"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004110748.png" alt="image-20220312004110748"></p>

<h5 id="값의-연산---포장-안으로-잘라들고가서-this값으로-연산">
<a class="anchor" href="#%EA%B0%92%EC%9D%98-%EC%97%B0%EC%82%B0---%ED%8F%AC%EC%9E%A5-%EC%95%88%EC%9C%BC%EB%A1%9C-%EC%9E%98%EB%9D%BC%EB%93%A4%EA%B3%A0%EA%B0%80%EC%84%9C-this%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%97%B0%EC%82%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>값의 연산 -&gt; 포장 안으로 <code class="language-plaintext highlighter-rouge">잘라들고가서 this.값으로 연산</code>
</h5>

<ol>
  <li>getter지우고 메세지보내기
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004601305.png" alt="image-20220312004601305">
    <ul>
      <li>만약, 지우고 빨간메서드가 남아있다면 그대로 정의해도 된다.</li>
      <li>여기선 연산<code class="language-plaintext highlighter-rouge">!=0</code>이 남아있으니, <code class="language-plaintext highlighter-rouge">그에 맞는 의미있는 메서드</code>를 지어준다. <strong><code class="language-plaintext highlighter-rouge">0</code>=Finish</strong>가 <strong><code class="language-plaintext highlighter-rouge">!=</code> 아직 Not이냐</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004712286.png" alt="image-20220312004712286">
</li>
      <li>남은 연산을 잘라내서 -&gt; 메서드만들고 -&gt; 내부에서 <code class="language-plaintext highlighter-rouge">this.값으로 잘라낸 연산 처리</code>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004815528.png" alt="image-20220312004815528">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004836272.png" alt="image-20220312004836272">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312004844430.png" alt="image-20220312004844430">
</li>
    </ul>
  </li>
</ol>

<h5 id="값의-재할당---vo에서는-연산만-들고-들어가면서-메서드를-만들고-포장--는-그대로-둔다-----내부에서는this값으로-연산한-뒤-에-대해-새vo로-응답하는--메세지로-작성한다">
<a class="anchor" href="#%EA%B0%92%EC%9D%98-%EC%9E%AC%ED%95%A0%EB%8B%B9---vo%EC%97%90%EC%84%9C%EB%8A%94-%EC%97%B0%EC%82%B0%EB%A7%8C-%EB%93%A4%EA%B3%A0-%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B4%EC%84%9C-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B3%A0-%ED%8F%AC%EC%9E%A5--%EB%8A%94-%EA%B7%B8%EB%8C%80%EB%A1%9C-%EB%91%94%EB%8B%A4-----%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C%EB%8A%94this%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%97%B0%EC%82%B0%ED%95%9C-%EB%92%A4-%EC%97%90-%EB%8C%80%ED%95%B4-%EC%83%88vo%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%95%98%EB%8A%94--%EB%A9%94%EC%84%B8%EC%A7%80%EB%A1%9C-%EC%9E%91%EC%84%B1%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>값의 재할당 -&gt; VO에서는 <code class="language-plaintext highlighter-rouge">연산만 들고 들어가면서 메서드를 만들</code>고, <code class="language-plaintext highlighter-rouge">포장 = </code>는 그대로 둔다. -&gt;   내부에서는<code class="language-plaintext highlighter-rouge">this.값으로 연산</code>한 뒤 <code class="language-plaintext highlighter-rouge">=</code>에 대해 <code class="language-plaintext highlighter-rouge">새VO로 응답</code>하는  [메세지]로 작성한다.</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">-= 1</code>을 포장 처리하려면</p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">-1</code> 을 내부로 들고 들어가서 <code class="language-plaintext highlighter-rouge">this.값 -1</code>으로 연산</li>
      <li>
<code class="language-plaintext highlighter-rouge">=</code>은 <strong>새 VO를 반환</strong>
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005238446.png" alt="image-20220312005238446"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005247506.png" alt="image-20220312005247506"></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">=</code> 놓아두고, <code class="language-plaintext highlighter-rouge">-1</code>만 들고 들어가면서, <code class="language-plaintext highlighter-rouge">연산과 관련된 메서드명</code>으로 메세지를 보낸다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005409104.png" alt="image-20220312005409104"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005445774.png" alt="image-20220312005445774"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005609930.png" alt="image-20220312005609930"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005630589.png" alt="image-20220312005630589"></p>
  </li>
</ol>

<h5 id="연산을-들고들어갔더라도-바깥에서는-포장변수---이-새-vo응답을-기다리고-있으므로-내부연산-결과를-포장해서-응답해준다">
<a class="anchor" href="#%EC%97%B0%EC%82%B0%EC%9D%84-%EB%93%A4%EA%B3%A0%EB%93%A4%EC%96%B4%EA%B0%94%EB%8D%94%EB%9D%BC%EB%8F%84-%EB%B0%94%EA%B9%A5%EC%97%90%EC%84%9C%EB%8A%94-%ED%8F%AC%EC%9E%A5%EB%B3%80%EC%88%98---%EC%9D%B4-%EC%83%88-vo%EC%9D%91%EB%8B%B5%EC%9D%84-%EA%B8%B0%EB%8B%A4%EB%A6%AC%EA%B3%A0-%EC%9E%88%EC%9C%BC%EB%AF%80%EB%A1%9C-%EB%82%B4%EB%B6%80%EC%97%B0%EC%82%B0-%EA%B2%B0%EA%B3%BC%EB%A5%BC-%ED%8F%AC%EC%9E%A5%ED%95%B4%EC%84%9C-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>연산을 들고들어갔더라도 <code class="language-plaintext highlighter-rouge">바깥</code>에서는 <code class="language-plaintext highlighter-rouge">포장변수 =  </code>이 새 VO응답을 기다리고 있으므로 <code class="language-plaintext highlighter-rouge">내부연산 결과를 포장해서 응답</code>해준다.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005715018.png" alt="image-20220312005715018"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005725788.png" alt="image-20220312005725788"></p>

<ul>
  <li>final을 풀어 재할당 가능하게 해준다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312005808639.png" alt="image-20220312005808639">
</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
        <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLotto</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="포장전-기존메서드가-사용중이면-찾아가서-수정해준다">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EC%A0%84-%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%82%AC%EC%9A%A9%EC%A4%91%EC%9D%B4%EB%A9%B4-%EC%B0%BE%EC%95%84%EA%B0%80%EC%84%9C-%EC%88%98%EC%A0%95%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장전 기존메서드가 사용중이면 찾아가서, 수정해준다.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312010317777.png" alt="image-20220312010317777"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312010330740.png" alt="image-20220312010330740"></p>

<ul>
  <li>
    <p>count가 사용중인데, 일단 <code class="language-plaintext highlighter-rouge">money.getCount()</code>의 반환값도 원시count으로 바꿔준다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">money</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312010436131.png" alt="image-20220312010436131"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="nc">LottoCount</span> <span class="nf">getCount</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">LottoCount</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">money</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Money</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">count</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
    
      <span class="k">return</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="새-기준메서드-완성시-포장검증을-메서드로-퉁치는-테스트-1이하에서-에러">
<a class="anchor" href="#%EC%83%88-%EA%B8%B0%EC%A4%80%EB%A9%94%EC%84%9C%EB%93%9C-%EC%99%84%EC%84%B1%EC%8B%9C-%ED%8F%AC%EC%9E%A5%EA%B2%80%EC%A6%9D%EC%9D%84-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%ED%89%81%EC%B9%98%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8-1%EC%9D%B4%ED%95%98%EC%97%90%EC%84%9C-%EC%97%90%EB%9F%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>새 기준메서드 완성시, 포장검증을 메서드로 퉁치는 테스트(-1이하에서 에러)</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312011115940.png" alt="image-20220312011115940"></p>

<h5 id="자체-도메인test생성후-count-vo-검사">
<a class="anchor" href="#%EC%9E%90%EC%B2%B4-%EB%8F%84%EB%A9%94%EC%9D%B8test%EC%83%9D%EC%84%B1%ED%9B%84-count-vo-%EA%B2%80%EC%82%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>자체 도메인Test생성후 Count VO 검사</h5>

<ul>
  <li>0까지 허용하여  음수 생성자 에러</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">create</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertAll</span><span class="o">(</span>
        <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">LottoCount</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
            <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">LottoCount</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
            <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">LottoCount</span><span class="o">(-</span><span class="mi">1</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>1개 뽑 + 감소된 것 뽑 -&gt;  감소된 로직후 동일한지 비교</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">decrease</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">lottoCount</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LottoCount</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">expected</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LottoCount</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// 감소된 것 미리 뽑기</span>

    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">actual</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expected</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="랜덤구현---전략패턴으로-수동-더하기정리용">
<a class="anchor" href="#%EB%9E%9C%EB%8D%A4%EA%B5%AC%ED%98%84---%EC%A0%84%EB%9E%B5%ED%8C%A8%ED%84%B4%EC%9C%BC%EB%A1%9C-%EC%88%98%EB%8F%99-%EB%8D%94%ED%95%98%EA%B8%B0%EC%A0%95%EB%A6%AC%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>랜덤구현 -&gt; 전략패턴으로 수동 더하기(정리용)</h4>

<h4 id="34-랜덤-최소단위-메서드를-전략메서드로-바꿔-수동도-가능하게-하기">
<a class="anchor" href="#34-%EB%9E%9C%EB%8D%A4-%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EB%B0%94%EA%BF%94-%EC%88%98%EB%8F%99%EB%8F%84-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>34 [랜덤 최소단위 메서드]를 전략메서드로 바꿔 [수동]도 가능하게 하기</h4>

<h5 id="전략부위가-만약-메서드화-안되어있으면ex조건식-메서드화-추출-등">
<a class="anchor" href="#%EC%A0%84%EB%9E%B5%EB%B6%80%EC%9C%84%EA%B0%80-%EB%A7%8C%EC%95%BD-%EB%A9%94%EC%84%9C%EB%93%9C%ED%99%94-%EC%95%88%EB%90%98%EC%96%B4%EC%9E%88%EC%9C%BC%EB%A9%B4ex%EC%A1%B0%EA%B1%B4%EC%8B%9D-%EB%A9%94%EC%84%9C%EB%93%9C%ED%99%94-%EC%B6%94%EC%B6%9C-%EB%93%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>전략부위가 만약, 메서드화 안되어있으면(ex&gt;조건식) 메서드화 (추출 등)</h5>

<ul>
  <li>메서드명을 <code class="language-plaintext highlighter-rouge">랜덤+수동다 포함하는 일반화 + 목적어 뺌(전략인페+구현전략들에 명시됨)</code>된 전략메서드로 바꿔주기</li>
</ul>

<h5 id="랜덤-최소단위-메서드-정의부---호출부-찾기">
<a class="anchor" href="#%EB%9E%9C%EB%8D%A4-%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%A0%95%EC%9D%98%EB%B6%80---%ED%98%B8%EC%B6%9C%EB%B6%80-%EC%B0%BE%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">랜덤 최소단위 메서드</code> 정의부 -&gt; <code class="language-plaintext highlighter-rouge">호출()부</code> 찾기</h5>

<ol>
  <li>
    <p>랜덤 메서드 정의부 찾기
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312131559611.png" alt="image-20220312131559611"></p>
  </li>
  <li>
    <p><strong>랜덤 메서드의 호출부 찾기</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312131647458.png" alt="image-20220312131647458"></p>
  </li>
</ol>

<p>##### 랜덤 메서드 호출부에서 <code class="language-plaintext highlighter-rouge">랜덤 메서드명을 -&gt; 수동포함하는 일반화된 전략메서드명() + 목적어 제거</code>으로 변경  -&gt; <code class="language-plaintext highlighter-rouge">전략인페를 상속한 new 랜덤전략구현체 객체(). 전략메서드()</code> 인척 빨간줄 생성해주기</p>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">일반화된 메서드명</code> 상태에서 -&gt; 빨간줄로 <code class="language-plaintext highlighter-rouge">외부주입된 랜덤전략구현체 객체</code> + <code class="language-plaintext highlighter-rouge">전략메서드()</code>호출</strong>해준다.</p>

    <ul>
      <li>
        <p>기존상태( 메서드명을 랜덤+수동다 포함하는 <strong><code class="language-plaintext highlighter-rouge">일반화된 + 목적어빠진 전략메서드명</code>으로 바꿔주기</strong>)</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312134713439.png" alt="image-20220312134713439"></p>

        <ul>
          <li><strong>전략메서드에 목적어 넣지마라</strong></li>
        </ul>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312135004891.png" alt="image-20220312135004891"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
      <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
          <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
          <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">issue</span><span class="o">());</span>
      <span class="o">}</span>
        
      <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
  <span class="o">}</span>
        
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">()</span> <span class="o">{</span>
      <span class="nc">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                       <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
                       <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
                       <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">외부주입된 new 랜덤전략객체</code>에서 호출한 <code class="language-plaintext highlighter-rouge">전략메서드()</code>인척 해서 빨간줄로 생성하기</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312135034060.png" alt="image-20220312135034060"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
     <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
         <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
         <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">RandomLottoIssuer</span><span class="o">().</span><span class="na">issue</span><span class="o">());</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312135300826.png" alt="image-20220312135300826">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312135321651.png" alt="image-20220312135321651"></p>
  </li>
  <li>
    <p>전략메서드도 작성
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312135417506.png" alt="image-20220312135417506"></p>
  </li>
</ol>

<h5 id="랜덤전략객체전략메서드로----기존-랜덤-메서드-에-있던-랜덤-로직-옮겨주기">
<a class="anchor" href="#%EB%9E%9C%EB%8D%A4%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C----%EA%B8%B0%EC%A1%B4-%EB%9E%9C%EB%8D%A4-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%97%90-%EC%9E%88%EB%8D%98-%EB%9E%9C%EB%8D%A4-%EB%A1%9C%EC%A7%81-%EC%98%AE%EA%B2%A8%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>랜덤전략객체.전략메서드()로 &lt;- [ 기존 랜덤 메서드 ]에 있던 랜덤 로직 옮겨주기</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RandomLottoIssuer</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">LOTTO_NUMBERS</span><span class="o">;</span>

    <span class="kd">static</span> <span class="o">{</span>
        <span class="no">LOTTO_NUMBERS</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MIN</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MAX</span><span class="o">)</span>
            <span class="o">.</span><span class="na">mapToObj</span><span class="o">(</span><span class="nl">LottoNumber:</span><span class="o">:</span><span class="n">getInstance</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                         <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
                         <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
                         <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="외부주입-전략객체를---외부파라미터로-받기-위해서---실제-전략인페-정의해주기">
<a class="anchor" href="#%EC%99%B8%EB%B6%80%EC%A3%BC%EC%9E%85-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4%EB%A5%BC---%EC%99%B8%EB%B6%80%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A1%9C-%EB%B0%9B%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C---%EC%8B%A4%EC%A0%9C-%EC%A0%84%EB%9E%B5%EC%9D%B8%ED%8E%98-%EC%A0%95%EC%9D%98%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>외부주입 전략객체를 -&gt; 외부파라미터로 받기 위해서 -&gt; 실제 전략인페 정의해주기</h5>

<ol>
  <li>
    <p>앞에서 정의한 랜덤전략객체를 보고 전략인페를 생성한다.</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">RandomLottoIssuer</code> -&gt; <strong><code class="language-plaintext highlighter-rouge">LottoIssuer</code></strong>  -&gt; 앞으로 xxxxLottoIssuer 등</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">전략인페명</code>으로 패키지를 만들어서 다같이 넣어주면 좋다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140142253.png" alt="image-20220312140142253"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140155431.png" alt="image-20220312140155431">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140216397.png" alt="image-20220312140216397"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>전략메서드명은 다 통일이다. 목적어없이 동사만</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">issue()</code></p>
      </li>
      <li>
        <p><strong>특정전략메서드의 <code class="language-plaintext highlighter-rouge">반환타입을 참고</code>해서 <code class="language-plaintext highlighter-rouge">추상메서드를 정의</code>해준다.</strong></p>

        <ul>
          <li>
            <p>랜덤전략의 메서드 반환타입 보고
  <img src="C:%5CUsers%5Ccho_desktop%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220312140307738.png" alt="image-20220312140307738"></p>
          </li>
          <li>
            <p><strong>정의부 복붙해와서 <code class="language-plaintext highlighter-rouge">반환타입 + 메서드명</code>빼고 다 달리기</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140410033.png" alt="image-20220312140410033"></p>

            <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140421064.png" alt="image-20220312140421064"></p>

            <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140546308.png" alt="image-20220312140546308"></p>

            <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">LottoIssuer</span> <span class="o">{</span>
      <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<p>​</p>

<h5 id="new-외부전략객체-생성하던-곳으로-돌아가서----변수파라미터는-추상체로--외부주입-받아-추상체전략메서드하도록-한다">
<a class="anchor" href="#new-%EC%99%B8%EB%B6%80%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%ED%95%98%EB%8D%98-%EA%B3%B3%EC%9C%BC%EB%A1%9C-%EB%8F%8C%EC%95%84%EA%B0%80%EC%84%9C----%EB%B3%80%EC%88%98%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%8A%94-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A1%9C--%EC%99%B8%EB%B6%80%EC%A3%BC%EC%9E%85-%EB%B0%9B%EC%95%84-%EC%B6%94%EC%83%81%EC%B2%B4%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%ED%95%98%EB%8F%84%EB%A1%9D-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>new 외부전략객체() 생성하던 곳으로 돌아가서  -&gt; <code class="language-plaintext highlighter-rouge">변수/파라미터는 추상체로  외부주입 받아, 추상체.전략메서드()</code>하도록 한다.</h5>

<ol>
  <li>
    <p>기존: 외부주입없이 + 구상체로 사용</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140728576.png" alt="image-20220312140728576"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoFactory</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">)</span> <span class="o">{</span>
         <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
         <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
             <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
             <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">RandomLottoIssuer</span><span class="o">().</span><span class="na">issue</span><span class="o">());</span>
         <span class="o">}</span>
    
         <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="호출부-중-전략객체만-선택해서-파라미터로-추출">
<a class="anchor" href="#%ED%98%B8%EC%B6%9C%EB%B6%80-%EC%A4%91-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4%EB%A7%8C-%EC%84%A0%ED%83%9D%ED%95%B4%EC%84%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A1%9C-%EC%B6%94%EC%B6%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>호출부 중 전략객체만 선택해서 파라미터로 추출</h5>

<ol>
  <li>
    <p><strong>전략메서드를 제외한 전략객체만 선택해서 추출하면 된다.</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140839186.png" alt="image-20220312140839186">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140847831.png" alt="image-20220312140847831"></p>
  </li>
  <li>
    <p><strong>추상체 이름과, 파라미터 Type모두 추상체로 바꿔준다.</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140923314.png" alt="image-20220312140923314"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312140931250.png" alt="image-20220312140931250"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoFactory</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">LottoIssuer</span> <span class="n">lottoIssuer</span><span class="o">)</span> <span class="o">{</span>
         <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
         <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
             <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
             <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">lottoIssuer</span><span class="o">.</span><span class="na">issue</span><span class="o">());</span>
         <span class="o">}</span>
            
         <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="처음에는-내부에서-특정-전략객체를-만들어썻찌만---파라미터-추출하면-알아서-외부에서-주입된다">
<a class="anchor" href="#%EC%B2%98%EC%9D%8C%EC%97%90%EB%8A%94-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%ED%8A%B9%EC%A0%95-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%8D%BB%EC%B0%8C%EB%A7%8C---%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EC%B6%94%EC%B6%9C%ED%95%98%EB%A9%B4-%EC%95%8C%EC%95%84%EC%84%9C-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-%EC%A3%BC%EC%9E%85%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>처음에는 내부에서 특정 전략객체를 만들어썻찌만 -&gt; 파라미터 추출하면 알아서 외부에서 주입된다</h5>

<ul>
  <li>
    <p>그 장소가 service라도 괜찮다. spring에서는 알아서 service에서 외부주입 받는다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312141339520.png" alt="image-20220312141339520"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
      <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Money</span> <span class="n">money</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">count</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
    
          <span class="k">return</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">count</span><span class="o">,</span> <span class="k">new</span> <span class="nc">RandomLottoIssuer</span><span class="o">());</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="이제-전략인페를-impl-수동-구현만---tdd에서-수동메서드-완성해보자">
<a class="anchor" href="#%EC%9D%B4%EC%A0%9C-%EC%A0%84%EB%9E%B5%EC%9D%B8%ED%8E%98%EB%A5%BC-impl-%EC%88%98%EB%8F%99-%EA%B5%AC%ED%98%84%EB%A7%8C---tdd%EC%97%90%EC%84%9C-%EC%88%98%EB%8F%99%EB%A9%94%EC%84%9C%EB%93%9C-%EC%99%84%EC%84%B1%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>이제 전략인페를 impl 수동 구현만 -&gt; TDD에서 수동메서드 완성해보자.</h5>

<ol>
  <li>
    <p>수동 전략impl 구현체를 생성한다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312141544414.png" alt="image-20220312141544414"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312141638620.png" alt="image-20220312141638620"></p>
  </li>
  <li>
    <p>관련 테스트(LottoFactoryTest)로 가서, 해당메서드를 완성해야한다.</p>

    <ul>
      <li>
        <p>test에서 <code class="language-plaintext highlighter-rouge">외부전략객체생성</code> 후 <code class="language-plaintext highlighter-rouge">전략메서드()</code>호출해도 아무도일도 안일어날 것이다.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312141926117.png" alt="image-20220312141926117"></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312141931627.png" alt="image-20220312141931627"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>미리 작성된 <code class="language-plaintext highlighter-rouge">RandomLottoIssuer</code>를 띄워놓고(tabmover -&gt; ctrl+alt+shift+D)로 참고하면서 내용을 채워나가면 된다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312142342869.png" alt="image-20220312142342869"></p>
  </li>
</ol>

<p>​</p>

<p>​</p>

<p>​</p>

<p>​</p>

<p>​</p>

<h5 id="대박-전략메서드-준비물을-메서드-인자가-아닌---각-전략별-전략객체-생성자정펙매에서-받아-준비해두자">
<a class="anchor" href="#%EB%8C%80%EB%B0%95-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C-%EC%A4%80%EB%B9%84%EB%AC%BC%EC%9D%84-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B8%EC%9E%90%EA%B0%80-%EC%95%84%EB%8B%8C---%EA%B0%81-%EC%A0%84%EB%9E%B5%EB%B3%84-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EC%9E%90%EC%A0%95%ED%8E%99%EB%A7%A4%EC%97%90%EC%84%9C-%EB%B0%9B%EC%95%84-%EC%A4%80%EB%B9%84%ED%95%B4%EB%91%90%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>대박) 전략메서드 준비물을 [메서드() 인자]가 아닌 -&gt; <code class="language-plaintext highlighter-rouge">각 전략별 [전략객체 생성자/정펙매]에서 받아 준비해두자</code>
</h5>

<ul>
  <li>
    <p>랜덤로직을 랜덤전략객체에 옮기고 나니 <strong>랜덤에 필요한 것들이 생성자나 변수에서 처리되고 있었다.</strong></p>

    <ul>
      <li><strong>각 전략별 전략메서드 실행시 필요한 준비물은 <code class="language-plaintext highlighter-rouge">각 전략객체 생성자/정펙매에서 파라미터로 받자</code></strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312142334323.png" alt="image-20220312142334323"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RandomLottoIssuer</span> <span class="kd">implements</span> <span class="nc">LottoIssuer</span> <span class="o">{</span>
      <span class="kd">static</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="no">LOTTO_NUMBERS</span><span class="o">;</span>
    
      <span class="kd">static</span> <span class="o">{</span>
          <span class="no">LOTTO_NUMBERS</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MIN</span><span class="o">,</span> <span class="nc">LottoNumber</span><span class="o">.</span><span class="na">MAX</span><span class="o">)</span>
              <span class="o">.</span><span class="na">mapToObj</span><span class="o">(</span><span class="nl">LottoNumber:</span><span class="o">:</span><span class="n">getInstance</span><span class="o">)</span>
              <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
      <span class="o">}</span>
    
      <span class="kd">public</span> <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">()</span> <span class="o">{</span>
          <span class="nc">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">);</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="no">LOTTO_NUMBERS</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
              <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
              <span class="o">.</span><span class="na">sorted</span><span class="o">()</span>
              <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>
    <p>수동로또준비물은 <code class="language-plaintext highlighter-rouge">수동 입력된 번호 List</code>일 것이다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312142852039.png" alt="image-20220312142852039"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">manual_issue</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// 전략들의 준비물은 전략메서드()에서는 따로따로 못받는다. -&gt; 전략객체 만들때 미리 준비되어있어야한다.</span>
    
     <span class="c1">//1. 수동로또전략의 준비물은 [1,2,3, 수동입력]이 있어야 -&gt; issue()로 [1,2,3, 수동로또]를 발급할 수 있을 것이다.</span>
     <span class="c1">// -&gt; input은 나중에 처리하고, 정제된rawInput을 생성자에서 받아주자.</span>
    
     <span class="c1">//final Lotto lotto = new ManualLottoIssuer().issue();</span>
     <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">lotto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ManualLottoIssuer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">).</span><span class="na">issue</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>일단 가변인자로 받도록 만들어놨으니… 저렇게 처리했음.</li>
    </ul>
  </li>
  <li>
    <p>전략객체 <code class="language-plaintext highlighter-rouge">생성시부터 준비물 -&gt; 변수</code>에 받아<strong>준비해두자</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ManualLottoIssuer</span> <span class="kd">implements</span> <span class="nc">LottoIssuer</span> <span class="o">{</span>
    
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Integer</span><span class="o">[]</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">ManualLottoIssuer</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Integer</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
    
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedOperationException</span><span class="o">(</span><span class="s">"ManualLottoIssuer#issue not implemented."</span><span class="o">);</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>전략메서드에서 준비물을 사용해서 처리해주자.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ManualLottoIssuer</span> <span class="kd">implements</span> <span class="nc">LottoIssuer</span> <span class="o">{</span>
    
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Integer</span><span class="o">[]</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">ManualLottoIssuer</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Integer</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
    
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="nc">Lotto</span> <span class="nf">issue</span><span class="o">()</span> <span class="o">{</span>
         <span class="c1">//throw new UnsupportedOperationException("ManualLottoIssuer#issue not implemented.");</span>
         <span class="c1">//2. 전략객체가 생성시 받아둔 준비물을 가지고 전략메서드로 반환하자.</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
     <span class="o">}</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p>가장 기본적인 일급테스트인 size + contains만 테스트 해줬다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">manual_issue</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">manualLotto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ManualLottoIssuer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">).</span><span class="na">issue</span><span class="o">();</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">manualLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">contains</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">manualLotto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ManualLottoIssuer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">).</span><span class="na">issue</span><span class="o">();</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">manualLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">()).</span><span class="na">containsExactly</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
     <span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="초대박-테스트용-람다-전략은-전략객체-대신이-아니라-내부-전략메서호출될-응답까지를-미리-주는-것---테스트에서-내부랜덤결과전략메서드-응답type을-외부-객체주입시-넣어줄-수-있다">
<a class="anchor" href="#%EC%B4%88%EB%8C%80%EB%B0%95-%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9A%A9-%EB%9E%8C%EB%8B%A4-%EC%A0%84%EB%9E%B5%EC%9D%80-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4-%EB%8C%80%EC%8B%A0%EC%9D%B4-%EC%95%84%EB%8B%88%EB%9D%BC-%EB%82%B4%EB%B6%80-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%ED%98%B8%EC%B6%9C%EB%90%A0-%EC%9D%91%EB%8B%B5%EA%B9%8C%EC%A7%80%EB%A5%BC-%EB%AF%B8%EB%A6%AC-%EC%A3%BC%EB%8A%94-%EA%B2%83---%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%97%90%EC%84%9C-%EB%82%B4%EB%B6%80%EB%9E%9C%EB%8D%A4%EA%B2%B0%EA%B3%BC%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%91%EB%8B%B5type%EC%9D%84-%EC%99%B8%EB%B6%80-%EA%B0%9D%EC%B2%B4%EC%A3%BC%EC%9E%85%EC%8B%9C-%EB%84%A3%EC%96%B4%EC%A4%84-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>초대박) <code class="language-plaintext highlighter-rouge">테스트용 람다 전략</code>은 전략객체 대신이 아니라 <code class="language-plaintext highlighter-rouge">내부 전략메서호출()될 응답</code>까지를 미리 주는 것 -&gt; 테스트에서 내부랜덤결과(전략메서드 응답type)을 <code class="language-plaintext highlighter-rouge">외부 객체주입시 넣어줄 수 있다</code>
</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">전략객체를 주입받는 메서드(전략메서드 호출()부를 감싸는 메서드)</code>에 new 전략객체를 입력해서</p>

    <ul>
      <li>내부에서 <code class="language-plaintext highlighter-rouge">서로다른 전략메서드()</code> 호출 -&gt; <code class="language-plaintext highlighter-rouge">전략마다 다른 응답값</code>을 사용하는 것이 기본 패턴인데</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312151533837.png" alt="image-20220312151533837"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220312151549205.png" alt="image-20220312151549205"></p>
  </li>
  <li>
    <p><strong>람다전략은 <code class="language-plaintext highlighter-rouge">new전략객체</code> 대신 ` () -&gt; 전략메소드의 응답(Lotto)`까지 한번에 주입한다.</strong></p>

    <ol>
      <li>
        <p>예시1: 전략객체가 들어가던 <code class="language-plaintext highlighter-rouge">boolean응답 전략메소드</code>의 전략객체 주입</p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="n">js</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="k">new</span> <span class="nc">RandomMoveConditionStrategy</span><span class="o">());</span>
        
 <span class="n">js</span><span class="o">.</span><span class="na">printPosition</span><span class="o">();</span>
</code></pre></div>        </div>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">move</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">if</span><span class="o">(</span><span class="n">isMovable</span><span class="o">()){</span>
         <span class="k">this</span><span class="o">.</span><span class="na">position</span><span class="o">++;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>        </div>

        <ul>
          <li><strong>전략객체 대신 <code class="language-plaintext highlighter-rouge">람다 () -&gt; boolean응답</code>까지 미리 지정해서 전략자리에 대입</strong></li>
        </ul>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="n">jk</span><span class="o">.</span><span class="na">move</span><span class="o">(</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="kc">true</span><span class="o">);</span>
        
 <span class="n">jk</span><span class="o">.</span><span class="na">printPosition</span><span class="o">();</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>
    <p>로또에 적용해보면, <strong>2번째 인자로 전략객체를 받아 -&gt; 그에 맞는 전략메서드()내부 호출하는 <code class="language-plaintext highlighter-rouge">issueLottoByCount( , )</code></strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueLottoByCount</span><span class="o">(</span><span class="nc">LottoCount</span> <span class="n">lottoCount</span><span class="o">,</span>
                                             <span class="kd">final</span> <span class="nc">LottoIssuer</span> <span class="n">lottoIssuer</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
     <span class="k">while</span> <span class="o">(</span><span class="n">lottoCount</span><span class="o">.</span><span class="na">isNotFinish</span><span class="o">())</span> <span class="o">{</span>
         <span class="n">lottoCount</span> <span class="o">=</span> <span class="n">lottoCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">();</span>
         <span class="n">lottos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">lottoIssuer</span><span class="o">.</span><span class="na">issue</span><span class="o">());</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="n">lottos</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>여기에 2번째 인자에 <strong>테스트용 람다전략으로서 <code class="language-plaintext highlighter-rouge">전략메서드 응답값을  포함한 람다전략</code>을 대입하자</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">lambda</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">LottoCount</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
         <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">));</span>
     <span class="c1">// 외부 전략객체가 들어와야하는데, 람다(내부전략메소드 호출후 응답갑까지 미리)를 대입</span>
    
     <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">lottos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="요약-전략객체-자리에-내부전략메서드호출-끝난-응답값까지-구현하여-전달하는-람다전략">
<a class="anchor" href="#%EC%9A%94%EC%95%BD-%EC%A0%84%EB%9E%B5%EA%B0%9D%EC%B2%B4-%EC%9E%90%EB%A6%AC%EC%97%90-%EB%82%B4%EB%B6%80%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C-%EB%81%9D%EB%82%9C-%EC%9D%91%EB%8B%B5%EA%B0%92%EA%B9%8C%EC%A7%80-%EA%B5%AC%ED%98%84%ED%95%98%EC%97%AC-%EC%A0%84%EB%8B%AC%ED%95%98%EB%8A%94-%EB%9E%8C%EB%8B%A4%EC%A0%84%EB%9E%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>요약: [전략객체 ]자리에 <code class="language-plaintext highlighter-rouge">내부.전략메서드()호출 끝난 응답값까지 구현</code>하여 전달하는 람다전략</h5>

<h3 id="횟수만큼-자동-로또-생성---횟수를-수동자동-나누어서-로또-생성">
<a class="anchor" href="#%ED%9A%9F%EC%88%98%EB%A7%8C%ED%81%BC-%EC%9E%90%EB%8F%99-%EB%A1%9C%EB%98%90-%EC%83%9D%EC%84%B1---%ED%9A%9F%EC%88%98%EB%A5%BC-%EC%88%98%EB%8F%99%EC%9E%90%EB%8F%99-%EB%82%98%EB%88%84%EC%96%B4%EC%84%9C-%EB%A1%9C%EB%98%90-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>횟수만큼 자동 로또 생성 -&gt; 횟수를 수동+자동 나누어서 로또 생성</h3>

<h4 id="35-수동-로또를-input이-왔다고-치고-나눠서-수동--자동-생성하기">
<a class="anchor" href="#35-%EC%88%98%EB%8F%99-%EB%A1%9C%EB%98%90%EB%A5%BC-input%EC%9D%B4-%EC%99%94%EB%8B%A4%EA%B3%A0-%EC%B9%98%EA%B3%A0-%EB%82%98%EB%88%A0%EC%84%9C-%EC%88%98%EB%8F%99--%EC%9E%90%EB%8F%99-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>35 수동 로또를 input이 왔다고 치고, 나눠서 수동 + 자동 생성하기</h4>

<h5 id="포장이-끝난-상태라면-메서드-파라미터-추가는--정제된-input보다는-포장된-것으로-추가해주자">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EC%9D%B4-%EB%81%9D%EB%82%9C-%EC%83%81%ED%83%9C%EB%9D%BC%EB%A9%B4-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EC%B6%94%EA%B0%80%EB%8A%94--%EC%A0%95%EC%A0%9C%EB%90%9C-input%EB%B3%B4%EB%8B%A4%EB%8A%94-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EA%B2%83%EC%9C%BC%EB%A1%9C-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장이 끝난 상태라면, [메서드 파라미터 추가]는  정제된 input보다는 [포장]된 것으로 추가해주자.</h5>

<ol>
  <li>
    <p>자동로또 만들어 주는 메서드에  수동로또를 파라미터에 추가하자</p>

    <ul>
      <li>이 때, 정제된 input인 <code class="language-plaintext highlighter-rouge">List.of(1,2,3,4)</code>가 아니라 <strong>포장 끝났으니 실제 포장된 <code class="language-plaintext highlighter-rouge">new Lotto()</code>를</strong> 넣어주자.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">issue_with_money_and_manual</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//        final List&lt;Lotto&gt; lottos = LottoService.issueByMoney(new Money(3000));</span>
    
     <span class="c1">//1. 돈만 받아서, 알아서 횟수만큼 자동로또 -&gt;  돈 과 수동로또input을 같이 받도록 변경</span>
     <span class="c1">// -&gt; 파라미터 다른 메서드를 만들고 -&gt; 그 다음 이름변경하자. (기존 코드 돌아가야되니 복붙개념으로 가야됨)</span>
     <span class="c1">// -&gt; 수동이 여러개일 수 있다 -&gt; 만약 리스트라면, 6개숫자리스트의 리스트가 들어올 것이다.</span>
     <span class="c1">// -&gt; **서비스 메서드에는 controller에서 도메인으로 이미 포장으로 변수를 받아놓고 호출되었을 것이다.</span>
     <span class="c1">// --&gt; 포장작업은 이미 끝내놨으니, 파라미터를 포장으로 받아도 된다.</span>
     <span class="c1">// --&gt; 서비스 메서드(메인로직)에서 이미 포장끝났다면 rawInput보다는 포장된 것을 파라미터로 던지자!</span>
     <span class="c1">//        LottoService.issueByMoney(new Money(3000), List.of(1,2,3,4,5,6));</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">totalLotto</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoney</span><span class="o">(</span><span class="k">new</span> <span class="nc">Money</span><span class="o">(</span><span class="mi">3000</span><span class="o">),</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">)));</span>
    
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="파라미터-변경하지말고-메서드를-새로-생성---기존메서드위로-가져와서-내용복붙후-처리">
<a class="anchor" href="#%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%B3%80%EA%B2%BD%ED%95%98%EC%A7%80%EB%A7%90%EA%B3%A0-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%83%88%EB%A1%9C-%EC%83%9D%EC%84%B1---%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C%EC%9C%84%EB%A1%9C-%EA%B0%80%EC%A0%B8%EC%99%80%EC%84%9C-%EB%82%B4%EC%9A%A9%EB%B3%B5%EB%B6%99%ED%9B%84-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>파라미터 변경하지말고, 메서드를 새로 생성 -&gt; 기존메서드위로 가져와서 내용복붙후 처리</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//2. 기존메서드 위로 올린 뒤, 내용 복붙해와서 처리해보자.</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoney</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Money</span> <span class="n">money</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//3. 자동을 돌릴 갯수가 돈/1000이 아니라 수동로또수만큼 빼야한다.</span>
    <span class="c1">//final LottoCount count = money.getCount();</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
    <span class="c1">//4. VO 증감 메서드는 항상 응답받을 준비를 한다.</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">autoCount</span> <span class="o">=</span> <span class="n">totalCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">(</span><span class="n">lottos</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

    <span class="c1">//5. 기존에는 자동로또가 전체로또였다. 이;번엔 수동로또 + 자동로또 합쳐서 건네애햐한다.</span>
    <span class="c1">//        return LottoFactory.issueLottoByCount(count, new RandomLottoIssuer());</span>

    <span class="c1">//6. 수동로또는 파라미터로 넘어올 것이다. 자동만 갯수만큼 -&gt; 수동은 input에 의해 controller에서 생산</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">totalLottos</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span>
        <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">(),</span>
        <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">autoCount</span><span class="o">,</span> <span class="k">new</span> <span class="nc">RandomLottoIssuer</span><span class="o">()).</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">totalLottos</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>

<h5 id="새-기준-메더드-완성시-기존메서드-사용처확인해서-삭제---메서드-이름-변경">
<a class="anchor" href="#%EC%83%88-%EA%B8%B0%EC%A4%80-%EB%A9%94%EB%8D%94%EB%93%9C-%EC%99%84%EC%84%B1%EC%8B%9C-%EA%B8%B0%EC%A1%B4%EB%A9%94%EC%84%9C%EB%93%9C-%EC%82%AC%EC%9A%A9%EC%B2%98%ED%99%95%EC%9D%B8%ED%95%B4%EC%84%9C-%EC%82%AD%EC%A0%9C---%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B4%EB%A6%84-%EB%B3%80%EA%B2%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>새 기준 메더드 완성시, 기존메서드 사용처확인해서 삭제 -&gt; 메서드 이름 변경</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//포장된 로또 리스트를 받도록 수정했는데,</span>
<span class="c1">// 받기전 기존메서드에 빈 list를 넣어서 돌아가는지 확인되면</span>
<span class="c1">//-&gt; 기존 메서드 삭제</span>
<span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoney</span><span class="o">(</span><span class="k">new</span> <span class="nc">Money</span><span class="o">(</span><span class="mi">3000</span><span class="o">),</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">());</span>

</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//기존메서드 잘 삭제되면, 메서드 이름변경</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="nf">issueByMoneyAndManualLotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Money</span> <span class="n">money</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">lottos</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
    <span class="kd">final</span> <span class="nc">LottoCount</span> <span class="n">autoCount</span> <span class="o">=</span> <span class="n">totalCount</span><span class="o">.</span><span class="na">decrease</span><span class="o">(</span><span class="n">lottos</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>

    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">totalLottos</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span>
        <span class="n">lottos</span><span class="o">.</span><span class="na">stream</span><span class="o">(),</span>
        <span class="nc">LottoFactory</span><span class="o">.</span><span class="na">issueLottoByCount</span><span class="o">(</span><span class="n">autoCount</span><span class="o">,</span> <span class="k">new</span> <span class="nc">RandomLottoIssuer</span><span class="o">()).</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

    <span class="k">return</span> <span class="n">totalLottos</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="생성된-전체로또가-수동로또-포함하는지-테스트-하기">
<a class="anchor" href="#%EC%83%9D%EC%84%B1%EB%90%9C-%EC%A0%84%EC%B2%B4%EB%A1%9C%EB%98%90%EA%B0%80-%EC%88%98%EB%8F%99%EB%A1%9C%EB%98%90-%ED%8F%AC%ED%95%A8%ED%95%98%EB%8A%94%EC%A7%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>생성된 전체로또가 수동로또 포함하는지 테스트 하기</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">issue_with_money_and_manual</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Lotto</span><span class="o">&gt;</span> <span class="n">totalLotto</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">issueByMoneyAndManualLotto</span><span class="o">(</span><span class="k">new</span> <span class="nc">Money</span><span class="o">(</span><span class="mi">3000</span><span class="o">),</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">)));</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">totalLotto</span><span class="o">.</span><span class="na">size</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">totalLotto</span><span class="o">).</span><span class="na">contains</span><span class="o">(</span><span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>


  </div><a class="u-url" href="/java/%EC%9A%B0%ED%85%8C%EC%BD%94/%EC%BA%90%EC%8A%81/factory/%EC%A0%84%EB%9E%B5/tdd/%EA%B0%95%EC%9D%98/2022/03/14/TDD-6-%EB%A1%9C%EB%98%90(%EC%BA%90%EC%8A%81,Factory,%EC%88%98%EB%8F%99%EC%B6%94%EA%B0%80%EB%A7%88%EB%AC%B4%EB%A6%AC).html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>fast pages를 이용한 Jupyter Notebooks, Markdown으로의 기록</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/is2js" target="_blank" title="is2js"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/is2js" target="_blank" title="is2js"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
