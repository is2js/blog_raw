<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">강의) 네오 3단계 블랙잭 피드백(1/4)</h1><p class="page-description">블랙잭 시작과 상태 패턴에 강의</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-03-27T00:00:00-05:00" itemprop="datePublished">
        Mar 27, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      30 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#java">java</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#pattern">pattern</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#state">state</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#blackjack">blackjack</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#우테코">우테코</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#TDD">TDD</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#강의">강의</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- toc가 먼저 나오므로 h3로 안내하기 -->
    <h3>📜 제목으로 보기</h3>
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#블랙잭">블랙잭</a>
<ul>
<li class="toc-entry toc-h2"><a href="#도메인-공부후-시작점-찾기">도메인 공부후 시작점 찾기</a></li>
<li class="toc-entry toc-h2"><a href="#캐싱">캐싱</a>
<ul>
<li class="toc-entry toc-h4"><a href="#재료인-card먼저-만들기">재료인 Card먼저 만들기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#01-card에는-2가지정보가-붙어서-움직인다">01 Card에는 2가지정보가 붙어서 움직인다.</a></li>
<li class="toc-entry toc-h5"><a href="#02-class는-객체-100-새로-생성-new-단순템플릿이-아니라-캐싱등의-능동적-객체-생성-관리자역할을--by-로직을-포함한-생성자-정펙매로-할-수-있다">02 class는 객체 100% 새로 생성 new 단순템플릿이 아니라 캐싱등의 능동적 객체 생성 관리자역할을  by 로직을 포함한 생성자 정펙매로 할 수 있다.</a></li>
<li class="toc-entry toc-h5"><a href="#03-캐싱되는-객체는-vo처럼-eqhc-오버라이딩-해줘야한다--정펙매-사용하면-기본생성자는-private로-바꿔서-잠궈줘야한다">03 캐싱되는 객체는 VO처럼 eq/hC 오버라이딩 해줘야한다. + 정펙매 사용하면 기본생성자는 private로 바꿔서 잠궈줘야한다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#만든-카드-캐싱-테스트">만든 카드 캐싱 테스트</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-assertthat의-import는-qualify-static-call-이후-add-static-import로-">참고) assertThat()의 import는 qualify static call.. 이후 add static import로 ??</a></li>
<li class="toc-entry toc-h5"><a href="#캐싱-테스트-만든것-issameas-방금-만든-것-같은지">캐싱 테스트: 만든것 .isSameAs( 방금 만든 것 )같은지</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#tdd-시작점-어디서부터">TDD 시작점 어디서부터</a>
<ul>
<li class="toc-entry toc-h3"><a href="#핵심-로직은">핵심 로직은?</a></li>
<li class="toc-entry toc-h3"><a href="#시작점은-어디서">시작점은 어디서?</a>
<ul>
<li class="toc-entry toc-h4"><a href="#01-핵심로직like-service의-클래스이름이-안정해졌으면---gametest클래스---gamestart재료메서드로-시작">01 핵심로직(like Service)의 클래스이름이 안정해졌으면   GameTest클래스 -&gt; Game.start(재료)메서드로 시작</a></li>
<li class="toc-entry toc-h4"><a href="#02-재료를-넣고---예상-응답값으로-뭐가-나올지-먼저-고민한-뒤-여러개면-만만한-1-case-선택---재료예상-인자값도-맞춰서-정해준다">02 재료를 넣고 -&gt; 예상 응답값으로 뭐가 나올지 먼저 고민한 뒤 여러개면 만만한 1 case 선택 -&gt; 재료:예상 인자값도 맞춰서 정해준다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#테메당-1case이므로-여러-응답상태이-나온다고-예상되면---그-중-1개를-예상응답값으로-선택하고---예상응답값에-맞는-재료를-넣어줘야한다">테메당 1case이므로 여러 응답(상태)이 나온다고 예상되면 -&gt; 그 중 1개를 예상응답값으로 선택하고 -&gt; 예상응답값에 맞는 재료를 넣어줘야한다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#응답값이-상수enum이-행위에-의해-다른-것으로-바뀔-수-있는-상태라면---class의-객체로-미리-작성한다">응답값이 상수/enum이 행위에 의해 다른 것으로 바뀔 수 있는 상태라면 -&gt; class의 객체로 미리 작성한다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#03-테스트는-내부로직-완성전에-응답값---then-assert문을-미리-작성---클래스와-메서드는-껍데기만-일단-작성해놓기">03 테스트는 내부로직 완성전에 응답값 -&gt; then assert문을 미리 작성 -&gt; 클래스와 메서드는 껍데기만 일단 작성해놓기</a></li>
<li class="toc-entry toc-h4"><a href="#참고-앞으로-클래스가-상속예정없으면-다-final로-선언하는-버릇-들이기">참고) 앞으로 클래스가 상속예정없으면 다 final로 선언하는 버릇 들이기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#응답값-아직-작성안된-class의-객체가-있을-예정이라면-object로-응답해주고-실패용return-null하는-메서드-작성하기">응답값 아직 작성안된 class의 객체가 있을 예정이라면 Object로 응답해주고 (실패용)return null;하는 메서드 작성하기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#04-object-응답객체로-받아서-null이-넘어와-실패할-assert문-작성과-동시에-expected에-기입할-응답객체class로-응답클래스만들어주기">04 Object 응답객체로 받아서 null이 넘어와 실패할 assert문 작성과 동시에 expected에 기입할 응답객체.class로 응답클래스만들어주기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#객체-응답은-isinstanceof-클래스class로-확인하면서-class작성해주기">객체 응답은 .isInstanceOf( 클래스.class)로 확인하면서 class작성해주기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#05-첫번째-응답객체로-메서드-응답응답typereturn-바꿔주기">05 첫번째 응답객체로 메서드 응답(응답Type+return) 바꿔주기</a></li>
<li class="toc-entry toc-h4"><a href="#06-2번째-예상응답인-blackjack-case로-만들어-주고-로직-추가해주기----given예상인자값도-바꿔주자">06 2번째 예상응답인 blackjack case로 만들어 주고 로직 추가해주기 -&gt;  given예상인자값도 바꿔주자!</a>
<ul>
<li class="toc-entry toc-h5"><a href="#다형성-적용전까진-바뀔-수-있는-응답객체의-변수type을-object로-유지해주기">다형성 적용전까진, 바뀔 수 있는 응답객체의 변수Type을 Object로 유지해주기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#07-복잡한-case통과를-위한-로직-추가해주기">07 복잡한 case통과를 위한 로직 추가해주기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#필요에-의해-enum에-필드-추가해주기">필요에 의해 enum에 필드 추가해주기</a></li>
<li class="toc-entry toc-h5"><a href="#참고-enum에-필드를-만들어줬다는-말은-밖에서-갖다-쓸거라는-말이다---getter가-될-준비를-한다">참고) enum에 필드를 만들어줬다는 말은 밖에서 갖다 쓸거라는 말이다 -&gt; getter가 될 준비를 한다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#08-최대한-빨리-테스트-통과시키기">08 최대한 빨리 테스트 통과시키기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-도메인vs같다른도메인의-비교-는-서비스메인로직-구동-메서드-내부에서-일단-getter이용해서-하고---도메인로직으로서-클래스를-추출하거나-해서-옮겨야한다">참고) 도메인vs같/다른도메인의 비교 는 서비스(메인로직 구동) 메서드 내부에서 일단 getter이용해서 하고 -&gt; 도메인로직으로서 클래스를 추출하거나 해서 옮겨야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#현재-getter를-쓰는-것에-대한-정당성-확보----같은-도메인끼리라도-내부-비교로직이라면-현재-서비스-로직에서-일단-작성해주고-추출해줘야한다">현재 getter를 쓰는 것에 대한 정당성 확보 -&gt;  같은 도메인끼리라도 내부 비교로직이라면 현재 서비스 로직에서 일단 작성해주고 추출해줘야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#but--같은-도메인끼리-or-도메인1개에-대해-단순-상수비교-메서드없이-단순집계-등는-개별-일괄처리-or-집계라면-묶어서---메세지-보내서-물어본다---현재의-상황">but  같은 도메인끼리 or 도메인1개에 대해 단순 상수비교/ 메서드없이 단순집계 등는 개별 일괄처리 or 집계라면 묶어서 -&gt; 메세지 보내서 물어본다` -&gt; 현재의 상황</a></li>
<li class="toc-entry toc-h5"><a href="#참고-객체-내부의-포장변수-속-변수를-가져올-때도-getter대신-최종-나올-변수명으로-메서드-지어-들어가기">참고) [객체] 내부의 [포장변수 속 변수]를 가져올 때도 getter대신 .최종 나올 변수명()으로 메서드 지어 들어가기</a></li>
<li class="toc-entry toc-h5"><a href="#if분기에-따라-서로-다른형의-객체를-응답해야할-떄---다시-응답을-object형으로-바꿔주고---다형성을-생각한다---일단-테스트통과부터-확인한다">if분기에 따라 서로 다른형의 객체를 응답해야할 떄 -&gt; 다시 응답을 Object형으로 바꿔주고 -&gt; 다형성을 생각한다 -&gt; 일단 테스트통과부터 확인한다.</a></li>
<li class="toc-entry toc-h5"><a href="#ace에-대한-처리">ACE에 대한 처리</a></li>
<li class="toc-entry toc-h5"><a href="#참고-2개이상의-같은-형이-개별-일괄처리가-필요할-땐-list에-넣고---stream으로-일괄처리---도메인끼리가-아니라-stream-도메인-개별-처리---꺼내지말고-메세지보내서-처리한다">참고) 2개이상의 같은 형이 개별 일괄처리가 필요할 땐 list에 넣고 -&gt; stream으로 일괄처리 -&gt; 도메인끼리가 아니라 stream 도메인 개별 처리 -&gt; 꺼내지말고 메세지보내서 처리한다</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#다양한class의-객체들-응답시-object로-응답-메서드가-많은-일을한다">다양한class의 객체들 응답시 Object로 응답? 메서드가 많은 일을한다?</a>
<ul>
<li class="toc-entry toc-h4"><a href="#09-메서드가-길어져서-너무-많은-일---도메인1개or같은도메인끼리-상수or단순연산집계---묶어서-메세지보내-일괄처리-or-내부변수-단순집계로-일괄처리한다">09 메서드가 길어져서 너무 많은 일 -&gt; 도메인1개or같은도메인끼리 상수or단순연산/집계 -&gt; 묶어서 메세지보내 일괄처리 or 내부변수 단순집계로 일괄처리한다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#같은-도메인이라면-listof나-streamof로-묶어서-일괄처리-or-단순집계가-가능하다">같은 도메인이라면 List.of()나 Stream.of()로 묶어서 일괄처리 or 단순집계가 가능하다.</a></li>
<li class="toc-entry toc-h5"><a href="#일괄처리내부변수단순집계가-2번이상-필요하면---listof---묶어놓고-개별-liststream-때린다">일괄처리/내부변수단순집계가 2번이상 필요하면 -&gt; List.of( , ,) 묶어놓고 개별 list.stream() 때린다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#서비스로직내-도메인로직의-class로-추출">서비스로직내 도메인로직의 class로 추출</a>
<ul>
<li class="toc-entry toc-h4"><a href="#10-서비스-로직-내-같은형-객체-2개이상의--일괄처리-로직---일급컬렉션으로-추출">10 서비스 로직 내 같은형 객체 2개이상의  일괄처리 로직 -&gt; 일급컬렉션으로 추출</a>
<ul>
<li class="toc-entry toc-h5"><a href="#객체일괄처리를-위해-뽑아낸-listof---객체list---일괄처리가-메서드로-가는-일급컬렉션-추출과정이-된다">객체일괄처리를 위해 뽑아낸 List.of() -&gt; 객체List -&gt; 일괄처리가 메서드로 가는 일급컬렉션 추출과정이 된다.</a></li>
<li class="toc-entry toc-h5"><a href="#서비스-메서드-내에서-발견된-역할과-객체list----메서드-로직-내에서-일급컬렉션-추출해보기">서비스 메서드 내에서 발견된 역할과 객체List -&gt;  메서드 로직 내에서 일급컬렉션 추출해보기</a></li>
<li class="toc-entry toc-h5"><a href="#포장전-내부까는-코드였다면-포장전-복붙-or-복사해놓은-상태로-최종메서드만-남기고---내부처리코드를-잘라내-들고들어가---list자리에---내부포장되어있던-value만-바꿔넣어준다">포장전 내부까는 코드였다면, 포장전 복붙 or 복사해놓은 상태로 최종메서드만 남기고 -&gt; 내부처리코드를 잘라내 들고들어가 -&gt; list자리에 -&gt; 내부포장되어있던 value만 바꿔넣어준다.</a></li>
<li class="toc-entry toc-h5"><a href="#1번만-쓰인다면-지역변수-제거하고-inline화">1번만 쓰인다면 지역변수 제거하고 inline화</a></li>
<li class="toc-entry toc-h5"><a href="#참고-너무빠른-리팩토링이지만-if문이-하나의-도메인에-대한-여러-boolean문장이면-메세지를-넘길-수-있다-메서드추출이랑-다름">참고) 너무빠른 리팩토링이지만, if문이 하나의 도메인에 대한 여러 boolean문장이면, 메세지를 넘길 수 있다. (메서드추출이랑 다름)</a></li>
<li class="toc-entry toc-h5"><a href="#참고-연결-메세지를-던지려면-내부처리로직-코드복사후---최종메서드로-던지기---밖에서-list가-아니라-일급그대로를-썼던-코드는-내부에서-바로-메서드형태로-내부메서드를-이용하면-된다">참고-연결) 메세지를 던지려면, 내부처리로직 코드복사후 -&gt; 최종메서드로 던지기 -&gt; 밖에서 list가 아니라 일급그대로를 썼던 코드는? 내부에서 바로 메서드()형태로 내부메서드를 이용하면 된다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#메서드의-응답을-object---응답되는-객체들을-뽑아내서-추상화or상위type-생성으로-카테고라이징">메서드의 응답을 Object -&gt; 응답되는 객체들을 뽑아내서 추상화or상위Type 생성으로 카테고라이징</a>
<ul>
<li class="toc-entry toc-h4"><a href="#11-서로-변하는-blackjack-상태-hit상태들을-상위타입으로-뽑아내기---일단-상위카테고리는-인터페이스로-뽑아낸다">11 서로 변하는 Blackjack 상태, Hit상태들을 상위타입으로 뽑아내기 -&gt; 일단 상위카테고리는 인터페이스로 뽑아낸다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-상카로-카테고라이징하려고-인터페이스를-만들었다면-----하위카테고리-구현체들이-impl-전에-응답값-변수파라미터-등의-길목-선언부-먼저-인터페이스로-바꿔주자---거기로-향하는-예비-구현체들이-빨간줄---쉽게--자동-impl된다">참고) 상카로 카테고라이징하려고 인터페이스를 만들었다면 -&gt;   하위카테고리 구현체들이 impl 전에 응답값/ 변수/파라미터 등의 길목 선언부 먼저 인터페이스로 바꿔주자 -&gt; 거기로 향하는 예비 구현체들이 빨간줄 -&gt; 쉽게 + 자동 impl된다</a></li>
<li class="toc-entry toc-h5"><a href="#메서드의-응답값을-바꿔줬다면---까먹지-말고-밖에서-받아주는-변수도-object에서---다형성-상카-인터페이스로--변수명도-인터페이스명으로--바꿔주자">메서드의 응답값을 바꿔줬다면 -&gt; 까먹지 말고 밖에서 받아주는 변수도 Object에서 -&gt; 다형성-상카-인터페이스로 + 변수명도 인터페이스명으로  바꿔주자</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#중요1-왜-추클이-아니라-인터페이스로-상카뽑아-카테고라이징">중요1) 왜? 추클이 아니라 인터페이스?로 상카뽑아 카테고라이징)</a></li>
<li class="toc-entry toc-h4"><a href="#중요2-제한된-수의-상태값들인데--왜-enum이-아니라-클래스-객체로-상태-응답">중요2) 제한된 수의 상태값들인데,  왜 Enum이 아니라 클래스 객체로 상태 응답?</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-상속추상화카테고리-작업후엔-클래스-다이어그램-보기">참고) 상속/추상화/카테고리 작업후엔 클래스 다이어그램 보기</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#다음-상태로-이어가기---기본-2장받고-가능한-상태hit-or-blackjack---다음엔---둘-중에-더-만만한-것에서부터상태-변화를-이어나간다">다음 상태로 이어가기 -&gt; 기본 2장받고 가능한 상태:Hit or Blackjack -&gt; 다음엔?? -&gt; 둘 중에 더 만만한 것에서부터상태 변화를 이어나간다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#12-hit-과-blackjack--두-상태-중-blackjack은-다음이-게임종료라-구현이-더-쉽우니-blackjack에서-이어나간다">12 hit 과 blackjack  두 상태 중 blackjack은 다음이 게임종료라 구현이 더 쉽우니 blackjack에서 이어나간다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#특정상태에서-이어나가는-테스트메소드의-작성">특정상태에서 이어나가는 테스트메소드의 작성</a></li>
<li class="toc-entry toc-h5"><a href="#예외발생이-정답인-메서드호출---메서드-호출시-끝남--메서드호출시-예외---생성자처럼-assertthrows-문에서-해당예외-명시하며--호출하며-테스트">예외발생이 정답인 메서드호출 -&gt; 메서드 호출시 끝남 = 메서드호출시 예외 -&gt; 생성자처럼 assertThrows() 문에서 해당예외 명시하며 + 호출하며 테스트</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#특정-구현체끝-상태에서-상태변화의-전략메서드-호출인지--아니면-단독메서드-호출인지-고민해보기">특정 구현체[끝 상태]에서 [상태변화의 전략메서드] 호출인지 / 아니면 단독메서드 호출인지 고민해보기</a>
<ul>
<li class="toc-entry toc-h4"><a href="#13-게임끝의-상태에서-더-진행하는-상태변화-메서드-호출시-에러발생인데-blackjack상태에서도-재료인자-card1장를-받는-공통-전략메서드를-부를-수-있나">13 게임끝의 상태에서 더 진행하는 상태변화 메서드 호출시 에러발생인데, blackjack상태에서도 재료(인자, card1장)를 받는 공통 전략메서드를 부를 수 있나?</a>
<ul>
<li class="toc-entry toc-h5"><a href="#만약-공통전략메서드가-아니라-특정-구현체만-가능한-단독-메서드라면">만약, 공통전략메서드가 아니라 특정 구현체만 가능한 단독 메서드라면</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#중요3-상카추상체가-잡힌이후-메서드의-추가는-모든-카테고리-구현체-다-가능할-것-같은데-혹시-모르니-현재-특정상태구현체-1개만-호출-가능한-메서드라고-가정하고-해당-구현체에만-메서드가-생기도록-구현체변수---다운캐스팅---메서드호출-빨간줄생성하여-코드를-짜보자">중요3) 상카(추상체)가 잡힌이후 메서드의 추가는 (모든 카테고리 구현체 다 가능할 것 같은데, 혹시 모르니) 현재 특정상태(구현체) 1개만 호출 가능한 메서드라고 가정하고 해당 구현체에만 메서드가 생기도록 구현체변수 -&gt; 다운캐스팅 -&gt; 메서드호출() 빨간줄생성하여 코드를 짜보자.</a></li>
<li class="toc-entry toc-h4"><a href="#14-drawcard-card가--hit와-blackjack-모든-카테고리가-호출가능할-것-같지만-보수적으로-blackjack에서만-호출가능한-단독메서드라고-가정해놓고-짜보자">14 draw(Card card)가  hit와 blackjack 모든 카테고리가 호출가능할 것 같지만, 보수적으로 blackjack에서만 호출가능한 단독메서드라고 가정해놓고 짜보자.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#특정-구현체만-호출가능한-메서드를-호출하고-싶다면-다형성으로-받던-곳에서-변수-먼저--특정--구현체type으로-받아주고----우항-빨간줄-다운캐스팅해서----단독메서드-호출하여---단독-빨간줄-생성해줘야한다">특정 구현체만 호출가능한 메서드를 호출하고 싶다면, 다형성으로 받던 곳에서 변수 먼저  특정  구현체Type으로 받아주고 -&gt; (= 우항 빨간줄 다운캐스팅)해서  -&gt; 단독메서드 호출()하여  -&gt;단독 빨간줄 생성해줘야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#구현체로-받은-상태에서-빨간줄-create-method---구현체에서-정의-or-추상체에서-정의-선택할-수-있다">구현체로 받은 상태에서 빨간줄 create method -&gt; 구현체에서 정의 or 추상체에서 정의 선택할 수 있다.</a></li>
<li class="toc-entry toc-h5"><a href="#my-인터페이스로-추상화했다면-다운캐스팅-or-구현체변수-상태에서는-단독메서드-생성이-가능하다">my) 인터페이스로 추상화했다면, 다운캐스팅 or 구현체변수 상태에서는 단독메서드 생성이 가능하다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#고민---state가-card를-draw로-받아도-되느냐">고민 - state가 card를 .draw()로 받아도 되느냐?</a>
<ul>
<li class="toc-entry toc-h5"><a href="#my-상태값인변을-가진다--재료로-받아서-시작되거나--재료없이-빈재료로-내부초기화되어서-시작-하며---추가정보-등-내부-상태값이-업데이트-되고-그-변화된-상태값을-재료로해서-업데이트된-새-객체를-반환해주려면-상태값으로-가져야한다">my) 상태값(인변)을 가진다-&gt; 재료로 받아서 시작되거나  재료없이 빈재료로 내부초기화되어서 시작 하며 -&gt; 추가정보 등 내부 상태값이 업데이트 되고, 그 변화된 상태값을 재료로해서 업데이트된 새 객체를 반환해주려면 상태값으로 가져야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#my-요약-클래스의-상태값은-재료로-들어와-포장되며-가공된-뒤-적은-수로내부에서-가지고-있어야-변화를-반영한-새객체도-생성시에도-재료로서-생성시-쓰인다라고-할-수-있다">my) 요약: 클래스의 상태값은 재료로 들어와 포장되며 (가공된 뒤 적은 수로)내부에서 가지고 있어야, 변화를 반영한 새객체도 생성시에도 재료로서 생성시 쓰인다라고 할 수 있다.</a></li>
<li class="toc-entry toc-h4"><a href="#중요4-my-추상체로서-여러--구현체-state를-가지는-state를-사용하는-순간부터--state-변화를-판단하는-정보들은-state가-내부에서-실시간-반영되는-상태값인변가지며--전략메서드를-통해-바로-바뀌거나-필요한-추가정보를-현-정보들과-같이-판단하여-다른-구현체로-바뀐다">중요4 my) 추상체로서 여러  구현체 state를 가지는 state를 사용하는 순간부터  state 변화를 판단하는 정보들은 state가 내부에서 실시간 반영되는 상태값(인변)가지며 + 전략메서드를 통해 바로 바뀌거나, 필요한 추가정보를 현 정보들과 같이 판단하여 다른 구현체로 바뀐다</a></li>
<li class="toc-entry toc-h4"><a href="#15-blackjack상태는-끝났다면-hit상태에서-진행해보자">15 blackjack상태는 끝났다면, hit상태에서 진행해보자.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#진행되는-테스트는-테메를-복사후---확인된-given을-유지한체-다음-상태를-유발한다">진행되는 테스트는 테메를 복사후 -&gt; 확인된 given을 유지한체 다음 상태를 유발한다</a></li>
<li class="toc-entry toc-h5"><a href="#특정상태에서-먼저-상태변화-트리거인-메서드를-호출할-수-있는지예외발생-안하는지부터-고민한다">특정상태에서 먼저, 상태변화 트리거인 메서드를 호출할 수 있는지(예외발생 안하는지)부터 고민한다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#현재-hit상태에서의-목적-카드1장받는-상태변화-트리거-메서드를-호출하더라도-에러안나고-호출가능---응답값-제대로-반환받음isinstanceof증명해야한다">현재 hit상태에서의 목적: 카드1장받는 상태변화 트리거 메서드를 호출하더라도 에러안나고 호출가능  = 응답값 제대로 반환받음(isInstanceOf)증명해야한다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#16-hit상태에서-또-draw로-카드받을-수-있나-받을-수-있다면-단독메서드로서-다운캐스팅후-구현체-변수로-받아놓고-단독메서드로서-가정하고-개발을-시작한다">16 hit상태에서 또 draw로 카드받을 수 있나? 받을 수 있다면 단독메서드로서 다운캐스팅후 구현체 변수로 받아놓고 단독메서드로서 가정하고 개발을 시작한다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#다운캐스팅-하더라도-우항에-체이닝으로-개발하면-다운캐스팅-안먹고-응답되는-추상체로-메서드-개발됨---반드시-좌변-구현체-변수로-받아야-구현체-단독메서드-개발이-가능하다">다운캐스팅 하더라도, 우항에 체이닝으로 개발하면, 다운캐스팅 안먹고 응답되는 추상체로 메서드 개발됨. -&gt; 반드시 좌변 구현체 변수로 받아야 구현체-단독메서드 개발이 가능하다.</a></li>
<li class="toc-entry toc-h5"><a href="#참고-어차피-직전-테메를-복붙해온-given의-hit상태가-보장되어있으니-편하게-다운캐스팅--구현체-변수로-받아놓고---단독메서드-개발">참고) 어차피 직전 테메를 복붙해온 given의 hit상태가 보장되어있으니, 편하게 다운캐스팅 + 구현체 변수로 받아놓고 -&gt; 단독메서드 개발</a></li>
<li class="toc-entry toc-h5"><a href="#blackjack과-다르게-예외없이-다음에-올-구현체-상태를-응답해야하므로-밖에서는-state변수를-재할당시켜-업데이트해줘야한다-하지만-단독메서드-개발을-위해-구현체-변수로-받아둔-state를-returntype-state의-응답으로-재할당이-불가능하다">blackjack과 다르게, 예외없이 다음에 올 구현체 상태를 응답해야하므로 밖에서는 state변수를 재할당시켜 업데이트해줘야한다. 하지만, 단독메서드 개발을 위해, 구현체 변수로 받아둔 state를 returnType State의 응답으로 재할당이 불가능하다.</a></li>
<li class="toc-entry toc-h5"><a href="#다음-상태-트리거-전략메서드는-공통메서드-추메라면---다양한-구현체-응답을-위해-state-응답이-맞으나-단독메서드---단독구현체로-응답하도록-임시대응-한다">다음 상태 트리거 전략메서드는 공통메서드, 추메라면 -&gt; 다양한 구현체 응답을 위해 State 응답이 맞으나 단독메서드 -&gt; 단독구현체로 응답하도록 임시대응 한다.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#중요5-마지막-구현체hit의-단독메서드-구현-와중에---상카-아래-모든-구현체hit-blackjack들이-구현은-다르지만-모두-호출-가능한-공통메서드---인터페이스에선-추메로-추상화하고-직접-추상화이후-override-직접-붙이기">중요5) 마지막 구현체(hit)의 단독메서드 구현 와중에 -&gt; 상카 아래 모든 구현체(hit, blackjack)들이 &lt;구현은 다르지만 모두 호출 가능&gt;한 공통메서드 -&gt; 인터페이스에선 추메로 추상화하고, 직접 추상화이후 @Override 직접 붙이기</a>
<ul>
<li class="toc-entry toc-h4"><a href="#중요6-my-추메로-추상화해도-구상체별로-개별-구현해줘야하는데--인페의-추메로-추상화-핵심은-코드-중복제거가-아니라-구현체-모두-호출가능시-구현체전용-단독메서드를-올려-다운캐스팅-제거-파라미터응답변수에서-추상체로-받아-일괄처리-가능해진다">중요6 my) 추메로 추상화해도 구상체별로 개별 구현해줘야하는데??? —&gt; 인페의 추메로 추상화 핵심은 코드 중복제거가 아니라 구현체 모두 호출가능시 구현체전용 단독메서드를 올려 다운캐스팅 제거+ 파라미터/응답/변수에서 추상체로 받아 일괄처리 가능해진다.</a></li>
<li class="toc-entry toc-h4"><a href="#16-구현체-모두가-호출가능할-수-있다면-인페-추메전메로-추상화해서---다운캐스팅-제거후-추상체전략메서드호출로-호출이-가능해진다-그전에">16 구현체 모두가 호출가능할 수 있다면, 인페-추메(전메)로 추상화해서 -&gt; 다운캐스팅 제거후 추상체.전략메서드호출()로 호출이 가능해진다.. 그전에…</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고--구현체-단독메서드---추메전메로-올리기-전-확인은-다이어그램-creation-mode--method로-하자">참고)  구현체 단독메서드 -&gt; 추메/전메로 올리기 전 확인은 다이어그램+ creation mode + method로 하자</a></li>
<li class="toc-entry toc-h5"><a href="#중요7--구현체-단독메서드---추메전메로서-선언부-시그니쳐만-위로-올릴-때--받는-변수응답값파라미터-등에-구현체가-있다면-그것들도-추상체로-바꿔서-올려줘야한다">중요7)  구현체 단독메서드 -&gt; 추메/전메로서 (선언부 시그니쳐만) 위로 올릴 때,  받는 변수/응답값/파라미터 등에 구현체가 있다면, 그것들도 추상체로 바꿔서 올려줘야한다.</a></li>
<li class="toc-entry toc-h5"><a href="#참고-인페의-추메전메로-선언부를-올릴-때-접근제한자-제거해서-default로-일단-시작하기">참고) 인페의 추메/전메로 선언부를 올릴 때, 접근제한자 제거해서 default로 일단 시작하기</a></li>
<li class="toc-entry toc-h5"><a href="#중요-인페의-추메전메로-수동-추상화-올린-다음엔하고-난-뒤-usage-impl-수를-확인해서-개별-구현남아있어야하니-오버라이딩만-직접-가서-해준다">중요) 인페의 추메/전메로 수동 추상화 올린 다음엔하고 난 뒤, usage-impl 수를 확인해서 개별 구현남아있어야하니 @오버라이딩만 직접 가서 해준다.</a></li>
<li class="toc-entry toc-h5"><a href="#중요-추상화-끝난-단독메서드는-더이상-구현체만의-단독메드가-아니다--다운캐스팅-안해도-오버라이딩된-추상체변수로-받은-상태에서-추메전메로서-호출가능해진다---다운캐스팅-제거하고--추상체변수로-받도록-수정하기">중요) 추상화 끝난 단독메서드는 더이상 구현체만의 단독메드가 아니다 == 다운캐스팅 안해도 (오버라이딩된) 추상체변수로 받은 상태에서 추메/전메로서 호출가능해진다. -&gt; 다운캐스팅 제거하고  추상체변수로 받도록 수정하기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#17-hit-에서-메서드-호출가능해서---모든-구현체-호출가능---메서드-추상화-해준-이후---응답으로서-또-여러-경우의수가-나온다---hit-----복사해놓고-구체적으로-1case를-또-정해주고-빠른통과하도록-메서드짜기">17 hit 에서 메서드 호출가능해서 -&gt; 모든 구현체 호출가능 -&gt; 메서드 추상화 해준 이후 -&gt; 응답으로서 또 여러 경우의수가 나온다. -&gt; hit + ?? -&gt; 복사해놓고 구체적으로 1case를 또 정해주고 빠른통과하도록 메서드짜기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-다음-가능한-상태가-여러개로-나올-경우--변화전-given현재-상태의-테메를-그만큼-복사해놓고-case를-정해놓고-진행해나가자">참고) 다음 가능한 상태가 여러개로 나올 경우,  변화전 given현재 상태의 테메를 그만큼 복사해놓고, case를 정해놓고 진행해나가자</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#18-hit에서-새로운-응답값-객체-상태가-나오는-case에서는-테메이름--case로-가정인자-조절--expected로서-assert-isinstanceof의-새객체class등-미리-작성하고-하나씩-만들어나간다">18 hit에서 새로운 응답값(= 객체 상태)가 나오는 case에서는 테메이름 + case로 가정인자 조절 + expected로서 assert-isInstanceOf의 새객체.class등 미리 작성하고 하나씩 만들어나간다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-카테고라이징추상체-인페보유된-상태들에---새-객체를-추가한다면---class생성fi-or-ab후-해당-추상체를-impl---그에-따라-추메전메를-impl하여-카테고리에-추가해준다">참고) 카테고라이징(추상체 인페보유)된 상태들에 -&gt; 새 객체를 추가한다면? -&gt; class생성(fi or ab)후 해당 추상체를 impl -&gt; 그에 따라 추메/전메를 impl하여 카테고리에 추가해준다.</a></li>
<li class="toc-entry toc-h5"><a href="#bust-상태에서-추메전메를-impl하면-다음-상태로는-뭘-줘야할까-끝나야할까-일단은-return-null로-비워두기">Bust 상태에서 추메/전메를 impl하면 다음 상태로는 뭘 줘야할까? 끝나야할까? 일단은 return null;로 비워두기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#19-hit-상태에서--개별구현되고-있는-트리거-메서드에서--호출시-bust가-응답되도록-메서드-로직-짜주기">19 hit 상태에서  개별구현되고 있는 트리거 메서드에서  호출시 Bust가 응답되도록 메서드 로직 짜주기</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#중요-개별구현중인-구현체-메서드에서-다른-구현체로-넘어가는-로직짜기---이전-정보를-받아와-by-재료를-생성자를-통해--현재-상태를-나타내줄-정보들을-상태값인변로서-내부에-가지고-있어야만-상태패턴의-상태객체다">중요) 개별구현중인 구현체 메서드에서 다른 구현체로 넘어가는 로직짜기 -&gt; 이전 정보를 받아와 by 재료를 생성자를 통해  현재 상태를 나타내줄 정보들을 상태값(인변)로서 내부에 가지고 있어야만 상태패턴의 상태객체다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#20-필요에-의해-현-상태---다음-상태로-넘어가는데-필요한-정보들을-상태값인변으로-가지고-있어야하며----트리거-메서드에-의해-실시간으로-바뀌는-상태값으로서-state가-내부에서-직접-상태값으로-이미-가지고-있어야만-한다">20 필요에 의해 현 상태 -&gt; 다음 상태로 넘어가는데 필요한 정보들을 상태값(인변)으로 가지고 있어야하며 -&gt;  트리거 메서드에 의해 실시간으로 바뀌는 상태값으로서 State가 내부에서 직접 상태값으로 이미 가지고 있어야만 한다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#중요-현재-상태값인변으로-이미-정보를-가진다----상태값-필드인변--생성자에서-재료받아-초기화형태가-있어야-이전-정보를-가져와-실시간-업데이트-가능한-정보로-보유한-셈이-된다">중요) 현재 상태값(인변)으로 이미 정보를 가진다? -&gt;  상태값 필드(인변) + 생성자에서 재료받아 초기화형태가 있어야 이전 정보를 가져와 실시간 업데이트 가능한 정보로 보유한 셈이 된다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#21-상태값정보를-추가를-위해--필드재료받는-생성자를-추가했더니-기존의-재료없이-기본생성자를-이용한-것들이-에러가-난다">21) 상태값(정보)를 추가를 위해  필드+재료받는 생성자를 추가했더니 기존의 재료없이 기본생성자를 이용한 것들이 에러가 난다.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-new로-생성자정의없이-기본생성자로-테스트에서-미리-많이-쓴-경우----재료받는-생성자가-생기는-순간-재료받는-생성자가-주-생성자---위에-this를-활용해서-재료-안받고---내부-빈-재료로-정보-초기화-하는-부새성자를-추가해주자">참고) new()로 생성자정의없이 기본생성자로 테스트에서 미리 많이 쓴 경우 -&gt;  재료받는 생성자가 생기는 순간 재료받는 생성자가 주 생성자 -&gt; 위에 this를 활용해서 재료 안받고 -&gt; 내부 빈 재료로 정보 초기화 하는 부새성자를 추가해주자.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#중요-추가정보by트리거-메서드-인자를-받아-현재-정보인변으로-보유를-업데이트해서-판단한다">중요) 추가정보(by트리거 메서드 인자)를 받아 현재 정보(인변으로 보유)를 업데이트해서 판단한다</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#일급컬렉션-정보상태값의-addremove는-내부-정보를-변화시키지말고-변화된-내부정보로-일급을-만들어-반환하여-불변--밖에서-반환된-것을-이용">일급컬렉션 정보(상태값)의 add/remove()는 내부 정보를 변화시키지말고 변화된 내부정보로 일급을 만들어 반환하여 불변 &amp;&amp; 밖에서 반환된 것을 이용</a>
<ul>
<li class="toc-entry toc-h4"><a href="#22-이전-카드정보들을-상태값으로-보유하고-있는-상황에서---다음-상태로-가기위에-카드1장의-추가정보메서드인자를-받아-현재-정보인변으로-보유를-업데이트하자">22) 이전 카드정보들을 상태값으로 보유하고 있는 상황에서 -&gt; 다음 상태로 가기위에 카드1장의 추가정보(메서드인자)를 받아 현재 정보(인변으로 보유)를 업데이트하자</a>
<ul>
<li class="toc-entry toc-h5"><a href="#일급-내부변수를-변경시키려한다면listaddremove---불변-일급으로-만들어서---변경된-list정보로-새-일급을-새로-만들어-반환해주면----getter로-상태값을-열람할-필요가-없어진다">일급 내부변수를 변경시키려한다면(list.add/remove) -&gt; 불변 일급으로 만들어서 -&gt; 변경된 list(정보)로 새 일급을 새로 만들어 반환해주면  -&gt; getter로 상태값을 열람할 필요가 없어진다.</a></li>
<li class="toc-entry toc-h5"><a href="#참고-외부에서-내부증감변화의-메세지를-보낸-뒤---그-내부상태를-가져다-쓰고-싶다면---불변-포장객체로-응답해서-밖에서-사용가능하게-하라">참고) 외부에서 내부(증감)변화의 메세지를 보낸 뒤 -&gt; 그 내부상태를 가져다 쓰고 싶다면 -&gt; 불변 포장객체로 응답해서 밖에서 사용가능하게 하라</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#23-불변-일급컬렉션으로-증감시-새객체를-반환해주면---외부에서-add-해줘도-내부만-변화되는게-아니라--외부에서는-증감이-반영된-내부정보를-포장한-일급을-받아쓴다---메세지-보내서-업데이트된-내부-정보에-대해-물어보기만-하면-된다">23) 불변 일급컬렉션으로 증감시 새객체를 반환해주면 -&gt; 외부에서 .add 해줘도 내부만 변화되는게 아니라  외부에서는 증감이 반영된 내부정보를 포장한 일급을 받아쓴다 -&gt; 메세지 보내서 업데이트된 내부 정보에 대해 물어보기만 하면 된다.</a></li>
<li class="toc-entry toc-h4"><a href="#24-다른-구현체가-안되더라도-같은-구현체로-응답hit-hit-되더라도-추가정보를-반영하여-응답된-업데이트된-정보-by-불변-일급를-담아서---업데이트된-구현체로-응답되어야한다">24) 다른 구현체가 안되더라도, 같은 구현체로 응답(hit-&gt;hit) 되더라도 추가정보를 반영하여 응답된 업데이트된 정보 by 불변 일급를 담아서 -&gt; 업데이트된 구현체로 응답되어야한다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#중요-끝상태에서---트리거-호출시-예외발생으로-종료까지-마무리-해줘야한다">중요) 끝상태에서 -&gt; 트리거 호출시 예외발생으로 종료까지 마무리 해줘야한다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#25-bust에-온-상태의-테메를-복붙하여-bust까지를-세팅해놓고----뽑으면-종료되는-case를-처리하자">25) bust에 온 상태의 테메를 복붙하여 bust까지를 세팅해놓고 -&gt;  뽑으면 종료되는 case를 처리하자.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-원하는-상태까지-업데이트-트리거-메서드를-체이닝으로-호출해서-한번만-할당해놓자">참고) 원하는 상태까지 업데이트 트리거 메서드를 체이닝으로 호출해서 한번만 할당해놓자</a></li>
<li class="toc-entry toc-h5"><a href="#참고-추상체-응답type의--구현체-상태-업데이트-트리거-메서드draw는-체이닝으로-원하는-상태-만들-때까지-갈-수-있다">참고) 추상체 응답Type의  구현체 상태 업데이트 트리거 메서드(draw)는 체이닝으로 원하는 상태 만들 때까지 갈 수 있다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#중요-추상체-변수로-받은-구현체-메서드의-로직개발시-추상체변수메서드의-외형이라도-현-구현체-상태에-잘맞게-ctrlf12로-잘타고가서-개발하자">중요) 추상체 변수로 받은 구현체 메서드의 로직개발시 추상체변수.메서드()의 외형이라도 현 구현체 상태에 잘맞게 ctrl+f12로 잘타고가서 개발하자</a>
<ul>
<li class="toc-entry toc-h5"><a href="#참고-다이어그램에서-return이-null이거나-thr라면-물음표가-찍혀있게-된다--업데이트-안됨">참고) 다이어그램에서, return이 Null이거나 Thr라면 물음표?가 찍혀있게 된다. ( 업데이트 안됨)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul><h1 id="블랙잭">
<a class="anchor" href="#%EB%B8%94%EB%9E%99%EC%9E%AD" aria-hidden="true"><span class="octicon octicon-link"></span></a>블랙잭</h1>

<h2 id="도메인-공부후-시작점-찾기">
<a class="anchor" href="#%EB%8F%84%EB%A9%94%EC%9D%B8-%EA%B3%B5%EB%B6%80%ED%9B%84-%EC%8B%9C%EC%9E%91%EC%A0%90-%EC%B0%BE%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>도메인 공부후 시작점 찾기</h2>

<ol>
  <li>
<strong>정제된 rawInput</strong>이 들어온다고 <strong>가정</strong>하고 했었다.
    <ol>
      <li>자동차 경주: new Car(<code class="language-plaintext highlighter-rouge">"이름"</code>)의 <strong>string</strong> 생성부터 -&gt; 응답하는 메서드 테스트</li>
      <li>로또: rawInput으로 <code class="language-plaintext highlighter-rouge">1,2,3,4,5,6</code>의 <strong>list</strong>
</li>
    </ol>
  </li>
  <li>
<strong>블랙잭 로직을 시작하려면 재료 <code class="language-plaintext highlighter-rouge">시작전 포장된 카드</code> -&gt; <code class="language-plaintext highlighter-rouge">카드덱</code>이 먼저 필요하다</strong>
    <ul>
      <li>카드덱이 카드를 2장씩 제공해야하는데, <strong><code class="language-plaintext highlighter-rouge">포장된 카드</code></strong>만 있으면 <strong>카드덱에서 뽑아서 줬다고 가정</strong>하고 <strong>메인로직 시작</strong>하면 된다.</li>
    </ul>
  </li>
  <li>카드를 <code class="language-plaintext highlighter-rouge">"문자열", 숫자</code>의 정제된 rawInput으로 가정해도 되지만, <strong>이것은 <code class="language-plaintext highlighter-rouge">input으로 들어오는게 아니라 원래 생성되어 있어야</code>하는 것이므로 <code class="language-plaintext highlighter-rouge">가정하고 -&gt; 나중에 포장</code>하는게 아니라 <code class="language-plaintext highlighter-rouge">미리 만들고 시작</code>한다</strong>
    <ul>
      <li>
<strong>게다가 <code class="language-plaintext highlighter-rouge">2개는 같이 붙어서 움직이는 것</code>이므로 -&gt; <code class="language-plaintext highlighter-rouge">미리 클래스로 포장</code>한다</strong>
        <ul>
          <li>로또당첨번호 lotto + bonusNumber</li>
          <li>Player가 가지는 name + cards</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="캐싱">
<a class="anchor" href="#%EC%BA%90%EC%8B%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>캐싱</h2>

<h4 id="재료인-card먼저-만들기">
<a class="anchor" href="#%EC%9E%AC%EB%A3%8C%EC%9D%B8-card%EB%A8%BC%EC%A0%80-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>재료인 Card먼저 만들기</h4>

<h5 id="01-card에는-2가지정보가-붙어서-움직인다">
<a class="anchor" href="#01-card%EC%97%90%EB%8A%94-2%EA%B0%80%EC%A7%80%EC%A0%95%EB%B3%B4%EA%B0%80-%EB%B6%99%EC%96%B4%EC%84%9C-%EC%9B%80%EC%A7%81%EC%9D%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 Card에는 2가지정보가 붙어서 움직인다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318164548576.png" alt="image-20220318164548576"></p>

<ol>
  <li>
    <p>test를 파서 <code class="language-plaintext highlighter-rouge">필요한, 붙어다니는 2개의 정보</code>로 new Card( , ) 생성부터 해본다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318164709923.png" alt="image-20220318164709923"></p>
  </li>
  <li>
    <p>2가지 정보는 <strong><code class="language-plaintext highlighter-rouge">제한된 상수</code>이므로 <code class="language-plaintext highlighter-rouge">Enum으로 생성</code>하고 <code class="language-plaintext highlighter-rouge">1가지 예시 enum객체</code>를 활용해서 생성한다.</strong></p>

    <ul>
      <li>enum의 예시 -&gt; <code class="language-plaintext highlighter-rouge">enum클래스.대문자_상수</code>로 사용</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318164915814.png" alt="image-20220318164915814"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">create</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//new Card(new Suit(), new Denomination());</span>
     <span class="c1">//1. 2가지 정보는 제한된 수의 상수 -&gt; enum으로 받는다고 가정 -&gt; 예시로 생성한다.</span>
     <span class="k">new</span> <span class="nf">Card</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEART</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318164935719.png" alt="image-20220318164935719"></p>
  </li>
  <li>
    <p><strong>enum 정보를 복사해오는데, 필드값이 지금 당장 필요하지 않으면 삭제하자.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Denomination</span> <span class="o">{</span>
    
     <span class="no">ACE</span><span class="o">,</span>
     <span class="no">TWO</span><span class="o">,</span>
     <span class="no">THREE</span><span class="o">,</span>
     <span class="no">FOUR</span><span class="o">,</span>
     <span class="no">FIVE</span><span class="o">,</span>
     <span class="no">SIX</span><span class="o">,</span>
     <span class="no">SEVEN</span><span class="o">,</span>
     <span class="no">EIGHT</span><span class="o">,</span>
     <span class="no">NINE</span><span class="o">,</span>
     <span class="no">TEN</span><span class="o">,</span>
     <span class="no">JACK</span><span class="o">,</span>
     <span class="no">QUEEN</span><span class="o">,</span>
     <span class="no">KING</span><span class="o">,</span>
     <span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">blackjack</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Suit</span> <span class="o">{</span>
        
     <span class="no">CLUBS</span><span class="o">,</span> <span class="no">DIAMONDS</span><span class="o">,</span> <span class="no">HEARTS</span><span class="o">,</span> <span class="no">SPADES</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318165459732.png" alt="image-20220318165459732"></p>
  </li>
  <li>
    <p><strong>2가지 정보로 <code class="language-plaintext highlighter-rouge">new 객체생성 템플릿 주생성자</code>를 일단 생성해줘야한다.</strong></p>

    <ul>
      <li>캐싱을 하더라도 먼저 기본생성자부터 생성해주자.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318165639618.png" alt="image-20220318165639618">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318165855439.png" alt="image-20220318165855439"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318165916660.png" alt="image-20220318165916660"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Card</span> <span class="o">{</span>
    
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="n">suit</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Denomination</span> <span class="n">denomination</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Card</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Suit</span> <span class="n">suit</span><span class="o">,</span> 
                 <span class="kd">final</span> <span class="nc">Denomination</span> <span class="n">denomination</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">suit</span> <span class="o">=</span> <span class="n">suit</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">denomination</span> <span class="o">=</span> <span class="n">denomination</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>
<strong>파라미터는 좀 길다면 보기 좋게 2번재 줄로 이동시켜도 된다.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170043125.png" alt="image-20220318170043125">
</li>
    </ul>
  </li>
</ol>

<h5 id="02-class는-객체-100-새로-생성-new-단순템플릿이-아니라-캐싱등의-능동적-객체-생성-관리자역할을--by-로직을-포함한-생성자-정펙매로-할-수-있다">
<a class="anchor" href="#02-class%EB%8A%94-%EA%B0%9D%EC%B2%B4-100-%EC%83%88%EB%A1%9C-%EC%83%9D%EC%84%B1-new-%EB%8B%A8%EC%88%9C%ED%85%9C%ED%94%8C%EB%A6%BF%EC%9D%B4-%EC%95%84%EB%8B%88%EB%9D%BC-%EC%BA%90%EC%8B%B1%EB%93%B1%EC%9D%98-%EB%8A%A5%EB%8F%99%EC%A0%81-%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1-%EA%B4%80%EB%A6%AC%EC%9E%90%EC%97%AD%ED%95%A0%EC%9D%84--by-%EB%A1%9C%EC%A7%81%EC%9D%84-%ED%8F%AC%ED%95%A8%ED%95%9C-%EC%83%9D%EC%84%B1%EC%9E%90-%EC%A0%95%ED%8E%99%EB%A7%A4%EB%A1%9C-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 class는 <code class="language-plaintext highlighter-rouge">객체 100% 새로 생성 new 단순템플릿</code>이 아니라 <code class="language-plaintext highlighter-rouge">캐싱</code>등의 <code class="language-plaintext highlighter-rouge">능동적 객체 생성 관리자</code>역할을  by <code class="language-plaintext highlighter-rouge">로직을 포함한 생성자 정펙매</code>로 할 수 있다.</h5>

<ol>
  <li>
    <p>캐싱은 생성에 관한 것이며, <strong>정적팩토리메서드를 통해 능동적으로 <code class="language-plaintext highlighter-rouge">로직을 포함한 생성</code>으로 객체생성을 관리할 수 있다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170451390.png" alt="image-20220318170451390"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">create</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Card</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEARTS</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">);</span>
    
     <span class="c1">//2. [new + 재료]가 아니라, of/from등의 [정펙매 + 재료]로 생성해야 로직을 포함한 생성이 가능하다.</span>
     <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEARTS</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">);</span>
    
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170526576.png" alt="image-20220318170526576"></p>

    <ul>
      <li><strong>메서드 생성후 <code class="language-plaintext highlighter-rouge">파라미터 라인 + 명칭</code> 수정해주고 <code class="language-plaintext highlighter-rouge">나중가면 final도 달아준다?</code></strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170604749.png" alt="image-20220318170604749">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170619909.png" alt="image-20220318170619909"></p>
  </li>
  <li>
<strong>캐싱을 하기 위해서는 2가지만 해주면 된다.</strong>
    <ol>
      <li>미리 <strong><code class="language-plaintext highlighter-rouge">pr sf </code>로 클래스 변수 = 상수</strong>로서 cache map만들어주기
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318170833496.png" alt="image-20220318170833496">
        <ul>
          <li><strong>psf는 public sf/ <code class="language-plaintext highlighter-rouge">prsf</code>은 private이다.</strong></li>
        </ul>
      </li>
      <li>정펙매에서 <strong>생성된 CACHE_MAP</strong> + <code class="language-plaintext highlighter-rouge">.computeIfAbsent(, )</code>로 <strong>없을 때만 <code class="language-plaintext highlighter-rouge">new 100%생성 기본생성자로 생성</code> 후 반환</strong>
</li>
      <li><strong><code class="language-plaintext highlighter-rouge">캐싱될 객체는 VO로서 값 같으면 같은객체 취급</code>해주기 위해 <code class="language-plaintext highlighter-rouge">eq/hC 오버라이딩</code></strong></li>
    </ol>
  </li>
  <li>
    <p><strong>클래스 변수(상수)로 cache를 선언할 것이므로 -&gt; 메소드 내에서 변수 추출로 형완성을 해가자</strong></p>

    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">ctrl+alt+F</code>로 메서드내부에서 바로 필드(인변/클변으로 뽑을 수 있다)</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171257327.png" alt="image-20220318171257327">
</li>
    </ul>
  </li>
  <li>
    <p><strong>2개의 변수를 동시에 가지고 다니는 <code class="language-plaintext highlighter-rouge">inner class</code>를 선언한 뒤, <code class="language-plaintext highlighter-rouge">그 class의객체</code>를 Key로 가지고 가도 된다.</strong>(사용한할 것임. 참고만)
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171319942.png" alt="image-20220318171319942">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171330909.png" alt="image-20220318171330909">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171449611.png" alt="image-20220318171449611">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171501964.png" alt="image-20220318171501964"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Key</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Suit</span> <span class="n">suit</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Denomination</span> <span class="n">denomination</span><span class="o">;</span>
    
     <span class="kd">private</span> <span class="nf">Key</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Suit</span> <span class="n">suit</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">Denomination</span> <span class="n">denomination</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">suit</span> <span class="o">=</span> <span class="n">suit</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">denomination</span> <span class="o">=</span> <span class="n">denomination</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>
<strong>변수 추출시 다형성도 항상 확인하자</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318171553378.png" alt="image-20220318171553378">
</li>
    </ul>
  </li>
  <li>
    <p><strong>2개의 변수를 들고다니는 클래스Key를 만들어줘도, Card와 동일한 상태다(2개를 인변으로)</strong>. <strong>그냥 <code class="language-plaintext highlighter-rouge">.name()</code>을 활용한 string+string의 <code class="language-plaintext highlighter-rouge">&lt;String, </code>으로 unique한 1개의 key로 만들어준다.</strong> 캐싱의 valueType은 해당 객체로 준다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172008820.png" alt="image-20220318172008820"><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172025741.png" alt="image-20220318172025741"></p>
  </li>
  <li>
    <p><strong>enum은 <code class="language-plaintext highlighter-rouge">enum객체 변수명을 그대로 출력</code>해주는 <code class="language-plaintext highlighter-rouge">.name()</code>메서드를 제공해준다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172550026.png" alt="image-20220318172550026"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEARTS</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="o">+</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172653763.png" alt="image-20220318172653763"></p>
  </li>
  <li>
    <p>메소드내부에서 변수추출했지만, <strong><code class="language-plaintext highlighter-rouge">scope이동</code>할 땐, <code class="language-plaintext highlighter-rouge">pr</code>를 포함한 <code class="language-plaintext highlighter-rouge">sf</code>로 변경하여 <code class="language-plaintext highlighter-rouge">접근제한자를 수정</code>해주자..</strong></p>

    <ul>
      <li>메서드내부에서는 <code class="language-plaintext highlighter-rouge">pr</code>이 안먹는다. public메서드라면..</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172155926.png" alt="image-20220318172155926">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318172207359.png" alt="image-20220318172207359"></p>

    <ul>
      <li><strong>갯수를 미리 알고 있으면 map의 () 생성자에 넣어준다.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Card</span> <span class="o">{</span>
    
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Card</span><span class="o">&gt;</span> <span class="no">CACHE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;(</span><span class="mi">52</span><span class="o">);</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>캐쉬에 들어갈 key를 <code class="language-plaintext highlighter-rouge">1.name() +  2.name()</code>의 스트링으로 작성해줬다. <strong>만약, 그 key가 없을 경우, <code class="language-plaintext highlighter-rouge">해당 key값으로 자동으로 넣어줄 value</code>를 지정해줘야한다.</strong></p>

    <ul>
      <li><strong>이 때, key값은 활용을 안하므로 <code class="language-plaintext highlighter-rouge">value값을 만들어줄 Function 함수의 람다 시작인자</code>로서 자리에 <code class="language-plaintext highlighter-rouge">앞선 인자 key를 활용 안하므로  ignored</code>로 명명해서 작성해주자.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173110744.png" alt="image-20220318173110744">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173128008.png" alt="image-20220318173128008">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173153952.png" alt="image-20220318173153952"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Card</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Suit</span> <span class="n">suit</span><span class="o">,</span>
                       <span class="kd">final</span> <span class="nc">Denomination</span> <span class="n">denomination</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="no">CACHE</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">suit</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="o">+</span> <span class="n">denomination</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="n">ignored</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Card</span><span class="o">(</span><span class="n">suit</span><span class="o">,</span> <span class="n">denomination</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="03-캐싱되는-객체는-vo처럼-eqhc-오버라이딩-해줘야한다--정펙매-사용하면-기본생성자는-private로-바꿔서-잠궈줘야한다">
<a class="anchor" href="#03-%EC%BA%90%EC%8B%B1%EB%90%98%EB%8A%94-%EA%B0%9D%EC%B2%B4%EB%8A%94-vo%EC%B2%98%EB%9F%BC-eqhc-%EC%98%A4%EB%B2%84%EB%9D%BC%EC%9D%B4%EB%94%A9-%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4--%EC%A0%95%ED%8E%99%EB%A7%A4-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A9%B4-%EA%B8%B0%EB%B3%B8%EC%83%9D%EC%84%B1%EC%9E%90%EB%8A%94-private%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%84%9C-%EC%9E%A0%EA%B6%88%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 캐싱되는 객체는 VO처럼 eq/hC 오버라이딩 해줘야한다. + 정펙매 사용하면 <code class="language-plaintext highlighter-rouge">기본생성자는 private</code>로 바꿔서 잠궈줘야한다.</h5>

<ul>
  <li>
    <p>같은 값(2개 정보)를 가지면 -&gt; 같은 객체로 판단되어야 <strong>재사용시 같은 것으로 확인이 된다.</strong></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">generate</code> 띄운 후 <code class="language-plaintext highlighter-rouge">eq</code>로 빠르게 검색해서 사용하기</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173559643.png" alt="image-20220318173559643">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173609372.png" alt="image-20220318173609372">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318173653496.png" alt="image-20220318173653496"></p>
  </li>
  <li>
    <p>리팩토리으로서 <strong>메서드 인자에, 메소드 연산을 하고 있다. -&gt; 메서드추출</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="c1">//</span>
  <span class="k">return</span> <span class="no">CACHE</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">suit</span><span class="o">.</span><span class="na">name</span><span class="o">()</span> <span class="o">+</span> <span class="n">denomination</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> 
    
  <span class="c1">//</span>
  <span class="k">return</span> <span class="no">CACHE</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">toKey</span><span class="o">(</span><span class="n">suit</span><span class="o">,</span> <span class="n">denomination</span><span class="o">),</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174218060.png" alt="image-20220318174218060"></p>
  </li>
  <li>
    <p><strong>정펙메 사용순간부터 <code class="language-plaintext highlighter-rouge">기본 생성자</code>는 <code class="language-plaintext highlighter-rouge">private</code>으로 변경</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174601860.png" alt="image-20220318174601860"></p>

    <ul>
      <li>테스트 코드에 사용했던 <code class="language-plaintext highlighter-rouge">new 기본생성자</code>를 <code class="language-plaintext highlighter-rouge">.of</code>로 변경</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174646703.png" alt="image-20220318174646703">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174701030.png" alt="image-20220318174701030"></p>

    <ul>
      <li>
<strong>테스트 메서드명도 변경</strong>
        <ul>
          <li>create -&gt; <code class="language-plaintext highlighter-rouge">of</code>
</li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174720381.png" alt="image-20220318174720381">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174727220.png" alt="image-20220318174727220"></p>
  </li>
</ul>

<h4 id="만든-카드-캐싱-테스트">
<a class="anchor" href="#%EB%A7%8C%EB%93%A0-%EC%B9%B4%EB%93%9C-%EC%BA%90%EC%8B%B1-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>만든 카드 캐싱 테스트</h4>

<h5 id="참고-assertthat의-import는-qualify-static-call-이후-add-static-import로-">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-assertthat%EC%9D%98-import%EB%8A%94-qualify-static-call-%EC%9D%B4%ED%9B%84-add-static-import%EB%A1%9C-" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) assertThat()의 import는 qualify static call.. 이후 add static import로 ??</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174844069.png" alt="image-20220318174844069"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174906024.png" alt="image-20220318174906024"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318175006487.png" alt="image-20220318175006487"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318174930443.png" alt="image-20220318174930443"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318175022431.png" alt="image-20220318175022431"></p>

<h5 id="캐싱-테스트-만든것-issameas-방금-만든-것-같은지">
<a class="anchor" href="#%EC%BA%90%EC%8B%B1-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A7%8C%EB%93%A0%EA%B2%83-issameas-%EB%B0%A9%EA%B8%88-%EB%A7%8C%EB%93%A0-%EA%B2%83-%EA%B0%99%EC%9D%80%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>캐싱 테스트: 만든것 .isSameAs( 방금 만든 것 )같은지</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">CardTest</span> <span class="o">{</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">of</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEARTS</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">);</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">card</span><span class="o">).</span><span class="na">isSameAs</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">HEARTS</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="tdd-시작점-어디서부터">
<a class="anchor" href="#tdd-%EC%8B%9C%EC%9E%91%EC%A0%90-%EC%96%B4%EB%94%94%EC%84%9C%EB%B6%80%ED%84%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>TDD 시작점 어디서부터</h2>

<h3 id="핵심-로직은">
<a class="anchor" href="#%ED%95%B5%EC%8B%AC-%EB%A1%9C%EC%A7%81%EC%9D%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>핵심 로직은?</h3>

<ol>
  <li>카드 2장을 받는 것?</li>
  <li>
<strong>2장 받은 상태에서 판단</strong>을 한다.
    <ul>
      <li>21이면 <code class="language-plaintext highlighter-rouge">블랙잭</code>
        <ul>
          <li><strong>if문이 등장했다. -&gt; 다형성/enum 등…</strong></li>
        </ul>
      </li>
      <li>21보다 낮으면(21 아니면) <code class="language-plaintext highlighter-rouge">sit</code>
        <ul>
          <li>그만 할 수 있다. <code class="language-plaintext highlighter-rouge">stay</code>
            <ul>
              <li>추가적으로 받을 수 없다.</li>
            </ul>
          </li>
          <li>hit시, 21보다 아래면 <code class="language-plaintext highlighter-rouge">sit</code>상태로
            <ul>
              <li>계속 받을 수 있다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
<strong>행위는 사용자input에 의해 진행되지만, 특정 <code class="language-plaintext highlighter-rouge">메서드(카드받기)에 의해 서로 바뀌는 &lt;상호 연결된 상태값&gt;</code>이라는 밀접한 관계를 가지고 있다.</strong>
    <ul>
      <li>
<strong>응답값이 상태</strong>이며,</li>
      <li>(동일)<strong>메서드에 의해 실시간으로 바뀌는 상태</strong>다..</li>
      <li>
<strong>if문이 엄청 나올 것이다 -&gt; <code class="language-plaintext highlighter-rouge">추상화로 if문을 제거한다</code></strong>
        <ul>
          <li>객체생활 <code class="language-plaintext highlighter-rouge">체조원칙</code> -&gt; 체조는 어디에 좋은지 모르는데, 하다보면 좋아진다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="시작점은-어디서">
<a class="anchor" href="#%EC%8B%9C%EC%9E%91%EC%A0%90%EC%9D%80-%EC%96%B4%EB%94%94%EC%84%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>시작점은 어디서?</h3>

<ul>
  <li><strong>재료인 카드 2장을 뽑은 <code class="language-plaintext highlighter-rouge">상태</code>에서부터 시작하여 <code class="language-plaintext highlighter-rouge">상호 연결된 다른 상태로 바뀌는 메서드</code>를 호출하면서 시작한다.</strong></li>
</ul>

<h4 id="01-핵심로직like-service의-클래스이름이-안정해졌으면---gametest클래스---gamestart재료메서드로-시작">
<a class="anchor" href="#01-%ED%95%B5%EC%8B%AC%EB%A1%9C%EC%A7%81like-service%EC%9D%98-%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%B4%EB%A6%84%EC%9D%B4-%EC%95%88%EC%A0%95%ED%95%B4%EC%A1%8C%EC%9C%BC%EB%A9%B4---gametest%ED%81%B4%EB%9E%98%EC%8A%A4---gamestart%EC%9E%AC%EB%A3%8C%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%8B%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>01 핵심로직(like Service)의 클래스이름이 안정해졌으면   GameTest클래스 -&gt; Game.start(재료)메서드로 시작</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318180804265.png" alt="image-20220318180804265"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318180844082.png" alt="image-20220318180844082"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318180918002.png" alt="image-20220318180918002"></p>

<h4 id="02-재료를-넣고---예상-응답값으로-뭐가-나올지-먼저-고민한-뒤-여러개면-만만한-1-case-선택---재료예상-인자값도-맞춰서-정해준다">
<a class="anchor" href="#02-%EC%9E%AC%EB%A3%8C%EB%A5%BC-%EB%84%A3%EA%B3%A0---%EC%98%88%EC%83%81-%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9C%BC%EB%A1%9C-%EB%AD%90%EA%B0%80-%EB%82%98%EC%98%AC%EC%A7%80-%EB%A8%BC%EC%A0%80-%EA%B3%A0%EB%AF%BC%ED%95%9C-%EB%92%A4-%EC%97%AC%EB%9F%AC%EA%B0%9C%EB%A9%B4-%EB%A7%8C%EB%A7%8C%ED%95%9C-1-case-%EC%84%A0%ED%83%9D---%EC%9E%AC%EB%A3%8C%EC%98%88%EC%83%81-%EC%9D%B8%EC%9E%90%EA%B0%92%EB%8F%84-%EB%A7%9E%EC%B6%B0%EC%84%9C-%EC%A0%95%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>02 재료를 넣고 -&gt; <code class="language-plaintext highlighter-rouge">예상 응답값</code>으로 <code class="language-plaintext highlighter-rouge">뭐가 나올지 먼저 고민</code>한 뒤 여러개면 만만한 1 case 선택 -&gt; <code class="language-plaintext highlighter-rouge">재료:예상 인자값</code>도 맞춰서 정해준다.</h4>

<h5 id="테메당-1case이므로-여러-응답상태이-나온다고-예상되면---그-중-1개를-예상응답값으로-선택하고---예상응답값에-맞는-재료를-넣어줘야한다">
<a class="anchor" href="#%ED%85%8C%EB%A9%94%EB%8B%B9-1case%EC%9D%B4%EB%AF%80%EB%A1%9C-%EC%97%AC%EB%9F%AC-%EC%9D%91%EB%8B%B5%EC%83%81%ED%83%9C%EC%9D%B4-%EB%82%98%EC%98%A8%EB%8B%A4%EA%B3%A0-%EC%98%88%EC%83%81%EB%90%98%EB%A9%B4---%EA%B7%B8-%EC%A4%91-1%EA%B0%9C%EB%A5%BC-%EC%98%88%EC%83%81%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%84%A0%ED%83%9D%ED%95%98%EA%B3%A0---%EC%98%88%EC%83%81%EC%9D%91%EB%8B%B5%EA%B0%92%EC%97%90-%EB%A7%9E%EB%8A%94-%EC%9E%AC%EB%A3%8C%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>테메당 1case이므로 여러 응답(상태)이 나온다고 예상되면 -&gt; 그 중 1개를 예상응답값으로 선택하고 -&gt; 예상응답값에 맞는 재료를 넣어줘야한다.</h5>

<ol>
  <li>
    <p>메인로직 클래스(game)의 static메서드()에 <strong><code class="language-plaintext highlighter-rouge">정제된  rawInput(재료)</code>으로서 포장 카드 2장</strong>을 넣어야한다.</p>
  </li>
  <li>
    <p><strong>메서드를 짜기 전, 예상 응답을 먼저 생각해보고 <code class="language-plaintext highlighter-rouge">여러 응답값</code>이 나올 수 있다면, <code class="language-plaintext highlighter-rouge">만만한 응답값부터 예상값</code>으로 정해놓고 <code class="language-plaintext highlighter-rouge">1 case testmethod</code>를 작성하자.</strong></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">blackjack은 ace처리</code>도 해줘야하기 때문에 만만하지 않다.</strong></li>
      <li>case가 정해지면 그에 따라 <strong>테스트 메서드 이름도 바꿔준다. (start-&gt; hit)</strong>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hit</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//1. 재료: 카드 2장을 넣을 때 -&gt; 응답: if max21 Blackjack  or  if Hit(orStay)가 나올 수 있다.</span>
     <span class="c1">// -&gt; 먼저 만만한 것을 고른다. </span>
     <span class="c1">// -&gt; 21 아래 값인 hit를 먼저 예상응답으로 정한다.</span>
     <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>예상응답값에 대한 <code class="language-plaintext highlighter-rouge">예상인자</code>를 맞춰서 작성해줘야한다.</strong></p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">hit</code>를 먼저 예상응답값으로 정했다면</li>
      <li>
<code class="language-plaintext highlighter-rouge">hit를 만드는 재료 카드 2장</code>도 예상인자값으로 맞춰서 넣어줘야한다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318182533609.png" alt="image-20220318182533609"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hit</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">//1. 재료: 카드 2장을 넣을 때 -&gt; 응답: if max21 Blackjack  or  if Hit(orStay)가 나올 수 있다.</span>
     <span class="c1">// -&gt; 먼저 만만한 것을 고른다.</span>
     <span class="c1">// -&gt; 21 아래 값인 hit를 먼저 예상응답으로 정한다.</span>
    
     <span class="c1">//2. 카드2 -&gt; hit (예상응답값) -&gt; 거기에 맞는 재료 넣어주기</span>
     <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span> <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">FIVE</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318182633631.png" alt="image-20220318182633631"></p>
  </li>
</ol>

<h3 id="응답값이-상수enum이-행위에-의해-다른-것으로-바뀔-수-있는-상태라면---class의-객체로-미리-작성한다">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9D%B4-%EC%83%81%EC%88%98enum%EC%9D%B4-%ED%96%89%EC%9C%84%EC%97%90-%EC%9D%98%ED%95%B4-%EB%8B%A4%EB%A5%B8-%EA%B2%83%EC%9C%BC%EB%A1%9C-%EB%B0%94%EB%80%94-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%83%81%ED%83%9C%EB%9D%BC%EB%A9%B4---class%EC%9D%98-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%AF%B8%EB%A6%AC-%EC%9E%91%EC%84%B1%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>응답값이 상수/enum이 <code class="language-plaintext highlighter-rouge">행위에 의해 다른 것으로 바뀔 수 있는 상태</code>라면 -&gt; class의 객체로 미리 작성한다.</h3>

<h4 id="03-테스트는-내부로직-완성전에-응답값---then-assert문을-미리-작성---클래스와-메서드는-껍데기만-일단-작성해놓기">
<a class="anchor" href="#03-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-%EB%82%B4%EB%B6%80%EB%A1%9C%EC%A7%81-%EC%99%84%EC%84%B1%EC%A0%84%EC%97%90-%EC%9D%91%EB%8B%B5%EA%B0%92---then-assert%EB%AC%B8%EC%9D%84-%EB%AF%B8%EB%A6%AC-%EC%9E%91%EC%84%B1---%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80-%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EA%BB%8D%EB%8D%B0%EA%B8%B0%EB%A7%8C-%EC%9D%BC%EB%8B%A8-%EC%9E%91%EC%84%B1%ED%95%B4%EB%86%93%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>03 테스트는 내부로직 완성전에 <code class="language-plaintext highlighter-rouge">응답값 -&gt; then assert문</code>을 미리 작성 -&gt; 클래스와 메서드는 껍데기만 일단 작성해놓기</h4>

<h4 id="참고-앞으로-클래스가-상속예정없으면-다-final로-선언하는-버릇-들이기">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%95%9E%EC%9C%BC%EB%A1%9C-%ED%81%B4%EB%9E%98%EC%8A%A4%EA%B0%80-%EC%83%81%EC%86%8D%EC%98%88%EC%A0%95%EC%97%86%EC%9C%BC%EB%A9%B4-%EB%8B%A4-final%EB%A1%9C-%EC%84%A0%EC%96%B8%ED%95%98%EB%8A%94-%EB%B2%84%EB%A6%87-%EB%93%A4%EC%9D%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 앞으로 클래스가 상속예정없으면 다 final로 선언하는 버릇 들이기</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318183627812.png" alt="image-20220318183627812"></p>

<ol>
  <li>
    <p>메인로직 메서드 보유 클래스(Game)을 만들어주고 **응답값을미리 ** 작성해야한다.</p>

    <ul>
      <li><strong>클래스 생성만 해주고 넘어가야한다</strong></li>
      <li><strong>이 때 class가 상속예정이 없으면 final로 선언하는 버릇을 들이자.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Game</span> <span class="o">{</span>
    
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318183452321.png" alt="image-20220318183452321">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318183500342.png" alt="image-20220318183500342"></p>
  </li>
</ol>

<h5 id="응답값-아직-작성안된-class의-객체가-있을-예정이라면-object로-응답해주고-실패용return-null하는-메서드-작성하기">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EA%B0%92-%EC%95%84%EC%A7%81-%EC%9E%91%EC%84%B1%EC%95%88%EB%90%9C-class%EC%9D%98-%EA%B0%9D%EC%B2%B4%EA%B0%80-%EC%9E%88%EC%9D%84-%EC%98%88%EC%A0%95%EC%9D%B4%EB%9D%BC%EB%A9%B4-object%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%A3%BC%EA%B3%A0-%EC%8B%A4%ED%8C%A8%EC%9A%A9return-null%ED%95%98%EB%8A%94-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>응답값 <code class="language-plaintext highlighter-rouge">아직 작성안된 class의 객체</code>가 있을 예정이라면 <code class="language-plaintext highlighter-rouge">Object</code>로 응답해주고 <code class="language-plaintext highlighter-rouge">(실패용)return null;</code>하는 메서드 작성하기</h5>

<ol>
  <li>
    <p>빈 메서드 완성해주기</p>

    <p><img src="C:%5CUsers%5Ccho_desktop%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220318183703651.png" alt="image-20220318183703651"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318183919815.png" alt="image-20220318183919815"></p>

    <ul>
      <li>
<strong>응답값 객체가 있을 예정이면  <code class="language-plaintext highlighter-rouge">Object</code>로 일단 응답시키고 <code class="language-plaintext highlighter-rouge">return null;</code>로 작성하자</strong>
        <ul>
          <li><strong><code class="language-plaintext highlighter-rouge">return null;</code>로 초기 작성해줘야 실패를 해서 고친다.</strong></li>
        </ul>
      </li>
      <li><strong>순서가 있는 파라미터는 <code class="language-plaintext highlighter-rouge">first, second</code>로 네이밍해놓자</strong></li>
      <li>파라미터는 줄맞춤 해도 된다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318184018832.png" alt="image-20220318184018832">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Game</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                                <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318184116638.png" alt="image-20220318184116638"></p>
  </li>
</ol>

<h4 id="04-object-응답객체로-받아서-null이-넘어와-실패할-assert문-작성과-동시에-expected에-기입할-응답객체class로-응답클래스만들어주기">
<a class="anchor" href="#04-object-%EC%9D%91%EB%8B%B5%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%B0%9B%EC%95%84%EC%84%9C-null%EC%9D%B4-%EB%84%98%EC%96%B4%EC%99%80-%EC%8B%A4%ED%8C%A8%ED%95%A0-assert%EB%AC%B8-%EC%9E%91%EC%84%B1%EA%B3%BC-%EB%8F%99%EC%8B%9C%EC%97%90-expected%EC%97%90-%EA%B8%B0%EC%9E%85%ED%95%A0-%EC%9D%91%EB%8B%B5%EA%B0%9D%EC%B2%B4class%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%81%B4%EB%9E%98%EC%8A%A4%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>04 <code class="language-plaintext highlighter-rouge">Object 응답객체</code>로 받아서 <code class="language-plaintext highlighter-rouge">null이 넘어와 실패할 assert문</code> 작성과 동시에 <code class="language-plaintext highlighter-rouge">expected에 기입할 응답객체.class로 응답클래스</code>만들어주기</h4>

<h5 id="객체-응답은-isinstanceof-클래스class로-확인하면서-class작성해주기">
<a class="anchor" href="#%EA%B0%9D%EC%B2%B4-%EC%9D%91%EB%8B%B5%EC%9D%80-isinstanceof-%ED%81%B4%EB%9E%98%EC%8A%A4class%EB%A1%9C-%ED%99%95%EC%9D%B8%ED%95%98%EB%A9%B4%EC%84%9C-class%EC%9E%91%EC%84%B1%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>객체 응답은 <code class="language-plaintext highlighter-rouge">.isInstanceOf( 클래스.class)</code>로 확인하면서 class작성해주기</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318184327974.png" alt="image-20220318184327974"></p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Object [미완성응답객체]</code>로 받아주고 -&gt; <strong>확인을 <code class="language-plaintext highlighter-rouge">.isIntanceOf(Hit.class)</code></strong>로 해주면서 클래스를 만든다</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hit</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given &amp; when : hit</span>
     <span class="kd">final</span> <span class="nc">Object</span> <span class="n">hit</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                                   <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">FIVE</span><span class="o">));</span>
    
     <span class="c1">// then</span>
     <span class="n">assertThat</span><span class="o">(</span><span class="n">hit</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Hit</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318184613356.png" alt="image-20220318184613356"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Hit</span> <span class="o">{</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>클래스를 채우거나 완성하지 않고 테스트를 돌린다.</strong></p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">return null;</code>의 미완성 상태라 실패한다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318184743965.png" alt="image-20220318184743965"></p>
  </li>
</ol>

<h4 id="05-첫번째-응답객체로-메서드-응답응답typereturn-바꿔주기">
<a class="anchor" href="#05-%EC%B2%AB%EB%B2%88%EC%A7%B8-%EC%9D%91%EB%8B%B5%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%91%EB%8B%B5%EC%9D%91%EB%8B%B5typereturn-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>05 첫번째 응답객체로 메서드 응답(응답Type+return) 바꿔주기</h4>

<ol>
  <li>
    <p>null이 넘어가는 상황을 <code class="language-plaintext highlighter-rouge">현재 case의 응답객체</code>로 바꿔줘야 케이스가 통과될 것이다.</p>

    <ul>
      <li>기존</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Game</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                                <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li><strong>변경 후</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Game</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Hit</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318185508352.png" alt="image-20220318185508352"></p>
  </li>
  <li>
    <p>테스트 돌려보면 통과된다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318185642510.png" alt="image-20220318185642510"></p>
  </li>
</ol>

<h4 id="06-2번째-예상응답인-blackjack-case로-만들어-주고-로직-추가해주기----given예상인자값도-바꿔주자">
<a class="anchor" href="#06-2%EB%B2%88%EC%A7%B8-%EC%98%88%EC%83%81%EC%9D%91%EB%8B%B5%EC%9D%B8-blackjack-case%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EC%A3%BC%EA%B3%A0-%EB%A1%9C%EC%A7%81-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EA%B8%B0----given%EC%98%88%EC%83%81%EC%9D%B8%EC%9E%90%EA%B0%92%EB%8F%84-%EB%B0%94%EA%BF%94%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>06 2번째 예상응답인 blackjack case로 만들어 주고 로직 추가해주기 -&gt;  given예상인자값도 바꿔주자!</h4>

<h5 id="다형성-적용전까진-바뀔-수-있는-응답객체의-변수type을-object로-유지해주기">
<a class="anchor" href="#%EB%8B%A4%ED%98%95%EC%84%B1-%EC%A0%81%EC%9A%A9%EC%A0%84%EA%B9%8C%EC%A7%84-%EB%B0%94%EB%80%94-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%9D%91%EB%8B%B5%EA%B0%9D%EC%B2%B4%EC%9D%98-%EB%B3%80%EC%88%98type%EC%9D%84-object%EB%A1%9C-%EC%9C%A0%EC%A7%80%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>다형성 적용전까진, <code class="language-plaintext highlighter-rouge">바뀔 수 있는 응답객체의 변수Type을 Object로 유지</code>해주기</h5>

<ul>
  <li>그래야 <code class="language-plaintext highlighter-rouge">다형성 적용 전, case 추가해서 받아줘도 테스트들이 다 통과</code>될 것이다.</li>
</ul>

<ol>
  <li>
    <p><strong>테메 복사 -&gt; 테메이름 -&gt; 변수이름 -&gt; 예상 응답값 -&gt; <code class="language-plaintext highlighter-rouge">예상인자값given</code> -&gt; expeceed 모두</strong> 해당case로 바꿔주기</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318190028753.png" alt="image-20220318190028753"></p>
  </li>
  <li>
    <p>없으면 해당 클래스도 만들어준다. -&gt; final + <strong>enter</strong> 활용</p>

    <ul>
      <li>tab누르면 추가가 아니라 단어 덮어쓰기 되서 class가 사라지더라.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Blackjack</span> <span class="o">{</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>예상인자값</strong>도 바꿔주야한다.</p>

    <ul>
      <li>ace + jack으로 바꿔줌</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318190417465.png" alt="image-20220318190417465"></p>
  </li>
  <li>
    <p>테스트는 로직 추가/수정이 없으니 통과안한다.</p>
  </li>
</ol>

<h4 id="07-복잡한-case통과를-위한-로직-추가해주기">
<a class="anchor" href="#07-%EB%B3%B5%EC%9E%A1%ED%95%9C-case%ED%86%B5%EA%B3%BC%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A1%9C%EC%A7%81-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>07 복잡한 case통과를 위한 로직 추가해주기</h4>

<ul>
  <li>blackjack은 단순if문으로 통과할 순 없다.</li>
</ul>

<ol>
  <li>
    <p>카드의 합이 21이 될 때 return <code class="language-plaintext highlighter-rouge">new Blackjack()</code> 해주면 되는데, <strong>지금은 점수를 가지고 올 수 없다.</strong></p>

    <ul>
      <li>Card -&gt; Denomination -&gt; 점수를 가지고 와야함.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Hit</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318201952571.png" alt="image-20220318201952571">|
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202000526.png" alt="image-20220318202000526">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202107693.png" alt="image-20220318202107693"></p>
  </li>
</ol>

<h5 id="필요에-의해-enum에-필드-추가해주기">
<a class="anchor" href="#%ED%95%84%EC%9A%94%EC%97%90-%EC%9D%98%ED%95%B4-enum%EC%97%90-%ED%95%84%EB%93%9C-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>필요에 의해 enum에 필드 추가해주기</h5>

<ul>
  <li>
    <p>여러개 선택은 커서가 물리는 중간에서 시작해서 -&gt; 같이 움직인다.</p>

    <ul>
      <li>1~2자리 숫자면, 2자리 숫자로 입력해서 지우는 식으로 가자.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202232174.png" alt="image-20220318202232174">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202246281.png" alt="image-20220318202246281">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202322234.png" alt="image-20220318202322234">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202343405.png" alt="image-20220318202343405">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318202400364.png" alt="image-20220318202400364"></p>
  </li>
</ul>

<h5 id="참고-enum에-필드를-만들어줬다는-말은-밖에서-갖다-쓸거라는-말이다---getter가-될-준비를-한다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-enum%EC%97%90-%ED%95%84%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A4%AC%EB%8B%A4%EB%8A%94-%EB%A7%90%EC%9D%80-%EB%B0%96%EC%97%90%EC%84%9C-%EA%B0%96%EB%8B%A4-%EC%93%B8%EA%B1%B0%EB%9D%BC%EB%8A%94-%EB%A7%90%EC%9D%B4%EB%8B%A4---getter%EA%B0%80-%EB%90%A0-%EC%A4%80%EB%B9%84%EB%A5%BC-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) enum에 필드를 만들어줬다는 말은 밖에서 갖다 쓸거라는 말이다 -&gt; getter가 될 준비를 한다.</h5>

<ul>
  <li>
    <p>나중에 필요에 의해 작성할것이지만, 미리 작성해줘도 된다.</p>

    <ul>
      <li><strong>getValue대신 특정필드명이 있다면 <code class="language-plaintext highlighter-rouge">.필드명()</code>으로 게터를 대신한다.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">point</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">point</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="08-최대한-빨리-테스트-통과시키기">
<a class="anchor" href="#08-%EC%B5%9C%EB%8C%80%ED%95%9C-%EB%B9%A8%EB%A6%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%86%B5%EA%B3%BC%EC%8B%9C%ED%82%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>08 최대한 빨리 테스트 통과시키기</h4>

<h5 id="참고-도메인vs같다른도메인의-비교-는-서비스메인로직-구동-메서드-내부에서-일단-getter이용해서-하고---도메인로직으로서-클래스를-추출하거나-해서-옮겨야한다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EB%8F%84%EB%A9%94%EC%9D%B8vs%EA%B0%99%EB%8B%A4%EB%A5%B8%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%98-%EB%B9%84%EA%B5%90-%EB%8A%94-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81-%EA%B5%AC%EB%8F%99-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%9D%BC%EB%8B%A8-getter%EC%9D%B4%EC%9A%A9%ED%95%B4%EC%84%9C-%ED%95%98%EA%B3%A0---%EB%8F%84%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9C%BC%EB%A1%9C%EC%84%9C-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%A5%BC-%EC%B6%94%EC%B6%9C%ED%95%98%EA%B1%B0%EB%82%98-%ED%95%B4%EC%84%9C-%EC%98%AE%EA%B2%A8%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) <code class="language-plaintext highlighter-rouge">도메인vs같/다른도메인의 비교</code> 는 서비스(메인로직 구동) 메서드 내부에서 일단 getter이용해서 하고 -&gt; 도메인로직으로서 클래스를 추출하거나 해서 옮겨야한다.</h5>

<h5 id="현재-getter를-쓰는-것에-대한-정당성-확보----같은-도메인끼리라도-내부-비교로직이라면-현재-서비스-로직에서-일단-작성해주고-추출해줘야한다">
<a class="anchor" href="#%ED%98%84%EC%9E%AC-getter%EB%A5%BC-%EC%93%B0%EB%8A%94-%EA%B2%83%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A0%95%EB%8B%B9%EC%84%B1-%ED%99%95%EB%B3%B4----%EA%B0%99%EC%9D%80-%EB%8F%84%EB%A9%94%EC%9D%B8%EB%81%BC%EB%A6%AC%EB%9D%BC%EB%8F%84-%EB%82%B4%EB%B6%80-%EB%B9%84%EA%B5%90%EB%A1%9C%EC%A7%81%EC%9D%B4%EB%9D%BC%EB%A9%B4-%ED%98%84%EC%9E%AC-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81%EC%97%90%EC%84%9C-%EC%9D%BC%EB%8B%A8-%EC%9E%91%EC%84%B1%ED%95%B4%EC%A3%BC%EA%B3%A0-%EC%B6%94%EC%B6%9C%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>현재 getter를 쓰는 것에 대한 정당성 확보 -&gt;  <code class="language-plaintext highlighter-rouge">같은 도메인끼리라도 내부 비교로직</code>이라면 현재 서비스 로직에서 일단 작성해주고 추출해줘야한다.</h5>

<h5 id="but--같은-도메인끼리-or-도메인1개에-대해-단순-상수비교-메서드없이-단순집계-등는-개별-일괄처리-or-집계라면-묶어서---메세지-보내서-물어본다---현재의-상황">
<a class="anchor" href="#but--%EA%B0%99%EC%9D%80-%EB%8F%84%EB%A9%94%EC%9D%B8%EB%81%BC%EB%A6%AC-or-%EB%8F%84%EB%A9%94%EC%9D%B81%EA%B0%9C%EC%97%90-%EB%8C%80%ED%95%B4-%EB%8B%A8%EC%88%9C-%EC%83%81%EC%88%98%EB%B9%84%EA%B5%90-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%86%EC%9D%B4-%EB%8B%A8%EC%88%9C%EC%A7%91%EA%B3%84-%EB%93%B1%EB%8A%94-%EA%B0%9C%EB%B3%84-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC-or-%EC%A7%91%EA%B3%84%EB%9D%BC%EB%A9%B4-%EB%AC%B6%EC%96%B4%EC%84%9C---%EB%A9%94%EC%84%B8%EC%A7%80-%EB%B3%B4%EB%82%B4%EC%84%9C-%EB%AC%BC%EC%96%B4%EB%B3%B8%EB%8B%A4---%ED%98%84%EC%9E%AC%EC%9D%98-%EC%83%81%ED%99%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>but  <code class="language-plaintext highlighter-rouge">같은 도메인끼리 or 도메인1개</code>에 대해 <code class="language-plaintext highlighter-rouge">단순 상수비교/ 메서드없이 단순집계</code> 등는 <code class="language-plaintext highlighter-rouge">개별 일괄처리 or 집계</code>라면 묶어서 -&gt; 메세지 보내서 물어본다` -&gt; 현재의 상황</h5>

<h5 id="참고-객체-내부의-포장변수-속-변수를-가져올-때도-getter대신-최종-나올-변수명으로-메서드-지어-들어가기">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EA%B0%9D%EC%B2%B4-%EB%82%B4%EB%B6%80%EC%9D%98-%ED%8F%AC%EC%9E%A5%EB%B3%80%EC%88%98-%EC%86%8D-%EB%B3%80%EC%88%98%EB%A5%BC-%EA%B0%80%EC%A0%B8%EC%98%AC-%EB%95%8C%EB%8F%84-getter%EB%8C%80%EC%8B%A0-%EC%B5%9C%EC%A2%85-%EB%82%98%EC%98%AC-%EB%B3%80%EC%88%98%EB%AA%85%EC%9C%BC%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%A7%80%EC%96%B4-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) <code class="language-plaintext highlighter-rouge">[객체] 내부의 [포장변수 속 변수]</code>를 가져올 때도 <code class="language-plaintext highlighter-rouge">getter</code>대신 <code class="language-plaintext highlighter-rouge">.최종 나올 변수명()</code>으로 메서드 지어 들어가기</h5>

<ul>
  <li>예시) Player 속 Cards 속 cards에 접근하고 싶을 때
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Player.getCards()</code>가 아니라 <strong><code class="language-plaintext highlighter-rouge">Player.cards()</code> 메세지</strong>를 보낸 뒤 <code class="language-plaintext highlighter-rouge">Cards 내부에서 return this.cards</code>로 보내주는 식으로 <strong>자기 변수처럼 바로 꺼내보도록 하자. <code class="language-plaintext highlighter-rouge">get중간포장변수()가 아닌 .최종변수xxxx()</code></strong>
</li>
    </ul>
  </li>
</ul>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203311839.png" alt="image-20220318203311839"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203422914.png" alt="image-20220318203422914"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203430707.png" alt="image-20220318203430707"></p>

<ol>
  <li>
    <p>blackjack을 응답해주는 코드를 최대한 빠르게 작성해보자.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203740957.png" alt="image-20220318203740957"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203815022.png" alt="image-20220318203815022"></p>
  </li>
</ol>

<h5 id="if분기에-따라-서로-다른형의-객체를-응답해야할-떄---다시-응답을-object형으로-바꿔주고---다형성을-생각한다---일단-테스트통과부터-확인한다">
<a class="anchor" href="#if%EB%B6%84%EA%B8%B0%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%84%9C%EB%A1%9C-%EB%8B%A4%EB%A5%B8%ED%98%95%EC%9D%98-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%95%BC%ED%95%A0-%EB%96%84---%EB%8B%A4%EC%8B%9C-%EC%9D%91%EB%8B%B5%EC%9D%84-object%ED%98%95%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B3%A0---%EB%8B%A4%ED%98%95%EC%84%B1%EC%9D%84-%EC%83%9D%EA%B0%81%ED%95%9C%EB%8B%A4---%EC%9D%BC%EB%8B%A8-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%86%B5%EA%B3%BC%EB%B6%80%ED%84%B0-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>if분기에 따라 서로 다른형의 객체를 응답해야할 떄 -&gt; <code class="language-plaintext highlighter-rouge">다시 응답을 Object형</code>으로 바꿔주고 -&gt; <code class="language-plaintext highlighter-rouge">다형성을 생각</code>한다 -&gt; 일단 테스트통과부터 확인한다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203853166.png" alt="image-20220318203853166"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318203902241.png" alt="image-20220318203902241"></p>

<ul>
  <li>
    <p>테스트가 실패한다.  -&gt; <strong>ace는 기본 1 point로 시작하고, 11로 계산처리를 안해줘서</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="k">if</span> <span class="o">(</span><span class="n">first</span><span class="o">.</span><span class="na">point</span><span class="o">()</span> <span class="o">+</span> <span class="n">second</span><span class="o">.</span><span class="na">point</span><span class="o">()</span> <span class="o">==</span> <span class="mi">21</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318204252096.png" alt="image-20220318204252096"></p>
  </li>
</ul>

<h5 id="ace에-대한-처리">
<a class="anchor" href="#ace%EC%97%90-%EB%8C%80%ED%95%9C-%EC%B2%98%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>ACE에 대한 처리</h5>

<ul>
  <li>
    <p><strong>if문에 들어가있던 <code class="language-plaintext highlighter-rouge">도메인끼리 연산</code>을 밖으로 빼서</strong> 처리후 넣어줘야한다.</p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">== 21</code>정답과의 비교는 빼고 처리해야한다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">first</span><span class="o">.</span><span class="na">point</span><span class="o">()</span> <span class="o">+</span> <span class="n">second</span><span class="o">.</span><span class="na">point</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">sum</span> <span class="o">==</span> <span class="mi">21</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318204436577.png" alt="image-20220318204436577">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318204446330.png" alt="image-20220318204446330"></p>
  </li>
</ul>

<h5 id="참고-2개이상의-같은-형이-개별-일괄처리가-필요할-땐-list에-넣고---stream으로-일괄처리---도메인끼리가-아니라-stream-도메인-개별-처리---꺼내지말고-메세지보내서-처리한다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-2%EA%B0%9C%EC%9D%B4%EC%83%81%EC%9D%98-%EA%B0%99%EC%9D%80-%ED%98%95%EC%9D%B4-%EA%B0%9C%EB%B3%84-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%A0-%EB%95%90-list%EC%97%90-%EB%84%A3%EA%B3%A0---stream%EC%9C%BC%EB%A1%9C-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC---%EB%8F%84%EB%A9%94%EC%9D%B8%EB%81%BC%EB%A6%AC%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-stream-%EB%8F%84%EB%A9%94%EC%9D%B8-%EA%B0%9C%EB%B3%84-%EC%B2%98%EB%A6%AC---%EA%BA%BC%EB%82%B4%EC%A7%80%EB%A7%90%EA%B3%A0-%EB%A9%94%EC%84%B8%EC%A7%80%EB%B3%B4%EB%82%B4%EC%84%9C-%EC%B2%98%EB%A6%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 2개이상의 같은 형이 <code class="language-plaintext highlighter-rouge">개별 일괄처리가 필요할 땐 list</code>에 넣고 -&gt; stream으로 일괄처리 -&gt; <code class="language-plaintext highlighter-rouge">도메인끼리가 아니라 stream 도메인 개별 처리 -&gt; 꺼내지말고 메세지보내서 처리</code>한다</h5>

<ol>
  <li>
    <p><strong>받은 first와 second가 같은형의 같은 도메인이 때문에 -&gt; <code class="language-plaintext highlighter-rouge">list(List.of())에 넣어서 일괄처리</code></strong>한다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318204647953.png" alt="image-20220318204647953"></p>
  </li>
  <li>
    <p><strong>도메인 1개에 대한 것</strong>이므로 (같/다른 도메인<code class="language-plaintext highlighter-rouge">끼리의 연산</code>이 아닌 순간 메세지보내서 처리) <strong>메세지를 보내서 ace있는지부터 확인한다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318212054279.png" alt="image-20220318212054279"><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318212026907.png" alt="image-20220318212026907"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318212310522.png" alt="image-20220318212310522"></p>

    <ul>
      <li>이넘에게 연산이라서 <code class="language-plaintext highlighter-rouge">.is메서드()</code>로 물어봐야할 것 같지만 일단 넘어가보자.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318212728957.png" alt="image-20220318212728957"></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">여러개</code>에 대해 <code class="language-plaintext highlighter-rouge">isAce가 anyMatch</code>로 가지고 있다면, <code class="language-plaintext highlighter-rouge">hasAce</code>가 된다.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                            <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)</span>
         <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
         <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">isAce</span><span class="o">());</span>
    
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">first</span><span class="o">.</span><span class="na">point</span><span class="o">()</span> <span class="o">+</span> <span class="n">second</span><span class="o">.</span><span class="na">point</span><span class="o">();</span>
    
     <span class="k">if</span> <span class="o">(</span><span class="n">sum</span> <span class="o">==</span> <span class="mi">21</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318212830673.png" alt="image-20220318212830673"></p>

    <ul>
      <li>
        <p><strong>intellij가  <code class="language-plaintext highlighter-rouge">list에 담아서 stream</code>하지말고 <code class="language-plaintext highlighter-rouge">Stream.of()</code>로 한번에 묶어라고 한다.</strong></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)</span>
      <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="nl">Card:</span><span class="o">:</span><span class="n">isAce</span><span class="o">);</span>
</code></pre></div>        </div>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318213047307.png" alt="image-20220318213047307"></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>ace는 비록 1이지만, 합계 계산시 <code class="language-plaintext highlighter-rouge">ace객체의 point를 11로 변경하지말</code>고 <code class="language-plaintext highlighter-rouge">21의 블랙잭 기준상수를  11로  낮추자</code>?</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318213518180.png" alt="image-20220318213518180"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                            <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">first</span><span class="o">.</span><span class="na">point</span><span class="o">()</span> <span class="o">+</span> <span class="n">second</span><span class="o">.</span><span class="na">point</span><span class="o">();</span>
     <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)</span>
         <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="nl">Card:</span><span class="o">:</span><span class="n">isAce</span><span class="o">);</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">hasAce</span> <span class="o">&amp;&amp;</span> <span class="n">sum</span> <span class="o">==</span> <span class="mi">11</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>

    <ul>
      <li>테스트는 통과하게 된다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318213542349.png" alt="image-20220318213542349"></p>
  </li>
</ol>

<h3 id="다양한class의-객체들-응답시-object로-응답-메서드가-많은-일을한다">
<a class="anchor" href="#%EB%8B%A4%EC%96%91%ED%95%9Cclass%EC%9D%98-%EA%B0%9D%EC%B2%B4%EB%93%A4-%EC%9D%91%EB%8B%B5%EC%8B%9C-object%EB%A1%9C-%EC%9D%91%EB%8B%B5-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EB%A7%8E%EC%9D%80-%EC%9D%BC%EC%9D%84%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>다양한class의 객체들 응답시 Object로 응답? 메서드가 많은 일을한다?</h3>

<ol>
  <li>Object응답</li>
  <li>
<strong>메서드가 너무 많은 일</strong>을 한다.
    <ol>
      <li><strong>같은형이라도, <code class="language-plaintext highlighter-rouge">도메인vs도메인 비교로직</code>이라면<code class="language-plaintext highlighter-rouge">일단 getter  서비스로직에 작성</code>하되 -&gt; <code class="language-plaintext highlighter-rouge">추후 도메인로직으로 넘긴다</code>.</strong></li>
      <li>하지만… 지금과 같은 <strong><code class="language-plaintext highlighter-rouge">일괄처리/내부변수단순집계-&gt; 묶어서 메세지보내서 일괄처리 한다.</code></strong>
</li>
    </ol>
  </li>
</ol>

<h4 id="09-메서드가-길어져서-너무-많은-일---도메인1개or같은도메인끼리-상수or단순연산집계---묶어서-메세지보내-일괄처리-or-내부변수-단순집계로-일괄처리한다">
<a class="anchor" href="#09-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EA%B8%B8%EC%96%B4%EC%A0%B8%EC%84%9C-%EB%84%88%EB%AC%B4-%EB%A7%8E%EC%9D%80-%EC%9D%BC---%EB%8F%84%EB%A9%94%EC%9D%B81%EA%B0%9Cor%EA%B0%99%EC%9D%80%EB%8F%84%EB%A9%94%EC%9D%B8%EB%81%BC%EB%A6%AC-%EC%83%81%EC%88%98or%EB%8B%A8%EC%88%9C%EC%97%B0%EC%82%B0%EC%A7%91%EA%B3%84---%EB%AC%B6%EC%96%B4%EC%84%9C-%EB%A9%94%EC%84%B8%EC%A7%80%EB%B3%B4%EB%82%B4-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC-or-%EB%82%B4%EB%B6%80%EB%B3%80%EC%88%98-%EB%8B%A8%EC%88%9C%EC%A7%91%EA%B3%84%EB%A1%9C-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>09 메서드가 길어져서 너무 많은 일 -&gt; <code class="language-plaintext highlighter-rouge">도메인1개or같은도메인끼리 상수or단순연산/집계</code> -&gt; 묶어서 <code class="language-plaintext highlighter-rouge">메세지보내 일괄처</code>리 or <code class="language-plaintext highlighter-rouge">내부변수 단순집계</code>로 일괄처리한다.</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">첫번째, 두번째 카드의 합계</code>는 같은 도메인이면서 단순집계다 -&gt; 묵어서 일괄처리가 가능하다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318214950281.png" alt="image-20220318214950281"></p>
  </li>
</ul>

<h5 id="같은-도메인이라면-listof나-streamof로-묶어서-일괄처리-or-단순집계가-가능하다">
<a class="anchor" href="#%EA%B0%99%EC%9D%80-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%B4%EB%9D%BC%EB%A9%B4-listof%EB%82%98-streamof%EB%A1%9C-%EB%AC%B6%EC%96%B4%EC%84%9C-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC-or-%EB%8B%A8%EC%88%9C%EC%A7%91%EA%B3%84%EA%B0%80-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>같은 도메인이라면 <code class="language-plaintext highlighter-rouge">List.of()</code>나 <code class="language-plaintext highlighter-rouge">Stream.of()</code>로 묶어서 일괄처리 or 단순집계가 가능하다.</h5>

<ol>
  <li>
    <p>같은 도메인이라면 <code class="language-plaintext highlighter-rouge">List.of()</code>나 <code class="language-plaintext highlighter-rouge">Stream.of()</code>로 묶어서 일괄처리 or 단순집계가 가능하다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318215109703.png" alt="image-20220318215109703">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318215443384.png" alt="image-20220318215443384"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                            <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)</span>
         <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">point</span><span class="o">())</span>
         <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
    
     <span class="c1">//final int sum = first.point() + second.point();</span>
    
     <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">)</span>
         <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="nl">Card:</span><span class="o">:</span><span class="n">isAce</span><span class="o">);</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">hasAce</span> <span class="o">&amp;&amp;</span> <span class="n">sum</span> <span class="o">==</span> <span class="mi">11</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="일괄처리내부변수단순집계가-2번이상-필요하면---listof---묶어놓고-개별-liststream-때린다">
<a class="anchor" href="#%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%EB%82%B4%EB%B6%80%EB%B3%80%EC%88%98%EB%8B%A8%EC%88%9C%EC%A7%91%EA%B3%84%EA%B0%80-2%EB%B2%88%EC%9D%B4%EC%83%81-%ED%95%84%EC%9A%94%ED%95%98%EB%A9%B4---listof---%EB%AC%B6%EC%96%B4%EB%86%93%EA%B3%A0-%EA%B0%9C%EB%B3%84-liststream-%EB%95%8C%EB%A6%B0%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">일괄처리/내부변수단순집계</code>가 2번이상 필요하면 -&gt; <code class="language-plaintext highlighter-rouge">List.of( , ,)</code> 묶어놓고 <code class="language-plaintext highlighter-rouge">개별 list.stream()</code> 때린다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318215718661.png" alt="image-20220318215718661"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">//1. 같은형의 [일괄처리/단순집계]가 2번이상 필요할 땐 -&gt; 무조건 List.of()로 일단 묶어 변수로 뺀다.</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">cards</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">);</span>

    <span class="c1">//        final int sum = Stream.of(first, second)</span>
    <span class="c1">// 일괄처리1: 내부변수 단순집계</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">point</span><span class="o">())</span>
        <span class="o">.</span><span class="na">sum</span><span class="o">();</span>

    <span class="c1">//        final boolean hasAce = Stream.of(first, second)</span>
    <span class="c1">// 일괄처리2: 일괄처리로 메세지보내기</span>
    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="nl">Card:</span><span class="o">:</span><span class="n">isAce</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">hasAce</span> <span class="o">&amp;&amp;</span> <span class="n">sum</span> <span class="o">==</span> <span class="mi">11</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="서비스로직내-도메인로직의-class로-추출">
<a class="anchor" href="#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A1%9C%EC%A7%81%EB%82%B4-%EB%8F%84%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9D%98-class%EB%A1%9C-%EC%B6%94%EC%B6%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>서비스로직내 도메인로직의 class로 추출</h3>

<h4 id="10-서비스-로직-내-같은형-객체-2개이상의--일괄처리-로직---일급컬렉션으로-추출">
<a class="anchor" href="#10-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EC%A7%81-%EB%82%B4-%EA%B0%99%EC%9D%80%ED%98%95-%EA%B0%9D%EC%B2%B4-2%EA%B0%9C%EC%9D%B4%EC%83%81%EC%9D%98--%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC-%EB%A1%9C%EC%A7%81---%EC%9D%BC%EA%B8%89%EC%BB%AC%EB%A0%89%EC%85%98%EC%9C%BC%EB%A1%9C-%EC%B6%94%EC%B6%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>10 서비스 로직 내 <code class="language-plaintext highlighter-rouge">같은형 객체 2개이상의  일괄처리 로직</code> -&gt; 일급컬렉션으로 추출</h4>

<h5 id="객체일괄처리를-위해-뽑아낸-listof---객체list---일괄처리가-메서드로-가는-일급컬렉션-추출과정이-된다">
<a class="anchor" href="#%EA%B0%9D%EC%B2%B4%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%EB%A5%BC-%EC%9C%84%ED%95%B4-%EB%BD%91%EC%95%84%EB%82%B8-listof---%EA%B0%9D%EC%B2%B4list---%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%EA%B0%80-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EA%B0%80%EB%8A%94-%EC%9D%BC%EA%B8%89%EC%BB%AC%EB%A0%89%EC%85%98-%EC%B6%94%EC%B6%9C%EA%B3%BC%EC%A0%95%EC%9D%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>객체일괄처리를 위해 뽑아낸 List.of() -&gt; 객체List -&gt; 일괄처리가 메서드로 가는 일급컬렉션 추출과정이 된다.</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// 1) 도메인vs도메인 비교로직 후 새 결과값(생성자) 포장(class)후</span>
    <span class="c1">// -&gt; 그것의 추가 로직(메서드)이 아니더라도</span>

    <span class="c1">// 2)  같은도메인 객체 2개이상의 묶어서 일괄처리(메세지보내 일괄처리 or 내부변수 변환후 단순집계)도</span>
    <span class="c1">// -&gt; 일괄처리하려면 List&lt;객체&gt;를 뽑아내야하고 (상태값, 인스턴스변수)</span>
    <span class="c1">// -&gt; 일괄처리로직이 도메인로직(메서드)가 되어서</span>
    <span class="c1">// -&gt; 포장하는 일급컬렉션을 만들어낸다.</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">cards</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">);</span>

    <span class="kd">final</span> <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">point</span><span class="o">())</span>
        <span class="o">.</span><span class="na">sum</span><span class="o">();</span>

    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">hasAce</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="nl">Card:</span><span class="o">:</span><span class="n">isAce</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">hasAce</span> <span class="o">&amp;&amp;</span> <span class="n">sum</span> <span class="o">==</span> <span class="mi">11</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><strong>sum하는 부분/ hasAce로 뽑아내는 부분 -&gt; 일괄처리로 간주했지만 <code class="language-plaintext highlighter-rouge">어떠한 역할</code>이며 <code class="language-plaintext highlighter-rouge">도메인 class</code>를 만들어 위임해야한다.</strong></li>
</ul>

<h5 id="서비스-메서드-내에서-발견된-역할과-객체list----메서드-로직-내에서-일급컬렉션-추출해보기">
<a class="anchor" href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4%EC%97%90%EC%84%9C-%EB%B0%9C%EA%B2%AC%EB%90%9C-%EC%97%AD%ED%95%A0%EA%B3%BC-%EA%B0%9D%EC%B2%B4list----%EB%A9%94%EC%84%9C%EB%93%9C-%EB%A1%9C%EC%A7%81-%EB%82%B4%EC%97%90%EC%84%9C-%EC%9D%BC%EA%B8%89%EC%BB%AC%EB%A0%89%EC%85%98-%EC%B6%94%EC%B6%9C%ED%95%B4%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">서비스 메서드 내에서 발견된 역할과 객체List</code> -&gt;  <code class="language-plaintext highlighter-rouge">메서드 로직 내에서 일급컬렉션 추출</code>해보기</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">서비스 메서드 내</code>지만, <strong><code class="language-plaintext highlighter-rouge">기존 List생성 코드라인을 복붙</code>후 재료로서 사용해서 빨간줄 컬렉을 만든다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318221457532.png" alt="image-20220318221457532">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318221544994.png" alt="image-20220318221544994"></p>

    <ul>
      <li>완성되면 <code class="language-plaintext highlighter-rouge">객체list는 삭제</code>해준다.</li>
    </ul>
  </li>
</ol>

<h5 id="포장전-내부까는-코드였다면-포장전-복붙-or-복사해놓은-상태로-최종메서드만-남기고---내부처리코드를-잘라내-들고들어가---list자리에---내부포장되어있던-value만-바꿔넣어준다">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EC%A0%84-%EB%82%B4%EB%B6%80%EA%B9%8C%EB%8A%94-%EC%BD%94%EB%93%9C%EC%98%80%EB%8B%A4%EB%A9%B4-%ED%8F%AC%EC%9E%A5%EC%A0%84-%EB%B3%B5%EB%B6%99-or-%EB%B3%B5%EC%82%AC%ED%95%B4%EB%86%93%EC%9D%80-%EC%83%81%ED%83%9C%EB%A1%9C-%EC%B5%9C%EC%A2%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%A7%8C-%EB%82%A8%EA%B8%B0%EA%B3%A0---%EB%82%B4%EB%B6%80%EC%B2%98%EB%A6%AC%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%98%EB%9D%BC%EB%82%B4-%EB%93%A4%EA%B3%A0%EB%93%A4%EC%96%B4%EA%B0%80---list%EC%9E%90%EB%A6%AC%EC%97%90---%EB%82%B4%EB%B6%80%ED%8F%AC%EC%9E%A5%EB%90%98%EC%96%B4%EC%9E%88%EB%8D%98-value%EB%A7%8C-%EB%B0%94%EA%BF%94%EB%84%A3%EC%96%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장전 내부까는 코드였다면, <code class="language-plaintext highlighter-rouge">포장전 복붙 or 복사해놓은 상태로</code> 최종메서드만 남기고 -&gt; 내부처리코드를 <code class="language-plaintext highlighter-rouge">잘라내 들고들어가</code> -&gt; <code class="language-plaintext highlighter-rouge">list자리에 -&gt; 내부포장되어있던 value</code>만 바꿔넣어준다.</h5>

<ol>
  <li>
    <p>객체list삭제로 인한 <strong>list.stream()에서의 list부분에 빨간줄</strong>처리해준다.</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">비교메서드</code>가 빨간줄이었다면, <code class="language-plaintext highlighter-rouge">그대로 일급내부에서 생성</code>해도 됬찌만</strong></p>
      </li>
      <li>
        <p><strong>getter/stream 등이 <code class="language-plaintext highlighter-rouge">내부를 까는 메서드</code>가 빨간줄이라면 <code class="language-plaintext highlighter-rouge">복사후 지우면서 -&gt; 최종메서드 남겨 메세지 던지고 -&gt; 내부처리 코드를 들어가 내부처리한다.</code></strong></p>

        <ul>
          <li>
            <p>기존<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318221622576.png" alt="image-20220318221622576"></p>
          </li>
          <li>
            <p>일급적용: 복사해놓고, 위에 올려놓고, 내부까는코드는 지우고, <strong>최종만 남겨 메세지보낸다.</strong></p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318221959211.png" alt="image-20220318221959211"></p>
          </li>
          <li>
            <p>일급적용: <strong>최종 메세지 메서드</strong>를 만들면서, <strong>내부처리코드를 잘라내서 들고들어가자.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222123398.png" alt="image-20220318222123398"></p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222134814.png" alt="image-20220318222134814"></p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222145315.png" alt="image-20220318222145315"></p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222159850.png" alt="image-20220318222159850"></p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222315996.png" alt="image-20220318222315996"></p>
          </li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Cards</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Cards</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
    
     <span class="kd">public</span> <span class="kt">int</span> <span class="nf">sum</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
             <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">point</span><span class="o">())</span>
             <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>마찬가지로 hasAce로직도</p>

    <ul>
      <li>
        <p><strong>복사 -&gt; 내부처리코드 삭제 -&gt; 최종만 남기고 -&gt; 내부로 잘라내서 복사 -&gt; <code class="language-plaintext highlighter-rouge">list자리에 일급컬렉내부value(list)로 바꿔주기</code></strong></p>
      </li>
      <li>
        <p>기존
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222532313.png" alt="image-20220318222532313"></p>
      </li>
      <li>
        <p>처리</p>

        <ul>
          <li>최종메서드명이 따로 없다면 <strong>뽑아놓은 변수명(<code class="language-plaintext highlighter-rouge">hasAce</code>)나 <code class="language-plaintext highlighter-rouge">최종 체인된 메서드(anyMatch + isAce)</code>로 <code class="language-plaintext highlighter-rouge">유추한 메서드로 메세지보</code>낸다.</strong>
</li>
        </ul>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222700866.png" alt="image-20220318222700866"></p>

        <ul>
          <li>
            <p>내부로 들고들어갈 코드복사된 상태로-&gt; 최종메서드로 이름바꿔주기</p>

            <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222825288.png" alt="image-20220318222825288">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222846589.png" alt="image-20220318222846589"></p>
          </li>
          <li>
            <p>코드 복붙후 <code class="language-plaintext highlighter-rouge">list 자리에 포장변수value</code> +  return 등 처리해주기
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222905820.png" alt="image-20220318222905820">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222929855.png" alt="image-20220318222929855">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318222948715.png" alt="image-20220318222948715"></p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h5 id="1번만-쓰인다면-지역변수-제거하고-inline화">
<a class="anchor" href="#1%EB%B2%88%EB%A7%8C-%EC%93%B0%EC%9D%B8%EB%8B%A4%EB%A9%B4-%EC%A7%80%EC%97%AD%EB%B3%80%EC%88%98-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B3%A0-inline%ED%99%94" aria-hidden="true"><span class="octicon octicon-link"></span></a>1번만 쓰인다면 지역변수 제거하고 inline화</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223051734.png" alt="image-20220318223051734">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223105901.png" alt="image-20220318223105901"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">cards</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cards</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">));</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">cards</span><span class="o">.</span><span class="na">hasAce</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">cards</span><span class="o">.</span><span class="na">sum</span><span class="o">()</span> <span class="o">==</span> <span class="mi">11</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="참고-너무빠른-리팩토링이지만-if문이-하나의-도메인에-대한-여러-boolean문장이면-메세지를-넘길-수-있다-메서드추출이랑-다름">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EB%84%88%EB%AC%B4%EB%B9%A0%EB%A5%B8-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EC%9D%B4%EC%A7%80%EB%A7%8C-if%EB%AC%B8%EC%9D%B4-%ED%95%98%EB%82%98%EC%9D%98-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%97%AC%EB%9F%AC-boolean%EB%AC%B8%EC%9E%A5%EC%9D%B4%EB%A9%B4-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EB%84%98%EA%B8%B8-%EC%88%98-%EC%9E%88%EB%8B%A4-%EB%A9%94%EC%84%9C%EB%93%9C%EC%B6%94%EC%B6%9C%EC%9D%B4%EB%9E%91-%EB%8B%A4%EB%A6%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 너무빠른 리팩토링이지만, if문이 <code class="language-plaintext highlighter-rouge">하나의 도메인</code>에 대한 여러 boolean문장이면, 메세지를 넘길 수 있다. (메서드추출이랑 다름)</h5>

<ul>
  <li>
    <p>두 boolean문장이 cards에 관한 것이므로 -&gt; cards에 메세지를 던질 수 있다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223320994.png" alt="image-20220318223320994"></p>
  </li>
  <li>
    <p>메서드추출을 한다면? -&gt; <strong><code class="language-plaintext highlighter-rouge">한 도메인에 대한 것임을 고려하지 못한 체</code> 해당 로직class내에서 추출한다. -&gt; 메세지를 던지지 못한다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223428131.png" alt="image-20220318223428131"></p>
  </li>
</ul>

<h5 id="참고-연결-메세지를-던지려면-내부처리로직-코드복사후---최종메서드로-던지기---밖에서-list가-아니라-일급그대로를-썼던-코드는-내부에서-바로-메서드형태로-내부메서드를-이용하면-된다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%97%B0%EA%B2%B0-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EB%8D%98%EC%A7%80%EB%A0%A4%EB%A9%B4-%EB%82%B4%EB%B6%80%EC%B2%98%EB%A6%AC%EB%A1%9C%EC%A7%81-%EC%BD%94%EB%93%9C%EB%B3%B5%EC%82%AC%ED%9B%84---%EC%B5%9C%EC%A2%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EB%8D%98%EC%A7%80%EA%B8%B0---%EB%B0%96%EC%97%90%EC%84%9C-list%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-%EC%9D%BC%EA%B8%89%EA%B7%B8%EB%8C%80%EB%A1%9C%EB%A5%BC-%EC%8D%BC%EB%8D%98-%EC%BD%94%EB%93%9C%EB%8A%94-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EB%B0%94%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%95%ED%83%9C%EB%A1%9C-%EB%82%B4%EB%B6%80%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%A9%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고-연결) 메세지를 던지려면, <code class="language-plaintext highlighter-rouge">내부처리로직 코드복사후 -&gt; 최종메서드로 던지기</code> -&gt; 밖에서 list가 아니라 일급그대로를 썼던 코드는? 내부에서 바로 <code class="language-plaintext highlighter-rouge">메서드()</code>형태로 내부메서드를 이용하면 된다.</h5>

<ul>
  <li>
    <p>여기서 최종메서드로 메세지 던지는 이름은 <code class="language-plaintext highlighter-rouge">is</code> + <code class="language-plaintext highlighter-rouge">Blackjack()</code>으로 한다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223558182.png" alt="image-20220318223558182"></p>

    <ul>
      <li>
        <p>복사후, 바꿔주고 -&gt; 내부로 들고들어가 -&gt; <strong>변수명만 처리해주면 되는데, <code class="language-plaintext highlighter-rouge">포장된 일급을 쓰던 코드</code>를 메세지보냈다. -&gt; 일급변수명 빼고 내부에 존재하는 메서드를 <code class="language-plaintext highlighter-rouge">메서드()</code>로 호출만 해주면 -&gt; <code class="language-plaintext highlighter-rouge">내부의 this.value를 이용한 메서드</code>를  알아서 호출해서 쓴다.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318223726992.png" alt="image-20220318223726992"></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224006121.png" alt="image-20220318224006121">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224014942.png" alt="image-20220318224014942"></p>
      </li>
      <li>
        <p><strong>move staetment up/down <code class="language-plaintext highlighter-rouge">변수없이 호출되는 내부메서드</code>들보다 위쪽으로 올려준다.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224127252.png" alt="image-20220318224127252"></p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="메서드의-응답을-object---응답되는-객체들을-뽑아내서-추상화or상위type-생성으로-카테고라이징">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%9D%91%EB%8B%B5%EC%9D%84-object---%EC%9D%91%EB%8B%B5%EB%90%98%EB%8A%94-%EA%B0%9D%EC%B2%B4%EB%93%A4%EC%9D%84-%EB%BD%91%EC%95%84%EB%82%B4%EC%84%9C-%EC%B6%94%EC%83%81%ED%99%94or%EC%83%81%EC%9C%84type-%EC%83%9D%EC%84%B1%EC%9C%BC%EB%A1%9C-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%9D%BC%EC%9D%B4%EC%A7%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드의 응답을 Object -&gt; 응답되는 객체들을 뽑아내서 <code class="language-plaintext highlighter-rouge">추상화</code>or<code class="language-plaintext highlighter-rouge">상위Type 생성으로 카테고라이징</code>
</h3>

<h4 id="11-서로-변하는-blackjack-상태-hit상태들을-상위타입으로-뽑아내기---일단-상위카테고리는-인터페이스로-뽑아낸다">
<a class="anchor" href="#11-%EC%84%9C%EB%A1%9C-%EB%B3%80%ED%95%98%EB%8A%94-blackjack-%EC%83%81%ED%83%9C-hit%EC%83%81%ED%83%9C%EB%93%A4%EC%9D%84-%EC%83%81%EC%9C%84%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EB%BD%91%EC%95%84%EB%82%B4%EA%B8%B0---%EC%9D%BC%EB%8B%A8-%EC%83%81%EC%9C%84%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC%EB%8A%94-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-%EB%BD%91%EC%95%84%EB%82%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>11 서로 변하는 Blackjack 상태, Hit상태들을 상위타입으로 뽑아내기 -&gt; 일단 상위카테고리는 <code class="language-plaintext highlighter-rouge">인터페이스</code>로 뽑아낸다.</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224419960.png" alt="image-20220318224419960"></p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">State</code>인터페이스를 만든다.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224516912.png" alt="image-20220318224516912"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">State</span> <span class="o">{</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>다형성으로서 응답값을 상카인 interface로 응답해준다</strong>
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224916162.png" alt="image-20220318224916162">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318224930931.png" alt="image-20220318224930931"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">State</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">first</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">Card</span> <span class="n">second</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">cards</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cards</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">second</span><span class="o">));</span>
    
     <span class="k">if</span> <span class="o">(</span><span class="n">cards</span><span class="o">.</span><span class="na">isBlackjack</span><span class="o">())</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Blackjack</span><span class="o">();</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="참고-상카로-카테고라이징하려고-인터페이스를-만들었다면-----하위카테고리-구현체들이-impl-전에-응답값-변수파라미터-등의-길목-선언부-먼저-인터페이스로-바꿔주자---거기로-향하는-예비-구현체들이-빨간줄---쉽게--자동-impl된다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%83%81%EC%B9%B4%EB%A1%9C-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%9D%BC%EC%9D%B4%EC%A7%95%ED%95%98%EB%A0%A4%EA%B3%A0-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%97%88%EB%8B%A4%EB%A9%B4-----%ED%95%98%EC%9C%84%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%93%A4%EC%9D%B4-impl-%EC%A0%84%EC%97%90-%EC%9D%91%EB%8B%B5%EA%B0%92-%EB%B3%80%EC%88%98%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%93%B1%EC%9D%98-%EA%B8%B8%EB%AA%A9-%EC%84%A0%EC%96%B8%EB%B6%80-%EB%A8%BC%EC%A0%80-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%A3%BC%EC%9E%90---%EA%B1%B0%EA%B8%B0%EB%A1%9C-%ED%96%A5%ED%95%98%EB%8A%94-%EC%98%88%EB%B9%84-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%93%A4%EC%9D%B4-%EB%B9%A8%EA%B0%84%EC%A4%84---%EC%89%BD%EA%B2%8C--%EC%9E%90%EB%8F%99-impl%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) <code class="language-plaintext highlighter-rouge">상카로 카테고라이징하려고 인터페이스</code>를 만들었다면 -&gt;   <code class="language-plaintext highlighter-rouge">하위카테고리 구현체들이 impl 전</code>에 응답값/ 변수/파라미터 등의 길목 선언부 먼저 인터페이스로 바꿔주자 -&gt; <code class="language-plaintext highlighter-rouge">거기로 향하는 예비 구현체들이 빨간줄 -&gt; 쉽게 + 자동 impl</code>된다</h5>

<ul>
  <li>
    <p><strong>길목(변수,파라미터,응답값의 선언부)<code class="language-plaintext highlighter-rouge">응답값을 인터페이스</code>로 먼저 바꿔줬더니, 응답될 예비구현체들이 구현되려고 빨간줄이 뜬다.</strong><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318225141060.png" alt="image-20220318225141060"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318225328352.png" alt="image-20220318225328352"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318225446165.png" alt="image-20220318225446165"></p>
  </li>
</ul>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">묶여서 카테고라이징</code> 되는 놈들은 인터페이스를 모두 구현한다</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Hit</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
 <span class="o">}</span>
    
 <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Blackjack</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="메서드의-응답값을-바꿔줬다면---까먹지-말고-밖에서-받아주는-변수도-object에서---다형성-상카-인터페이스로--변수명도-인터페이스명으로--바꿔주자">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9D%84-%EB%B0%94%EA%BF%94%EC%A4%AC%EB%8B%A4%EB%A9%B4---%EA%B9%8C%EB%A8%B9%EC%A7%80-%EB%A7%90%EA%B3%A0-%EB%B0%96%EC%97%90%EC%84%9C-%EB%B0%9B%EC%95%84%EC%A3%BC%EB%8A%94-%EB%B3%80%EC%88%98%EB%8F%84-object%EC%97%90%EC%84%9C---%EB%8B%A4%ED%98%95%EC%84%B1-%EC%83%81%EC%B9%B4-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C--%EB%B3%80%EC%88%98%EB%AA%85%EB%8F%84-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%AA%85%EC%9C%BC%EB%A1%9C--%EB%B0%94%EA%BF%94%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드의 응답값을 바꿔줬다면 -&gt; 까먹지 말고 <code class="language-plaintext highlighter-rouge">밖에서 받아주는 변수</code>도 <code class="language-plaintext highlighter-rouge">Object에서 -&gt; 다형성-상카-인터페이스</code>로 + <code class="language-plaintext highlighter-rouge">변수명도 인터페이스명</code>으로  바꿔주자</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318225618247.png" alt="image-20220318225618247"></p>

<ul>
  <li>테스트코드라면 단순하게 <strong>현재파일에서 <code class="language-plaintext highlighter-rouge">Ctrl+H</code>로 찾아서 <code class="language-plaintext highlighter-rouge">replace ALL</code>해주면 된다.</strong>
    <ul>
      <li>찾은 갯수만 잘 확인해서 바꿔주자.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318230004779.png" alt="image-20220318230004779">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318230152638.png" alt="image-20220318230152638">
</li>
    </ul>
  </li>
  <li>
    <p><strong>변수명도 바꿔주자.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318234206968.png" alt="image-20220318234206968">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318234232296.png" alt="image-20220318234232296"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameTest</span> <span class="o">{</span>
    
      <span class="nd">@Test</span>
      <span class="kt">void</span> <span class="nf">hit</span><span class="o">()</span> <span class="o">{</span>
          <span class="c1">// given &amp; when : hit</span>
          <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                                         <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
          <span class="c1">// then</span>
          <span class="n">assertThat</span><span class="o">(</span><span class="n">state</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Hit</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="o">}</span>
    
      <span class="nd">@Test</span>
      <span class="kt">void</span> <span class="nf">blackjack</span><span class="o">()</span> <span class="o">{</span>
          <span class="c1">// given &amp; when : blackjack</span>
          <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                         <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
          <span class="c1">// then</span>
          <span class="n">assertThat</span><span class="o">(</span><span class="n">state</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Blackjack</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="중요1-왜-추클이-아니라-인터페이스로-상카뽑아-카테고라이징">
<a class="anchor" href="#%EC%A4%91%EC%9A%941-%EC%99%9C-%EC%B6%94%ED%81%B4%EC%9D%B4-%EC%95%84%EB%8B%88%EB%9D%BC-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-%EC%83%81%EC%B9%B4%EB%BD%91%EC%95%84-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%9D%BC%EC%9D%B4%EC%A7%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요1) 왜? 추클이 아니라 인터페이스?로 상카뽑아 카테고라이징)</h4>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">어떤 메서드 or 변수들이 추상화</code> or <code class="language-plaintext highlighter-rouge">공통메서드</code>로 뽑힐지 모르며. <code class="language-plaintext highlighter-rouge">카테고라이징</code>이 목적이다</strong>
    <ul>
      <li>
<strong>상카뽑는 목적이면 <code class="language-plaintext highlighter-rouge">인터페이스</code>부터 뽑는다</strong>. <code class="language-plaintext highlighter-rouge">추클</code>로 바뀔 수도 있다.</li>
    </ul>
  </li>
</ul>

<h4 id="중요2-제한된-수의-상태값들인데--왜-enum이-아니라-클래스-객체로-상태-응답">
<a class="anchor" href="#%EC%A4%91%EC%9A%942-%EC%A0%9C%ED%95%9C%EB%90%9C-%EC%88%98%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%92%EB%93%A4%EC%9D%B8%EB%8D%B0--%EC%99%9C-enum%EC%9D%B4-%EC%95%84%EB%8B%88%EB%9D%BC-%ED%81%B4%EB%9E%98%EC%8A%A4-%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%83%81%ED%83%9C-%EC%9D%91%EB%8B%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요2) 제한된 수의 상태값들인데,  왜 Enum이 아니라 클래스 객체로 상태 응답?</h4>

<ul>
  <li>
    <p>hit과 blackjack사이에 <code class="language-plaintext highlighter-rouge">서로 연결되어 &lt;메서드호출로 인해&gt; 서로 바뀔 수 있는 묶인 상태들</code>이다. -&gt; **<code class="language-plaintext highlighter-rouge">서로 바뀌더라도 인페구현의 다형성으로 들어가 [상태를 바꿔주는 같은 이름의 메서드]를 계속 호출할 수 있는 상태값</code>으로  <code class="language-plaintext highlighter-rouge">상태 패턴 객체</code>를 선택할 수 밖에 없다. **</p>
  </li>
  <li>
    <p><strong>추가로 enum도 가능한 <code class="language-plaintext highlighter-rouge">형태 뿐만 아니라  다음 상태로 바뀌기 위한 판단</code>을 위해  <code class="language-plaintext highlighter-rouge">내부에 인변=상태로 가지고 있어야한다</code>.</strong></p>
    <ul>
      <li>이넘은 상태값을 가지면서 공유할 수 없다.</li>
      <li>TDD의 D는 디자인이 아니다 -&gt; 미리 설계되어있고 development만 한다.</li>
    </ul>
  </li>
</ul>

<h5 id="참고-상속추상화카테고리-작업후엔-클래스-다이어그램-보기">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%83%81%EC%86%8D%EC%B6%94%EC%83%81%ED%99%94%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EC%9E%91%EC%97%85%ED%9B%84%EC%97%94-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8-%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 상속/추상화/카테고리 작업후엔 클래스 다이어그램 보기</h5>

<ul>
  <li>
    <p><strong>프로덕션을 봐야한다. -&gt; 프로덕션의 패키지폴더를 클릭한 상태로 <code class="language-plaintext highlighter-rouge">단축키 ctrl+alt+shift +  U</code></strong> + <strong><code class="language-plaintext highlighter-rouge">edge create mode</code>는 기본적으로 켜두자</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318231631297.png" alt="image-20220318231631297">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318231641974.png" alt="image-20220318231641974">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318231847153.png" alt="image-20220318231847153"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318231824388.png" alt="image-20220318231824388"></p>
  </li>
</ul>

<h3 id="다음-상태로-이어가기---기본-2장받고-가능한-상태hit-or-blackjack---다음엔---둘-중에-더-만만한-것에서부터상태-변화를-이어나간다">
<a class="anchor" href="#%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C%EB%A1%9C-%EC%9D%B4%EC%96%B4%EA%B0%80%EA%B8%B0---%EA%B8%B0%EB%B3%B8-2%EC%9E%A5%EB%B0%9B%EA%B3%A0-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%83%81%ED%83%9Chit-or-blackjack---%EB%8B%A4%EC%9D%8C%EC%97%94---%EB%91%98-%EC%A4%91%EC%97%90-%EB%8D%94-%EB%A7%8C%EB%A7%8C%ED%95%9C-%EA%B2%83%EC%97%90%EC%84%9C%EB%B6%80%ED%84%B0%EC%83%81%ED%83%9C-%EB%B3%80%ED%99%94%EB%A5%BC-%EC%9D%B4%EC%96%B4%EB%82%98%EA%B0%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>다음 상태로 이어가기 -&gt; <code class="language-plaintext highlighter-rouge">기본 2장받고 가능한 상태:Hit or Blackjack</code> -&gt; 다음엔?? -&gt; <code class="language-plaintext highlighter-rouge">둘 중에 더 만만한 것에서부터</code>상태 변화를 이어나간다.</h3>

<h4 id="12-hit-과-blackjack--두-상태-중-blackjack은-다음이-게임종료라-구현이-더-쉽우니-blackjack에서-이어나간다">
<a class="anchor" href="#12-hit-%EA%B3%BC-blackjack--%EB%91%90-%EC%83%81%ED%83%9C-%EC%A4%91-blackjack%EC%9D%80-%EB%8B%A4%EC%9D%8C%EC%9D%B4-%EA%B2%8C%EC%9E%84%EC%A2%85%EB%A3%8C%EB%9D%BC-%EA%B5%AC%ED%98%84%EC%9D%B4-%EB%8D%94-%EC%89%BD%EC%9A%B0%EB%8B%88-blackjack%EC%97%90%EC%84%9C-%EC%9D%B4%EC%96%B4%EB%82%98%EA%B0%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>12 hit 과 blackjack  두 상태 중 blackjack은 다음이 게임종료라 구현이 더 쉽우니 blackjack에서 이어나간다.</h4>

<h5 id="특정상태에서-이어나가는-테스트메소드의-작성">
<a class="anchor" href="#%ED%8A%B9%EC%A0%95%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%9D%B4%EC%96%B4%EB%82%98%EA%B0%80%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A9%94%EC%86%8C%EB%93%9C%EC%9D%98-%EC%9E%91%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>특정상태에서 이어나가는 테스트메소드의 작성</h5>

<ol>
  <li>
    <p><strong>직전까지 작성된 <code class="language-plaintext highlighter-rouge">blackjack이 된 상태</code>응답 테스트코드를 <code class="language-plaintext highlighter-rouge">그대로 복붙한다</code></strong> -&gt; <strong>테메이름에 <code class="language-plaintext highlighter-rouge">현재상태 + 이어질 작업</code>을 더해준다.</strong>
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318232657059.png" alt="image-20220318232657059"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given : blackjack -&gt; 더이상 게임을 할 수 없다. (hit에서 이어지는 것보다 쉽다)</span>
     <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                        <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="예외발생이-정답인-메서드호출---메서드-호출시-끝남--메서드호출시-예외---생성자처럼-assertthrows-문에서-해당예외-명시하며--호출하며-테스트">
<a class="anchor" href="#%EC%98%88%EC%99%B8%EB%B0%9C%EC%83%9D%EC%9D%B4-%EC%A0%95%EB%8B%B5%EC%9D%B8-%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C---%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%EC%8B%9C-%EB%81%9D%EB%82%A8--%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C%EC%8B%9C-%EC%98%88%EC%99%B8---%EC%83%9D%EC%84%B1%EC%9E%90%EC%B2%98%EB%9F%BC-assertthrows-%EB%AC%B8%EC%97%90%EC%84%9C-%ED%95%B4%EB%8B%B9%EC%98%88%EC%99%B8-%EB%AA%85%EC%8B%9C%ED%95%98%EB%A9%B0--%ED%98%B8%EC%B6%9C%ED%95%98%EB%A9%B0-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">예외발생이 정답인 메서드호출</code> -&gt; 메서드 호출시 끝남 = 메서드호출시 예외 -&gt; <code class="language-plaintext highlighter-rouge">생성자처럼 assertThrows() 문에서 해당예외 명시하며 + 호출</code>하며 테스트</h5>

<ol>
  <li>
    <p>**blackjack에서 카드받는다고 하면 -&gt; <code class="language-plaintext highlighter-rouge">호출시  예외발생으로 작업이 끝나야</code>하므로 **생성자처럼 <code class="language-plaintext highlighter-rouge">예외발생이 정답인 호출</code>이 된다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// given : blackjack -&gt; 더이상 게임을 할 수 없다. (hit에서 이어지는 것보다 쉽다)</span>
    <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                   <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
    <span class="c1">// 1. blackjack은 끝난 상태로 -&gt; [상호 상태 변화 전략메서드()] 호출시 예외가 발생하도록 짜야한다.</span>
    <span class="c1">// -&gt; blackjack상태에서 .상호상태변화 전략메서드()호출시 -&gt; 문제가 생겨야한다.</span>
    <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>생각해보니, <strong>상태변화에는 <code class="language-plaintext highlighter-rouge">카드1장 받기의 재료(인자)</code>가 필요하다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given : blackjack -&gt; 더이상 게임을 할 수 없다. (hit에서 이어지는 것보다 쉽다)</span>
     <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                    <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
     <span class="c1">// 1. blackjack상태에서 .상호상태변화 전략메서드()호출시 -&gt; 문제가 생겨야한다.</span>
     <span class="c1">// 2. 상태변화에는 card1장이 필요하다.</span>
     <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">));</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">예외발생이 정답인 호출</code>이라면, <code class="language-plaintext highlighter-rouge">assert문 내부에서 예외명시하며 호출</code>한다</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given : blackjack -&gt; 더이상 게임을 할 수 없다. (hit에서 이어지는 것보다 쉽다)</span>
     <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                    <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
     <span class="c1">// 1. blackjack상태에서 .상호상태변화 전략메서드()호출시 -&gt; 문제가 생겨야한다.</span>
     <span class="c1">// 2. 상태변화에는 card1장이 필요하다.</span>
     <span class="c1">//state.draw(Card.of(Suit.SPADES, Denomination.TEN));</span>
    
     <span class="c1">// 3. 예외발생이 통과인 호출 -&gt; assert문 내부에서 예외명시하며 호출</span>
     <span class="n">assertThrows</span><span class="o">(</span><span class="nc">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                  <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">)));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="특정-구현체끝-상태에서-상태변화의-전략메서드-호출인지--아니면-단독메서드-호출인지-고민해보기">
<a class="anchor" href="#%ED%8A%B9%EC%A0%95-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%81%9D-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%83%81%ED%83%9C%EB%B3%80%ED%99%94%EC%9D%98-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%EC%9D%B8%EC%A7%80--%EC%95%84%EB%8B%88%EB%A9%B4-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%EC%9D%B8%EC%A7%80-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>특정 구현체[끝 상태]에서 [상태변화의 전략메서드] 호출인지 / 아니면 단독메서드 호출인지 고민해보기</h3>

<h4 id="13-게임끝의-상태에서-더-진행하는-상태변화-메서드-호출시-에러발생인데-blackjack상태에서도-재료인자-card1장를-받는-공통-전략메서드를-부를-수-있나">
<a class="anchor" href="#13-%EA%B2%8C%EC%9E%84%EB%81%9D%EC%9D%98-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EB%8D%94-%EC%A7%84%ED%96%89%ED%95%98%EB%8A%94-%EC%83%81%ED%83%9C%EB%B3%80%ED%99%94-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%EC%8B%9C-%EC%97%90%EB%9F%AC%EB%B0%9C%EC%83%9D%EC%9D%B8%EB%8D%B0-blackjack%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C%EB%8F%84-%EC%9E%AC%EB%A3%8C%EC%9D%B8%EC%9E%90-card1%EC%9E%A5%EB%A5%BC-%EB%B0%9B%EB%8A%94-%EA%B3%B5%ED%86%B5-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EB%B6%80%EB%A5%BC-%EC%88%98-%EC%9E%88%EB%82%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>13 게임끝의 상태에서 더 진행하는 상태변화 메서드 호출시 에러발생인데, blackjack상태에서도 재료(인자, card1장)를 받는 공통 전략메서드를 부를 수 있나?</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318235424442.png" alt="image-20220318235424442"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// given : blackjack -&gt; 더이상 게임을 할 수 없다. (hit에서 이어지는 것보다 쉽다)</span>
    <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                   <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>

    <span class="c1">// 1. blackjack상태에서 .상호상태변화 전략메서드()호출시 -&gt; 문제가 생겨야한다.</span>
    <span class="c1">// 2. 상태변화에는 card1장이 필요하다.</span>
    <span class="c1">// 4. 근데, blackjack은 끝난 상태인데 게임상 재료로서 들어올 수 있나??? (읹</span>
    <span class="c1">//state.draw(Card.of(Suit.SPADES, Denomination.TEN));</span>

    <span class="c1">// 3. 예외발생이 통과인 호출 -&gt; assert문 내부에서 예외명시하며 호출</span>
<span class="o">}</span>
</code></pre></div></div>

<h5 id="만약-공통전략메서드가-아니라-특정-구현체만-가능한-단독-메서드라면">
<a class="anchor" href="#%EB%A7%8C%EC%95%BD-%EA%B3%B5%ED%86%B5%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-%ED%8A%B9%EC%A0%95-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A7%8C-%EA%B0%80%EB%8A%A5%ED%95%9C-%EB%8B%A8%EB%8F%85-%EB%A9%94%EC%84%9C%EB%93%9C%EB%9D%BC%EB%A9%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>만약, 공통전략메서드가 아니라 <code class="language-plaintext highlighter-rouge">특정 구현체만 가능한 단독 메서드</code>라면</h5>

<ul>
  <li>
    <p>만약, blackajck에서 가능한지? 가 아니라</p>
  </li>
  <li>
    <p><strong>하위카테고리 중 1개</strong>인  blackjack에서<strong>만  가능하다</strong>면</p>

    <ul>
      <li>억지로 쓴다면 <strong><code class="language-plaintext highlighter-rouge">(특정카테고리)</code>다운 캐스팅후 써야한다</strong>.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220318235657518.png" alt="image-20220318235657518"></p>
  </li>
</ul>

<h4 id="중요3-상카추상체가-잡힌이후-메서드의-추가는-모든-카테고리-구현체-다-가능할-것-같은데-혹시-모르니-현재-특정상태구현체-1개만-호출-가능한-메서드라고-가정하고-해당-구현체에만-메서드가-생기도록-구현체변수---다운캐스팅---메서드호출-빨간줄생성하여-코드를-짜보자">
<a class="anchor" href="#%EC%A4%91%EC%9A%943-%EC%83%81%EC%B9%B4%EC%B6%94%EC%83%81%EC%B2%B4%EA%B0%80-%EC%9E%A1%ED%9E%8C%EC%9D%B4%ED%9B%84-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%B6%94%EA%B0%80%EB%8A%94-%EB%AA%A8%EB%93%A0-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%8B%A4-%EA%B0%80%EB%8A%A5%ED%95%A0-%EA%B2%83-%EA%B0%99%EC%9D%80%EB%8D%B0-%ED%98%B9%EC%8B%9C-%EB%AA%A8%EB%A5%B4%EB%8B%88-%ED%98%84%EC%9E%AC-%ED%8A%B9%EC%A0%95%EC%83%81%ED%83%9C%EA%B5%AC%ED%98%84%EC%B2%B4-1%EA%B0%9C%EB%A7%8C-%ED%98%B8%EC%B6%9C-%EA%B0%80%EB%8A%A5%ED%95%9C-%EB%A9%94%EC%84%9C%EB%93%9C%EB%9D%BC%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%98%EA%B3%A0-%ED%95%B4%EB%8B%B9-%EA%B5%AC%ED%98%84%EC%B2%B4%EC%97%90%EB%A7%8C-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%83%9D%EA%B8%B0%EB%8F%84%EB%A1%9D-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%B3%80%EC%88%98---%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85---%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C-%EB%B9%A8%EA%B0%84%EC%A4%84%EC%83%9D%EC%84%B1%ED%95%98%EC%97%AC-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%A7%9C%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요3) 상카(추상체)가 잡힌이후 메서드의 추가는 (모든 카테고리 구현체 다 가능할 것 같은데, 혹시 모르니) <code class="language-plaintext highlighter-rouge">현재 특정상태(구현체) 1개만 호출 가능한 메서드</code>라고 가정하고 <code class="language-plaintext highlighter-rouge">해당 구현체에만 메서드가 생기도록 구현체변수 -&gt; 다운캐스팅 -&gt; 메서드호출() 빨간줄생성</code>하여 코드를 짜보자.</h4>

<h4 id="14-drawcard-card가--hit와-blackjack-모든-카테고리가-호출가능할-것-같지만-보수적으로-blackjack에서만-호출가능한-단독메서드라고-가정해놓고-짜보자">
<a class="anchor" href="#14-drawcard-card%EA%B0%80--hit%EC%99%80-blackjack-%EB%AA%A8%EB%93%A0-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC%EA%B0%80-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%A0-%EA%B2%83-%EA%B0%99%EC%A7%80%EB%A7%8C-%EB%B3%B4%EC%88%98%EC%A0%81%EC%9C%BC%EB%A1%9C-blackjack%EC%97%90%EC%84%9C%EB%A7%8C-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%9C-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%9D%BC%EA%B3%A0-%EA%B0%80%EC%A0%95%ED%95%B4%EB%86%93%EA%B3%A0-%EC%A7%9C%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>14 draw(Card card)가  <code class="language-plaintext highlighter-rouge">hit와 blackjack</code> 모든 카테고리가 호출가능할 것 같지만, <code class="language-plaintext highlighter-rouge">보수적으로 blackjack에서만 호출가능한 단독메서드라고 가정</code>해놓고 짜보자.</h4>

<h5 id="특정-구현체만-호출가능한-메서드를-호출하고-싶다면-다형성으로-받던-곳에서-변수-먼저--특정--구현체type으로-받아주고----우항-빨간줄-다운캐스팅해서----단독메서드-호출하여---단독-빨간줄-생성해줘야한다">
<a class="anchor" href="#%ED%8A%B9%EC%A0%95-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A7%8C-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%9C-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4%EB%A9%B4-%EB%8B%A4%ED%98%95%EC%84%B1%EC%9C%BC%EB%A1%9C-%EB%B0%9B%EB%8D%98-%EA%B3%B3%EC%97%90%EC%84%9C-%EB%B3%80%EC%88%98-%EB%A8%BC%EC%A0%80--%ED%8A%B9%EC%A0%95--%EA%B5%AC%ED%98%84%EC%B2%B4type%EC%9C%BC%EB%A1%9C-%EB%B0%9B%EC%95%84%EC%A3%BC%EA%B3%A0----%EC%9A%B0%ED%95%AD-%EB%B9%A8%EA%B0%84%EC%A4%84-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85%ED%95%B4%EC%84%9C----%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%ED%95%98%EC%97%AC---%EB%8B%A8%EB%8F%85-%EB%B9%A8%EA%B0%84%EC%A4%84-%EC%83%9D%EC%84%B1%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>특정 구현체만 호출가능한 메서드를 호출하고 싶다면, 다형성으로 받던 곳에서 <code class="language-plaintext highlighter-rouge">변수 먼저  특정  구현체Type으로 받아주고</code> -&gt; <code class="language-plaintext highlighter-rouge">(= 우항 빨간줄 다운캐스팅)</code>해서  -&gt; <code class="language-plaintext highlighter-rouge">단독메서드 호출()</code>하여  -&gt;<code class="language-plaintext highlighter-rouge">단독 빨간줄 생성</code>해줘야한다.</h5>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">상카(추상체)가 있는 상황의</code></strong> 구현체(blackjack)에서, **특정 구현체만 호출가능한 메서드를 호출한다? **</p>

    <ol>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">다형성(추상체)으로 받는 변수</code> 먼저 바꿔주고</strong></p>
      </li>
      <li>
        <p><strong>ide빨간줄로 (우항에서 다운캐스팅)`하여 구현체로 받아서 단독메서드를 호출해야한다.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319003742240.png" alt="image-20220319003742240"></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319003752055.png" alt="image-20220319003752055"></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319003758956.png" alt="image-20220319003758956"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
        
     <span class="c1">//1. 구현체 blackjack만의 단독메서드라고 가정 -&gt; 다운캐스팅해서 받아야한다.</span>
     <span class="c1">//        final State state =  Game.start(Card.of(Suit.SPADES, Denomination.ACE),</span>
     <span class="c1">//            Card.of(Suit.SPADES, Denomination.JACK));</span>
     <span class="kd">final</span> <span class="nc">Blackjack</span> <span class="n">state</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Blackjack</span><span class="o">)</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                                    <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
        
     <span class="n">assertThrows</span><span class="o">(</span><span class="nc">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                  <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">)));</span>
 <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<h5 id="구현체로-받은-상태에서-빨간줄-create-method---구현체에서-정의-or-추상체에서-정의-선택할-수-있다">
<a class="anchor" href="#%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EB%B0%9B%EC%9D%80-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EB%B9%A8%EA%B0%84%EC%A4%84-create-method---%EA%B5%AC%ED%98%84%EC%B2%B4%EC%97%90%EC%84%9C-%EC%A0%95%EC%9D%98-or-%EC%B6%94%EC%83%81%EC%B2%B4%EC%97%90%EC%84%9C-%EC%A0%95%EC%9D%98-%EC%84%A0%ED%83%9D%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>구현체로 받은 상태에서 빨간줄 create method -&gt; 구현체에서 정의 or 추상체에서 정의 선택할 수 있다.</h5>

<ol>
  <li>
    <p>다운 캐스팅 이후 <strong>구현체로 받은 상태에서 메서드 호출 -&gt; 구현체에만 메서드 생성</strong>해보자.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319004006637.png" alt="image-20220319004006637"></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">구현체로 받은 상태에서 빨간줄 create method</code>하면, 구현체에만 정의할 수 있게 선택할 수 있다.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319004058831.png" alt="image-20220319004058831"></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">draw() 호출시 에러나야 통과</code>하지만, <strong>일단은 응답값으로 추상체를 넣고 정의해주자.(결국엔 추상체Type응답 -&gt; 다형성으로 응답하여 -&gt; 상호 바뀔 수 있는 카테고리내 상태 아무거나로 가능하게 바뀔 것임.)</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Blackjack</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
     <span class="kd">public</span> <span class="nc">State</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="my-인터페이스로-추상화했다면-다운캐스팅-or-구현체변수-상태에서는-단독메서드-생성이-가능하다">
<a class="anchor" href="#my-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94%ED%96%88%EB%8B%A4%EB%A9%B4-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-or-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%B3%80%EC%88%98-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C%EB%8A%94-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) 인터페이스로 추상화했다면, <code class="language-plaintext highlighter-rouge">다운캐스팅 or 구현체변수</code> 상태에서는 <code class="language-plaintext highlighter-rouge">단독메서드 생성</code>이 가능하다.</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">다운캐스팅 + 구현체 변수</code>가 거슬리지만, 예외발생으로 통과가 잘되는 것 같다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">blackjackDraw</span><span class="o">()</span> <span class="o">{</span>
    
     <span class="c1">//        final State state =  Game.start(Card.of(Suit.SPADES, Denomination.ACE),</span>
     <span class="c1">//            Card.of(Suit.SPADES, Denomination.JACK));</span>
    
     <span class="c1">//1. 구현체 blackjack만의 단독메서드라고 가정 -&gt; 다운캐스팅해서 받아야한다.</span>
     <span class="kd">final</span> <span class="nc">Blackjack</span> <span class="n">state</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Blackjack</span><span class="o">)</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">),</span>
                                                    <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
     <span class="c1">//2. 다운캐스팅해서 blackjack에만 구현되도록 했지만.</span>
     <span class="n">assertThrows</span><span class="o">(</span><span class="nc">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                  <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">)));</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319004448804.png" alt="image-20220319004448804"></p>
  </li>
</ol>

<h3 id="고민---state가-card를-draw로-받아도-되느냐">
<a class="anchor" href="#%EA%B3%A0%EB%AF%BC---state%EA%B0%80-card%EB%A5%BC-draw%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%8F%84-%EB%90%98%EB%8A%90%EB%83%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>고민 - state가 card를 .draw()로 받아도 되느냐?</h3>

<h5 id="my-상태값인변을-가진다--재료로-받아서-시작되거나--재료없이-빈재료로-내부초기화되어서-시작-하며---추가정보-등-내부-상태값이-업데이트-되고-그-변화된-상태값을-재료로해서-업데이트된-새-객체를-반환해주려면-상태값으로-가져야한다">
<a class="anchor" href="#my-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B8%EB%B3%80%EC%9D%84-%EA%B0%80%EC%A7%84%EB%8B%A4--%EC%9E%AC%EB%A3%8C%EB%A1%9C-%EB%B0%9B%EC%95%84%EC%84%9C-%EC%8B%9C%EC%9E%91%EB%90%98%EA%B1%B0%EB%82%98--%EC%9E%AC%EB%A3%8C%EC%97%86%EC%9D%B4-%EB%B9%88%EC%9E%AC%EB%A3%8C%EB%A1%9C-%EB%82%B4%EB%B6%80%EC%B4%88%EA%B8%B0%ED%99%94%EB%90%98%EC%96%B4%EC%84%9C-%EC%8B%9C%EC%9E%91-%ED%95%98%EB%A9%B0---%EC%B6%94%EA%B0%80%EC%A0%95%EB%B3%B4-%EB%93%B1-%EB%82%B4%EB%B6%80-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B4-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EB%90%98%EA%B3%A0-%EA%B7%B8-%EB%B3%80%ED%99%94%EB%90%9C-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%84-%EC%9E%AC%EB%A3%8C%EB%A1%9C%ED%95%B4%EC%84%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%90%9C-%EC%83%88-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%B4%EC%A3%BC%EB%A0%A4%EB%A9%B4-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C-%EA%B0%80%EC%A0%B8%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) 상태값(인변)을 가진다-&gt; <code class="language-plaintext highlighter-rouge">재료로 받아서 시작되거나  재료없이 빈재료로 내부초기화</code>되어서 시작 하며 -&gt; 추가정보 등 <code class="language-plaintext highlighter-rouge">내부 상태값이 업데이트 되고, 그 변화된 상태값을 재료</code>로해서 <code class="language-plaintext highlighter-rouge">업데이트된 새 객체</code>를 반환해주려면 <code class="language-plaintext highlighter-rouge">상태값으로 가져야한다.</code>
</h5>

<ul>
  <li>어떤 값을 받았다 -&gt; 메서드호출로 업데이트 했다. -&gt; <code class="language-plaintext highlighter-rouge">인변 , 상태값으로 가지고 있어야 그것을 재료</code>로 해서 new 새객체(<code class="language-plaintext highlighter-rouge">업데이트재료</code>)로 업데이트된 객체를 생성할 수 있게 된다.
    <ul>
      <li><strong>상태값은 객체의 이전값을 유지 + 업데이트해서 새객체 반환을 할 수 있는 것이다.</strong></li>
    </ul>
  </li>
</ul>

<h5 id="my-요약-클래스의-상태값은-재료로-들어와-포장되며-가공된-뒤-적은-수로내부에서-가지고-있어야-변화를-반영한-새객체도-생성시에도-재료로서-생성시-쓰인다라고-할-수-있다">
<a class="anchor" href="#my-%EC%9A%94%EC%95%BD-%ED%81%B4%EB%9E%98%EC%8A%A4%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%80-%EC%9E%AC%EB%A3%8C%EB%A1%9C-%EB%93%A4%EC%96%B4%EC%99%80-%ED%8F%AC%EC%9E%A5%EB%90%98%EB%A9%B0-%EA%B0%80%EA%B3%B5%EB%90%9C-%EB%92%A4-%EC%A0%81%EC%9D%80-%EC%88%98%EB%A1%9C%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EC%96%B4%EC%95%BC-%EB%B3%80%ED%99%94%EB%A5%BC-%EB%B0%98%EC%98%81%ED%95%9C-%EC%83%88%EA%B0%9D%EC%B2%B4%EB%8F%84-%EC%83%9D%EC%84%B1%EC%8B%9C%EC%97%90%EB%8F%84-%EC%9E%AC%EB%A3%8C%EB%A1%9C%EC%84%9C-%EC%83%9D%EC%84%B1%EC%8B%9C-%EC%93%B0%EC%9D%B8%EB%8B%A4%EB%9D%BC%EA%B3%A0-%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) 요약: 클래스의 <code class="language-plaintext highlighter-rouge">상태값</code>은 <code class="language-plaintext highlighter-rouge">재료로 들어와 포장</code>되며 <code class="language-plaintext highlighter-rouge">(가공된 뒤 적은 수로)내부에서 가지고 있어야, 변화를 반영한 새객체도 생성시에도 재료로서 생성시 쓰인다</code>라고 할 수 있다.</h5>

<h4 id="중요4-my-추상체로서-여러--구현체-state를-가지는-state를-사용하는-순간부터--state-변화를-판단하는-정보들은-state가-내부에서-실시간-반영되는-상태값인변가지며--전략메서드를-통해-바로-바뀌거나-필요한-추가정보를-현-정보들과-같이-판단하여-다른-구현체로-바뀐다">
<a class="anchor" href="#%EC%A4%91%EC%9A%944-my-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A1%9C%EC%84%9C-%EC%97%AC%EB%9F%AC--%EA%B5%AC%ED%98%84%EC%B2%B4-state%EB%A5%BC-%EA%B0%80%EC%A7%80%EB%8A%94-state%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%88%9C%EA%B0%84%EB%B6%80%ED%84%B0--state-%EB%B3%80%ED%99%94%EB%A5%BC-%ED%8C%90%EB%8B%A8%ED%95%98%EB%8A%94-%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%80-state%EA%B0%80-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%8B%A4%EC%8B%9C%EA%B0%84-%EB%B0%98%EC%98%81%EB%90%98%EB%8A%94-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B8%EB%B3%80%EA%B0%80%EC%A7%80%EB%A9%B0--%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%ED%86%B5%ED%95%B4-%EB%B0%94%EB%A1%9C-%EB%B0%94%EB%80%8C%EA%B1%B0%EB%82%98-%ED%95%84%EC%9A%94%ED%95%9C-%EC%B6%94%EA%B0%80%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%98%84-%EC%A0%95%EB%B3%B4%EB%93%A4%EA%B3%BC-%EA%B0%99%EC%9D%B4-%ED%8C%90%EB%8B%A8%ED%95%98%EC%97%AC-%EB%8B%A4%EB%A5%B8-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EB%B0%94%EB%80%90%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요4 my) 추상체로서 여러  구현체 state를 가지는 state를 사용하는 순간부터  state 변화를 판단하는 정보들은 state가 내부에서 <code class="language-plaintext highlighter-rouge">실시간 반영되는 상태값(인변)</code>가지며 + <code class="language-plaintext highlighter-rouge">전략메서드</code>를 통해 <code class="language-plaintext highlighter-rouge">바로 바뀌거나, 필요한 추가정보를 현 정보들과 같이 판단하여</code> 다른 구현체로 바뀐다</h4>

<ul>
  <li>player는 <code class="language-plaintext highlighter-rouge">name</code>과 <code class="language-plaintext highlighter-rouge">cards</code>를 가질 수 있다.
    <ul>
      <li>cards에 담긴 정보를 <strong>메세지를 보내 물어봐서-&gt; 현재 <code class="language-plaintext highlighter-rouge">state</code>를 판단</strong>한다.</li>
    </ul>
  </li>
  <li>player는 <code class="language-plaintext highlighter-rouge">name</code>과 현재 상태이자 메서드호출시 다른 것으로 바뀔 수 있는<code class="language-plaintext highlighter-rouge">state</code>를 추상체를 가질 수 있다.
    <ul>
      <li>
<strong>state를 사용하는 순간부터  state판단에 필요한 정보들(<code class="language-plaintext highlighter-rouge">cards</code> 등)들을 state 내부에서 관리한다.</strong>
        <ul>
          <li>state는 <strong>메소드를 호출을 통해</strong> 실시간으로 <strong>현재 상태에 맞는 구현체를 응답하여 상태를 바꾼다</strong>.  그 상태변화의 트리거가 추상체의 전략메서드 <code class="language-plaintext highlighter-rouge">.draw()</code>다.</li>
          <li>상태를 바꾸는 트리거 메서드는 전략메서드로서 공통이며 <strong><code class="language-plaintext highlighter-rouge">상태 변화를 유발하는 추가정보(card 1장)</code>을 인자로 받을 수 있다.</strong>
</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="15-blackjack상태는-끝났다면-hit상태에서-진행해보자">
<a class="anchor" href="#15-blackjack%EC%83%81%ED%83%9C%EB%8A%94-%EB%81%9D%EB%82%AC%EB%8B%A4%EB%A9%B4-hit%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%A7%84%ED%96%89%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>15 blackjack상태는 끝났다면, hit상태에서 진행해보자.</h4>

<h5 id="진행되는-테스트는-테메를-복사후---확인된-given을-유지한체-다음-상태를-유발한다">
<a class="anchor" href="#%EC%A7%84%ED%96%89%EB%90%98%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-%ED%85%8C%EB%A9%94%EB%A5%BC-%EB%B3%B5%EC%82%AC%ED%9B%84---%ED%99%95%EC%9D%B8%EB%90%9C-given%EC%9D%84-%EC%9C%A0%EC%A7%80%ED%95%9C%EC%B2%B4-%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C%EB%A5%BC-%EC%9C%A0%EB%B0%9C%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>진행되는 테스트는 테메를 복사후 -&gt; 확인된 given을 유지한체 다음 상태를 유발한다</h5>

<ol>
  <li>
    <p>테메 복사후, <strong>테스트_이름만 <code class="language-plaintext highlighter-rouge">기존상태+트리거</code> 로 바꾼다.</strong></p>

    <ul>
      <li><strong>given만 <code class="language-plaintext highlighter-rouge">hit</code>상태를 유지</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319011659132.png" alt="image-20220319011659132"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hit2</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given &amp; when : hit</span>
     <span class="kd">final</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                                    <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="특정상태에서-먼저-상태변화-트리거인-메서드를-호출할-수-있는지예외발생-안하는지부터-고민한다">
<a class="anchor" href="#%ED%8A%B9%EC%A0%95%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EB%A8%BC%EC%A0%80-%EC%83%81%ED%83%9C%EB%B3%80%ED%99%94-%ED%8A%B8%EB%A6%AC%EA%B1%B0%EC%9D%B8-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94%EC%A7%80%EC%98%88%EC%99%B8%EB%B0%9C%EC%83%9D-%EC%95%88%ED%95%98%EB%8A%94%EC%A7%80%EB%B6%80%ED%84%B0-%EA%B3%A0%EB%AF%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>특정상태에서 먼저, 상태변화 트리거인 메서드를 호출할 수 있는지(예외발생 안하는지)부터 고민한다.</h5>

<h3 id="현재-hit상태에서의-목적-카드1장받는-상태변화-트리거-메서드를-호출하더라도-에러안나고-호출가능---응답값-제대로-반환받음isinstanceof증명해야한다">
<a class="anchor" href="#%ED%98%84%EC%9E%AC-hit%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C%EC%9D%98-%EB%AA%A9%EC%A0%81-%EC%B9%B4%EB%93%9C1%EC%9E%A5%EB%B0%9B%EB%8A%94-%EC%83%81%ED%83%9C%EB%B3%80%ED%99%94-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EC%97%90%EB%9F%AC%EC%95%88%EB%82%98%EA%B3%A0-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5---%EC%9D%91%EB%8B%B5%EA%B0%92-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%98%ED%99%98%EB%B0%9B%EC%9D%8Cisinstanceof%EC%A6%9D%EB%AA%85%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>현재 hit상태에서의 목적: 카드1장받는 <code class="language-plaintext highlighter-rouge">상태변화 트리거 메서드를 호출</code>하더라도 <code class="language-plaintext highlighter-rouge">에러안나고 호출가능</code>  = <code class="language-plaintext highlighter-rouge">응답값 제대로 반환받음(isInstanceOf)</code>증명해야한다.</h3>

<h4 id="16-hit상태에서-또-draw로-카드받을-수-있나-받을-수-있다면-단독메서드로서-다운캐스팅후-구현체-변수로-받아놓고-단독메서드로서-가정하고-개발을-시작한다">
<a class="anchor" href="#16-hit%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EB%98%90-draw%EB%A1%9C-%EC%B9%B4%EB%93%9C%EB%B0%9B%EC%9D%84-%EC%88%98-%EC%9E%88%EB%82%98-%EB%B0%9B%EC%9D%84-%EC%88%98-%EC%9E%88%EB%8B%A4%EB%A9%B4-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C%EC%84%9C-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85%ED%9B%84-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%86%93%EA%B3%A0-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C%EC%84%9C-%EA%B0%80%EC%A0%95%ED%95%98%EA%B3%A0-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%8B%9C%EC%9E%91%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>16 hit상태에서 또 draw로 카드받을 수 있나? 받을 수 있다면 단독메서드로서 다운캐스팅후 <code class="language-plaintext highlighter-rouge">구현체 변수로 받아놓고</code> 단독메서드로서 가정하고 개발을 시작한다.</h4>

<ol>
  <li>
    <p>인터페이스의 상카를 가졌더라도, 보수적으로 <code class="language-plaintext highlighter-rouge">구현체 단독메서드</code>로서 일단 개발한다.</p>

    <ol>
      <li>구현체로 다운캐스팅</li>
      <li>좌항을 <strong>구현체 변수로 받아주고</strong> -&gt; <strong>구현체 단독메서드</strong>로서 개발</li>
    </ol>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hit2</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given &amp; when : hit -&gt; draw -&gt; hit</span>
    
     <span class="c1">//1. 구현체 (Hit)로 다운캐스팅한다.</span>
     <span class="kd">final</span> <span class="nc">Hit</span> <span class="n">state</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Hit</span><span class="o">)</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                                          <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319013558950.png" alt="image-20220319013558950"></p>
  </li>
</ol>

<h5 id="다운캐스팅-하더라도-우항에-체이닝으로-개발하면-다운캐스팅-안먹고-응답되는-추상체로-메서드-개발됨---반드시-좌변-구현체-변수로-받아야-구현체-단독메서드-개발이-가능하다">
<a class="anchor" href="#%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%ED%95%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EC%9A%B0%ED%95%AD%EC%97%90-%EC%B2%B4%EC%9D%B4%EB%8B%9D%EC%9C%BC%EB%A1%9C-%EA%B0%9C%EB%B0%9C%ED%95%98%EB%A9%B4-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%95%88%EB%A8%B9%EA%B3%A0-%EC%9D%91%EB%8B%B5%EB%90%98%EB%8A%94-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A1%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B0%9C%EB%B0%9C%EB%90%A8---%EB%B0%98%EB%93%9C%EC%8B%9C-%EC%A2%8C%EB%B3%80-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%95%84%EC%95%BC-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>다운캐스팅 하더라도, 우항에 체이닝으로 개발하면, 다운캐스팅 안먹고 응답되는 추상체로 메서드 개발됨. -&gt; <code class="language-plaintext highlighter-rouge">반드시 좌변 구현체 변수로 받아야 구현체-단독메서드</code> 개발이 가능하다.</h5>

<ol>
  <li>
    <p>구현체 변수로 변경이후 메서드 체이닝을 통해, <strong>바로 이어서 단독메서드를 호출하여 단독메서드를 개발해보자.</strong></p>

    <ul>
      <li>아래는 체이닝으로 했더니.. 다운캐스팅해도, 좌변 변수 받아도 단독메서드 빨간줄 생성 안됨.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319013208680.png" alt="image-20220319013208680"></p>
  </li>
</ol>

<h5 id="참고-어차피-직전-테메를-복붙해온-given의-hit상태가-보장되어있으니-편하게-다운캐스팅--구현체-변수로-받아놓고---단독메서드-개발">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%96%B4%EC%B0%A8%ED%94%BC-%EC%A7%81%EC%A0%84-%ED%85%8C%EB%A9%94%EB%A5%BC-%EB%B3%B5%EB%B6%99%ED%95%B4%EC%98%A8-given%EC%9D%98-hit%EC%83%81%ED%83%9C%EA%B0%80-%EB%B3%B4%EC%9E%A5%EB%90%98%EC%96%B4%EC%9E%88%EC%9C%BC%EB%8B%88-%ED%8E%B8%ED%95%98%EA%B2%8C-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85--%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%86%93%EA%B3%A0---%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B0%9C%EB%B0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 어차피 직전 테메를 복붙해온 given의 hit상태가 보장되어있으니, 편하게 다운캐스팅 + 구현체 변수로 받아놓고 -&gt; 단독메서드 개발</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319013737152.png" alt="image-20220319013737152"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319013843569.png" alt="image-20220319013843569">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319013857906.png" alt="image-20220319013857906"></p>

<ol>
  <li>
    <p>일단 단독메서드 개발시</p>

    <ul>
      <li>
<strong>응답값은 추상체 State</strong>로 가야할 것이다.</li>
      <li>
<strong>첫 개발이니까 <code class="language-plaintext highlighter-rouge">return null;</code>을 주고 실패하는 코드로 돌리자</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015029459.png" alt="image-20220319015029459">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Hit</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="nc">State</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="blackjack과-다르게-예외없이-다음에-올-구현체-상태를-응답해야하므로-밖에서는-state변수를-재할당시켜-업데이트해줘야한다-하지만-단독메서드-개발을-위해-구현체-변수로-받아둔-state를-returntype-state의-응답으로-재할당이-불가능하다">
<a class="anchor" href="#blackjack%EA%B3%BC-%EB%8B%A4%EB%A5%B4%EA%B2%8C-%EC%98%88%EC%99%B8%EC%97%86%EC%9D%B4-%EB%8B%A4%EC%9D%8C%EC%97%90-%EC%98%AC-%EA%B5%AC%ED%98%84%EC%B2%B4-%EC%83%81%ED%83%9C%EB%A5%BC-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%95%BC%ED%95%98%EB%AF%80%EB%A1%9C-%EB%B0%96%EC%97%90%EC%84%9C%EB%8A%94-state%EB%B3%80%EC%88%98%EB%A5%BC-%EC%9E%AC%ED%95%A0%EB%8B%B9%EC%8B%9C%EC%BC%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4-%ED%95%98%EC%A7%80%EB%A7%8C-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%B4-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%95%84%EB%91%94-state%EB%A5%BC-returntype-state%EC%9D%98-%EC%9D%91%EB%8B%B5%EC%9C%BC%EB%A1%9C-%EC%9E%AC%ED%95%A0%EB%8B%B9%EC%9D%B4-%EB%B6%88%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>blackjack과 다르게, <code class="language-plaintext highlighter-rouge">예외없이 다음에 올 구현체 상태</code>를 응답해야하므로 <code class="language-plaintext highlighter-rouge">밖에서는 state변수를 재할당시켜 업데이트</code>해줘야한다. 하지만, <code class="language-plaintext highlighter-rouge">단독메서드 개발을 위해, 구현체 변수로 받아둔 state</code>를 returnType State의 응답으로 재할당이 불가능하다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015153224.png" alt="image-20220319015153224"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015210037.png" alt="image-20220319015210037"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015506270.png" alt="image-20220319015506270"></p>

<h5 id="다음-상태-트리거-전략메서드는-공통메서드-추메라면---다양한-구현체-응답을-위해-state-응답이-맞으나-단독메서드---단독구현체로-응답하도록-임시대응-한다">
<a class="anchor" href="#%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EA%B3%B5%ED%86%B5%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B6%94%EB%A9%94%EB%9D%BC%EB%A9%B4---%EB%8B%A4%EC%96%91%ED%95%9C-%EA%B5%AC%ED%98%84%EC%B2%B4-%EC%9D%91%EB%8B%B5%EC%9D%84-%EC%9C%84%ED%95%B4-state-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%A7%9E%EC%9C%BC%EB%82%98-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C---%EB%8B%A8%EB%8F%85%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%95%98%EB%8F%84%EB%A1%9D-%EC%9E%84%EC%8B%9C%EB%8C%80%EC%9D%91-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>다음 상태 트리거 전략메서드는 <code class="language-plaintext highlighter-rouge">공통메서드, 추메라면 -&gt; 다양한 구현체 응답을 위해 State</code> 응답이 맞으나 <code class="language-plaintext highlighter-rouge">단독메서드 -&gt; 단독구현체로 응답</code>하도록 임시대응 한다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015500313.png" alt="image-20220319015500313"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319015523699.png" alt="image-20220319015523699"></p>

<h3 id="중요5-마지막-구현체hit의-단독메서드-구현-와중에---상카-아래-모든-구현체hit-blackjack들이-구현은-다르지만-모두-호출-가능한-공통메서드---인터페이스에선-추메로-추상화하고-직접-추상화이후-override-직접-붙이기">
<a class="anchor" href="#%EC%A4%91%EC%9A%945-%EB%A7%88%EC%A7%80%EB%A7%89-%EA%B5%AC%ED%98%84%EC%B2%B4hit%EC%9D%98-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C-%EA%B5%AC%ED%98%84-%EC%99%80%EC%A4%91%EC%97%90---%EC%83%81%EC%B9%B4-%EC%95%84%EB%9E%98-%EB%AA%A8%EB%93%A0-%EA%B5%AC%ED%98%84%EC%B2%B4hit-blackjack%EB%93%A4%EC%9D%B4-%EA%B5%AC%ED%98%84%EC%9D%80-%EB%8B%A4%EB%A5%B4%EC%A7%80%EB%A7%8C-%EB%AA%A8%EB%91%90-%ED%98%B8%EC%B6%9C-%EA%B0%80%EB%8A%A5%ED%95%9C-%EA%B3%B5%ED%86%B5%EB%A9%94%EC%84%9C%EB%93%9C---%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%97%90%EC%84%A0-%EC%B6%94%EB%A9%94%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94%ED%95%98%EA%B3%A0-%EC%A7%81%EC%A0%91-%EC%B6%94%EC%83%81%ED%99%94%EC%9D%B4%ED%9B%84-override-%EC%A7%81%EC%A0%91-%EB%B6%99%EC%9D%B4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요5) 마지막 구현체(hit)의 단독메서드 구현 와중에 -&gt; 상카 아래 <code class="language-plaintext highlighter-rouge">모든 구현체(hit, blackjack)들이 &lt;구현은 다르지만 모두 호출 가능&gt;한 공통메서드 -&gt; 인터페이스에선 추메</code>로 추상화하고, <code class="language-plaintext highlighter-rouge">직접 추상화이후 @Override 직접 붙이기</code>
</h3>

<h4 id="중요6-my-추메로-추상화해도-구상체별로-개별-구현해줘야하는데--인페의-추메로-추상화-핵심은-코드-중복제거가-아니라-구현체-모두-호출가능시-구현체전용-단독메서드를-올려-다운캐스팅-제거-파라미터응답변수에서-추상체로-받아-일괄처리-가능해진다">
<a class="anchor" href="#%EC%A4%91%EC%9A%946-my-%EC%B6%94%EB%A9%94%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94%ED%95%B4%EB%8F%84-%EA%B5%AC%EC%83%81%EC%B2%B4%EB%B3%84%EB%A1%9C-%EA%B0%9C%EB%B3%84-%EA%B5%AC%ED%98%84%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%98%EB%8A%94%EB%8D%B0--%EC%9D%B8%ED%8E%98%EC%9D%98-%EC%B6%94%EB%A9%94%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94-%ED%95%B5%EC%8B%AC%EC%9D%80-%EC%BD%94%EB%93%9C-%EC%A4%91%EB%B3%B5%EC%A0%9C%EA%B1%B0%EA%B0%80-%EC%95%84%EB%8B%88%EB%9D%BC-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%AA%A8%EB%91%90-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%EC%8B%9C-%EA%B5%AC%ED%98%84%EC%B2%B4%EC%A0%84%EC%9A%A9-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%98%AC%EB%A0%A4-%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%A0%9C%EA%B1%B0-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EC%9D%91%EB%8B%B5%EB%B3%80%EC%88%98%EC%97%90%EC%84%9C-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A1%9C-%EB%B0%9B%EC%95%84-%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC-%EA%B0%80%EB%8A%A5%ED%95%B4%EC%A7%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요6 my) 추메로 추상화해도 구상체별로 개별 구현해줘야하는데??? —&gt; 인페의 추메로 추상화 핵심은 <code class="language-plaintext highlighter-rouge">코드 중복제거</code>가 아니라 <code class="language-plaintext highlighter-rouge">구현체 모두 호출가능</code>시 <code class="language-plaintext highlighter-rouge">구현체전용 단독메서드를 올려 다운캐스팅 제거</code>+ <code class="language-plaintext highlighter-rouge">파라미터/응답/변수에서 추상체로 받아 일괄처리 가능</code>해진다.</h4>

<h4 id="16-구현체-모두가-호출가능할-수-있다면-인페-추메전메로-추상화해서---다운캐스팅-제거후-추상체전략메서드호출로-호출이-가능해진다-그전에">
<a class="anchor" href="#16-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%AA%A8%EB%91%90%EA%B0%80-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4%EB%A9%B4-%EC%9D%B8%ED%8E%98-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C-%EC%B6%94%EC%83%81%ED%99%94%ED%95%B4%EC%84%9C---%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%A0%9C%EA%B1%B0%ED%9B%84-%EC%B6%94%EC%83%81%EC%B2%B4%EC%A0%84%EB%9E%B5%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%B8%EC%B6%9C%EB%A1%9C-%ED%98%B8%EC%B6%9C%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%B4%EC%A7%84%EB%8B%A4-%EA%B7%B8%EC%A0%84%EC%97%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>16 <code class="language-plaintext highlighter-rouge">구현체 모두가 호출가능</code>할 수 있다면, <code class="language-plaintext highlighter-rouge">인페-추메(전메)로 추상화해서 -&gt; 다운캐스팅 제거후 추상체.전략메서드호출()</code>로 호출이 가능해진다.. 그전에…</h4>

<h5 id="참고--구현체-단독메서드---추메전메로-올리기-전-확인은-다이어그램-creation-mode--method로-하자">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0--%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C---%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C-%EC%98%AC%EB%A6%AC%EA%B8%B0-%EC%A0%84-%ED%99%95%EC%9D%B8%EC%9D%80-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8-creation-mode--method%EB%A1%9C-%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고)  구현체 단독메서드 -&gt; 추메/전메로 올리기 전 확인은 <code class="language-plaintext highlighter-rouge">다이어그램+ creation mode + method</code>로 하자</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103028632.png" alt="image-20220319103028632"></p>

<ol>
  <li>현재 hit와 blakcjack의 구현체 모두 <strong>단독메서드(draw)들을 <code class="language-plaintext highlighter-rouge">구현은 달라도 호출가능</code>이라면 올릴 준비를 한다.</strong> 
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319100923432.png" alt="image-20220319100923432">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319102850048.png" alt="image-20220319102850048">
</li>
</ol>

<h5 id="중요7--구현체-단독메서드---추메전메로서-선언부-시그니쳐만-위로-올릴-때--받는-변수응답값파라미터-등에-구현체가-있다면-그것들도-추상체로-바꿔서-올려줘야한다">
<a class="anchor" href="#%EC%A4%91%EC%9A%947--%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C---%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C%EC%84%9C-%EC%84%A0%EC%96%B8%EB%B6%80-%EC%8B%9C%EA%B7%B8%EB%8B%88%EC%B3%90%EB%A7%8C-%EC%9C%84%EB%A1%9C-%EC%98%AC%EB%A6%B4-%EB%95%8C--%EB%B0%9B%EB%8A%94-%EB%B3%80%EC%88%98%EC%9D%91%EB%8B%B5%EA%B0%92%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%93%B1%EC%97%90-%EA%B5%AC%ED%98%84%EC%B2%B4%EA%B0%80-%EC%9E%88%EB%8B%A4%EB%A9%B4-%EA%B7%B8%EA%B2%83%EB%93%A4%EB%8F%84-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%84%9C-%EC%98%AC%EB%A0%A4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요7)  구현체 단독메서드 -&gt; 추메/전메로서 (선언부 시그니쳐만) 위로 올릴 때,  <code class="language-plaintext highlighter-rouge">받는 변수/응답값/파라미터 등에 구현체</code>가 있다면, <code class="language-plaintext highlighter-rouge">그것들도 추상체로 바꿔</code>서 올려줘야한다.</h5>

<ol>
  <li>
    <p><strong>구현체의 단독메서드 -&gt; (선언부 시그니쳐만)  추상체의 전메/추메로 올릴 때</strong> -&gt; 복붙해서 가져간 뒤 <strong><code class="language-plaintext highlighter-rouge">구현체로 응답</code>이 보인다면 <code class="language-plaintext highlighter-rouge">추상체</code>로 바꿔줘야한다.</strong></p>

    <ul>
      <li>
        <p>hit의 draw() 단독메서드를 올린다고 가정하보자.</p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103202924.png" alt="image-20220319103202924"></p>
      </li>
      <li>
        <p>올리기 위해 <strong><code class="language-plaintext highlighter-rouge">추상부인 선어부만</code> 복사</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103508849.png" alt="image-20220319103508849"></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103529471.png" alt="image-20220319103529471"></p>
      </li>
      <li>
        <p>선언부 복붙후, <strong>구현체 응답이 보이면 -&gt; 추상체로 변경</strong></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103342056.png" alt="image-20220319103342056">
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103613495.png" alt="image-20220319103613495"></p>
      </li>
    </ul>
  </li>
</ol>

<ul>
  <li>추메 선언부에서 <strong><code class="language-plaintext highlighter-rouge">추상체</code>응답으로 바꿔</strong>두면, 
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319104939378.png" alt="image-20220319104939378">
    <ul>
      <li>
<strong>기존 구현체 <code class="language-plaintext highlighter-rouge">구상체</code>응답으로 개별구현이 계속 허용</strong>된다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319104949144.png" alt="image-20220319104949144">
</li>
    </ul>
  </li>
</ul>

<h5 id="참고-인페의-추메전메로-선언부를-올릴-때-접근제한자-제거해서-default로-일단-시작하기">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%9D%B8%ED%8E%98%EC%9D%98-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C-%EC%84%A0%EC%96%B8%EB%B6%80%EB%A5%BC-%EC%98%AC%EB%A6%B4-%EB%95%8C-%EC%A0%91%EA%B7%BC%EC%A0%9C%ED%95%9C%EC%9E%90-%EC%A0%9C%EA%B1%B0%ED%95%B4%EC%84%9C-default%EB%A1%9C-%EC%9D%BC%EB%8B%A8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 인페의 <code class="language-plaintext highlighter-rouge">추메/전메로 선언부</code>를 올릴 때, <code class="language-plaintext highlighter-rouge">접근제한자 제거</code>해서 <code class="language-plaintext highlighter-rouge">default</code>로 일단 시작하기</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103701531.png" alt="image-20220319103701531">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103710244.png" alt="image-20220319103710134"></p>

<h5 id="중요-인페의-추메전메로-수동-추상화-올린-다음엔하고-난-뒤-usage-impl-수를-확인해서-개별-구현남아있어야하니-오버라이딩만-직접-가서-해준다">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EC%9D%B8%ED%8E%98%EC%9D%98-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C-%EC%88%98%EB%8F%99-%EC%B6%94%EC%83%81%ED%99%94-%EC%98%AC%EB%A6%B0-%EB%8B%A4%EC%9D%8C%EC%97%94%ED%95%98%EA%B3%A0-%EB%82%9C-%EB%92%A4-usage-impl-%EC%88%98%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%B4%EC%84%9C-%EA%B0%9C%EB%B3%84-%EA%B5%AC%ED%98%84%EB%82%A8%EC%95%84%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%98%EB%8B%88-%EC%98%A4%EB%B2%84%EB%9D%BC%EC%9D%B4%EB%94%A9%EB%A7%8C-%EC%A7%81%EC%A0%91-%EA%B0%80%EC%84%9C-%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) <code class="language-plaintext highlighter-rouge">인페의 추메/전메</code>로 <code class="language-plaintext highlighter-rouge">수동 추상화 올린 다음</code>엔하고 난 뒤, <code class="language-plaintext highlighter-rouge">usage-impl 수</code>를 확인해서 <code class="language-plaintext highlighter-rouge">개별 구현남아있어야하니 @오버라이딩만</code> 직접 가서 해준다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103807992.png" alt="image-20220319103807992">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319103826404.png" alt="image-20220319103826404"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319104434927.png" alt="image-20220319104434927">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319104442530.png" alt="image-20220319104442530"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319104457959.png" alt="image-20220319104457959"></p>

<h5 id="중요-추상화-끝난-단독메서드는-더이상-구현체만의-단독메드가-아니다--다운캐스팅-안해도-오버라이딩된-추상체변수로-받은-상태에서-추메전메로서-호출가능해진다---다운캐스팅-제거하고--추상체변수로-받도록-수정하기">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EC%B6%94%EC%83%81%ED%99%94-%EB%81%9D%EB%82%9C-%EB%8B%A8%EB%8F%85%EB%A9%94%EC%84%9C%EB%93%9C%EB%8A%94-%EB%8D%94%EC%9D%B4%EC%83%81-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A7%8C%EC%9D%98-%EB%8B%A8%EB%8F%85%EB%A9%94%EB%93%9C%EA%B0%80-%EC%95%84%EB%8B%88%EB%8B%A4--%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%95%88%ED%95%B4%EB%8F%84-%EC%98%A4%EB%B2%84%EB%9D%BC%EC%9D%B4%EB%94%A9%EB%90%9C-%EC%B6%94%EC%83%81%EC%B2%B4%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%9D%80-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A1%9C%EC%84%9C-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%B4%EC%A7%84%EB%8B%A4---%EB%8B%A4%EC%9A%B4%EC%BA%90%EC%8A%A4%ED%8C%85-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B3%A0--%EC%B6%94%EC%83%81%EC%B2%B4%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EB%8F%84%EB%A1%9D-%EC%88%98%EC%A0%95%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) <code class="language-plaintext highlighter-rouge">추상화 끝난 단독메서드</code>는 더이상 구현체만의 단독메드가 아니다 == <code class="language-plaintext highlighter-rouge">다운캐스팅 안해도 (오버라이딩된) 추상체변수로 받은 상태에서 추메/전메로서 호출가능</code>해진다. -&gt; <code class="language-plaintext highlighter-rouge">다운캐스팅 제거하고  추상체변수로 받도록 수정하기</code>
</h5>

<ul>
  <li>
    <p>기존 Hit 구현체에만 단독이라고 믿어서 개발했던 단독메서드가</p>

    <ul>
      <li>추상화 -&gt; 추메/전메가 되었고  + 오버라이딩 @도 달게되었다면</li>
      <li><strong>다운캐스팅을 제거한 <code class="language-plaintext highlighter-rouge">추상체변수</code>로 받아 -&gt; 바로 호출이 된다.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112025073.png" alt="image-20220319112025073"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112043336.png" alt="image-20220319112043336"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112150915.png" alt="image-20220319112150915"></p>
  </li>
</ul>

<h4 id="17-hit-에서-메서드-호출가능해서---모든-구현체-호출가능---메서드-추상화-해준-이후---응답으로서-또-여러-경우의수가-나온다---hit-----복사해놓고-구체적으로-1case를-또-정해주고-빠른통과하도록-메서드짜기">
<a class="anchor" href="#17-hit-%EC%97%90%EC%84%9C-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5%ED%95%B4%EC%84%9C---%EB%AA%A8%EB%93%A0-%EA%B5%AC%ED%98%84%EC%B2%B4-%ED%98%B8%EC%B6%9C%EA%B0%80%EB%8A%A5---%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B6%94%EC%83%81%ED%99%94-%ED%95%B4%EC%A4%80-%EC%9D%B4%ED%9B%84---%EC%9D%91%EB%8B%B5%EC%9C%BC%EB%A1%9C%EC%84%9C-%EB%98%90-%EC%97%AC%EB%9F%AC-%EA%B2%BD%EC%9A%B0%EC%9D%98%EC%88%98%EA%B0%80-%EB%82%98%EC%98%A8%EB%8B%A4---hit-----%EB%B3%B5%EC%82%AC%ED%95%B4%EB%86%93%EA%B3%A0-%EA%B5%AC%EC%B2%B4%EC%A0%81%EC%9C%BC%EB%A1%9C-1case%EB%A5%BC-%EB%98%90-%EC%A0%95%ED%95%B4%EC%A3%BC%EA%B3%A0-%EB%B9%A0%EB%A5%B8%ED%86%B5%EA%B3%BC%ED%95%98%EB%8F%84%EB%A1%9D-%EB%A9%94%EC%84%9C%EB%93%9C%EC%A7%9C%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>17 hit 에서 <code class="language-plaintext highlighter-rouge">메서드 호출가능</code>해서 -&gt; 모든 구현체 호출가능 -&gt; 메서드 추상화 해준 이후 -&gt; 응답으로서 또 여러 경우의수가 나온다. -&gt; hit + ?? -&gt; 복사해놓고 구체적으로 1case를 또 정해주고 빠른통과하도록 메서드짜기</h4>

<h5 id="참고-다음-가능한-상태가-여러개로-나올-경우--변화전-given현재-상태의-테메를-그만큼-복사해놓고-case를-정해놓고-진행해나가자">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EB%8B%A4%EC%9D%8C-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%83%81%ED%83%9C%EA%B0%80-%EC%97%AC%EB%9F%AC%EA%B0%9C%EB%A1%9C-%EB%82%98%EC%98%AC-%EA%B2%BD%EC%9A%B0--%EB%B3%80%ED%99%94%EC%A0%84-given%ED%98%84%EC%9E%AC-%EC%83%81%ED%83%9C%EC%9D%98-%ED%85%8C%EB%A9%94%EB%A5%BC-%EA%B7%B8%EB%A7%8C%ED%81%BC-%EB%B3%B5%EC%82%AC%ED%95%B4%EB%86%93%EA%B3%A0-case%EB%A5%BC-%EC%A0%95%ED%95%B4%EB%86%93%EA%B3%A0-%EC%A7%84%ED%96%89%ED%95%B4%EB%82%98%EA%B0%80%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 다음 가능한 상태가 여러개로 나올 경우,  <code class="language-plaintext highlighter-rouge">변화전 given현재 상태</code>의 테메를 그만큼 복사해놓고, case를 정해놓고 진행해나가자</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319105911817.png" alt="image-20220319105911817"></p>

<ul>
  <li>hit -&gt; draw(card)  -&gt; ??? <strong><code class="language-plaintext highlighter-rouge">hit</code> or <code class="language-plaintext highlighter-rouge">stay</code></strong> 중에  만만한 것으로 가면 된다.
    <ul>
      <li>hit부터 한다고 가정한다.</li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>given된 상태의 테메를 복사해서</p>

    <ul>
      <li>예상응답값: hit</li>
      <li>가정인자:  다음 응답도 hit가 되도록 +1(ACE)를 draw()한다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110005291.png" alt="image-20220319110005291"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">hitToHit</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// given &amp; when : hit -&gt; draw -&gt; 2,10,1 -&gt; hit</span>
     <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                                  <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
     <span class="n">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">ACE</span><span class="o">));</span>
    
     <span class="c1">// draw호출이 가능해서</span>
     <span class="n">assertThat</span><span class="o">(</span><span class="n">state</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Hit</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>이제 case에 맞게 메서드를 수정한다.</p>

    <ul>
      <li>
        <p>일단 new Hit()만 반환해주면 된다.</p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110116470.png" alt="image-20220319110116470"></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110207366.png" alt="image-20220319110207366"></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">Hit</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>hit담에 hit가 나오므로 통과한다.</p>
  </li>
</ol>

<h4 id="18-hit에서-새로운-응답값-객체-상태가-나오는-case에서는-테메이름--case로-가정인자-조절--expected로서-assert-isinstanceof의-새객체class등-미리-작성하고-하나씩-만들어나간다">
<a class="anchor" href="#18-hit%EC%97%90%EC%84%9C-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9D%91%EB%8B%B5%EA%B0%92-%EA%B0%9D%EC%B2%B4-%EC%83%81%ED%83%9C%EA%B0%80-%EB%82%98%EC%98%A4%EB%8A%94-case%EC%97%90%EC%84%9C%EB%8A%94-%ED%85%8C%EB%A9%94%EC%9D%B4%EB%A6%84--case%EB%A1%9C-%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90-%EC%A1%B0%EC%A0%88--expected%EB%A1%9C%EC%84%9C-assert-isinstanceof%EC%9D%98-%EC%83%88%EA%B0%9D%EC%B2%B4class%EB%93%B1-%EB%AF%B8%EB%A6%AC-%EC%9E%91%EC%84%B1%ED%95%98%EA%B3%A0-%ED%95%98%EB%82%98%EC%94%A9-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%82%98%EA%B0%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>18 hit에서 새로운 응답값(= 객체 상태)가 나오는 case에서는 테메이름 + case로 가정인자 조절 + expected로서 assert-isInstanceOf의 새객체.class등 미리 작성하고 하나씩 만들어나간다.</h4>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">hit -&gt; hit</code> 뿐만 아니라 다른 경우의 수인 <strong><code class="language-plaintext highlighter-rouge">hit -&gt; Bust</code>를 위해  기존<code class="language-plaintext highlighter-rouge">hit</code>가 확인된 테스를 <code class="language-plaintext highlighter-rouge">복사</code>해뒀었다. -&gt; <code class="language-plaintext highlighter-rouge">테메이름을 변경하자</code></strong>
    <ul>
      <li>테메이름을 변경하자 -&gt; <code class="language-plaintext highlighter-rouge">기존 + 다음상태case</code>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110505821.png" alt="image-20220319110505821">
</li>
    </ul>
  </li>
  <li>
    <p><strong>주어진 hit상태에서 <code class="language-plaintext highlighter-rouge">가정인자들도 다음상태를 유도하는 것</code>으로 바꿔주자</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110613092.png" alt="image-20220319110613092"></p>
  </li>
  <li>
    <p><strong>예상값이 Bust의 상태객체가 나와야한다.</strong></p>

    <ul>
      <li>빨간줄로 만들어가자</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110902749.png" alt="image-20220319110902749"></p>
  </li>
</ol>

<h5 id="참고-카테고라이징추상체-인페보유된-상태들에---새-객체를-추가한다면---class생성fi-or-ab후-해당-추상체를-impl---그에-따라-추메전메를-impl하여-카테고리에-추가해준다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%9D%BC%EC%9D%B4%EC%A7%95%EC%B6%94%EC%83%81%EC%B2%B4-%EC%9D%B8%ED%8E%98%EB%B3%B4%EC%9C%A0%EB%90%9C-%EC%83%81%ED%83%9C%EB%93%A4%EC%97%90---%EC%83%88-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%9C%EB%8B%A4%EB%A9%B4---class%EC%83%9D%EC%84%B1fi-or-ab%ED%9B%84-%ED%95%B4%EB%8B%B9-%EC%B6%94%EC%83%81%EC%B2%B4%EB%A5%BC-impl---%EA%B7%B8%EC%97%90-%EB%94%B0%EB%9D%BC-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A5%BC-impl%ED%95%98%EC%97%AC-%EC%B9%B4%ED%85%8C%EA%B3%A0%EB%A6%AC%EC%97%90-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 카테고라이징(추상체 인페보유)된 상태들에 -&gt; 새 객체를 추가한다면? -&gt; <code class="language-plaintext highlighter-rouge">class생성(fi or ab)후 해당 추상체를 impl -&gt; 그에 따라 추메/전메를 impl</code>하여 카테고리에 추가해준다.</h5>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319110954732.png" alt="image-20220319110954732"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111104419.png" alt="image-20220319111104419"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111126241.png" alt="image-20220319111126241"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111148461.png" alt="image-20220319111148461"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111152672.png" alt="image-20220319111152672"></p>

<h5 id="bust-상태에서-추메전메를-impl하면-다음-상태로는-뭘-줘야할까-끝나야할까-일단은-return-null로-비워두기">
<a class="anchor" href="#bust-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%B6%94%EB%A9%94%EC%A0%84%EB%A9%94%EB%A5%BC-impl%ED%95%98%EB%A9%B4-%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C%EB%A1%9C%EB%8A%94-%EB%AD%98-%EC%A4%98%EC%95%BC%ED%95%A0%EA%B9%8C-%EB%81%9D%EB%82%98%EC%95%BC%ED%95%A0%EA%B9%8C-%EC%9D%BC%EB%8B%A8%EC%9D%80-return-null%EB%A1%9C-%EB%B9%84%EC%9B%8C%EB%91%90%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bust 상태에서 추메/전메를 impl하면 다음 상태로는 뭘 줘야할까? 끝나야할까? 일단은 return null;로 비워두기</h5>

<ul>
  <li>
    <p><strong>아직 버스트에서 draw가능한지 / 다음 상태는 뭘로 줄지가 안정해졌으므로 <code class="language-plaintext highlighter-rouge">구현체 단독메서드</code>지만 일단 <code class="language-plaintext highlighter-rouge">State응답 -&gt; return null;</code>로 비워둔다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111328522.png" alt="image-20220319111328522"></p>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Bust</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">State</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319111406656.png" alt="image-20220319111406656"></p>

<h4 id="19-hit-상태에서--개별구현되고-있는-트리거-메서드에서--호출시-bust가-응답되도록-메서드-로직-짜주기">
<a class="anchor" href="#19-hit-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C--%EA%B0%9C%EB%B3%84%EA%B5%AC%ED%98%84%EB%90%98%EA%B3%A0-%EC%9E%88%EB%8A%94-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C--%ED%98%B8%EC%B6%9C%EC%8B%9C-bust%EA%B0%80-%EC%9D%91%EB%8B%B5%EB%90%98%EB%8F%84%EB%A1%9D-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%A1%9C%EC%A7%81-%EC%A7%9C%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>19 <code class="language-plaintext highlighter-rouge">hit 상태에서</code>  <code class="language-plaintext highlighter-rouge">개별구현되고 있는 트리거 메서드</code>에서  호출시 <code class="language-plaintext highlighter-rouge">Bust가 응답</code>되도록 <code class="language-plaintext highlighter-rouge">메서드 로직</code> 짜주기</h4>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">ctrl+F12</code>를 통해, <strong><code class="language-plaintext highlighter-rouge">추상체 변수.추메()</code>로 보이는 구현체 Hit의 메서드</strong>로 찾아간다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112708880.png" alt="image-20220319112708880">
    <ul>
      <li>현재는 <strong>구현체hit에서 호출시 new Hit()만 반환</strong>하게 되어있다.
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112733945.png" alt="image-20220319112733945">
</li>
    </ul>
  </li>
</ol>

<h3 id="중요-개별구현중인-구현체-메서드에서-다른-구현체로-넘어가는-로직짜기---이전-정보를-받아와-by-재료를-생성자를-통해--현재-상태를-나타내줄-정보들을-상태값인변로서-내부에-가지고-있어야만-상태패턴의-상태객체다">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EA%B0%9C%EB%B3%84%EA%B5%AC%ED%98%84%EC%A4%91%EC%9D%B8-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C-%EB%8B%A4%EB%A5%B8-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EB%84%98%EC%96%B4%EA%B0%80%EB%8A%94-%EB%A1%9C%EC%A7%81%EC%A7%9C%EA%B8%B0---%EC%9D%B4%EC%A0%84-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%99%80-by-%EC%9E%AC%EB%A3%8C%EB%A5%BC-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%ED%86%B5%ED%95%B4--%ED%98%84%EC%9E%AC-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%82%98%ED%83%80%EB%82%B4%EC%A4%84-%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%84-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B8%EB%B3%80%EB%A1%9C%EC%84%9C-%EB%82%B4%EB%B6%80%EC%97%90-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EC%96%B4%EC%95%BC%EB%A7%8C-%EC%83%81%ED%83%9C%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%83%81%ED%83%9C%EA%B0%9D%EC%B2%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) 개별구현중인 구현체 메서드에서 <code class="language-plaintext highlighter-rouge">다른 구현체로 넘어가는 로직</code>짜기 -&gt; <code class="language-plaintext highlighter-rouge">이전 정보를 받아와 by 재료를 생성자를 통해</code>  현재 상태를 나타내줄 정보들을 <code class="language-plaintext highlighter-rouge">상태값(인변)</code>로서 내부에 가지고 있어야만 상태패턴의 상태객체다.</h3>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319112955070.png" alt="image-20220319112955070"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">Hit</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 0. 현재는 무조건 hit -&gt; draw -&gt; hit를 응답하지만</span>
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>

    <span class="c1">// 1. if 21이 넘으면 -&gt; Bust를 응답해줘야한다.</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="20-필요에-의해-현-상태---다음-상태로-넘어가는데-필요한-정보들을-상태값인변으로-가지고-있어야하며----트리거-메서드에-의해-실시간으로-바뀌는-상태값으로서-state가-내부에서-직접-상태값으로-이미-가지고-있어야만-한다">
<a class="anchor" href="#20-%ED%95%84%EC%9A%94%EC%97%90-%EC%9D%98%ED%95%B4-%ED%98%84-%EC%83%81%ED%83%9C---%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C%EB%A1%9C-%EB%84%98%EC%96%B4%EA%B0%80%EB%8A%94%EB%8D%B0-%ED%95%84%EC%9A%94%ED%95%9C-%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%84-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B8%EB%B3%80%EC%9C%BC%EB%A1%9C-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EC%96%B4%EC%95%BC%ED%95%98%EB%A9%B0----%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90-%EC%9D%98%ED%95%B4-%EC%8B%A4%EC%8B%9C%EA%B0%84%EC%9C%BC%EB%A1%9C-%EB%B0%94%EB%80%8C%EB%8A%94-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C%EC%84%9C-state%EA%B0%80-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%A7%81%EC%A0%91-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C-%EC%9D%B4%EB%AF%B8-%EA%B0%80%EC%A7%80%EA%B3%A0-%EC%9E%88%EC%96%B4%EC%95%BC%EB%A7%8C-%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>20 필요에 의해 <code class="language-plaintext highlighter-rouge">현 상태 -&gt; 다음 상태로 넘어가는데 필요한 정보들</code>을 <code class="language-plaintext highlighter-rouge">상태값(인변)</code>으로 가지고 있어야하며 -&gt;  <code class="language-plaintext highlighter-rouge">트리거 메서드에 의해 실시간으로 바뀌는 상태값</code>으로서 <code class="language-plaintext highlighter-rouge">State가 내부에서 직접 상태값</code>으로 <code class="language-plaintext highlighter-rouge">이미 가지고 있어야만 한다.</code>
</h4>

<ol>
  <li>
    <p>hit 상태에서</p>

    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">if 21이 넘으면</code></strong> bust객체로 응답
        <ul>
          <li>21이 넘는지는 <strong><code class="language-plaintext highlighter-rouge">내부에 필요정보인 cards</code>를 들고 있어야만 가능하다.</strong>
</li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="nc">Hit</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// 0. 현재는 무조건 hit -&gt; draw -&gt; hit를 응답하지만</span>
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
    
     <span class="c1">// 1. if 21이 넘으면 -&gt; Bust를 응답해줘야한다.</span>
     <span class="c1">// 2. draw()시 21이 넘는지 안넘는지 판단하기 위해서는</span>
     <span class="c1">// -&gt; 들어오는 card에 대해, 현재 cards의 정보가 필요하다.</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="중요-현재-상태값인변으로-이미-정보를-가진다----상태값-필드인변--생성자에서-재료받아-초기화형태가-있어야-이전-정보를-가져와-실시간-업데이트-가능한-정보로-보유한-셈이-된다">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%ED%98%84%EC%9E%AC-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%B8%EB%B3%80%EC%9C%BC%EB%A1%9C-%EC%9D%B4%EB%AF%B8-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EA%B0%80%EC%A7%84%EB%8B%A4----%EC%83%81%ED%83%9C%EA%B0%92-%ED%95%84%EB%93%9C%EC%9D%B8%EB%B3%80--%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90%EC%84%9C-%EC%9E%AC%EB%A3%8C%EB%B0%9B%EC%95%84-%EC%B4%88%EA%B8%B0%ED%99%94%ED%98%95%ED%83%9C%EA%B0%80-%EC%9E%88%EC%96%B4%EC%95%BC-%EC%9D%B4%EC%A0%84-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EA%B0%80%EC%A0%B8%EC%99%80-%EC%8B%A4%EC%8B%9C%EA%B0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%A0%95%EB%B3%B4%EB%A1%9C-%EB%B3%B4%EC%9C%A0%ED%95%9C-%EC%85%88%EC%9D%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) 현재 <code class="language-plaintext highlighter-rouge">상태값(인변)</code>으로 이미 정보를 <code class="language-plaintext highlighter-rouge">가진다</code>? -&gt;  <code class="language-plaintext highlighter-rouge">상태값 필드(인변) + 생성자에서 재료받아 초기화</code>형태가 있어야 <code class="language-plaintext highlighter-rouge">이전 정보를 가져와 실시간 업데이트 가능한 정보</code>로 보유한 셈이 된다.</h5>

<ol>
  <li>
    <p>일단 필요한 정보로서 <code class="language-plaintext highlighter-rouge">상태값(인변)</code>을 private final로 가지자</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Hit</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
    
     <span class="c1">//3. card1장을 받기전에, [현재 상태를 상태값 cards]으로 가지고 있어야한다.</span>
     <span class="c1">// -&gt; 상태값(인변)을 가진다? -&gt; 생성자에서 재료받아 초기화한다.</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">cards</span><span class="o">;</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319142409469.png" alt="image-20220319142409469"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319142447588.png" alt="image-20220319142447588"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Hit</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
    
     <span class="c1">//3. card1장을 받기전에, [현재 상태를 상태값 cards]으로 가지고 있어야한다.</span>
     <span class="c1">// -&gt; 상태값(인변)을 가진다? -&gt; 생성자에서 재료받아 초기화한다.</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">cards</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Hit</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Cards</span> <span class="n">cards</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">cards</span> <span class="o">=</span> <span class="n">cards</span><span class="o">;</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="21-상태값정보를-추가를-위해--필드재료받는-생성자를-추가했더니-기존의-재료없이-기본생성자를-이용한-것들이-에러가-난다">
<a class="anchor" href="#21-%EC%83%81%ED%83%9C%EA%B0%92%EC%A0%95%EB%B3%B4%EB%A5%BC-%EC%B6%94%EA%B0%80%EB%A5%BC-%EC%9C%84%ED%95%B4--%ED%95%84%EB%93%9C%EC%9E%AC%EB%A3%8C%EB%B0%9B%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%96%88%EB%8D%94%EB%8B%88-%EA%B8%B0%EC%A1%B4%EC%9D%98-%EC%9E%AC%EB%A3%8C%EC%97%86%EC%9D%B4-%EA%B8%B0%EB%B3%B8%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B2%83%EB%93%A4%EC%9D%B4-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%82%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>21) <code class="language-plaintext highlighter-rouge">상태값(정보)를 추가</code>를 위해  <code class="language-plaintext highlighter-rouge">필드+재료받는 생성자</code>를 추가했더니 기존의 <code class="language-plaintext highlighter-rouge">재료없이 기본생성자</code>를 이용한 것들이 에러가 난다.</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319142605889.png" alt="image-20220319142605889"></p>

<h5 id="참고-new로-생성자정의없이-기본생성자로-테스트에서-미리-많이-쓴-경우----재료받는-생성자가-생기는-순간-재료받는-생성자가-주-생성자---위에-this를-활용해서-재료-안받고---내부-빈-재료로-정보-초기화-하는-부새성자를-추가해주자">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-new%EB%A1%9C-%EC%83%9D%EC%84%B1%EC%9E%90%EC%A0%95%EC%9D%98%EC%97%86%EC%9D%B4-%EA%B8%B0%EB%B3%B8%EC%83%9D%EC%84%B1%EC%9E%90%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%97%90%EC%84%9C-%EB%AF%B8%EB%A6%AC-%EB%A7%8E%EC%9D%B4-%EC%93%B4-%EA%B2%BD%EC%9A%B0----%EC%9E%AC%EB%A3%8C%EB%B0%9B%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%83%9D%EA%B8%B0%EB%8A%94-%EC%88%9C%EA%B0%84-%EC%9E%AC%EB%A3%8C%EB%B0%9B%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%A3%BC-%EC%83%9D%EC%84%B1%EC%9E%90---%EC%9C%84%EC%97%90-this%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%B4%EC%84%9C-%EC%9E%AC%EB%A3%8C-%EC%95%88%EB%B0%9B%EA%B3%A0---%EB%82%B4%EB%B6%80-%EB%B9%88-%EC%9E%AC%EB%A3%8C%EB%A1%9C-%EC%A0%95%EB%B3%B4-%EC%B4%88%EA%B8%B0%ED%99%94-%ED%95%98%EB%8A%94-%EB%B6%80%EC%83%88%EC%84%B1%EC%9E%90%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%B4%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) new()로 생성자정의없이 기본생성자로 <code class="language-plaintext highlighter-rouge">테스트에서 미리 많이 쓴 경우</code> -&gt;  <code class="language-plaintext highlighter-rouge">재료받는 생성자가 생기는 순간 재료받는 생성자가 주 생성자</code> -&gt; 위에 this를 활용해서 <code class="language-plaintext highlighter-rouge">재료 안받고 -&gt; 내부 빈 재료로 정보 초기화</code> 하는 부새성자를 추가해주자.</h5>

<ol>
  <li>
    <p>재료없는 생성자 생성방법은 -&gt; genearte 후 consructor -&gt; <code class="language-plaintext highlighter-rouge">Select None</code>으로 생성하면 된다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319142754680.png" alt="image-20220319142754680">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319142835558.png" alt="image-20220319142835558"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="nf">Hit</span><span class="o">()</span> <span class="o">{</span>
        
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>재료받는 <code class="language-plaintext highlighter-rouge">생성자가 주생성자</code>이며, 재료 생성말고 <code class="language-plaintext highlighter-rouge">빈 재료로 정보 초기화</code>해주자.</strong></p>

    <ul>
      <li>
        <p><strong>그 전에.. 사용처를 보니 <code class="language-plaintext highlighter-rouge">new Hit()</code>의 <code class="language-plaintext highlighter-rouge">재료없는 기본생성자</code>로 사용한 경우가 <code class="language-plaintext highlighter-rouge">1usage로 현재 여기 Hit class내부 밖</code>인 상황이다.</strong> -&gt; <strong>기존 테스트 유지를 위한 생성자 추가 생성을 할 필요가 없는 상황임</strong></p>

        <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319143753073.png" alt="image-20220319143753073"></p>
      </li>
      <li>
        <p>F12눌러서 따라가도 현재 상황
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319143812822.png" alt="image-20220319143812822"></p>
      </li>
      <li>
        <p><strong>그렇다면 굳이, 코드 유지를 위한 <code class="language-plaintext highlighter-rouge">재료안받고 빈재료로 정보초기화</code>해주는 기본생성자가 필요하지 않다.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319143915211.png" alt="image-20220319143915211"></p>
      </li>
    </ul>
  </li>
</ol>

<h4 id="중요-추가정보by트리거-메서드-인자를-받아-현재-정보인변으로-보유를-업데이트해서-판단한다">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EC%B6%94%EA%B0%80%EC%A0%95%EB%B3%B4by%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B8%EC%9E%90%EB%A5%BC-%EB%B0%9B%EC%95%84-%ED%98%84%EC%9E%AC-%EC%A0%95%EB%B3%B4%EC%9D%B8%EB%B3%80%EC%9C%BC%EB%A1%9C-%EB%B3%B4%EC%9C%A0%EB%A5%BC-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%ED%95%B4%EC%84%9C-%ED%8C%90%EB%8B%A8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) <code class="language-plaintext highlighter-rouge">추가정보(by트리거 메서드 인자)</code>를 받아 <code class="language-plaintext highlighter-rouge">현재 정보(인변으로 보유)</code>를 업데이트해서 판단한다</h4>

<h3 id="일급컬렉션-정보상태값의-addremove는-내부-정보를-변화시키지말고-변화된-내부정보로-일급을-만들어-반환하여-불변--밖에서-반환된-것을-이용">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89%EC%BB%AC%EB%A0%89%EC%85%98-%EC%A0%95%EB%B3%B4%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%98-addremove%EB%8A%94-%EB%82%B4%EB%B6%80-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B3%80%ED%99%94%EC%8B%9C%ED%82%A4%EC%A7%80%EB%A7%90%EA%B3%A0-%EB%B3%80%ED%99%94%EB%90%9C-%EB%82%B4%EB%B6%80%EC%A0%95%EB%B3%B4%EB%A1%9C-%EC%9D%BC%EA%B8%89%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B0%98%ED%99%98%ED%95%98%EC%97%AC-%EB%B6%88%EB%B3%80--%EB%B0%96%EC%97%90%EC%84%9C-%EB%B0%98%ED%99%98%EB%90%9C-%EA%B2%83%EC%9D%84-%EC%9D%B4%EC%9A%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급컬렉션 정보(상태값)의 add/remove()는 내부 정보를 변화시키지말고 <code class="language-plaintext highlighter-rouge">변화된 내부정보로 일급을 만들어 반환</code>하여 <code class="language-plaintext highlighter-rouge">불변 &amp;&amp; 밖에서 반환된 것을 이용</code>
</h3>

<h4 id="22-이전-카드정보들을-상태값으로-보유하고-있는-상황에서---다음-상태로-가기위에-카드1장의-추가정보메서드인자를-받아-현재-정보인변으로-보유를-업데이트하자">
<a class="anchor" href="#22-%EC%9D%B4%EC%A0%84-%EC%B9%B4%EB%93%9C%EC%A0%95%EB%B3%B4%EB%93%A4%EC%9D%84-%EC%83%81%ED%83%9C%EA%B0%92%EC%9C%BC%EB%A1%9C-%EB%B3%B4%EC%9C%A0%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94-%EC%83%81%ED%99%A9%EC%97%90%EC%84%9C---%EB%8B%A4%EC%9D%8C-%EC%83%81%ED%83%9C%EB%A1%9C-%EA%B0%80%EA%B8%B0%EC%9C%84%EC%97%90-%EC%B9%B4%EB%93%9C1%EC%9E%A5%EC%9D%98-%EC%B6%94%EA%B0%80%EC%A0%95%EB%B3%B4%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%B8%EC%9E%90%EB%A5%BC-%EB%B0%9B%EC%95%84-%ED%98%84%EC%9E%AC-%EC%A0%95%EB%B3%B4%EC%9D%B8%EB%B3%80%EC%9C%BC%EB%A1%9C-%EB%B3%B4%EC%9C%A0%EB%A5%BC-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>22) 이전 카드정보들을 상태값으로 보유하고 있는 상황에서 -&gt; 다음 상태로 가기위에 카드1장의 <code class="language-plaintext highlighter-rouge">추가정보(메서드인자)를 받아 현재 정보(인변으로 보유)를 업데이트</code>하자</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319144417304.png" alt="image-20220319144417304">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319144431645.png" alt="image-20220319144431645"></p>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319144852636.png" alt="image-20220319144852636"></p>

<h5 id="일급-내부변수를-변경시키려한다면listaddremove---불변-일급으로-만들어서---변경된-list정보로-새-일급을-새로-만들어-반환해주면----getter로-상태값을-열람할-필요가-없어진다">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89-%EB%82%B4%EB%B6%80%EB%B3%80%EC%88%98%EB%A5%BC-%EB%B3%80%EA%B2%BD%EC%8B%9C%ED%82%A4%EB%A0%A4%ED%95%9C%EB%8B%A4%EB%A9%B4listaddremove---%EB%B6%88%EB%B3%80-%EC%9D%BC%EA%B8%89%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C---%EB%B3%80%EA%B2%BD%EB%90%9C-list%EC%A0%95%EB%B3%B4%EB%A1%9C-%EC%83%88-%EC%9D%BC%EA%B8%89%EC%9D%84-%EC%83%88%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4-%EB%B0%98%ED%99%98%ED%95%B4%EC%A3%BC%EB%A9%B4----getter%EB%A1%9C-%EC%83%81%ED%83%9C%EA%B0%92%EC%9D%84-%EC%97%B4%EB%9E%8C%ED%95%A0-%ED%95%84%EC%9A%94%EA%B0%80-%EC%97%86%EC%96%B4%EC%A7%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급 내부변수를 변경시키려한다면(list.add/remove) -&gt; <code class="language-plaintext highlighter-rouge">불변 일급</code>으로 만들어서 -&gt; <code class="language-plaintext highlighter-rouge">변경된 list(정보)로 새 일급을 새로 만들어 반환</code>해주면  -&gt; getter로 상태값을 열람할 필요가 없어진다.</h5>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">일급.add( )</code>후 상태값 확인시 -&gt; <strong><code class="language-plaintext highlighter-rouge">불변이면서 add가 새 일급을 응답</code></strong>하도록 <strong><code class="language-plaintext highlighter-rouge">불변 일급컬렉션</code></strong>만들어주기
    <ul>
      <li>비슷한 사례:
        <ul>
          <li>
<code class="language-plaintext highlighter-rouge">Count VO</code>의 <code class="language-plaintext highlighter-rouge">+=</code>로 <strong>내부 상태값 변화시키고 그게 필요</strong>
</li>
          <li>
<code class="language-plaintext highlighter-rouge">일급컬렉션</code>의 <code class="language-plaintext highlighter-rouge">add</code>로 <strong>내부 상태값 변화시키고 그게 필요</strong>
</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>기존 상태값은 변경하기 전에, <strong>복사를 먼저</strong> 한다.</p>

    <ul>
      <li>
        <p><strong>나쁜예: <code class="language-plaintext highlighter-rouge">기존 상태값에 .add()로 자체변경을 먼저 가하면 안된다.</code></strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319145045191.png" alt="image-20220319145045191"></p>
      </li>
      <li>
        <p><strong>기존 상태값은 건들지말고, 변경을 가할 <code class="language-plaintext highlighter-rouge">복사본을 먼저 만든다</code></strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319145426067.png" alt="image-20220319145426067"></p>
      </li>
    </ul>
  </li>
  <li>
    <p>복사된 상태값에 변경을 가한다.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319145546755.png" alt="image-20220319145546755"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">//1. 기존 상태값을 변경없이 먼저 복사한다. (기존 상태값을 .add()로 바로 변경하지 않는다)</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">newValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">value</span><span class="o">);</span>
     <span class="c1">//2. 복사된 상태값에 증감을 가한다.</span>
     <span class="n">newValue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>증감이 반영된 복사된 새 상태값을 <strong>외부이므로 상태값이 아닌 <code class="language-plaintext highlighter-rouge">포장된 일급</code>객체로 응답해줘야한다.</strong>
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319145820601.png" alt="image-20220319145820601"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="nc">Cards</span> <span class="nf">add</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Card</span><span class="o">&gt;</span> <span class="n">newValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">value</span><span class="o">);</span>
     <span class="n">newValue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
     <span class="c1">//3. 증감이 반영된 복사 상태값을 -&gt; **외부에서 일급**으로 쓰이니</span>
     <span class="c1">// -&gt; [새 일급으로 포장해서 응답]**</span>
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Cards</span><span class="o">(</span><span class="n">newValue</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="참고-외부에서-내부증감변화의-메세지를-보낸-뒤---그-내부상태를-가져다-쓰고-싶다면---불변-포장객체로-응답해서-밖에서-사용가능하게-하라">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-%EB%82%B4%EB%B6%80%EC%A6%9D%EA%B0%90%EB%B3%80%ED%99%94%EC%9D%98-%EB%A9%94%EC%84%B8%EC%A7%80%EB%A5%BC-%EB%B3%B4%EB%82%B8-%EB%92%A4---%EA%B7%B8-%EB%82%B4%EB%B6%80%EC%83%81%ED%83%9C%EB%A5%BC-%EA%B0%80%EC%A0%B8%EB%8B%A4-%EC%93%B0%EA%B3%A0-%EC%8B%B6%EB%8B%A4%EB%A9%B4---%EB%B6%88%EB%B3%80-%ED%8F%AC%EC%9E%A5%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%84%9C-%EB%B0%96%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%ED%95%98%EB%9D%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 외부에서 내부(증감)변화의 메세지를 보낸 뒤 -&gt; 그 내부상태를 가져다 쓰고 싶다면 -&gt; 불변 포장객체로 응답해서 밖에서 사용가능하게 하라</h5>

<h4 id="23-불변-일급컬렉션으로-증감시-새객체를-반환해주면---외부에서-add-해줘도-내부만-변화되는게-아니라--외부에서는-증감이-반영된-내부정보를-포장한-일급을-받아쓴다---메세지-보내서-업데이트된-내부-정보에-대해-물어보기만-하면-된다">
<a class="anchor" href="#23-%EB%B6%88%EB%B3%80-%EC%9D%BC%EA%B8%89%EC%BB%AC%EB%A0%89%EC%85%98%EC%9C%BC%EB%A1%9C-%EC%A6%9D%EA%B0%90%EC%8B%9C-%EC%83%88%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%B4%EC%A3%BC%EB%A9%B4---%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-add-%ED%95%B4%EC%A4%98%EB%8F%84-%EB%82%B4%EB%B6%80%EB%A7%8C-%EB%B3%80%ED%99%94%EB%90%98%EB%8A%94%EA%B2%8C-%EC%95%84%EB%8B%88%EB%9D%BC--%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C%EB%8A%94-%EC%A6%9D%EA%B0%90%EC%9D%B4-%EB%B0%98%EC%98%81%EB%90%9C-%EB%82%B4%EB%B6%80%EC%A0%95%EB%B3%B4%EB%A5%BC-%ED%8F%AC%EC%9E%A5%ED%95%9C-%EC%9D%BC%EA%B8%89%EC%9D%84-%EB%B0%9B%EC%95%84%EC%93%B4%EB%8B%A4---%EB%A9%94%EC%84%B8%EC%A7%80-%EB%B3%B4%EB%82%B4%EC%84%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%90%9C-%EB%82%B4%EB%B6%80-%EC%A0%95%EB%B3%B4%EC%97%90-%EB%8C%80%ED%95%B4-%EB%AC%BC%EC%96%B4%EB%B3%B4%EA%B8%B0%EB%A7%8C-%ED%95%98%EB%A9%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>23) 불변 일급컬렉션으로 증감시 새객체를 반환해주면 -&gt; <code class="language-plaintext highlighter-rouge">외부에서 .add 해줘도 내부만 변화되는게 아니라</code>  외부에서는 <code class="language-plaintext highlighter-rouge">증감이 반영된 내부정보를 포장한 일급</code>을 받아쓴다 -&gt; <code class="language-plaintext highlighter-rouge">메세지 보내서 업데이트된 내부 정보에 대해 물어보기</code>만 하면 된다.</h4>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">일급.add( 추가정보 )</code>로 내부만 변화될 것 같지만</strong>
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319150115971.png" alt="image-20220319150115971"></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">불변 일급</code>은 <code class="language-plaintext highlighter-rouge">내부에서 변화가반영된 새 일급</code>을 응답해주니 그 정보를 밖에서 이용하면 된다.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319150143247.png" alt="image-20220319150143247"></p>
  </li>
  <li>
    <p>이제 <strong>변화가 반영된 정보</strong>를  포장한 일급 컬렉션으로 <strong>메세지를 보내서 현재 상태를 물어보면 된다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="nc">Hit</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">currentCards</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
     <span class="c1">// 21이면 블랙잭</span>
    
     <span class="c1">// 21넘으면 Bust</span>
    
     <span class="c1">// 21이하면 </span>
    
     <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">변화된 정보를 담은 일급</code>에게 21넘으면 Bust인지 물어보자.
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319150826546.png" alt="image-20220319150826546"></p>

    <ul>
      <li>물어볼 때, 내부에서의 <strong><code class="language-plaintext highlighter-rouge">this.value</code>는 <code class="language-plaintext highlighter-rouge">변화가 반영된 정보</code></strong>상태임을 인지하자.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319150904789.png" alt="image-20220319150904789"></p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">this.value</code>나 <code class="language-plaintext highlighter-rouge">value</code>등을 사용하지 않는 <strong>같은 class에서 정의되었으며, 내부에서는 잘 사용되고 있는 <code class="language-plaintext highlighter-rouge">이미 정의해놓은 메서드()</code>를 호출해서 <code class="language-plaintext highlighter-rouge">물음에 답(합)</code>을 구할 수 있다.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151102688.png" alt="image-20220319151102688">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isBust</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="nf">sum</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>이제 또다른 <code class="language-plaintext highlighter-rouge">Hit 구현체</code>에서 정의한 <code class="language-plaintext highlighter-rouge">draw()</code>는 <code class="language-plaintext highlighter-rouge">또다른 상태의 구현체도 return</code> 메서드가 되었다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151255832.png" alt="image-20220319151255832">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151309571.png" alt="image-20220319151309571">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151317627.png" alt="image-20220319151317627"></p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151357381.png" alt="image-20220319151357381"></p>
  </li>
</ol>

<h4 id="24-다른-구현체가-안되더라도-같은-구현체로-응답hit-hit-되더라도-추가정보를-반영하여-응답된-업데이트된-정보-by-불변-일급를-담아서---업데이트된-구현체로-응답되어야한다">
<a class="anchor" href="#24-%EB%8B%A4%EB%A5%B8-%EA%B5%AC%ED%98%84%EC%B2%B4%EA%B0%80-%EC%95%88%EB%90%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EA%B0%99%EC%9D%80-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EC%9D%91%EB%8B%B5hit-hit-%EB%90%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EC%B6%94%EA%B0%80%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%98%EC%98%81%ED%95%98%EC%97%AC-%EC%9D%91%EB%8B%B5%EB%90%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%90%9C-%EC%A0%95%EB%B3%B4-by-%EB%B6%88%EB%B3%80-%EC%9D%BC%EA%B8%89%EB%A5%BC-%EB%8B%B4%EC%95%84%EC%84%9C---%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8%EB%90%9C-%EA%B5%AC%ED%98%84%EC%B2%B4%EB%A1%9C-%EC%9D%91%EB%8B%B5%EB%90%98%EC%96%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>24) 다른 구현체가 안되더라도, 같은 구현체로 응답(hit-&gt;hit) 되더라도 <code class="language-plaintext highlighter-rouge">추가정보를 반영하여 응답된 업데이트된 정보 by 불변 일급</code>를 담아서 -&gt; <code class="language-plaintext highlighter-rouge">업데이트된 구현체</code>로 응답되어야한다.</h4>

<p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151513823.png" alt="image-20220319151513823">
<img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319151600709.png" alt="image-20220319151600709"></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">State</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Cards</span> <span class="n">currentCards</span> <span class="o">=</span> <span class="n">cards</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">card</span><span class="o">);</span>
    <span class="c1">// 21이면 블랙잭</span>
    <span class="c1">// 21넘으면 Bust</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">currentCards</span><span class="o">.</span><span class="na">isBust</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Bust</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 21이하면</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Hit</span><span class="o">(</span><span class="n">currentCards</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>
    <p>다시 테스트로 돌아와서, <code class="language-plaintext highlighter-rouge">hit -&gt; bust</code>로 잘 업데이트 되는 것을 확인할 수 있다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">hitBust</span><span class="o">()</span> <span class="o">{</span>
      <span class="c1">// given &amp; when : hit -&gt; draw -&gt; 2,10,10 -&gt; bust</span>
      <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span>
                               <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span>
    
      <span class="n">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">));</span>
    
      <span class="n">assertThat</span><span class="o">(</span><span class="n">state</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Bust</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="중요-끝상태에서---트리거-호출시-예외발생으로-종료까지-마무리-해줘야한다">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EB%81%9D%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C---%ED%8A%B8%EB%A6%AC%EA%B1%B0-%ED%98%B8%EC%B6%9C%EC%8B%9C-%EC%98%88%EC%99%B8%EB%B0%9C%EC%83%9D%EC%9C%BC%EB%A1%9C-%EC%A2%85%EB%A3%8C%EA%B9%8C%EC%A7%80-%EB%A7%88%EB%AC%B4%EB%A6%AC-%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) 끝상태에서 -&gt; 트리거 호출시 예외발생으로 종료까지 마무리 해줘야한다.</h3>

<ul>
  <li>hit or blackjack
    <ul>
      <li>blackjack -&gt; 뽑을 시 예외발생해서 종료</li>
      <li>hit
        <ul>
          <li>hit</li>
          <li>
<strong>bust -&gt; 뽑을 시 예외발생해서 종료</strong> « 먼저 처리해주자</li>
          <li>blackjack?</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="25-bust에-온-상태의-테메를-복붙하여-bust까지를-세팅해놓고----뽑으면-종료되는-case를-처리하자">
<a class="anchor" href="#25-bust%EC%97%90-%EC%98%A8-%EC%83%81%ED%83%9C%EC%9D%98-%ED%85%8C%EB%A9%94%EB%A5%BC-%EB%B3%B5%EB%B6%99%ED%95%98%EC%97%AC-bust%EA%B9%8C%EC%A7%80%EB%A5%BC-%EC%84%B8%ED%8C%85%ED%95%B4%EB%86%93%EA%B3%A0----%EB%BD%91%EC%9C%BC%EB%A9%B4-%EC%A2%85%EB%A3%8C%EB%90%98%EB%8A%94-case%EB%A5%BC-%EC%B2%98%EB%A6%AC%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>25) bust에 온 상태의 테메를 복붙하여 bust까지를 세팅해놓고 -&gt;  뽑으면 종료되는 case를 처리하자.</h4>

<ol>
  <li>
    <p>bust까지 온 상태의 테메를 복붙한다.</p>

    <ul>
      <li>테메이름을 다음상태는 없으니 <code class="language-plaintext highlighter-rouge">현상태 + 뽑았다</code>정도로 짓는다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319152317273.png" alt="image-20220319152317273"></p>
  </li>
</ol>

<h5 id="참고-원하는-상태까지-업데이트-트리거-메서드를-체이닝으로-호출해서-한번만-할당해놓자">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%9B%90%ED%95%98%EB%8A%94-%EC%83%81%ED%83%9C%EA%B9%8C%EC%A7%80-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC-%EC%B2%B4%EC%9D%B4%EB%8B%9D%EC%9C%BC%EB%A1%9C-%ED%98%B8%EC%B6%9C%ED%95%B4%EC%84%9C-%ED%95%9C%EB%B2%88%EB%A7%8C-%ED%95%A0%EB%8B%B9%ED%95%B4%EB%86%93%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 원하는 상태까지 <code class="language-plaintext highlighter-rouge">업데이트 트리거 메서드를 체이닝</code>으로 호출해서 한번만 할당해놓자</h5>

<h5 id="참고-추상체-응답type의--구현체-상태-업데이트-트리거-메서드draw는-체이닝으로-원하는-상태-만들-때까지-갈-수-있다">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EC%B6%94%EC%83%81%EC%B2%B4-%EC%9D%91%EB%8B%B5type%EC%9D%98--%EA%B5%AC%ED%98%84%EC%B2%B4-%EC%83%81%ED%83%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%8A%B8%EB%A6%AC%EA%B1%B0-%EB%A9%94%EC%84%9C%EB%93%9Cdraw%EB%8A%94-%EC%B2%B4%EC%9D%B4%EB%8B%9D%EC%9C%BC%EB%A1%9C-%EC%9B%90%ED%95%98%EB%8A%94-%EC%83%81%ED%83%9C-%EB%A7%8C%EB%93%A4-%EB%95%8C%EA%B9%8C%EC%A7%80-%EA%B0%88-%EC%88%98-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 추상체 응답Type의  <code class="language-plaintext highlighter-rouge">구현체 상태 업데이트 트리거 메서드(draw)</code>는 <code class="language-plaintext highlighter-rouge">체이닝으로 원하는 상태 만들 때</code>까지 갈 수 있다.</h5>

<ul>
  <li>
    <p>재할당으로 업데이트 하는 순간 -&gt; assert문에서 람다캡처링에 걸려 메서드호출이 안되더라</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319155227262.png" alt="image-20220319155227262"></p>
  </li>
</ul>

<ol>
  <li>
    <p>bust도달까지를 given으로 주고, <strong>추가로 카드를 하나 더 뽑기 전에 -&gt; <code class="language-plaintext highlighter-rouge">추상체 변수에 담기전에, 체이닝으로 트리거 메서드 호출</code>하도록 해주자.</strong></p>

    <ul>
      <li>
        <p><strong>참조변수 재할당시 -&gt; assertThrows의 람다캡처링 때문에 호출이 불가능 한 문제 발생</strong></p>
      </li>
      <li>
        <p>기존</p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span><span class="c1">//2</span>
                           <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">));</span><span class="c1">//10</span>
  <span class="n">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">));</span> <span class="c1">//10 -&gt; 여기까지 bust</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>체이닝으로 한번만 할당된 체로 bust 세팅완료</p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span><span class="c1">//2</span>
                           <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">))</span><span class="c1">//10</span>
      <span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">));</span> <span class="c1">//10 -&gt; 여기까지 bust by 메서드체이닝으로 업데이트</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>테스트시 예외발생안해서 통과안되어야한다. <strong>아직 로직을 안짠 실패하는 코드 상태이므로</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
     <span class="kt">void</span> <span class="nf">BustDraw</span><span class="o">()</span> <span class="o">{</span>
         <span class="c1">// given  : hit -&gt; draw -&gt; 2,10,10 -&gt; bust</span>
         <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">Game</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TWO</span><span class="o">),</span><span class="c1">//2</span>
                 <span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">JACK</span><span class="o">))</span><span class="c1">//10</span>
             <span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">TEN</span><span class="o">));</span> <span class="c1">//10 -&gt; 여기까지 bust by 체이닝</span>
    
         <span class="c1">// 예외발생해야 통과 메서드호출은, when으로 미리 호출하지 않고 -&gt; assert문에서 바로 호출한다.</span>
         <span class="c1">// 2,10,10 bust -&gt; 3 받을 시 예외발생해서 종료되어야한다.</span>
         <span class="n">assertThrows</span><span class="o">(</span><span class="nc">IllegalStateException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
             <span class="o">()</span> <span class="o">-&gt;</span> <span class="n">state</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="nc">Card</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">Suit</span><span class="o">.</span><span class="na">SPADES</span><span class="o">,</span> <span class="nc">Denomination</span><span class="o">.</span><span class="na">THREE</span><span class="o">)));</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="중요-추상체-변수로-받은-구현체-메서드의-로직개발시-추상체변수메서드의-외형이라도-현-구현체-상태에-잘맞게-ctrlf12로-잘타고가서-개발하자">
<a class="anchor" href="#%EC%A4%91%EC%9A%94-%EC%B6%94%EC%83%81%EC%B2%B4-%EB%B3%80%EC%88%98%EB%A1%9C-%EB%B0%9B%EC%9D%80-%EA%B5%AC%ED%98%84%EC%B2%B4-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EB%A1%9C%EC%A7%81%EA%B0%9C%EB%B0%9C%EC%8B%9C-%EC%B6%94%EC%83%81%EC%B2%B4%EB%B3%80%EC%88%98%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%99%B8%ED%98%95%EC%9D%B4%EB%9D%BC%EB%8F%84-%ED%98%84-%EA%B5%AC%ED%98%84%EC%B2%B4-%EC%83%81%ED%83%9C%EC%97%90-%EC%9E%98%EB%A7%9E%EA%B2%8C-ctrlf12%EB%A1%9C-%EC%9E%98%ED%83%80%EA%B3%A0%EA%B0%80%EC%84%9C-%EA%B0%9C%EB%B0%9C%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>중요) 추상체 변수로 받은 <code class="language-plaintext highlighter-rouge">구현체 메서드의 로직개발</code>시 <code class="language-plaintext highlighter-rouge">추상체변수.메서드()의 외형</code>이라도 <code class="language-plaintext highlighter-rouge">현 구현체 상태에 잘맞게 ctrl+f12로 잘타고가서 개발</code>하자</h4>

<ul>
  <li>겉으로 보기엔 추상체 메서드를 개발하는 것 같다
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160038854.png" alt="image-20220319160038854">
</li>
  <li>
<strong>하지만 현 구현체(Bust)를 잘타고 들어가서 개발해야한다.</strong>
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160118814.png" alt="image-20220319160118814">
</li>
</ul>

<ol>
  <li>
    <p>Bust의 .draw()메서드로 가서 예외발생로직을 짜주자.</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160150981.png" alt="image-20220319160150981">
 <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160212076.png" alt="image-20220319160212076"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">B</span> <span class="n">ust</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="nc">State</span> <span class="nf">draw</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Card</span> <span class="n">card</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>테스트가 통과된다(호출시 예외발생으로 종료)</p>
  </li>
</ol>

<h5 id="참고-다이어그램에서-return이-null이거나-thr라면-물음표가-찍혀있게-된다--업데이트-안됨">
<a class="anchor" href="#%EC%B0%B8%EA%B3%A0-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8%EC%97%90%EC%84%9C-return%EC%9D%B4-null%EC%9D%B4%EA%B1%B0%EB%82%98-thr%EB%9D%BC%EB%A9%B4-%EB%AC%BC%EC%9D%8C%ED%91%9C%EA%B0%80-%EC%B0%8D%ED%98%80%EC%9E%88%EA%B2%8C-%EB%90%9C%EB%8B%A4--%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%95%88%EB%90%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>참고) 다이어그램에서, return이 <code class="language-plaintext highlighter-rouge">Null이거나 Thr</code>라면 <code class="language-plaintext highlighter-rouge">물음표?</code>가 찍혀있게 된다. ( 업데이트 안됨)</h5>

<ul>
  <li>
    <p>return을 억지로 new Bust()로 준 상태ㅁ</p>

    <p><img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160401453.png" alt="image-20220319160401453"></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">return null;</code>로 준 상태
  <img src="https://raw.githubusercontent.com/is2js/screenshots/main/image-20220319160447468.png" alt="image-20220319160447468"></p>
  </li>
</ul>


  </div><a class="u-url" href="/java/pattern/state/blackjack/%EC%9A%B0%ED%85%8C%EC%BD%94/tdd/%EA%B0%95%EC%9D%98/2022/03/27/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-3%EB%8B%A8%EA%B3%84-%EB%B8%94%EB%9E%99%EC%9E%AD%EA%B3%BC-%EC%83%81%ED%83%9C%ED%8C%A8%ED%84%B4.html" hidden></a>
</article>