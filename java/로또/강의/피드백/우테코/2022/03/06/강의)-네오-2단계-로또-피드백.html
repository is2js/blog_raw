<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>강의) 네오 2단계 로또 피드백 | 돌범텤놑</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="강의) 네오 2단계 로또 피드백" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="2단계에서 메서드부터 TDD + 리팩토링 일부" />
<meta property="og:description" content="2단계에서 메서드부터 TDD + 리팩토링 일부" />
<link rel="canonical" href="https://blog.chojaeseong.com/java/%EB%A1%9C%EB%98%90/%EA%B0%95%EC%9D%98/%ED%94%BC%EB%93%9C%EB%B0%B1/%EC%9A%B0%ED%85%8C%EC%BD%94/2022/03/06/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-2%EB%8B%A8%EA%B3%84-%EB%A1%9C%EB%98%90-%ED%94%BC%EB%93%9C%EB%B0%B1.html" />
<meta property="og:url" content="https://blog.chojaeseong.com/java/%EB%A1%9C%EB%98%90/%EA%B0%95%EC%9D%98/%ED%94%BC%EB%93%9C%EB%B0%B1/%EC%9A%B0%ED%85%8C%EC%BD%94/2022/03/06/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-2%EB%8B%A8%EA%B3%84-%EB%A1%9C%EB%98%90-%ED%94%BC%EB%93%9C%EB%B0%B1.html" />
<meta property="og:site_name" content="돌범텤놑" />
<meta property="og:image" content="https://blog.chojaeseong.com/images/posts/java.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-06T00:00:00-06:00" />
<script type="application/ld+json">
{"datePublished":"2022-03-06T00:00:00-06:00","url":"https://blog.chojaeseong.com/java/%EB%A1%9C%EB%98%90/%EA%B0%95%EC%9D%98/%ED%94%BC%EB%93%9C%EB%B0%B1/%EC%9A%B0%ED%85%8C%EC%BD%94/2022/03/06/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-2%EB%8B%A8%EA%B3%84-%EB%A1%9C%EB%98%90-%ED%94%BC%EB%93%9C%EB%B0%B1.html","@type":"BlogPosting","image":"https://blog.chojaeseong.com/images/posts/java.png","headline":"강의) 네오 2단계 로또 피드백","dateModified":"2022-03-06T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.chojaeseong.com/java/%EB%A1%9C%EB%98%90/%EA%B0%95%EC%9D%98/%ED%94%BC%EB%93%9C%EB%B0%B1/%EC%9A%B0%ED%85%8C%EC%BD%94/2022/03/06/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-2%EB%8B%A8%EA%B3%84-%EB%A1%9C%EB%98%90-%ED%94%BC%EB%93%9C%EB%B0%B1.html"},"description":"2단계에서 메서드부터 TDD + 리팩토링 일부","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- 폰트추가를 위한 link태그 삽입 -->
  <!-- 폰트1:  기본 spoqa 웹폰트 -->
  <!-- css에서 * {} 다 뒤집어씀. -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <!-- 폰트2:  블로그 제목들 sunflower 웹폰트 -->
  <!-- 쥬피터 등 포스트 내부 글자 h1, h2 제목은 sunflower체 도입 -->
  <link href="//fonts.googleapis.com/css?family=Sunflower:300,500,700" rel="stylesheet"> 

  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.chojaeseong.com/feed.xml" title="돌범텤놑" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">돌범텤놑</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">강의) 네오 2단계 로또 피드백</h1><p class="page-description">2단계에서 메서드부터 TDD + 리팩토링 일부</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-03-06T00:00:00-06:00" itemprop="datePublished">
        Mar 6, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      27 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#java">java</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#로또">로또</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#강의">강의</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#피드백">피드백</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#우테코">우테코</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!-- toc가 먼저 나오므로 h3로 안내하기 -->
    <h3>📜 제목으로 보기</h3><ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#세팅">세팅</a>
<ul>
<li class="toc-entry toc-h4"><a href="#패키지-생성-각종-설정-후">패키지 생성 (각종 설정 후)</a></li>
<li class="toc-entry toc-h4"><a href="#시작점-고르기-game-service">시작점 고르기 (game, service)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#service-method-tdd">Service method TDD</a>
<ul>
<li class="toc-entry toc-h4"><a href="#run테메에서-static한-servicestart메서드로-메인흐름-시작하기">run()테메에서 static한 Service.start()메서드로 메인흐름 시작하기</a></li>
<li class="toc-entry toc-h4"><a href="#요구사항에-따른-정제-rawinput을-controller내-service가-가정-인자로-사용하여---service-흐름-시작하기">요구사항에 따른 [정제 rawInput]을 Controller내 service가 가정 인자로 사용하여 -&gt; Service 흐름 시작하기</a></li>
<li class="toc-entry toc-h4"><a href="#가정인자에-따른-1-case만-1응답하도록-짠-뒤-테스트">가정인자에 따른 1 case만 1응답하도록 짠 뒤 테스트</a></li>
<li class="toc-entry toc-h4"><a href="#테메-복붙후--2case에-맞게-가정인자예상값-바꾼-테스트-메서드-만들기">[테메] 복붙후  2case에 맞게 가정인자+예상값 바꾼 테스트 메서드 만들기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#복붙-전-각-case로-테메명-바꿔주고-난-뒤-복붙하기">복붙 전, 각 case로 테메명 바꿔주고 난 뒤 복붙하기</a></li>
<li class="toc-entry toc-h5"><a href="#복붙후-가정인자예상값을--2case에-맡게-수정">복붙후 가정인자+예상값을  2case에 맡게 수정</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#메서드-복붙후--2case-예상값을-응답하도록-메서드2를-수정">[메서드 복붙]후  2case 예상값을 응답하도록 메서드2를 수정</a></li>
<li class="toc-entry toc-h4"><a href="#기존-테메도-메서드2로-돌아가는지-확인한다">[기존 테메]도 [메서드2]로 돌아가는지 확인한다.</a></li>
<li class="toc-entry toc-h4"><a href="#메서드2를-메서드로-완전히-대체한다">[메서드2]를 [메서드]로 완전히 대체한다.</a></li>
<li class="toc-entry toc-h4"><a href="#2case이후-테메는-복붙후-한번에-처리해보자">[2case이후 테메]는 복붙후 한번에 처리해보자.</a>
<ul>
<li class="toc-entry toc-h5"><a href="#다case테메명--paraemeterizedtest를-통해-가정인자-예상값들을-변경시키며-그에-맞는-응답을-하도록-메서드-원본을-수정해서-통과되도록-만들자">[다case]테메명 + @ParaemeterizedTest를 통해 가정인자+ 예상값들을 변경시키며, 그에 맞는 응답을 하도록 [메서드 원본]을 수정해서 통과되도록 만들자.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#service-메서드-완성후-회고">service 메서드 완성후 회고</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#구현된-service-method의-가정인자-리팩토링">구현된 Service method의 가정인자 리팩토링</a>
<ul>
<li class="toc-entry toc-h4"><a href="#입력인자-예외처리에-의한-도메인-추출-인지">입력인자 예외처리에 의한 도메인 추출 인지</a>
<ul>
<li class="toc-entry toc-h5"><a href="#입력인자-가장-작은-단위의-숫자로또번호가-범위를-벗어나는-경우">[입력인자] [가장 작은 단위]의 숫자(로또번호)가 범위를 벗어나는 경우</a></li>
<li class="toc-entry toc-h5"><a href="#입력인자-가장-작은-단위가-상호작용한-일급에서-중복-문제">[입력인자] 가장 작은 단위가 상호작용한 [일급]에서 중복 문제</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#service메서드-사용시-발견된-값들의-예외처리---개별-도메인에서-테스트하면서-처리되어야함">Service.메서드() 사용시 발견된 값들의 예외처리 -&gt; 개별 도메인에서 테스트하면서 처리되어야함.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#메서드인자-리팩토링1-최소단위-값-검증-때문에-포장하도록-service메서드-수정">메서드인자 리팩토링1) 최소단위 값 검증 때문에 포장하도록 Service.메서드() 수정</a>
<ul>
<li class="toc-entry toc-h4"><a href="#service메서드--최소단위-값-1개만-new-생성자로-싸서-class와-classtest를-정의">Service.메서드()  [최소단위 값] 1개만 new 생성자()로 싸서, Class와 ClassTest를 정의</a></li>
<li class="toc-entry toc-h4"><a href="#servicemethod의-포장된-입력인자버전의-메소드를-만들기-위해-메소드1복붙">Service.method()의 [포장]된 [입력인자]버전의 메소드를 만들기 위해 메소드1복붙</a></li>
<li class="toc-entry toc-h4"><a href="#메소드-파라미터-정의를-원시형---포장형으로-바꿔주기">메소드 파라미터 정의를 원시형 -&gt; 포장형으로 바꿔주기</a></li>
<li class="toc-entry toc-h4"><a href="#포장용-service메소드에서-사용되는-값들-모두-포장해서-전달해주기">포장용 Service메소드에서 사용되는 값들 모두 포장해서 전달해주기</a></li>
<li class="toc-entry toc-h4"><a href="#exception-나는-것을-의도하여-포장했다면-에러가-나야한다-assertthat---assertthatthrownby의-테스트-코드-바꾸기">Exception 나는 것을 의도하여 포장했다면 에러가 나야한다 assertThat -&gt; assertThatThrownBy()의 테스트 코드 바꾸기</a></li>
<li class="toc-entry toc-h4"><a href="#포장한-도메인-생성자에-예외처리-검증-넣어주기">포장한 도메인 생성자에 예외처리 검증 넣어주기</a></li>
<li class="toc-entry toc-h4"><a href="#servicemethod에서의-검증이-끝났으면-단일-도메인에서-본격-검증하러-classtest로-직접가서-경계값-테스트하기">[Service.method()에서의 검증]이 끝났으면 [단일 도메인에서 본격 검증]하러 classTest로 직접가서 [경계값 테스트]하기</a></li>
<li class="toc-entry toc-h4"><a href="#예외-발생을-위한-포장-회고">예외 발생을 위한 포장 회고</a>
<ul>
<li class="toc-entry toc-h5"><a href="#포장-입력인자-메소드-사용시-애로사항">포장 입력인자 메소드 사용시 애로사항</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#정제된-rawinput을-받던-테매들이-사용하던-servicemethod-내부-개조로-한번에-포장해서-포장인자-메서드-호출해주기">[정제된 rawInput을 받던 테매들이 사용하던 service.method()] 내부 개조로 한번에 포장해서 포장인자 메서드 호출해주기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#기존에-작성된-정제된-rawinput을-받던-메소드의-내용물은-삭제">기존에 작성된[ 정제된 rawInput을 받던 메소드]의 내용물은 삭제</a></li>
<li class="toc-entry toc-h5"><a href="#원시값-인자-네이밍---내부stream으로-한번에-포장---return-포장-인자-메서드-호출">원시값 인자 네이밍 -&gt; 내부stream으로 한번에 포장 -&gt; return 포장 인자 메서드() 호출</a></li>
<li class="toc-entry toc-h5"><a href="#의의-service를-사용하는-client를-편안하게-해줘야한다내부로-가기전에-포장해서-호출해주는-놈이-있다면--client는-원시값도-입력받아-도메인은-모르게-해주는게-낫다">의의: Service를 사용하는 client를 편안하게 해줘야한다.(내부로 가기전에 포장해서 호출해주는 놈이 있다면) = client는 원시값도 입력받아 도메인은 모르게 해주는게 낫다</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#메서드-인자-리팩토링2-최소단위-묶음의-예외-처리---일급-포장하여-검증">메서드 인자 리팩토링2) 최소단위 [묶음]의 예외 처리 -&gt; 일급 포장하여 검증</a>
<ul>
<li class="toc-entry toc-h4"><a href="#초과된-포장-최소단위의-갯수-문제---포장인자-메소드를-가진-테매를-복붙하여-exception-발생시키기">초과된 [포장 최소단위의 갯수 문제] -&gt; [포장인자 메소드]를 가진 [테매]를 복붙하여 Exception 발생시키기</a></li>
<li class="toc-entry toc-h4"><a href="#객체의-갯수or중복-등-복수-검증을-위한-list도메인을-포장하는-일급포장의-시작">[객체의 갯수or중복 등 복수 검증]을 위한 List&lt;도메인&gt;을 포장하는 일급포장의 시작</a>
<ul>
<li class="toc-entry toc-h5"><a href="#복수검증-문제가-발생하는-곳에가서-new-일급부터-시작">복수검증 문제가 발생하는 곳에가서 new 일급()부터 시작</a></li>
<li class="toc-entry toc-h5"><a href="#들어오는-포장인자list단일-메서드-복붙-백업후---일급인자로-받도록-method-파라미터-정의부-개조">들어오는 포장인자(List&lt;단일&gt;) 메서드 복붙 백업후 -&gt; 일급인자로 받도록 method 파라미터 정의부 개조</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#일급-인자를-받는-servicemethod가-완성되었으면-일급이라는-도메인-내부-생성자에-단일list간-복수검증을--넣어준다">[일급 인자를 받는 Service.method()]가 완성되었으면, [일급이라는 도메인 내부 생성자에 단일List간 복수검증]을  넣어준다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#포장단일에-포장일급-후-client가-너무-불편---client를-배려해줘라">포장(단일)에 포장(일급) 후 client가 너무 불편? -&gt; Client를 배려해줘라.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#일급-생성자가-받는-new일급list단일의-인자를----단일-가변인자로-받고-내부에서-listof대신-모아주는-포장용-생성자-추가">일급 생성자가 받는 new일급(List&lt;단일&gt;)의 인자를 -&gt;  단일... 가변인자로 받고 내부에서 List.Of대신 모아주는 포장용 생성자 추가</a>
<ul>
<li class="toc-entry toc-h5"><a href="#client-일급-생성자에-들어가는-listof-혹은-setof-제거해주는---메서드내부-가변인자알아서-배열---this--arraysstreamcollectcollectorstolist-or-toset--">[Client] 일급 생성자에 들어가는 List.of() 혹은 Set.of() 제거해주는 -&gt; [메서드내부] 가변인자(알아서 배열) -&gt; this + Arrays.stream().collect(Collectors.toList or toSet ())) )</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#가변인자listof제거--단일객체생성자-제거의-일급-내부에-2번의-포장-생성자도-추가해서-client를-편하게-해주자">가변인자(List.of제거) + 단일객체생성자 제거의 일급 내부에 2번의 포장 생성자도 추가해서 client를 편하게 해주자.</a></li>
<li class="toc-entry toc-h4"><a href="#my-메서드의-인자만-포장후-호출용-메서드-or-일급-등의-생성자를-인자만-다르게-정의하고-내부는-포장해서-client를-편하게-만들어줬다">my) 메서드의 [인자만 포장후 호출용 메서드] or 일급 등의 생성자를 [인자만 다르게 정의하고 내부는 포장해서] client를 편하게 만들어줬다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#일급-테스트는-servicemethod에서-완성된-가변인자생성자-시리즈가-완성된-후에-해주자">일급 테스트는 Service.Method()에서 완성된 [가변인자생성자] 시리즈가 완성된 후에 해주자.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#servicemethod에서의-단일일급-퉁치는-검증--일급의-포장용-가변인자-생성자--끝났으면-단일-도메인test에서-본격-경계값-테스트하기">[Service.method()에서의 단일/일급 퉁치는 검증] + [일급의 포장용 가변인자 생성자]  끝났으면 [단일 도메인Test]에서 본격 [경계값 테스트]하기</a></li>
<li class="toc-entry toc-h4"><a href="#service메서드의-이름-수정">Service.메서드의 이름 수정</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#일급으로-바꿨더니-서비스-메서드-내부에-도메인-로직이---메서드-분리로-역할-분리">일급으로 바꿨더니, 서비스 메서드 내부에 도메인 로직이? -&gt; 메서드 분리로 역할 분리</a>
<ul>
<li class="toc-entry toc-h4"><a href="#일급vs일급-or-일급vs단일의-로직도메인-로직-특히-getter써놓은부분이-servicemethod내부에-있는지-확인한다-getter가-있으면-의심해본다">일급vs일급 or 일급vs단일의 로직(도메인 로직-특히 getter써놓은부분)이 Service.method()내부에 있는지 확인한다. getter가 있으면 의심해본다.</a></li>
<li class="toc-entry toc-h4"><a href="#서비스내-도메인-로직을-도메인-내부-메서드로-옮긴다">서비스내 도메인 로직을 도메인 내부 메서드로 옮긴다.</a></li>
<li class="toc-entry toc-h4"><a href="#포장과정에서-빠르게-처리하여-생긴-포장getter메서드가-서비스메서드내-보인다면-도메인로직으로-내부-value메서드가-되도록넘겨준다">포장과정에서 빠르게 처리하여 생긴 포장.getter.메서드()가 서비스메서드내 보인다면, 도메인로직으로 (내부 value.메서드()가 되도록)넘겨준다.</a></li>
<li class="toc-entry toc-h4"><a href="#일급과-단일의-메서드가-정의됬다면---일급vs일급에서도-사용될-가능성이-있다">일급과 단일의 메서드가 정의됬다면 -&gt; 일급vs일급에서도 사용될 가능성이 있다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#응답값도-포장할-수-있다-만약-제한된-종류--if분기마다-달라지는-응답값라면-enum응답-포장후--응답에-필요한-input들로-정펙매-를-호출한-뒤-내부로-분기-옮겨-응답한다-이후-if분기를-처리해줄--input-필드들---응답값을-매핑한다">응답값도 포장할 수 있다. 만약, 제한된 종류 + if분기마다 달라지는 응답값라면 ENUM응답 포장후  응답에 필요한 input들로 정펙매 를 호출한 뒤 내부로 분기 옮겨 응답한다. 이후 if분기를 처리해줄 &lt; input-&gt;필드들 - 응답값&gt;을 매핑한다.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#제한된-종류의-응답-값포장은-enum을-활용한다--메서드-응답을-빨간줄로-바꿔-생성하자">제한된 종류의 응답 값포장은 Enum을 활용한다.  메서드 응답을 빨간줄로 바꿔 생성하자.</a></li>
<li class="toc-entry toc-h4"><a href="#응답에-대한-분기로직을-어떻게-응답class응답enum으로-넘길까">응답에 대한 분기로직을 어떻게 응답class/응답Enum으로 넘길까?</a>
<ul>
<li class="toc-entry toc-h5"><a href="#메서드-응답부에서-원하는-포장된-응답값인-enum객체을-뽑아-응답해주는--return-enum정펙매of-완성하기">메서드 응답부에서 원하는 포장된 응답값인 Enum객체을 뽑아 응답해주는  return Enum.정펙매of (,)완성하기</a></li>
<li class="toc-entry toc-h5"><a href="#값-응답-로직을----포장응답값-정펙매로-잘라내서-처리하기">값 응답 로직을 -&gt;  포장응답값 정펙매로 잘라내서 처리하기</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#정팩메-내부로-옮긴-분기에-대해-응답값들을-enum객체로-수정해주기---없는-값0-none에-대해서도-outnone객체-만들어서-응답해주기">정팩메 내부로 옮긴 분기에 대해, 응답[값]들을 [Enum객체]로 수정해주기 -&gt; 없는 값(0, None)에 대해서도 OUT,NONE객체 만들어서 응답해주기</a></li>
<li class="toc-entry toc-h4"><a href="#메서드-포장된-응답-테스트-작성하기">메서드 [포장된 응답] 테스트 작성하기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#여러분기므로-1case에-대한---1예상값-마다-테매를-작성해야한다">여러분기므로 1case에 대한 -&gt; 1예상값 마다 테매를 작성해야한다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#if분기를-enum-매핑으로-제거하기">if분기를 enum 매핑으로 제거하기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#정팩메-input으로-들어올-데이터들-中--1개를-골라-매핑-예정인-enum객체의-필드로-넣어준다">정팩메 input으로 들어올 데이터들 中  1개를 골라 (매핑 예정인) Enum객체의 필드로 넣어준다.</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#enum정팩메-내-제한된종류의-모든-if분기를--valuesstream--filter-with-input-vs-매핑field로-분기-없애기">Enum정팩메 내 [제한된종류의 모든 if분기]를  values().stream + filter with input vs 매핑field로 분기 없애기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#특수한-경우-정팩매에서-enum매핑값-뽑기도-전에--early-return해준다">특수한 경우, 정팩매에서 ENUM매핑값 뽑기도 전에,  early return해준다.</a></li>
<li class="toc-entry toc-h5"><a href="#enum내에서-values는-enum객체배열을-응답하며-거기에-배열stream자동완성-사용하여-enumstream-만들어-객체전체를-돌리기">Enum내에서 values()는 Enum객체배열을 응답하며 거기에 배열.stream자동완성 사용하여 EnumStream 만들어 객체전체를 돌리기</a></li>
<li class="toc-entry toc-h5"><a href="#제한된-종류의-if분기를-valuesstream-for---filterit----input-vs-매핑field-비교-대체하기">제한된 종류의 if분기를 values().stream (for)  + filter(it -&gt;  input vs 매핑field 비교) 대체하기</a></li>
<li class="toc-entry toc-h5"><a href="#enum-sense-각-enum객체끝은-마지막도-콤마-그-다음라인----findany후-orelse-none객체-">enum sense: 각 enum객체끝은 마지막도 콤마(,) 그 다음라인(;)  +  .findAny()후 .orElse( NONE객체 )</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#bi비아이-predicate--로-input된-2개-값을-다-사용하는-1개의-람다식필드--filter속-예비-조건식testab로-실행을-만들어----enum의-1-필드-매핑에-사용되는-type을-함수형인터페이스로-사용하여---정펙매-내부-들어오는-2개값-모두-사용하는-enum-만들기">Bi(비.아이.) Predicate&lt; , &gt;로 input된 2개 값을 다 사용하는 1개의 람다식필드 &amp;&amp; filter속 예비 조건식(.test(a,b)로 실행)을 만들어 -&gt;  [enum의 1 필드 매핑]에 사용되는 Type을 함수형인터페이스로 사용하여 -&gt; 정펙매 내부 들어오는 2개값 모두 사용하는 enum 만들기</a>
<ul>
<li class="toc-entry toc-h5"><a href="#아직-bipredicate-적용안한-기존-코드-상금도-매핑-안된-상태">아직 BiPredicate 적용안한 기존 코드 (상금도 매핑 안된 상태)</a></li>
<li class="toc-entry toc-h5"><a href="#enum필드에-2인자-람다식인-bipredicate를-넣어서-생성하기">Enum필드에 2인자 람다식인 BiPredicate를 넣어서 생성하기</a></li>
<li class="toc-entry toc-h5"><a href="#아쉽게도-bipredicate는-직접-필드입력---private-final-필드-변수-생성---생산자-자동완성로-가야한다-원래는-예제---생산자---빨간줄-this필드-생성">아쉽게도 BiPredicate는 직접 필드입력 -&gt; private final 필드 변수 생성 -&gt; 생산자 자동완성로 가야한다. (원래는 예제 -&gt; 생산자 -&gt; 빨간줄 this.필드 생성)</a></li>
<li class="toc-entry toc-h5"><a href="#valuesstream--filter분기에서-test--로-정펙매-인자를-받아-조건식-실행">values().stream + filter분기에서 .test( , )로 정펙매 인자를 받아 조건식 실행</a></li>
</ul>
</li>
<li class="toc-entry toc-h4"><a href="#응답값의-포장리팩토링이-다-끝났으면-자체-도메인testenum은-정펙매-테스트">응답값의 포장(리팩토링)이 다 끝났으면, 자체 도메인Test(Enum은 정펙매 테스트)</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#리팩토링가변변수-0에-조건만족시-갯수-누적">리팩토링(가변변수 0에 조건만족시 갯수 누적)</a>
<ul>
<li class="toc-entry toc-h4"><a href="#직전까지의합-0가변변수에-조건-만족시-add-1---stream--filter--count">직전까지의합 0가변변수에 조건 만족시 add 1 -&gt; stream + filter + count</a></li>
<li class="toc-entry toc-h4"><a href="#stream없이-forif-에서-if를-메서드분리---누적변수없이도-응답-가능갯수니까-return-1-or-0">stream없이 for+if 에서 if를 메서드분리 -&gt; 누적변수없이도 응답 가능=갯수니까 return 1 or 0;</a>
<ul>
<li class="toc-entry toc-h5"><a href="#for문-내부-if는-메서드-추출로-통채로-빼기---if가-바깥쪽-가변변수-조작한다면-return--메서드추출로-받아진다">for문 내부 if는 메서드 추출로 통채로 빼기 -&gt; if가 바깥쪽 가변변수 조작한다면? return = 메서드추출()로 받아진다.</a></li>
<li class="toc-entry toc-h5"><a href="#메서드추출로-튀어나온-내부에서-사용되던-바깥선언의-가변변수는-무조건--가변--메서드형태다">메서드추출로 튀어나온 (내부에서 사용되던 바깥선언의) 가변변수는 무조건  가변 = 메서드()형태다</a></li>
<li class="toc-entry toc-h5"><a href="#갯수-증가의-가변가변1-은-메서드추출시-파라미터지역변수로-안가도-return-1-or-0만-해주면-되므로-추출메서드에서-파라미터-삭제---이후-가변--이-아닌-가변--으로-바꿔주면-된다">갯수 증가의 가변++/가변+=1 은 메서드추출시 파라미터(=지역변수)로 안가도 return 1 or 0만 해주면 되므로 [추출메서드에서 파라미터 삭제] -&gt; 이후 가변 = 이 아닌 가변 += 으로 바꿔주면 된다.</a></li>
</ul>
</li>
</ul>
</li>
</ul><h3 id="세팅">
<a class="anchor" href="#%EC%84%B8%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>세팅</h3>

<h4 id="패키지-생성-각종-설정-후">
<a class="anchor" href="#%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%83%9D%EC%84%B1-%EA%B0%81%EC%A2%85-%EC%84%A4%EC%A0%95-%ED%9B%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>패키지 생성 (각종 설정 후)</h4>

<ol>
  <li>
    <p>프로젝트 생성 했다면</p>

    <ol>
      <li>
<code class="language-plaintext highlighter-rouge">main&gt;java</code>와</li>
      <li>
<code class="language-plaintext highlighter-rouge">test&gt;java</code> 밑에 <strong>패키지 생성(<code class="language-plaintext highlighter-rouge">lotto</code>)부터 해주기</strong>
</li>
    </ol>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304161611485.png" alt="image-20220304161611485">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304161630257.png" alt="image-20220304161630257"></p>
  </li>
</ol>

<h4 id="시작점-고르기-game-service">
<a class="anchor" href="#%EC%8B%9C%EC%9E%91%EC%A0%90-%EA%B3%A0%EB%A5%B4%EA%B8%B0-game-service" aria-hidden="true"><span class="octicon octicon-link"></span></a>시작점 고르기 (game, service)</h4>

<ol>
  <li>
<strong>시작점 찾기</strong>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">로또번호</code>부터 구현할 수 있느냐?</li>
      <li>
<code class="language-plaintext highlighter-rouge">로또</code>부터?</li>
      <li>
<strong>정제된 rawInput을 받은 <code class="language-plaintext highlighter-rouge">Game, Service</code>부터 구현해서 <code class="language-plaintext highlighter-rouge">객체/도메인</code>도출을 천천히</strong>
        <ul>
          <li>처음부터 객체 도출은 어려울 수 있다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="service-method-tdd">
<a class="anchor" href="#service-method-tdd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service method TDD</h3>

<h4 id="run테메에서-static한-servicestart메서드로-메인흐름-시작하기">
<a class="anchor" href="#run%ED%85%8C%EB%A9%94%EC%97%90%EC%84%9C-static%ED%95%9C-servicestart%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EB%A9%94%EC%9D%B8%ED%9D%90%EB%A6%84-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>run()테메에서 static한 Service.start()메서드로 메인흐름 시작하기</h4>

<ol>
  <li>
    <p>Lotto<code class="language-plaintext highlighter-rouge">ServiceTest</code>를 만들고</p>
  </li>
  <li>
    <p><strong>테스트 메소드명</strong>도 편하게 <code class="language-plaintext highlighter-rouge">run</code>()</p>
  </li>
  <li>
    <p>Service클래스의 <strong>static메소드명</strong>도 <del>run()</del> <code class="language-plaintext highlighter-rouge">start</code>()로 만들면서 <strong>시작</strong>한다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304162256650.png" alt="image-20220304162256650"></p>
  </li>
</ol>

<h4 id="요구사항에-따른-정제-rawinput을-controller내-service가-가정-인자로-사용하여---service-흐름-시작하기">
<a class="anchor" href="#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD%EC%97%90-%EB%94%B0%EB%A5%B8-%EC%A0%95%EC%A0%9C-rawinput%EC%9D%84-controller%EB%82%B4-service%EA%B0%80-%EA%B0%80%EC%A0%95-%EC%9D%B8%EC%9E%90%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC---service-%ED%9D%90%EB%A6%84-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>요구사항에 따른 [정제 rawInput]을 Controller내 service가 가정 인자로 사용하여 -&gt; Service 흐름 시작하기</h4>

<ul>
  <li>
    <p>테스트해야하므로 <strong>메인흐름을 가진 메서드는 controller로 <code class="language-plaintext highlighter-rouge">응답</code>까지 해줘야한다.</strong></p>

    <ul>
      <li>service는 상태를 안가지므로 객체 - 예상객체 비교X, 
  응답값 - 예상값으로 비교해야한다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoServiceTest</span> <span class="o">{</span>
      <span class="nd">@Test</span>
      <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
          <span class="c1">//사용자의 로또번호</span>
          <span class="c1">//당첨번호</span>
          <span class="c1">// 보너스번호</span>
          <span class="c1">// -&gt; 당첨 등수 응답</span>
          <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>로직에 필요한 <strong>인자(정제된 input)를 가상으로 넣어주기</strong>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
      <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
      <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
      <span class="mi">7</span>
  <span class="o">);</span>
</code></pre></div>    </div>

    <ul>
      <li>로직결과로 응답까지 해줘야 테스트가 된다.</li>
    </ul>
  </li>
</ul>

<h4 id="가정인자에-따른-1-case만-1응답하도록-짠-뒤-테스트">
<a class="anchor" href="#%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90%EC%97%90-%EB%94%B0%EB%A5%B8-1-case%EB%A7%8C-1%EC%9D%91%EB%8B%B5%ED%95%98%EB%8F%84%EB%A1%9D-%EC%A7%A0-%EB%92%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>가정인자에 따른 1 case만 1응답하도록 짠 뒤 테스트</h4>

<p><code class="language-plaintext highlighter-rouge">가정인자( 6개 일치) = 1case를 넣어줬으니 -&gt; 1응답을  반환</code>하도록 일단 1 case만 짠다.</p>

<ol>
  <li>
    <p><strong>테스트할 메서드는 <code class="language-plaintext highlighter-rouge">처음에는 무조건 응답</code>되도록 void를 수정한다. 어떤 형으로 응답할지를 생각해서 <code class="language-plaintext highlighter-rouge">정의시 기입</code>한다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304170059584.png" alt="image-20220304170059584"></p>
  </li>
  <li>
    <p><strong>3개이상의 <code class="language-plaintext highlighter-rouge">긴 인자는 콤마 다음부터 내려</code>서 이쁘게 정리해주자.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">integers</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">integers1</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="o">}</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">integers</span><span class="o">,</span> 
                              <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">integers1</span><span class="o">,</span> 
                              <span class="kd">final</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="o">}</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p>메서드 <code class="language-plaintext highlighter-rouge">파라미터 이름을 바꿔</code>준다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304170312486.png" alt="image-20220304170312486"></p>
  </li>
  <li>
    <p><strong>아직 도메인을 몰라서 클래스로 분리 못하겠다면, 메인 로직을 rawInput 가지고 짠다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
 <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>1case에 대한 1응답을 해주는 로직을 완성한다.</p>

    <ul>
      <li>if가 포함된 1응답이라면, <code class="language-plaintext highlighter-rouge">return 0; 같은 default 응답</code>도 넣어준다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
     <span class="c1">// 몇개 일치하는지 돌면서 누적시켜야한다</span>
     <span class="c1">// - 돌아가야하는 놈을 우측 파라미터+for문에</span>
     <span class="c1">// - 전체를 가지고 contains 확인해야하는 놈을 좌변에</span>
     <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
     <span class="k">for</span> <span class="o">(</span><span class="nc">Integer</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">userLotto</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span>
             <span class="nf">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
             <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
         <span class="o">}</span>
     <span class="o">}</span>
    
     <span class="c1">// 일단 가정 인자에 따른 1 case통과 코드만 짠다.</span>
     <span class="c1">// 나중에는 matchCount 갯수에 따라 싹다 분기해서 응답해야한다.(리팩 대상)</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
     <span class="o">}</span>
     <span class="k">return</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// 1case 응답인데, if를 포함해서 응답했다. -&gt; 1외 default return 0;도 해주자.</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>1응답이 나오는지 test한다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoServiceTest</span> <span class="o">{</span>
     <span class="nd">@Test</span>
     <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
         <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
             <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
             <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
             <span class="mi">7</span>
         <span class="o">);</span>
    
         <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
     <span class="o">}</span>
 <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="테메-복붙후--2case에-맞게-가정인자예상값-바꾼-테스트-메서드-만들기">
<a class="anchor" href="#%ED%85%8C%EB%A9%94-%EB%B3%B5%EB%B6%99%ED%9B%84--2case%EC%97%90-%EB%A7%9E%EA%B2%8C-%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90%EC%98%88%EC%83%81%EA%B0%92-%EB%B0%94%EA%BE%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[테메] 복붙후  2case에 맞게 가정인자+예상값 바꾼 테스트 메서드 만들기</h4>

<h5 id="복붙-전-각-case로-테메명-바꿔주고-난-뒤-복붙하기">
<a class="anchor" href="#%EB%B3%B5%EB%B6%99-%EC%A0%84-%EA%B0%81-case%EB%A1%9C-%ED%85%8C%EB%A9%94%EB%AA%85-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B3%A0-%EB%82%9C-%EB%92%A4-%EB%B3%B5%EB%B6%99%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>복붙 전, 각 case로 테메명 바꿔주고 난 뒤 복붙하기</h5>

<ul>
  <li>
    <p>현재 <code class="language-plaintext highlighter-rouge">run</code>()으로 되어있는 <strong>테스트메서드명</strong>을 <strong>case를 반영해서 바꿔주고 난 뒤 복붙</strong></p>

    <ul>
      <li>복붙하는 이유: 기존 테스트가 계속 돌아가도록 하기 위함.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="c1">//void run() {</span>
  <span class="kt">void</span> <span class="nf">rank1</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
          <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
          <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
          <span class="mi">7</span>
      <span class="o">);</span>
    
      <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="복붙후-가정인자예상값을--2case에-맡게-수정">
<a class="anchor" href="#%EB%B3%B5%EB%B6%99%ED%9B%84-%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90%EC%98%88%EC%83%81%EA%B0%92%EC%9D%84--2case%EC%97%90-%EB%A7%A1%EA%B2%8C-%EC%88%98%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>복붙후 가정인자+예상값을  2case에 맡게 수정</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">1등 반환case</code> 1개 이후에는 -&gt; <strong>복붙후 <code class="language-plaintext highlighter-rouge">가정인자를 바꾼 case변경</code>을 하면서 새로 짜야한다.</strong></p>

    <ol>
      <li>테스트메서드 명을 case에 맡게 복사해준다.</li>
      <li>가정인자 및 예상값을 -&gt; 2case에 맞게 수정해준다.</li>
    </ol>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">rank2</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="c1">// 2등에 맞게 가정인자 수정</span>
         <span class="mi">6</span> <span class="c1">// 2등에 맞게 가정인자 수정</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 2등에 맞게 예상값 수정</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="메서드-복붙후--2case-예상값을-응답하도록-메서드2를-수정">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C-%EB%B3%B5%EB%B6%99%ED%9B%84--2case-%EC%98%88%EC%83%81%EA%B0%92%EC%9D%84-%EC%9D%91%EB%8B%B5%ED%95%98%EB%8F%84%EB%A1%9D-%EB%A9%94%EC%84%9C%EB%93%9C2%EB%A5%BC-%EC%88%98%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>[메서드 복붙]후  2case 예상값을 응답하도록 메서드2를 수정</h4>

<ol>
  <li>
    <p><strong>메서드2로 복붙</strong>한다.</p>

    <ul>
      <li>단축키 <code class="language-plaintext highlighter-rouge">shift + alt + →</code>  및 <code class="language-plaintext highlighter-rouge">↓</code>를 활용해서 복사하고</li>
      <li>단축니 <code class="language-plaintext highlighter-rouge">shift + alt + F</code>로 정렬해서</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start2</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>메서드2가 case2예상값을 만들도록 짠다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start2</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
     <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
     <span class="k">for</span> <span class="o">(</span><span class="nc">Integer</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">userLotto</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
             <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
         <span class="o">}</span>
     <span class="o">}</span>
    
     <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
     <span class="o">}</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">))</span> <span class="o">{</span>
         <span class="k">return</span> <span class="mi">2</span><span class="o">;</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>테메2가 <code class="language-plaintext highlighter-rouge">메서드2를 사용하도록 수정한 뒤 테스트</code>한다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">rank2</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start2</span><span class="o">(</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="기존-테메도-메서드2로-돌아가는지-확인한다">
<a class="anchor" href="#%EA%B8%B0%EC%A1%B4-%ED%85%8C%EB%A9%94%EB%8F%84-%EB%A9%94%EC%84%9C%EB%93%9C2%EB%A1%9C-%EB%8F%8C%EC%95%84%EA%B0%80%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[기존 테메]도 [메서드2]로 돌아가는지 확인한다.</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">rank1</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start2</span><span class="o">(</span>
</code></pre></div></div>

<h4 id="메서드2를-메서드로-완전히-대체한다">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C2%EB%A5%BC-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%99%84%EC%A0%84%ED%9E%88-%EB%8C%80%EC%B2%B4%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[메서드2]를 [메서드]로 완전히 대체한다.</h4>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">기존 메서드</code> 회색 비활성화된 메서드를 안전삭제(<code class="language-plaintext highlighter-rouge">alt+del</code>)한다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304174635847.png" alt="image-20220304174635847">
</li>
  <li>
<code class="language-plaintext highlighter-rouge">메서드2 -&gt; 메서드</code>(F2 2번)로 이름을 바꿔서 완전히 대체한다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304174650074.png" alt="image-20220304174650074">
</li>
</ol>

<h4 id="2case이후-테메는-복붙후-한번에-처리해보자">
<a class="anchor" href="#2case%EC%9D%B4%ED%9B%84-%ED%85%8C%EB%A9%94%EB%8A%94-%EB%B3%B5%EB%B6%99%ED%9B%84-%ED%95%9C%EB%B2%88%EC%97%90-%EC%B2%98%EB%A6%AC%ED%95%B4%EB%B3%B4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[2case이후 테메]는 복붙후 한번에 처리해보자.</h4>

<h5 id="다case테메명--paraemeterizedtest를-통해-가정인자-예상값들을-변경시키며-그에-맞는-응답을-하도록-메서드-원본을-수정해서-통과되도록-만들자">
<a class="anchor" href="#%EB%8B%A4case%ED%85%8C%EB%A9%94%EB%AA%85--paraemeterizedtest%EB%A5%BC-%ED%86%B5%ED%95%B4-%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90-%EC%98%88%EC%83%81%EA%B0%92%EB%93%A4%EC%9D%84-%EB%B3%80%EA%B2%BD%EC%8B%9C%ED%82%A4%EB%A9%B0-%EA%B7%B8%EC%97%90-%EB%A7%9E%EB%8A%94-%EC%9D%91%EB%8B%B5%EC%9D%84-%ED%95%98%EB%8F%84%EB%A1%9D-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9B%90%EB%B3%B8%EC%9D%84-%EC%88%98%EC%A0%95%ED%95%B4%EC%84%9C-%ED%86%B5%EA%B3%BC%EB%90%98%EB%8F%84%EB%A1%9D-%EB%A7%8C%EB%93%A4%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>[다case]테메명 + @ParaemeterizedTest를 통해 가정인자+ 예상값들을 변경시키며, 그에 맞는 응답을 하도록 [메서드 원본]을 수정해서 통과되도록 만들자.</h5>

<ol>
  <li>
    <p>가정인자가 2개, 예상값 1개, <strong>총 3개 인자가 case에 따라 바뀐다.</strong></p>

    <ol>
      <li><code class="language-plaintext highlighter-rouge">List.of()</code></li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">bonusNumber</code></p>
      </li>
      <li><code class="language-plaintext highlighter-rouge">expected</code></li>
    </ol>

    <p><strong>@CsvSource 혹은 @MethodSource를 통해 여러 파라미터를 받아야한다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@ParameterizedTest</span>
 <span class="nd">@MethodSource</span><span class="o">(</span><span class="s">"provideWinningLottoAndExpected"</span><span class="o">)</span>
 <span class="kt">void</span> <span class="nf">rank3_to_5</span><span class="o">(){</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Arguments</span><span class="o">&gt;</span> <span class="nf">provideWinningLottoAndExpected</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
         <span class="nc">Arguments</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span>  <span class="c1">// 3등</span>
         <span class="nc">Arguments</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">),</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span> <span class="o">,</span>  <span class="c1">// 4등</span>
         <span class="nc">Arguments</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">),</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>  <span class="c1">// 5등</span>
     <span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@ParameterizedTest</span>
 <span class="nd">@MethodSource</span><span class="o">(</span><span class="s">"provideWinningLottoAndExpected"</span><span class="o">)</span>
 <span class="kt">void</span> <span class="nf">rank3_to_5</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">expected</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// 파라미터 추가 + 가정인자/예상값 다 변경 -&gt; 테스트시 에러나야 정상</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
         <span class="n">winningLotto</span><span class="o">,</span>
         <span class="n">bonusNumber</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expected</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>바뀐 가정인자 + 예상값에 대응하도록 <strong>원본 메서드를 1,2case에 비추어 수정</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
 <span class="o">}</span>
 <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">))</span> <span class="o">{</span>
     <span class="k">return</span> <span class="mi">2</span><span class="o">;</span>
 <span class="o">}</span>
 <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="mi">3</span><span class="o">;</span>
 <span class="o">}</span>
 <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">4</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="mi">4</span><span class="o">;</span>
 <span class="o">}</span>
 <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="mi">5</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="service-메서드-완성후-회고">
<a class="anchor" href="#service-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%99%84%EC%84%B1%ED%9B%84-%ED%9A%8C%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>service 메서드 완성후 회고</h4>

<ul>
  <li>여기까지 통과시키고 난 뒤, <strong>가정인자로 들어오는 놈들에 대해 도메인 지식이 쌓였을 것이다.</strong>
    <ul>
      <li>가정인자로 들어오는  List에 대해 <code class="language-plaintext highlighter-rouge">개별Integer</code>는  개별 객체  <strong><code class="language-plaintext highlighter-rouge">LottoNumber</code>라는 객체로도메인 분리</strong>할 수 있겠다.</li>
      <li>
<code class="language-plaintext highlighter-rouge">LottoNumber</code> List 6개를 모아서 <strong><code class="language-plaintext highlighter-rouge">Lotto</code>라는 객체로 도메인 분리</strong>모아볼 수 있겠다.</li>
    </ul>
  </li>
</ul>

<h3 id="구현된-service-method의-가정인자-리팩토링">
<a class="anchor" href="#%EA%B5%AC%ED%98%84%EB%90%9C-service-method%EC%9D%98-%EA%B0%80%EC%A0%95%EC%9D%B8%EC%9E%90-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>구현된 Service method의 가정인자 리팩토링</h3>

<ul>
  <li>
    <p>도메인 지식을 높이기 위해서, <strong><code class="language-plaintext highlighter-rouge">가정</code>하고 넣어주는 <code class="language-plaintext highlighter-rouge">인자</code>가 <code class="language-plaintext highlighter-rouge">rawInput인체</code>로 빨리 돌아가기만 하는 코드를 짠 상태다.</strong></p>
  </li>
  <li>
    <p><strong>유지보수, 계속 봐야하는 코드라면 <code class="language-plaintext highlighter-rouge">리팩토링</code>해야한다.</strong></p>
  </li>
</ul>

<h4 id="입력인자-예외처리에-의한-도메인-추출-인지">
<a class="anchor" href="#%EC%9E%85%EB%A0%A5%EC%9D%B8%EC%9E%90-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC%EC%97%90-%EC%9D%98%ED%95%9C-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%B6%94%EC%B6%9C-%EC%9D%B8%EC%A7%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>입력인자 예외처리에 의한 도메인 추출 인지</h4>

<ul>
  <li>테스트코드가 <code class="language-plaintext highlighter-rouge">가정인자+예상값</code>의 변화 없이 <strong><code class="language-plaintext highlighter-rouge">개별 도메인 생성자 호출자체에서 문제</code></strong>이기 때문에, <strong>개별도메인으로 가서 테스트</strong> 된다.</li>
</ul>

<h5 id="입력인자-가장-작은-단위의-숫자로또번호가-범위를-벗어나는-경우">
<a class="anchor" href="#%EC%9E%85%EB%A0%A5%EC%9D%B8%EC%9E%90-%EA%B0%80%EC%9E%A5-%EC%9E%91%EC%9D%80-%EB%8B%A8%EC%9C%84%EC%9D%98-%EC%88%AB%EC%9E%90%EB%A1%9C%EB%98%90%EB%B2%88%ED%98%B8%EA%B0%80-%EB%B2%94%EC%9C%84%EB%A5%BC-%EB%B2%97%EC%96%B4%EB%82%98%EB%8A%94-%EA%B2%BD%EC%9A%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[입력인자] [가장 작은 단위]의 숫자(로또번호)가 범위를 벗어나는 경우</h5>

<ol>
  <li>
    <p>기존 rank1~5 테스트라도 복붙해서 <strong>메서드명을 <code class="language-plaintext highlighter-rouge">over</code>로 바꿔고</strong> 범위를 벗어나는 경우에 대한 <code class="language-plaintext highlighter-rouge">가정인자 + 예상값</code>이 아니라 <strong>user<code class="language-plaintext highlighter-rouge">입력인자</code>를 바꿔서</strong> 만들어주자.</p>

    <ul>
      <li>
<strong>사용자 입력</strong>에 대한 예외에 대한 테스트의 경우, <strong>service메서드의 가정인자 변화가 문제가 아니라 <code class="language-plaintext highlighter-rouge">입력인자</code>에 <code class="language-plaintext highlighter-rouge">실수</code>가 반영된 것이기 때문에 <code class="language-plaintext highlighter-rouge">객체로 도메인 분리해서 도메인 검증</code>해야한다.</strong>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">over</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">100</span><span class="o">),</span> <span class="c1">// 사용자 입력인자만 예외인자로 변화 -&gt; 100 입력</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="c1">// 가정인자 변화X</span>
         <span class="mi">6</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 예상값 변화X</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="입력인자-가장-작은-단위가-상호작용한-일급에서-중복-문제">
<a class="anchor" href="#%EC%9E%85%EB%A0%A5%EC%9D%B8%EC%9E%90-%EA%B0%80%EC%9E%A5-%EC%9E%91%EC%9D%80-%EB%8B%A8%EC%9C%84%EA%B0%80-%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9%ED%95%9C-%EC%9D%BC%EA%B8%89%EC%97%90%EC%84%9C-%EC%A4%91%EB%B3%B5-%EB%AC%B8%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>[입력인자] 가장 작은 단위가 상호작용한 [일급]에서 중복 문제</h5>

<ol>
  <li>
    <p>테메 복붙후 이름변경<code class="language-plaintext highlighter-rouge">duplicate</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">입력인자</code>에서 중복이 되도록 입력</p>

    <ul>
      <li>예외 테스트 는 가정인자 + 예상값의 변화가 없는 상태임.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="c1">// 사용자 입력인자만 예외인자로 변화 -&gt; 1이 list내 중복 됨.</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="c1">// 가정인자 변화X</span>
         <span class="mi">6</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 예상값 변화X</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="service메서드-사용시-발견된-값들의-예외처리---개별-도메인에서-테스트하면서-처리되어야함">
<a class="anchor" href="#service%EB%A9%94%EC%84%9C%EB%93%9C-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EB%B0%9C%EA%B2%AC%EB%90%9C-%EA%B0%92%EB%93%A4%EC%9D%98-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC---%EA%B0%9C%EB%B3%84-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%97%90%EC%84%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EB%A9%B4%EC%84%9C-%EC%B2%98%EB%A6%AC%EB%90%98%EC%96%B4%EC%95%BC%ED%95%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service.메서드() 사용시 발견된 값들의 예외처리 -&gt; 개별 도메인에서 테스트하면서 처리되어야함.</h4>

<ul>
  <li>
    <p>도메인을 풍부하게 -&gt; <strong><code class="language-plaintext highlighter-rouge">도메인으로 추출 분리</code>후 <code class="language-plaintext highlighter-rouge">도메인 내에서 검증</code></strong></p>
  </li>
  <li>
    <p>서비스메서드 사용하면서, 그 service(메인로직) 흐름내에서 if로 하지말자. <strong>자기 도메인내에서 if없이 개별로 처리</strong>되어야한다.</p>

    <ul>
      <li>잘못된 예(service에서 인자로 넘어온 도메인들의 예외처리)</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="k">if</span> <span class="o">(</span><span class="n">userLotto</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">45</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"범위 초과"</span><span class="o">);</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="메서드인자-리팩토링1-최소단위-값-검증-때문에-포장하도록-service메서드-수정">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%B8%EC%9E%90-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%811-%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84-%EA%B0%92-%EA%B2%80%EC%A6%9D-%EB%95%8C%EB%AC%B8%EC%97%90-%ED%8F%AC%EC%9E%A5%ED%95%98%EB%8F%84%EB%A1%9D-service%EB%A9%94%EC%84%9C%EB%93%9C-%EC%88%98%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드인자 리팩토링1) 최소단위 값 검증 때문에 포장하도록 Service.메서드() 수정</h3>

<h4 id="service메서드--최소단위-값-1개만-new-생성자로-싸서-class와-classtest를-정의">
<a class="anchor" href="#service%EB%A9%94%EC%84%9C%EB%93%9C--%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84-%EA%B0%92-1%EA%B0%9C%EB%A7%8C-new-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A1%9C-%EC%8B%B8%EC%84%9C-class%EC%99%80-classtest%EB%A5%BC-%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service.메서드()  [최소단위 값] 1개만 new 생성자()로 싸서, Class와 ClassTest를 정의</h4>

<ol>
  <li>
    <p>Service.메서드() 로직을 사용하던 곳에서 <strong>예외발생 상황을 가정했던 곳에서 <code class="language-plaintext highlighter-rouge">new 생성자()</code>를 씌워서 Class -&gt; ClassTest까지 만들어보자.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">over</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">100</span><span class="o">)),</span>  <span class="c1">// 검증이 필요한 곳 -&gt; class로 도메인분리 -&gt; 생성자부터 씌워서 만들어나가기</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>값을 1개만 포장하는 경우, <code class="language-plaintext highlighter-rouge">변수명을 value</code>로 잡아서 getValue()등 이름을 어색하지 않게 하자.</strong></p>

    <ul>
      <li>생성자로 클래스 생성후, 상태값 직접 지정해줘야한다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">lotto</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoNumber</span> <span class="o">{</span>
     <span class="kd">public</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoNumber</span> <span class="o">{</span>
        
     <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>classTest도 바로 만들기</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">class</span> <span class="nc">LottoNumberTest</span> <span class="o">{</span>
    
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="servicemethod의-포장된-입력인자버전의-메소드를-만들기-위해-메소드1복붙">
<a class="anchor" href="#servicemethod%EC%9D%98-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EC%9E%85%EB%A0%A5%EC%9D%B8%EC%9E%90%EB%B2%84%EC%A0%84%EC%9D%98-%EB%A9%94%EC%86%8C%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-%EC%9C%84%ED%95%B4-%EB%A9%94%EC%86%8C%EB%93%9C1%EB%B3%B5%EB%B6%99" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service.method()의 [포장]된 [입력인자]버전의 메소드를 만들기 위해 메소드1복붙</h4>

<ul>
  <li>
    <p>기존테스트를 통과하는 <code class="language-plaintext highlighter-rouge">메소드2</code>의 개발이 아니라 <strong><code class="language-plaintext highlighter-rouge">인자가 달라지는 동일명의 메소드</code></strong>를 개발하는 것이므로 <strong>메소드명 동일하게 복붙</strong>한다.</p>

    <ul>
      <li><strong>기존 포장안한 테스트가 그대로 통과한 상태를 유지할 수 있다.</strong></li>
      <li>포장이 실패할시 바로 돌아갈 수 있다.</li>
      <li>메소드2로 지어도 상관없을 것 같긴하다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304221024997.png" alt="image-20220304221024997"></p>
  </li>
</ul>

<h4 id="메소드-파라미터-정의를-원시형---포장형으로-바꿔주기">
<a class="anchor" href="#%EB%A9%94%EC%86%8C%EB%93%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EC%A0%95%EC%9D%98%EB%A5%BC-%EC%9B%90%EC%8B%9C%ED%98%95---%ED%8F%AC%EC%9E%A5%ED%98%95%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>메소드 파라미터 정의를 원시형 -&gt; 포장형으로 바꿔주기</h4>

<ol>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">메소드의 파라미터 정의부</code>를 원시형을 모두 <code class="language-plaintext highlighter-rouge">포장 형</code>으로 바꿔준다.</strong></p>

    <ul>
      <li>int, Integer -&gt; <code class="language-plaintext highlighter-rouge">LottoNumber</code>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>내부도 다 타입을 바꿔준다.</p>

    <ul>
      <li><strong>에러가 안나는 듯 하지만, 포장class에서도 기본 제공되는 <code class="language-plaintext highlighter-rouge">contains()</code>는 비교/포함여부 되려면 equals/hashCode가 오버라이딩 되어있어야 에러가 안난다.</strong></li>
      <li>
<strong>최소단위 포장은 <code class="language-plaintext highlighter-rouge">equals/hashCode생각</code></strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304221640210.png" alt="image-20220304221640210">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
         <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
         <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">userLotto</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
                 <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
             <span class="o">}</span>
         <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="포장용-service메소드에서-사용되는-값들-모두-포장해서-전달해주기">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EC%9A%A9-service%EB%A9%94%EC%86%8C%EB%93%9C%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-%EA%B0%92%EB%93%A4-%EB%AA%A8%EB%91%90-%ED%8F%AC%EC%9E%A5%ED%95%B4%EC%84%9C-%EC%A0%84%EB%8B%AC%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장용 Service메소드에서 사용되는 값들 모두 포장해서 전달해주기</h4>

<ol>
  <li>
    <p>현재 생성을 위해 1개만 포장된 상태다. <strong>수동으로 다 포장해줘야한다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">over</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">100</span><span class="o">)),</span> <span class="c1">// 사용자 입력인자만 예외인자로 변화 -&gt; 100입니다.</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">),</span> <span class="c1">// 가정인자 변화X</span>
         <span class="mi">6</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 예상값 변화X</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>포장 후</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">over</span><span class="o">()</span> <span class="o">{</span>
     <span class="kd">final</span> <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> 
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">100</span><span class="o">)),</span> 
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> 
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)),</span> 
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
     <span class="o">);</span>
    
     <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span> <span class="c1">// 예상값 변화X</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="exception-나는-것을-의도하여-포장했다면-에러가-나야한다-assertthat---assertthatthrownby의-테스트-코드-바꾸기">
<a class="anchor" href="#exception-%EB%82%98%EB%8A%94-%EA%B2%83%EC%9D%84-%EC%9D%98%EB%8F%84%ED%95%98%EC%97%AC-%ED%8F%AC%EC%9E%A5%ED%96%88%EB%8B%A4%EB%A9%B4-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%82%98%EC%95%BC%ED%95%9C%EB%8B%A4-assertthat---assertthatthrownby%EC%9D%98-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EB%B0%94%EA%BE%B8%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Exception 나는 것을 의도하여 포장했다면 에러가 나야한다 assertThat -&gt; assertThatThrownBy()의 테스트 코드 바꾸기</h4>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">응답 vs 예상값</code>비교 구조에서 <code class="language-plaintext highlighter-rouge">() -&gt; exception발생</code>구조로 테스트메서드를 바꿔주자.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">over</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">100</span><span class="o">)),</span>
         <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
     <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="포장한-도메인-생성자에-예외처리-검증-넣어주기">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%ED%95%9C-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC-%EA%B2%80%EC%A6%9D-%EB%84%A3%EC%96%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장한 도메인 생성자에 예외처리 검증 넣어주기</h4>

<ol>
  <li>
    <p>예외 발생 안했다 -&gt; <strong>예외발생시키는 검증을 도메인에 넣어준다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">validate</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
<span class="o">}</span>
    
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">validate</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">45</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"로또 번호의 범위가 아닙니다."</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="servicemethod에서의-검증이-끝났으면-단일-도메인에서-본격-검증하러-classtest로-직접가서-경계값-테스트하기">
<a class="anchor" href="#servicemethod%EC%97%90%EC%84%9C%EC%9D%98-%EA%B2%80%EC%A6%9D%EC%9D%B4-%EB%81%9D%EB%82%AC%EC%9C%BC%EB%A9%B4-%EB%8B%A8%EC%9D%BC-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%97%90%EC%84%9C-%EB%B3%B8%EA%B2%A9-%EA%B2%80%EC%A6%9D%ED%95%98%EB%9F%AC-classtest%EB%A1%9C-%EC%A7%81%EC%A0%91%EA%B0%80%EC%84%9C-%EA%B2%BD%EA%B3%84%EA%B0%92-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[Service.method()에서의 검증]이 끝났으면 [단일 도메인에서 본격 검증]하러 classTest로 직접가서 [경계값 테스트]하기</h4>

<ul>
  <li>시간 관계상 Service.method()에서 통채로 테스트하지만, <strong>포장ClassTest에서 직접 경계값 주위로 테스트해야한다.</strong>
</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LottoNumberTest</span> <span class="o">{</span>

    <span class="nd">@ParameterizedTest</span>
    <span class="nd">@ValueSource</span><span class="o">(</span><span class="n">ints</span> <span class="o">=</span> <span class="o">{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">46</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">100</span><span class="o">})</span>
    <span class="kt">void</span> <span class="nf">range</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="n">value</span><span class="o">))</span>
            <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">"범위"</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="예외-발생을-위한-포장-회고">
<a class="anchor" href="#%EC%98%88%EC%99%B8-%EB%B0%9C%EC%83%9D%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%8F%AC%EC%9E%A5-%ED%9A%8C%EA%B3%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>예외 발생을 위한 포장 회고</h4>

<ul>
  <li>Service.메서드()에서 테스트했지만, LottoNumber로는 더이상 over되는 번호는 오지않겠구나.
    <ul>
      <li>심리적 안정감을 얻었다.</li>
    </ul>
  </li>
</ul>

<h5 id="포장-입력인자-메소드-사용시-애로사항">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5-%EC%9E%85%EB%A0%A5%EC%9D%B8%EC%9E%90-%EB%A9%94%EC%86%8C%EB%93%9C-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%95%A0%EB%A1%9C%EC%82%AC%ED%95%AD" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장 입력인자 메소드 사용시 애로사항</h5>

<ul>
  <li>
    <p>Service.메서드() 사용시 모든 원시값을 <code class="language-plaintext highlighter-rouge">new 포장( )</code>으로 일일히 감싸줘야한다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
      <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
              <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">100</span><span class="o">)),</span>
      <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
              <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)),</span>
      <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
  <span class="o">));</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>포장된 입력인자가 아니라 -<strong>원시값 입력인자를 그대로 사용하되, <code class="language-plaintext highlighter-rouge">메소드 내부에서 한꺼번에 포장객체로 변환</code>시키자</strong></p>
  </li>
</ul>

<h4 id="정제된-rawinput을-받던-테매들이-사용하던-servicemethod-내부-개조로-한번에-포장해서-포장인자-메서드-호출해주기">
<a class="anchor" href="#%EC%A0%95%EC%A0%9C%EB%90%9C-rawinput%EC%9D%84-%EB%B0%9B%EB%8D%98-%ED%85%8C%EB%A7%A4%EB%93%A4%EC%9D%B4-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8D%98-servicemethod-%EB%82%B4%EB%B6%80-%EA%B0%9C%EC%A1%B0%EB%A1%9C-%ED%95%9C%EB%B2%88%EC%97%90-%ED%8F%AC%EC%9E%A5%ED%95%B4%EC%84%9C-%ED%8F%AC%EC%9E%A5%EC%9D%B8%EC%9E%90-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[정제된 rawInput을 받던 테매들이 사용하던 service.method()] 내부 개조로 한번에 포장해서 포장인자 메서드 호출해주기</h4>

<h5 id="기존에-작성된-정제된-rawinput을-받던-메소드의-내용물은-삭제">
<a class="anchor" href="#%EA%B8%B0%EC%A1%B4%EC%97%90-%EC%9E%91%EC%84%B1%EB%90%9C-%EC%A0%95%EC%A0%9C%EB%90%9C-rawinput%EC%9D%84-%EB%B0%9B%EB%8D%98-%EB%A9%94%EC%86%8C%EB%93%9C%EC%9D%98-%EB%82%B4%EC%9A%A9%EB%AC%BC%EC%9D%80-%EC%82%AD%EC%A0%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>기존에 작성된[ 정제된 rawInput을 받던 메소드]의 내용물은 삭제</h5>

<ul>
  <li>
    <p>기존 테스트를 위해 <code class="language-plaintext highlighter-rouge">정제된 원시값을 받던 메소드</code></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">Integer</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">userLotto</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="o">}</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="원시값-인자-네이밍---내부stream으로-한번에-포장---return-포장-인자-메서드-호출">
<a class="anchor" href="#%EC%9B%90%EC%8B%9C%EA%B0%92-%EC%9D%B8%EC%9E%90-%EB%84%A4%EC%9D%B4%EB%B0%8D---%EB%82%B4%EB%B6%80stream%EC%9C%BC%EB%A1%9C-%ED%95%9C%EB%B2%88%EC%97%90-%ED%8F%AC%EC%9E%A5---return-%ED%8F%AC%EC%9E%A5-%EC%9D%B8%EC%9E%90-%EB%A9%94%EC%84%9C%EB%93%9C-%ED%98%B8%EC%B6%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>원시값 인자 네이밍 -&gt; 내부stream으로 한번에 포장 -&gt; return 포장 인자 메서드() 호출</h5>

<ul>
  <li>
    <p>**기존 내용물은 삭제(포장된 것으로 처리되도록 통일해야됨) **</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>**원시값 인자 +<code class="language-plaintext highlighter-rouge">raw</code>네이밍 붙이기 **</p>

    <ul>
      <li>각 원시인자 기존 네이밍  -&gt; 포장인자로 갈 때 <code class="language-plaintext highlighter-rouge">기존 네이밍</code>으로 받아줘야 -&gt; ``포장메서드 호출시 기존 네이밍<code class="language-plaintext highlighter-rouge">으로 가기 때문에  **원시 인자 네이밍 앞에 </code>raw`를 붙혀준다**</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">rawUserLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">rawWinningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">rawBonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
  <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>
<strong>return <code class="language-plaintext highlighter-rouge">포장된 인자를 받는 새 메소드()</code>호출</strong>
        <ul>
          <li>
<strong>응답은 그대로 나가야하므로</strong> return 유지</li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">rawUserLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">rawWinningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">int</span> <span class="n">rawBonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">userLotto</span> <span class="o">=</span> <span class="n">rawUserLotto</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    
      <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">winningLotto</span> <span class="o">=</span> <span class="n">rawWinningLotto</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
          <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">)</span>
          <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    
      <span class="k">return</span> <span class="nf">start</span><span class="o">(</span><span class="n">userLotto</span><span class="o">,</span> <span class="n">winningLotto</span><span class="o">,</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="n">rawBonusNumber</span><span class="o">));</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="의의-service를-사용하는-client를-편안하게-해줘야한다내부로-가기전에-포장해서-호출해주는-놈이-있다면--client는-원시값도-입력받아-도메인은-모르게-해주는게-낫다">
<a class="anchor" href="#%EC%9D%98%EC%9D%98-service%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-client%EB%A5%BC-%ED%8E%B8%EC%95%88%ED%95%98%EA%B2%8C-%ED%95%B4%EC%A4%98%EC%95%BC%ED%95%9C%EB%8B%A4%EB%82%B4%EB%B6%80%EB%A1%9C-%EA%B0%80%EA%B8%B0%EC%A0%84%EC%97%90-%ED%8F%AC%EC%9E%A5%ED%95%B4%EC%84%9C-%ED%98%B8%EC%B6%9C%ED%95%B4%EC%A3%BC%EB%8A%94-%EB%86%88%EC%9D%B4-%EC%9E%88%EB%8B%A4%EB%A9%B4--client%EB%8A%94-%EC%9B%90%EC%8B%9C%EA%B0%92%EB%8F%84-%EC%9E%85%EB%A0%A5%EB%B0%9B%EC%95%84-%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%80-%EB%AA%A8%EB%A5%B4%EA%B2%8C-%ED%95%B4%EC%A3%BC%EB%8A%94%EA%B2%8C-%EB%82%AB%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>의의: Service를 사용하는 client를 편안하게 해줘야한다.(내부로 가기전에 포장해서 호출해주는 놈이 있다면) = client는 원시값도 입력받아 도메인은 모르게 해주는게 낫다</h5>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">client쪽, view쪽, 중요하지 않은쪽, 잘변하는 쪽</code>은 <strong>도메인, 포장값 사용없이 원시값으로만 service.메서드()를 호출</strong>하고, <strong>내부에서 포장</strong> 좋다.
    <ul>
      <li>포장을 서비스내에서 한번 거쳐서 하는 방법을 여기선 안내해줬다.</li>
      <li>원래 중요하지 않은쪽이  -&gt; 중요한 것을 생성/사용/리턴하는 방향은 허용된다.</li>
    </ul>
  </li>
  <li>생각이 다를 수 있다.
    <ul>
      <li>외부에서 무조건 감싸서 로직에 보내줘야한다라고 생각할 수도 있다.</li>
      <li><strong>but 사용하는 client입장에서는.. 내부포장으로 편안한게 좋다</strong></li>
    </ul>
  </li>
  <li>my) controller에서 도메인 사용해도 되지만
    <ul>
      <li><strong>내부 포장만 해주는 로직이 따로 존재한다면, 원시값을 넘겨도 될 듯?</strong></li>
    </ul>
  </li>
</ul>

<h3 id="메서드-인자-리팩토링2-최소단위-묶음의-예외-처리---일급-포장하여-검증">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%B8%EC%9E%90-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%812-%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84-%EB%AC%B6%EC%9D%8C%EC%9D%98-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC---%EC%9D%BC%EA%B8%89-%ED%8F%AC%EC%9E%A5%ED%95%98%EC%97%AC-%EA%B2%80%EC%A6%9D" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드 인자 리팩토링2) 최소단위 [묶음]의 예외 처리 -&gt; 일급 포장하여 검증</h3>

<h4 id="초과된-포장-최소단위의-갯수-문제---포장인자-메소드를-가진-테매를-복붙하여-exception-발생시키기">
<a class="anchor" href="#%EC%B4%88%EA%B3%BC%EB%90%9C-%ED%8F%AC%EC%9E%A5-%EC%B5%9C%EC%86%8C%EB%8B%A8%EC%9C%84%EC%9D%98-%EA%B0%AF%EC%88%98-%EB%AC%B8%EC%A0%9C---%ED%8F%AC%EC%9E%A5%EC%9D%B8%EC%9E%90-%EB%A9%94%EC%86%8C%EB%93%9C%EB%A5%BC-%EA%B0%80%EC%A7%84-%ED%85%8C%EB%A7%A4%EB%A5%BC-%EB%B3%B5%EB%B6%99%ED%95%98%EC%97%AC-exception-%EB%B0%9C%EC%83%9D%EC%8B%9C%ED%82%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>초과된 [포장 최소단위의 갯수 문제] -&gt; [포장인자 메소드]를 가진 [테매]를 복붙하여 Exception 발생시키기</h4>

<ul>
  <li>
    <p>현상황에서 <strong>포장인자를 받던 메소드를 복붙</strong>하여 <code class="language-plaintext highlighter-rouge">포장객체의 갯수 문제를 발생</code>시켜보자.</p>

    <ul>
      <li>아무래도.. 최소단위객체의 범위문제에서 작성된 메소드를 복붙해서 고쳐야함…
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304233416210.png" alt="image-20220304233416210">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">lotto7</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
          <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                  <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)),</span> <span class="c1">// 갯수 초과</span>
          <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                  <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)),</span>
          <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
      <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
  <li>
    <p>갯수를 초과했음에도 불구하고 <strong>아직 묶음에 대한 검증이 안되기 때문에 예외발생이 안된다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220304233624719.png" alt="image-20220304233624719"></p>
  </li>
  <li>
    <p><strong>앞에서도 그렇고, 예외처리를 <code class="language-plaintext highlighter-rouge">Service.method() 내부에서 if로 편하게 해주고 싶은데, 여기서 하면 모든 인자들에 대한 예외처리가 if로 한곳에 쌓일 것이다.</code></strong></p>

    <ul>
      <li>**각 검증은 <code class="language-plaintext highlighter-rouge">도메인 추출된 class를 만들어서 그곳에서 한다.</code> **</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
          <span class="c1">// 여기서 갯수처리를 해주고 싶으나..</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">userLotto</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">throw</span> <span class="k">new</span> <span class="n">예외</span>
          <span class="o">}</span>
          <span class="c1">// 2번째 인자도 예외처리를 로직실행 메서드 내부에서 인자를 받아서 처리하고 싶으나..</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">throw</span> <span class="k">new</span> <span class="n">예외</span>
          <span class="o">}</span>
      	<span class="c1">// 인자들마다 모든 검증들이 if로 여기(사용메서드)에 쌓여갈 것이다. 따른 검증 역시 여기서 해야한다. </span>
    
    
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="객체의-갯수or중복-등-복수-검증을-위한-list도메인을-포장하는-일급포장의-시작">
<a class="anchor" href="#%EA%B0%9D%EC%B2%B4%EC%9D%98-%EA%B0%AF%EC%88%98or%EC%A4%91%EB%B3%B5-%EB%93%B1-%EB%B3%B5%EC%88%98-%EA%B2%80%EC%A6%9D%EC%9D%84-%EC%9C%84%ED%95%9C-list%EB%8F%84%EB%A9%94%EC%9D%B8%EC%9D%84-%ED%8F%AC%EC%9E%A5%ED%95%98%EB%8A%94-%EC%9D%BC%EA%B8%89%ED%8F%AC%EC%9E%A5%EC%9D%98-%EC%8B%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>[객체의 갯수or중복 등 복수 검증]을 위한 <code class="language-plaintext highlighter-rouge">List&lt;도메인&gt;</code>을 포장하는 일급포장의 시작</h4>

<h5 id="복수검증-문제가-발생하는-곳에가서-new-일급부터-시작">
<a class="anchor" href="#%EB%B3%B5%EC%88%98%EA%B2%80%EC%A6%9D-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B3%B3%EC%97%90%EA%B0%80%EC%84%9C-new-%EC%9D%BC%EA%B8%89%EB%B6%80%ED%84%B0-%EC%8B%9C%EC%9E%91" aria-hidden="true"><span class="octicon octicon-link"></span></a>복수검증 문제가 발생하는 곳에가서 new 일급()부터 시작</h5>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Service.method()</code>에서 원시값 List -&gt; <code class="language-plaintext highlighter-rouge">단일객체 List</code>가 인자로 들어가는 곳에서 **new 일급(  ) ** -&gt; Class -&gt; ClassTest까지 생성해준다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">lotto7</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> 
</code></pre></div>    </div>
  </li>
  <li>
    <p>생성자로 들어오는 이름도<strong><code class="language-plaintext highlighter-rouge">value</code>로 네이밍</strong>하여 생성자에서 초기화</p>

    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">ClassName.</code> 가 PREFIX인 것 및 <code class="language-plaintext highlighter-rouge">.getValue()</code> 생각하기</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span>  <span class="o">{</span>
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">lottoNumbers</span><span class="o">)</span> <span class="o">{</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>나머지도 List -&gt; 일급으로 들어가도록 service.method수정단일&gt;</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305002755888.png" alt="image-20220305002755888"></p>
  </li>
</ol>

<h5 id="들어오는-포장인자list단일-메서드-복붙-백업후---일급인자로-받도록-method-파라미터-정의부-개조">
<a class="anchor" href="#%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94-%ED%8F%AC%EC%9E%A5%EC%9D%B8%EC%9E%90list%EB%8B%A8%EC%9D%BC-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%B3%B5%EB%B6%99-%EB%B0%B1%EC%97%85%ED%9B%84---%EC%9D%BC%EA%B8%89%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EB%8F%84%EB%A1%9D-method-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EC%A0%95%EC%9D%98%EB%B6%80-%EA%B0%9C%EC%A1%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>들어오는 포장인자(<code class="language-plaintext highlighter-rouge">List&lt;단일&gt;</code>) 메서드 복붙 백업후 -&gt; <code class="language-plaintext highlighter-rouge">일급</code>인자로 받도록 method 파라미터 정의부 개조</h5>

<ol>
  <li>
<code class="language-plaintext highlighter-rouge">기존 List&lt;단일&gt;으로 들어오던 메서드</code> 전체를 복붙한다.
    <ul>
      <li>기존 테스트 유지?를 위해, 일급으로 바꾸기전 List도 들어올 수 있도록 백업해둔다.
  ![image-20220305003021893](https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003021893.png)단일&gt;</li>
    </ul>
  </li>
  <li>
    <p>기존 <code class="language-plaintext highlighter-rouge">List&lt;단일&gt;</code>으로 들어오던 메서드의  <code class="language-plaintext highlighter-rouge">파라미터 정의부</code>만  <strong><code class="language-plaintext highlighter-rouge">정의해준 일급</code>들어오도록 수정한다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">userLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">winningLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
</code></pre></div>    </div>

    <ul>
      <li>수정후</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">winningLotto</span><span class="o">,</span>
                         <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>내부 빨간줄 수정 ( 단일List -&gt; 일급으로 인한 -&gt; <strong>기본적으로 앞에 <code class="language-plaintext highlighter-rouge">.getValue()</code>의 getter가 요구</strong>됨.)</p>

    <ul>
      <li>
        <p><strong>일단 getter로 다 처리해놓자. 리팩토링 요구됨. 객체 메세지 던져서 통신.</strong></p>
      </li>
      <li>
        <p><strong>상태값을 <code class="language-plaintext highlighter-rouge">value</code>로 네이밍해줬어도, <code class="language-plaintext highlighter-rouge">.getValue()</code>의 빨간줄을 <code class="language-plaintext highlighter-rouge">리팩토링으로 생성 후 return this.value;까지 직접 입력해줘야</code>된다.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003505785.png" alt="image-20220305003505785">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003513722.png" alt="image-20220305003513722">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003902488.png" alt="image-20220305003902488">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003913582.png" alt="image-20220305003913582">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305003918375.png" alt="image-20220305003918375"></p>
      </li>
      <li>
        <p>앞에 getter를 붙이면 빨간줄이 사라진다.</p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305004044030.png" alt="image-20220305004044030">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305004054296.png" alt="image-20220305004054296"></p>
      </li>
    </ul>
  </li>
  <li>일급용 메서드가 완성되었으면</li>
</ol>

<h4 id="일급-인자를-받는-servicemethod가-완성되었으면-일급이라는-도메인-내부-생성자에-단일list간-복수검증을--넣어준다">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89-%EC%9D%B8%EC%9E%90%EB%A5%BC-%EB%B0%9B%EB%8A%94-servicemethod%EA%B0%80-%EC%99%84%EC%84%B1%EB%90%98%EC%97%88%EC%9C%BC%EB%A9%B4-%EC%9D%BC%EA%B8%89%EC%9D%B4%EB%9D%BC%EB%8A%94-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%82%B4%EB%B6%80-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-%EB%8B%A8%EC%9D%BClist%EA%B0%84-%EB%B3%B5%EC%88%98%EA%B2%80%EC%A6%9D%EC%9D%84--%EB%84%A3%EC%96%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>[일급 인자를 받는 Service.method()]가 완성되었으면, [일급이라는 <code class="language-plaintext highlighter-rouge">도메인</code> 내부 <code class="language-plaintext highlighter-rouge">생성자</code>에 단일List간 복수검증]을  넣어준다.</h4>

<ol>
  <li>
    <p>일급 도메인인 <code class="language-plaintext highlighter-rouge">Lotto의 생성자</code>에서 상태값 초기화 전에 <code class="language-plaintext highlighter-rouge">검증</code>을 넣어준다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>도메인 검증 추가</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">distinct</span><span class="o">().</span><span class="na">count</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"로또 번호는 6개입니다."</span><span class="o">);</span>
         <span class="o">}</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>도메인 생성자에 넣어준 검증(<strong>중복</strong>) 을, <strong>Service.method()의 인자검증으로 통채로</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>     <span class="nd">@Test</span>
     <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
         <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">))),</span>
             <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                 <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">))),</span>
             <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
         <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="포장단일에-포장일급-후-client가-너무-불편---client를-배려해줘라">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EB%8B%A8%EC%9D%BC%EC%97%90-%ED%8F%AC%EC%9E%A5%EC%9D%BC%EA%B8%89-%ED%9B%84-client%EA%B0%80-%EB%84%88%EB%AC%B4-%EB%B6%88%ED%8E%B8---client%EB%A5%BC-%EB%B0%B0%EB%A0%A4%ED%95%B4%EC%A4%98%EB%9D%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장(단일)에 포장(일급) 후 client가 너무 불편? -&gt; Client를 배려해줘라.</h3>

<h4 id="일급-생성자가-받는-new일급list단일의-인자를----단일-가변인자로-받고-내부에서-listof대신-모아주는-포장용-생성자-추가">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EB%B0%9B%EB%8A%94-new%EC%9D%BC%EA%B8%89list%EB%8B%A8%EC%9D%BC%EC%9D%98-%EC%9D%B8%EC%9E%90%EB%A5%BC----%EB%8B%A8%EC%9D%BC-%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90%EB%A1%9C-%EB%B0%9B%EA%B3%A0-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-listof%EB%8C%80%EC%8B%A0-%EB%AA%A8%EC%95%84%EC%A3%BC%EB%8A%94-%ED%8F%AC%EC%9E%A5%EC%9A%A9-%EC%83%9D%EC%84%B1%EC%9E%90-%EC%B6%94%EA%B0%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급 생성자가 받는 new일급(<code class="language-plaintext highlighter-rouge">List&lt;단일&gt;</code>)의 인자를 -&gt;  <code class="language-plaintext highlighter-rouge">단일... 가변인자</code>로 받고 내부에서 List.Of대신 모아주는 <code class="language-plaintext highlighter-rouge">포장용 생성자 추가</code>
</h4>

<ol>
  <li>
    <p>현재 <strong>일급까지 포장해야하는</strong> Service메서드 테매</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
                           <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">))),</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                           <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">))),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
     <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <ul>
      <li>인자 1개만 떼서 보기</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
                   <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">))),</span>
</code></pre></div>    </div>
  </li>
</ol>

<h5 id="client-일급-생성자에-들어가는-listof-혹은-setof-제거해주는---메서드내부-가변인자알아서-배열---this--arraysstreamcollectcollectorstolist-or-toset--">
<a class="anchor" href="#client-%EC%9D%BC%EA%B8%89-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-%EB%93%A4%EC%96%B4%EA%B0%80%EB%8A%94-listof-%ED%98%B9%EC%9D%80-setof-%EC%A0%9C%EA%B1%B0%ED%95%B4%EC%A3%BC%EB%8A%94---%EB%A9%94%EC%84%9C%EB%93%9C%EB%82%B4%EB%B6%80-%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90%EC%95%8C%EC%95%84%EC%84%9C-%EB%B0%B0%EC%97%B4---this--arraysstreamcollectcollectorstolist-or-toset--" aria-hidden="true"><span class="octicon octicon-link"></span></a>[Client] 일급 생성자에 들어가는 List.of() 혹은 Set.of() 제거해주는 -&gt; [메서드내부] 가변인자(알아서 배열) -&gt; this + Arrays.stream().collect(Collectors.toList or toSet ())) )</h5>

<ol>
  <li>
    <p><strong>client에서</strong> List.of(단일,객체)나 Set.of(단일, 객체)대신  <strong><code class="language-plaintext highlighter-rouge">단일객체를 콤마로 나열</code>만 해서 넘겨주면,  <code class="language-plaintext highlighter-rouge">알아서 List or Set으로 내부에서 모아주는</code></strong></p>

    <ul>
      <li>
<strong>내부에서 포장해준 뒤, <code class="language-plaintext highlighter-rouge">포장 인자용 메서드를 다시 한번 호출</code>해주는</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">메서드 파라미터 -&gt; 인자만 복사해서 껍데기 메서드 생성 -&gt; 내부에서 포장후 호출 다시 포장인자메서드를 재호출</code></li>
          <li><strong><code class="language-plaintext highlighter-rouge">일급 생성자 -&gt; List.Of, Set.of를 제거하여 생성자를 추가 생성  -&gt; 가변인자를 받도록 정의 -&gt; 배열을 stream collect로 List나 set으로 포장만해서 this( , )로 미리 정의해둔 &amp;&amp; 뒤에 존재하는 포장인자용 생성자 호출</code></strong></li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305083636986.png" alt="image-20220305083636986"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305083654611.png" alt="image-20220305083654611">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305083703228.png" alt="image-20220305083703228">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305083816209.png" alt="image-20220305083816209">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305083956293.png" alt="image-20220305083956293">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305084022308.png" alt="image-20220305084022308"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">LottoNumber</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
     <span class="o">}</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">distinct</span><span class="o">().</span><span class="na">count</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"로또 번호는 6개입니다."</span><span class="o">);</span>
         <span class="o">}</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
    
</code></pre></div>    </div>

    <ul>
      <li><strong>이제 <code class="language-plaintext highlighter-rouge">new Lotto() 일급의 생성자에서</code> 2가지 다 받을 수 있게 된다.  List.of( , ,, ) 대신 -&gt;그냥  , , ,의 가변인자를 넣어줘도 알아서 List로 포장하게 된다.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span>
                   <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">)),</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
                   <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="k">new</span> <span class="nc">LottoNumber</span><span class="o">(</span><span class="mi">6</span><span class="o">)),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
     <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="가변인자listof제거--단일객체생성자-제거의-일급-내부에-2번의-포장-생성자도-추가해서-client를-편하게-해주자">
<a class="anchor" href="#%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90listof%EC%A0%9C%EA%B1%B0--%EB%8B%A8%EC%9D%BC%EA%B0%9D%EC%B2%B4%EC%83%9D%EC%84%B1%EC%9E%90-%EC%A0%9C%EA%B1%B0%EC%9D%98-%EC%9D%BC%EA%B8%89-%EB%82%B4%EB%B6%80%EC%97%90-2%EB%B2%88%EC%9D%98-%ED%8F%AC%EC%9E%A5-%EC%83%9D%EC%84%B1%EC%9E%90%EB%8F%84-%EC%B6%94%EA%B0%80%ED%95%B4%EC%84%9C-client%EB%A5%BC-%ED%8E%B8%ED%95%98%EA%B2%8C-%ED%95%B4%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>가변인자(List.of제거) + 단일객체생성자 제거의 <code class="language-plaintext highlighter-rouge">일급 내부에 2번의 포장 생성자</code>도 추가해서 client를 편하게 해주자.</h4>

<ol>
  <li>
    <p>new 일급( ) 생성자에  <strong>client에서 List.Of() 제거하고 가변인자만 받도록</strong>  내부에서 포장해주는 생성자를 추가해줬었다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="c1">//1. new Lotto( 단일객체, 가변으로) -&gt; List.Of제거</span>
 <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">LottoNumber</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">this</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>이번에는  <strong>client 단일객체 생성자 제거하고 <code class="language-plaintext highlighter-rouge">단일객체 생성에 필요한 raw원시값을 가변인자</code>로만 받도록 수정해보자.</strong><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305084817763.png" alt="image-20220305084817763">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085319446.png" alt="image-20220305085319446">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085359886.png" alt="image-20220305085359886">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085457733.png" alt="image-20220305085457733">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085526086.png" alt="image-20220305085526086">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085606702.png" alt="image-20220305085606702"></p>

    <ul>
      <li>stream에서 <code class="language-plaintext highlighter-rouge">mapToObj</code>가 뜨는 이유는 integer가 아닌 <code class="language-plaintext highlighter-rouge">int -&gt; 객체</code>로 가기 때문 -&gt; <strong>애초에 파라미터로 들어오는 원시값들을 int… 대신 <code class="language-plaintext highlighter-rouge">Integer...</code>로 box된 타입으로 받을 수 있다.</strong>
  <img src="C:%5CUsers%5Ccho_desktop%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220305085731026.png" alt="image-20220305085731026">
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">;</span>
    
     <span class="c1">//2. new Lotto( 원시값, 가변으로) -&gt; List.Of() + new단일()생성자 제거</span>
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Integer</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">map</span><span class="o">(</span><span class="nl">LottoNumber:</span><span class="o">:</span><span class="k">new</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
     <span class="o">}</span>
    
     <span class="c1">//1. new Lotto( 단일객체, 가변으로) -&gt; List.Of제거</span>
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">LottoNumber</span><span class="o">...</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">value</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
     <span class="o">}</span>
    
     <span class="kd">public</span> <span class="nf">Lotto</span><span class="o">(</span><span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">LottoNumber</span><span class="o">&gt;</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">distinct</span><span class="o">().</span><span class="na">count</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"로또 번호는 6개입니다."</span><span class="o">);</span>
         <span class="o">}</span>
         <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
     <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>이제 단계별로 생성자를 만들어서, 기존 테스트의 인자들이 모두 돌아가게 만들었다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305085911955.png" alt="image-20220305085911955"></p>

    <ul>
      <li><strong>이제 원시값으로 일급을 만들 수 있게 된다.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305090007614.png" alt="image-20220305090007614"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">start</span><span class="o">(</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">),</span>
         <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
     <span class="o">)).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<ul>
  <li><strong>client입장에서 코드를 사용하게 엄청 편해진다.</strong></li>
</ul>

<h4 id="my-메서드의-인자만-포장후-호출용-메서드-or-일급-등의-생성자를-인자만-다르게-정의하고-내부는-포장해서-client를-편하게-만들어줬다">
<a class="anchor" href="#my-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%9D%B8%EC%9E%90%EB%A7%8C-%ED%8F%AC%EC%9E%A5%ED%9B%84-%ED%98%B8%EC%B6%9C%EC%9A%A9-%EB%A9%94%EC%84%9C%EB%93%9C-or-%EC%9D%BC%EA%B8%89-%EB%93%B1%EC%9D%98-%EC%83%9D%EC%84%B1%EC%9E%90%EB%A5%BC-%EC%9D%B8%EC%9E%90%EB%A7%8C-%EB%8B%A4%EB%A5%B4%EA%B2%8C-%EC%A0%95%EC%9D%98%ED%95%98%EA%B3%A0-%EB%82%B4%EB%B6%80%EB%8A%94-%ED%8F%AC%EC%9E%A5%ED%95%B4%EC%84%9C-client%EB%A5%BC-%ED%8E%B8%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A4%AC%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>my) 메서드의 [인자만 포장후 호출용 메서드] or 일급 등의 생성자를 [인자만 다르게 정의하고 내부는 포장해서] client를 편하게 만들어줬다.</h4>

<ul>
  <li>
    <p>가변인자 사용시 주의해야한다.</p>

    <ul>
      <li>
        <p>가변인자는 배열을 내부적으로 만들어서 사용하기 때문에, 메모리 잇슈가 있을 수 있다.</p>
      </li>
      <li>
        <p>그래서 <code class="language-plaintext highlighter-rouge">.of()</code>메서드들은 11개부터 가변인자를 사용하고 10개까지는 인자를 하드코딩으로 받는다.</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="일급-테스트는-servicemethod에서-완성된-가변인자생성자-시리즈가-완성된-후에-해주자">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-servicemethod%EC%97%90%EC%84%9C-%EC%99%84%EC%84%B1%EB%90%9C-%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90%EC%83%9D%EC%84%B1%EC%9E%90-%EC%8B%9C%EB%A6%AC%EC%A6%88%EA%B0%80-%EC%99%84%EC%84%B1%EB%90%9C-%ED%9B%84%EC%97%90-%ED%95%B4%EC%A3%BC%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급 테스트는 Service.Method()에서 완성된 [가변인자생성자] 시리즈가 완성된 후에 해주자.</h3>

<h4 id="servicemethod에서의-단일일급-퉁치는-검증--일급의-포장용-가변인자-생성자--끝났으면-단일-도메인test에서-본격-경계값-테스트하기">
<a class="anchor" href="#servicemethod%EC%97%90%EC%84%9C%EC%9D%98-%EB%8B%A8%EC%9D%BC%EC%9D%BC%EA%B8%89-%ED%89%81%EC%B9%98%EB%8A%94-%EA%B2%80%EC%A6%9D--%EC%9D%BC%EA%B8%89%EC%9D%98-%ED%8F%AC%EC%9E%A5%EC%9A%A9-%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90-%EC%83%9D%EC%84%B1%EC%9E%90--%EB%81%9D%EB%82%AC%EC%9C%BC%EB%A9%B4-%EB%8B%A8%EC%9D%BC-%EB%8F%84%EB%A9%94%EC%9D%B8test%EC%97%90%EC%84%9C-%EB%B3%B8%EA%B2%A9-%EA%B2%BD%EA%B3%84%EA%B0%92-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>[Service.method()에서의 단일/일급 퉁치는 검증] + [일급의 포장용 가변인자 생성자]  끝났으면 [단일 도메인Test]에서 본격 [경계값 테스트]하기</h4>

<ol>
  <li>
    <p>Lotto라는 일급도메인 테스트를 만든다.</p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305090450950.png" alt="image-20220305090450950"></p>
  </li>
  <li>
    <p>Service.method()에서 퉁치며 만들던 갯수/중복 테스트를 case별로 테매명에 반영하면서 만들어본다.</p>

    <ul>
      <li><strong>가변인자는 parameter로 내려보내질 못하네</strong></li>
      <li>
<strong>갯수먼저 검사 -&gt; 중복 검사</strong>
        <ul>
          <li>중복부터하면? distinct.count() != 6에서 <strong>list의 size검사도 같이 일어나 중복에 걸리게 된다.</strong>
</li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">count_valid</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertDoesNotThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">));</span>
 <span class="o">}</span>
    
 <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">count_under</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">))</span>
         <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
         <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">"6개"</span><span class="o">);</span>
 <span class="o">}</span>
    
 <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">count_over</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">))</span>
         <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
         <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">"6개"</span><span class="o">);</span>
 <span class="o">}</span>
    
 <span class="nd">@Test</span>
 <span class="kt">void</span> <span class="nf">duplicate</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">assertThatThrownBy</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">))</span>
         <span class="o">.</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
         <span class="o">.</span><span class="na">hasMessageContaining</span><span class="o">(</span><span class="s">"6개"</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="service메서드의-이름-수정">
<a class="anchor" href="#service%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EC%9D%B4%EB%A6%84-%EC%88%98%EC%A0%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>Service.메서드의 이름 수정</h4>

<ul>
  <li>start -&gt; <code class="language-plaintext highlighter-rouge">match</code>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305004131691.png" alt="image-20220305004131691">
</li>
</ul>

<h3 id="일급으로-바꿨더니-서비스-메서드-내부에-도메인-로직이---메서드-분리로-역할-분리">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%A8%EB%8D%94%EB%8B%88-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A9%94%EC%84%9C%EB%93%9C-%EB%82%B4%EB%B6%80%EC%97%90-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A1%9C%EC%A7%81%EC%9D%B4---%EB%A9%94%EC%84%9C%EB%93%9C-%EB%B6%84%EB%A6%AC%EB%A1%9C-%EC%97%AD%ED%95%A0-%EB%B6%84%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급으로 바꿨더니, 서비스 메서드 내부에 도메인 로직이? -&gt; 메서드 분리로 역할 분리</h3>

<ul>
  <li>
<strong>getter가 있으면 도메인내부로직임을 의심</strong>한다.</li>
</ul>

<h4 id="일급vs일급-or-일급vs단일의-로직도메인-로직-특히-getter써놓은부분이-servicemethod내부에-있는지-확인한다-getter가-있으면-의심해본다">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89vs%EC%9D%BC%EA%B8%89-or-%EC%9D%BC%EA%B8%89vs%EB%8B%A8%EC%9D%BC%EC%9D%98-%EB%A1%9C%EC%A7%81%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A1%9C%EC%A7%81-%ED%8A%B9%ED%9E%88-getter%EC%8D%A8%EB%86%93%EC%9D%80%EB%B6%80%EB%B6%84%EC%9D%B4-servicemethod%EB%82%B4%EB%B6%80%EC%97%90-%EC%9E%88%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%9C%EB%8B%A4-getter%EA%B0%80-%EC%9E%88%EC%9C%BC%EB%A9%B4-%EC%9D%98%EC%8B%AC%ED%95%B4%EB%B3%B8%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급vs일급 or 일급vs단일의 로직(<code class="language-plaintext highlighter-rouge">도메인 로직-특히 getter써놓은부분</code>)이 <code class="language-plaintext highlighter-rouge">Service</code>.method()내부에 있는지 확인한다. getter가 있으면 의심해본다.</h4>

<ol>
  <li>
    <p><strong>Lotto와 Lotto를 비교하는 로직</strong>이 보인다. 같은 도메인끼리의 비교를 서비스내에서 할 필요가 없다. <strong>같은 놈끼리는 더더욱 메세지를 보내서 getter의 존재없이 비교되도록 + 도메인을 풍부하게 해준다.</strong></p>

    <ul>
      <li>비교로직을 도메인으로 넣고, matchCount만 받아오자.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoService</span> <span class="o">{</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">start</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">winningLotto</span><span class="o">,</span>
                             <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
         <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
         <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">())</span> <span class="o">{</span>
             <span class="k">if</span> <span class="o">(</span><span class="n">winningLotto</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
                 <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
             <span class="o">}</span>
         <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>matchCount는 서비스가 가지고 있어야하는데, <strong>비교해서 누적하는 부분만 <code class="language-plaintext highlighter-rouge">도메인 로직</code></strong>이다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305095245511.png" alt="image-20220305095245511"></p>
  </li>
</ol>

<h4 id="서비스내-도메인-로직을-도메인-내부-메서드로-옮긴다">
<a class="anchor" href="#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%82%B4-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%82%B4%EB%B6%80-%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C-%EC%98%AE%EA%B8%B4%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>서비스내 도메인 로직을 도메인 내부 메서드로 옮긴다.</h4>

<ol>
  <li>
    <p>getter로 꺼내서 억지로 하던 것이, 파라미터로 서로를 비교해도 바로 상태값을 갖다 쓸 수 있다. 일단 <strong>옮길 도메인내 메서드부터 만든다.</strong></p>

    <ul>
      <li>
<strong>서비스에서 갖다쓸 예정이니 서비스에서 빨간줄로</strong> 만들어도 될듯?</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305095554197.png" alt="image-20220305095554197"><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305095608289.png" alt="image-20220305095608289">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305095640695.png" alt="image-20220305095640695"></p>

    <ul>
      <li>
<strong>같은 것끼리의 비교는 <code class="language-plaintext highlighter-rouge">other</code>로 파라미터를 네이밍해주자</strong>
        <ul>
          <li><strong>파라미터 other(일급)이 <code class="language-plaintext highlighter-rouge">other.value(같은도메인 getter)</code>로 list가 되면서 찢어진다.</strong></li>
        </ul>
      </li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305105047887.png" alt="image-20220305105047887"></p>

    <ul>
      <li><strong>돌면서 누적하는 것은 <code class="language-plaintext highlighter-rouge">초기화 후 누적하는 폼</code>의 <code class="language-plaintext highlighter-rouge">가변변수</code>를 쓸 수 밖에 없다?</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305105122911.png" alt="image-20220305105122911">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305100147074.png" alt="image-20220305100147074"></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
     <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
     <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lotto</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lotto</span><span class="o">))</span> <span class="o">{</span>
             <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
         <span class="o">}</span>
     <span class="o">}</span>
    
     <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="포장과정에서-빠르게-처리하여-생긴-포장getter메서드가-서비스메서드내-보인다면-도메인로직으로-내부-value메서드가-되도록넘겨준다">
<a class="anchor" href="#%ED%8F%AC%EC%9E%A5%EA%B3%BC%EC%A0%95%EC%97%90%EC%84%9C-%EB%B9%A0%EB%A5%B4%EA%B2%8C-%EC%B2%98%EB%A6%AC%ED%95%98%EC%97%AC-%EC%83%9D%EA%B8%B4-%ED%8F%AC%EC%9E%A5getter%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A9%94%EC%84%9C%EB%93%9C%EB%82%B4-%EB%B3%B4%EC%9D%B8%EB%8B%A4%EB%A9%B4-%EB%8F%84%EB%A9%94%EC%9D%B8%EB%A1%9C%EC%A7%81%EC%9C%BC%EB%A1%9C-%EB%82%B4%EB%B6%80-value%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EB%90%98%EB%8F%84%EB%A1%9D%EB%84%98%EA%B2%A8%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>포장과정에서 빠르게 처리하여 생긴 <code class="language-plaintext highlighter-rouge">포장.getter.메서드()</code>가 서비스메서드내 보인다면, 도메인로직으로 (내부 <code class="language-plaintext highlighter-rouge">value.메서드()</code>가 되도록)넘겨준다.</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305100242729.png" alt="image-20220305100242729"></p>

<ol>
  <li>
    <p>서비스메서드내 <strong>포장(도메인).getter</strong>가 보인다.</p>

    <ul>
      <li>넘겨줄 수 없을까?</li>
      <li><strong><code class="language-plaintext highlighter-rouge">getter()를 지워</code> getValue().메서드를 <code class="language-plaintext highlighter-rouge">포장.메서드()</code>로 빨간줄을 생성하여 대체한다.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305100829501.png" alt="image-20220305100829501"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305100853434.png" alt="image-20220305100853434"></p>

    <ul>
      <li>파라미터(매개변수) 이름으로 <code class="language-plaintext highlighter-rouge">bonusNumbe</code>는 너무 구체적이다. <strong>팀원입장에서 시그니쳐보고 쓸건데, 좀더 추상적이면서, 넓게… <code class="language-plaintext highlighter-rouge">메서드 입장에서는 구체적인 bonus라는 것을 모른다.</code> <code class="language-plaintext highlighter-rouge">LottoNumber 역시 클래스랑 완전 동일해서.. value를 일급이 이미썼으니 -&gt; number로 네이밍 해준다.</code></strong>
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305101124747.png" alt="image-20220305101124747"></p>

    <ul>
      <li>바깥에서 <code class="language-plaintext highlighter-rouge">포장.getValue().contains</code>로 사용됬던 것을 -&gt; <code class="language-plaintext highlighter-rouge">포장.contains</code>메서드 -&gt; 도메인 내부에서 getter없이 <code class="language-plaintext highlighter-rouge">value.contains</code>로 사용하도록 만든다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305101234690.png" alt="image-20220305101234690"></p>
  </li>
  <li>
    <p>서비스로직에 geValue()를 달고 있는 것ㅇ 도메인 로직으로 옮겨가며되면, <strong><code class="language-plaintext highlighter-rouge">포장(도메인).getValue()</code>가 비활성화 되며 -&gt; alt+del로 안전삭제</strong> 해준다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305103035213.png" alt="image-20220305103035213">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305103046257.png" alt="image-20220305103046257"></p>
  </li>
</ol>

<h4 id="일급과-단일의-메서드가-정의됬다면---일급vs일급에서도-사용될-가능성이-있다">
<a class="anchor" href="#%EC%9D%BC%EA%B8%89%EA%B3%BC-%EB%8B%A8%EC%9D%BC%EC%9D%98-%EB%A9%94%EC%84%9C%EB%93%9C%EA%B0%80-%EC%A0%95%EC%9D%98%EB%90%AC%EB%8B%A4%EB%A9%B4---%EC%9D%BC%EA%B8%89vs%EC%9D%BC%EA%B8%89%EC%97%90%EC%84%9C%EB%8F%84-%EC%82%AC%EC%9A%A9%EB%90%A0-%EA%B0%80%EB%8A%A5%EC%84%B1%EC%9D%B4-%EC%9E%88%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>일급과 단일의 메서드가 정의됬다면 -&gt; 일급vs일급에서도 사용될 가능성이 있다.</h4>

<ul>
  <li>
    <p>서비스 로직에 있던 <code class="language-plaintext highlighter-rouge">일급.contains(단일)</code>의 메서드가 정의되었다면
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305103300809.png" alt="image-20220305103300809"></p>

    <ul>
      <li>
<strong><code class="language-plaintext highlighter-rouge">일급vs단일</code>은 일급내에서 <code class="language-plaintext highlighter-rouge">파라미터/우항이 찢어지는 일급vs일급 비교메서드</code>에서</strong> 쓰일 가능성이 높다.</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220305105315418.png" alt="image-20220305105315418"></p>

    <ul>
      <li>정의했으면, 찾아서 대체해준다.</li>
    </ul>
  </li>
  <li>
    <p><strong>객체없이 호출되는 메서드</strong> -&gt; 순수묶음 or <strong><code class="language-plaintext highlighter-rouge">[내부 포장된 변수](현재는 일급을 get한 단일List)</code>가 쓰이는 내부 메서드</strong></p>

    <ul>
      <li><code class="language-plaintext highlighter-rouge">contains( xxx) </code></li>
      <li><strong><code class="language-plaintext highlighter-rouge">(현재 도메인의 포장하는 변수)가 생략된체로</code> <code class="language-plaintext highlighter-rouge">cotains()</code>하고 있구나 생각</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">//value:[일급]       lotto:찢어진 일급이 돌고 있는 [단일]</span>
          <span class="c1">// [일급 내부] 메서드 contains는</span>
          <span class="c1">// [일급의 getter(단일List)된 value가 내부에서 쓰이는] 메서드로서,</span>
          <span class="c1">// 들어오는 단일에 대해 [현재 일급의 단일List]가 &lt;파라미터 단일&gt;을 포함하는지</span>
          <span class="c1">// my) 객체없는 메서드 -&gt; 순수묶음 or [내부 포장된 변수](현재는 일급을 get한 단일List)가 쓰이는 내부 메서드</span>
          <span class="c1">//            if (value.contains(lotto)) {</span>
          <span class="c1">// 객체없이 호출된다? 내부상태가 쓰이는 내부 정의 메서드구나~!</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="o">}</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
    
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="응답값도-포장할-수-있다-만약-제한된-종류--if분기마다-달라지는-응답값라면-enum응답-포장후--응답에-필요한-input들로-정펙매-를-호출한-뒤-내부로-분기-옮겨-응답한다-이후-if분기를-처리해줄--input-필드들---응답값을-매핑한다">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EA%B0%92%EB%8F%84-%ED%8F%AC%EC%9E%A5%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4-%EB%A7%8C%EC%95%BD-%EC%A0%9C%ED%95%9C%EB%90%9C-%EC%A2%85%EB%A5%98--if%EB%B6%84%EA%B8%B0%EB%A7%88%EB%8B%A4-%EB%8B%AC%EB%9D%BC%EC%A7%80%EB%8A%94-%EC%9D%91%EB%8B%B5%EA%B0%92%EB%9D%BC%EB%A9%B4-enum%EC%9D%91%EB%8B%B5-%ED%8F%AC%EC%9E%A5%ED%9B%84--%EC%9D%91%EB%8B%B5%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-input%EB%93%A4%EB%A1%9C-%EC%A0%95%ED%8E%99%EB%A7%A4-%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%9C-%EB%92%A4-%EB%82%B4%EB%B6%80%EB%A1%9C-%EB%B6%84%EA%B8%B0-%EC%98%AE%EA%B2%A8-%EC%9D%91%EB%8B%B5%ED%95%9C%EB%8B%A4-%EC%9D%B4%ED%9B%84-if%EB%B6%84%EA%B8%B0%EB%A5%BC-%EC%B2%98%EB%A6%AC%ED%95%B4%EC%A4%84--input-%ED%95%84%EB%93%9C%EB%93%A4---%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9D%84-%EB%A7%A4%ED%95%91%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">응답값도 포장</code>할 수 있다. 만약, <code class="language-plaintext highlighter-rouge">제한된 종류 + if분기마다 달라지는 응답값</code>라면 <code class="language-plaintext highlighter-rouge">ENUM응답 포장</code>후  응답에 필요한 input들로 <code class="language-plaintext highlighter-rouge">정펙매</code> 를 호출한 뒤 내부로 분기 옮겨 응답한다. 이후 <code class="language-plaintext highlighter-rouge">if분기를 처리해줄 &lt; input-&gt;필드들 - 응답값&gt;을 매핑</code>한다.</h3>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">int</code>를 포장한 뒤 -&gt; <strong>관련된 if분기 로직을 포장한 도메인으로 넘기면, <code class="language-plaintext highlighter-rouge">메서드 if문이</code> 사라진다.</strong>,</li>
</ul>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306183403967.png" alt="image-20220306183403967"></p>

<h4 id="제한된-종류의-응답-값포장은-enum을-활용한다--메서드-응답을-빨간줄로-바꿔-생성하자">
<a class="anchor" href="#%EC%A0%9C%ED%95%9C%EB%90%9C-%EC%A2%85%EB%A5%98%EC%9D%98-%EC%9D%91%EB%8B%B5-%EA%B0%92%ED%8F%AC%EC%9E%A5%EC%9D%80-enum%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C%EB%8B%A4--%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%91%EB%8B%B5%EC%9D%84-%EB%B9%A8%EA%B0%84%EC%A4%84%EB%A1%9C-%EB%B0%94%EA%BF%94-%EC%83%9D%EC%84%B1%ED%95%98%EC%9E%90" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">제한된 종류의 응답 값</code>포장은 Enum을 활용한다.  메서드 응답을 빨간줄로 바꿔 생성하자.</h4>

<ul>
  <li>
    <p>만약, 제한되지 않았다면? <code class="language-plaintext highlighter-rouge">class Rank</code>로, <strong>현재는 <code class="language-plaintext highlighter-rouge">제한된 종류</code>의 값 응답이므로 <code class="language-plaintext highlighter-rouge">Enum</code>으로 매핑해서 <code class="language-plaintext highlighter-rouge">if를 대신</code>하게 해보자.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306183754213.png" alt="image-20220306183754213"></p>
  </li>
  <li>
    <p>연속된 상수라면, <code class="language-plaintext highlighter-rouge">Enum명_ 순서</code>를 활용하면 된다.</p>

    <ul>
      <li>1,2,3,4,5등 -&gt; <code class="language-plaintext highlighter-rouge">등</code>을 Enum으로 만들고 등_1,2,3,4,5; 로 선언해보자.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">lotto</span><span class="o">;</span>
    
  <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>
    
      <span class="no">RANK_1</span><span class="o">,</span>
      <span class="no">RANK_2</span><span class="o">,</span>
      <span class="no">RANK_3</span><span class="o">,</span>
      <span class="no">RANK_4</span><span class="o">,</span>
      <span class="no">RANK_5</span><span class="o">;</span>
  <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="응답에-대한-분기로직을-어떻게-응답class응답enum으로-넘길까">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EC%97%90-%EB%8C%80%ED%95%9C-%EB%B6%84%EA%B8%B0%EB%A1%9C%EC%A7%81%EC%9D%84-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9D%91%EB%8B%B5class%EC%9D%91%EB%8B%B5enum%EC%9C%BC%EB%A1%9C-%EB%84%98%EA%B8%B8%EA%B9%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>응답에 대한 분기로직을 어떻게 응답class/응답Enum으로 넘길까?</h4>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306184557340.png" alt="image-20220306184557340"></p>

<h5 id="메서드-응답부에서-원하는-포장된-응답값인-enum객체을-뽑아-응답해주는--return-enum정펙매of-완성하기">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%9D%91%EB%8B%B5%EB%B6%80%EC%97%90%EC%84%9C-%EC%9B%90%ED%95%98%EB%8A%94-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9D%B8-enum%EA%B0%9D%EC%B2%B4%EC%9D%84-%EB%BD%91%EC%95%84-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%A3%BC%EB%8A%94--return-enum%EC%A0%95%ED%8E%99%EB%A7%A4of-%EC%99%84%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">메서드 응답부</code>에서 원하는 포장된 응답값인 Enum객체을 뽑아 응답해주는  <code class="language-plaintext highlighter-rouge">return Enum.정펙매of (,)</code>완성하기</h5>

<ul>
  <li>
    <p><strong>결과적으로 <code class="language-plaintext highlighter-rouge">정펙매</code>인 <code class="language-plaintext highlighter-rouge">Enum.from()</code> or <code class="language-plaintext highlighter-rouge">Enum.of( , , )</code>로 Enum객체를 응답해야한다.</strong></p>

    <ul>
      <li>원하는 Enum객체가 응답될 수 있도록 <strong>필요한 인자들을 생각해서 받아들인다.</strong>
</li>
      <li><strong>실제로 <code class="language-plaintext highlighter-rouge">입력값이 될 것들을 가지고 있는 사용부인 메서드 응답부에서 부터 시작</code></strong></li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>응답부에서 <strong>Enum.정팩메로 해당하는 <code class="language-plaintext highlighter-rouge">포장응답값</code>을 <code class="language-plaintext highlighter-rouge">return</code>해 줄 예정이다.</strong></p>

    <ul>
      <li>필요한 input들이 뭐가 있는지 살펴본다.</li>
      <li><strong>메서드호출의 결과값이 있다면, <code class="language-plaintext highlighter-rouge">input</code>이 명확하도록 따로 변수로 뽑아주자.</strong></li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190059628.png" alt="image-20220306190059628">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190115387.png" alt="image-20220306190115387"></p>

    <ul>
      <li>
<strong>정팩메로는 <code class="language-plaintext highlighter-rouge">Enum</code>이라는 <code class="language-plaintext highlighter-rouge">포장된 응답값</code>을 가져올 것이기 때문에 <code class="language-plaintext highlighter-rouge">return</code>과 같이 작성한다.</strong>
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190225323.png" alt="image-20220306190225323">
</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190457221.png" alt="image-20220306190457221"></p>
  </li>
</ol>

<h5 id="값-응답-로직을----포장응답값-정펙매로-잘라내서-처리하기">
<a class="anchor" href="#%EA%B0%92-%EC%9D%91%EB%8B%B5-%EB%A1%9C%EC%A7%81%EC%9D%84----%ED%8F%AC%EC%9E%A5%EC%9D%91%EB%8B%B5%EA%B0%92-%EC%A0%95%ED%8E%99%EB%A7%A4%EB%A1%9C-%EC%9E%98%EB%9D%BC%EB%82%B4%EC%84%9C-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>값 응답 로직을 -&gt;  포장응답값 정펙매로 잘라내서 처리하기</h5>

<ol>
  <li>
    <p>이제 값 응답로직을 그대로 잘라붙혀넣기 한다.
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190736124.png" alt="image-20220306190736124"></p>

    <ul>
      <li>이동후</li>
    </ul>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306190810106.png" alt="image-20220306190810106"></p>
  </li>
</ol>

<h4 id="정팩메-내부로-옮긴-분기에-대해-응답값들을-enum객체로-수정해주기---없는-값0-none에-대해서도-outnone객체-만들어서-응답해주기">
<a class="anchor" href="#%EC%A0%95%ED%8C%A9%EB%A9%94-%EB%82%B4%EB%B6%80%EB%A1%9C-%EC%98%AE%EA%B8%B4-%EB%B6%84%EA%B8%B0%EC%97%90-%EB%8C%80%ED%95%B4-%EC%9D%91%EB%8B%B5%EA%B0%92%EB%93%A4%EC%9D%84-enum%EA%B0%9D%EC%B2%B4%EB%A1%9C-%EC%88%98%EC%A0%95%ED%95%B4%EC%A3%BC%EA%B8%B0---%EC%97%86%EB%8A%94-%EA%B0%920-none%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C%EB%8F%84-outnone%EA%B0%9D%EC%B2%B4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%84%9C-%EC%9D%91%EB%8B%B5%ED%95%B4%EC%A3%BC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>정팩메 내부로 옮긴 분기에 대해, 응답[값]들을 [Enum객체]로 수정해주기 -&gt; 없는 값(0, None)에 대해서도 OUT,NONE객체 만들어서 응답해주기</h4>

<ul>
  <li>
    <p>아직 바꾸기 전 응답로직</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">2</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">3</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">4</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">4</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="mi">5</span><span class="o">;</span>
  <span class="o">}</span>
    
  <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>수정 + NONE객체 추가후</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">lotto</span><span class="o">;</span>
    
  <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>
    
      <span class="no">RANK_1</span><span class="o">,</span>
      <span class="no">RANK_2</span><span class="o">,</span>
      <span class="no">RANK_3</span><span class="o">,</span>
      <span class="no">RANK_4</span><span class="o">,</span>
      <span class="no">RANK_5</span><span class="o">,</span>
      <span class="no">OUT</span><span class="o">;</span>
    
      <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                            <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
    
          <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="no">RANK_1</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="no">RANK_2</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="no">RANK_3</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">4</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="no">RANK_4</span><span class="o">;</span>
          <span class="o">}</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="no">RANK_5</span><span class="o">;</span>
          <span class="o">}</span>
    
          <span class="k">return</span> <span class="no">OUT</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
    
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">userLotto</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">winningLotto</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">bonusNumber</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">match</span><span class="o">(</span><span class="n">winningLotto</span><span class="o">);</span>
      <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span> <span class="o">=</span> <span class="n">userLotto</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">bonusNumber</span><span class="o">);</span>
    
      <span class="k">return</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">);</span>
  <span class="o">}</span>
    
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="메서드-포장된-응답-테스트-작성하기">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C-%ED%8F%AC%EC%9E%A5%EB%90%9C-%EC%9D%91%EB%8B%B5-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드 [포장된 응답] 테스트 작성하기</h4>

<h5 id="여러분기므로-1case에-대한---1예상값-마다-테매를-작성해야한다">
<a class="anchor" href="#%EC%97%AC%EB%9F%AC%EB%B6%84%EA%B8%B0%EB%AF%80%EB%A1%9C-1case%EC%97%90-%EB%8C%80%ED%95%9C---1%EC%98%88%EC%83%81%EA%B0%92-%EB%A7%88%EB%8B%A4-%ED%85%8C%EB%A7%A4%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%95%BC%ED%95%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>여러분기므로 1case에 대한 -&gt; 1예상값 마다 테매를 작성해야한다.</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">match_1</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">//given, when</span>
    <span class="kd">final</span> <span class="nc">Rank</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">LottoService</span><span class="o">.</span><span class="na">match</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">Lotto</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">LottoNumber</span><span class="o">(</span><span class="mi">7</span><span class="o">)</span>
    <span class="o">);</span>

    <span class="c1">//then</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">RANK_1</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="if분기를-enum-매핑으로-제거하기">
<a class="anchor" href="#if%EB%B6%84%EA%B8%B0%EB%A5%BC-enum-%EB%A7%A4%ED%95%91%EC%9C%BC%EB%A1%9C-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>if분기를 enum 매핑으로 제거하기</h4>

<h5 id="정팩메-input으로-들어올-데이터들-中--1개를-골라-매핑-예정인-enum객체의-필드로-넣어준다">
<a class="anchor" href="#%EC%A0%95%ED%8C%A9%EB%A9%94-input%EC%9C%BC%EB%A1%9C-%EB%93%A4%EC%96%B4%EC%98%AC-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%93%A4-%E4%B8%AD--1%EA%B0%9C%EB%A5%BC-%EA%B3%A8%EB%9D%BC-%EB%A7%A4%ED%95%91-%EC%98%88%EC%A0%95%EC%9D%B8-enum%EA%B0%9D%EC%B2%B4%EC%9D%98-%ED%95%84%EB%93%9C%EB%A1%9C-%EB%84%A3%EC%96%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>정팩메 input으로 <code class="language-plaintext highlighter-rouge">들어올 데이터</code>들 中  1개를 골라 <code class="language-plaintext highlighter-rouge">(매핑 예정인) Enum객체의 필드</code>로 넣어준다.</h5>

<ul>
  <li>
    <p><strong>정펙매로 <code class="language-plaintext highlighter-rouge">여러 데이터</code>가 들어와 사용</strong>가 들어오지만 <code class="language-plaintext highlighter-rouge">of( matchCount, matchBonus)</code></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306222111985.png" alt="image-20220306222111985"></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">매핑에 사용될 쉬운 변수 1개</code>만 선택하여, <code class="language-plaintext highlighter-rouge">정펙매 내부 values().stream.filter 분기</code>에서 비교할 것이다. Enum객체가 필드로 가지고 있으면 되며, 그 필드 기준으로 매핑값도 차후 배정된다.</strong></li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>쉽게 <strong>Enum의 필드에 넣기</strong> 위해서는 <strong>일단 ENUM<code class="language-plaintext highlighter-rouge">(1)</code> 객체 옆에 빨간줄로 <code class="language-plaintext highlighter-rouge">원시형 예제</code>작성해준다.</strong>
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306222323949.png" alt="image-20220306222323949"></p>

    <p><img src="C:%5CUsers%5Ccho_desktop%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220306222358375.png" alt="image-20220306222358375"></p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">생성자를 생성</code>해주면서 <code class="language-plaintext highlighter-rouge">input과 똑같이 네이밍</code>후   <code class="language-plaintext highlighter-rouge">빨간줄 this.필드명 = 필드; 초기화</code>를 이용해서 필드를 생성한다.</strong></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306222528608.png" alt="image-20220306222528608"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306222623598.png" alt="image-20220306222623598"></p>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306222631104.png" alt="image-20220306222631104"></p>
  </li>
  <li>
    <p>나머지 객체도 데이터를 넣어준다.</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>
    
     <span class="no">RANK_1</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span>
     <span class="no">RANK_2</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
     <span class="no">RANK_3</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
     <span class="no">RANK_4</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span>
     <span class="no">RANK_5</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
     <span class="no">OUT</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    
     <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">;</span>
    
     <span class="nc">Rank</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">matchCount</span> <span class="o">=</span> <span class="n">matchCount</span><span class="o">;</span>
     <span class="o">}</span>
    
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                           <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
    
         <span class="k">if</span> <span class="o">(</span><span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">return</span> <span class="no">RANK_1</span><span class="o">;</span>
         <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="enum정팩메-내-제한된종류의-모든-if분기를--valuesstream--filter-with-input-vs-매핑field로-분기-없애기">
<a class="anchor" href="#enum%EC%A0%95%ED%8C%A9%EB%A9%94-%EB%82%B4-%EC%A0%9C%ED%95%9C%EB%90%9C%EC%A2%85%EB%A5%98%EC%9D%98-%EB%AA%A8%EB%93%A0-if%EB%B6%84%EA%B8%B0%EB%A5%BC--valuesstream--filter-with-input-vs-%EB%A7%A4%ED%95%91field%EB%A1%9C-%EB%B6%84%EA%B8%B0-%EC%97%86%EC%95%A0%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enum정팩메 내 [제한된종류의 모든 if분기]를  values().stream + filter with input vs 매핑field로 분기 없애기</h4>

<h5 id="특수한-경우-정팩매에서-enum매핑값-뽑기도-전에--early-return해준다">
<a class="anchor" href="#%ED%8A%B9%EC%88%98%ED%95%9C-%EA%B2%BD%EC%9A%B0-%EC%A0%95%ED%8C%A9%EB%A7%A4%EC%97%90%EC%84%9C-enum%EB%A7%A4%ED%95%91%EA%B0%92-%EB%BD%91%EA%B8%B0%EB%8F%84-%EC%A0%84%EC%97%90--early-return%ED%95%B4%EC%A4%80%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>특수한 경우, 정팩매에서 ENUM매핑값 뽑기도 전에,  early return해준다.</h5>

<ul>
  <li>
    <p>특수한 경우로서 2등과 3등을 먼저 <strong>필드는 안됬지만 사용해야하는 변수 matchBonus</strong>로 <strong>홀로 true인 2등을 early return한다.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                        <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
    
      <span class="k">if</span> <span class="o">(</span><span class="n">matchBonus</span> <span class="o">&amp;&amp;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">return</span> <span class="no">RANK_2</span><span class="o">;</span>
      <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="enum내에서-values는-enum객체배열을-응답하며-거기에-배열stream자동완성-사용하여-enumstream-만들어-객체전체를-돌리기">
<a class="anchor" href="#enum%EB%82%B4%EC%97%90%EC%84%9C-values%EB%8A%94-enum%EA%B0%9D%EC%B2%B4%EB%B0%B0%EC%97%B4%EC%9D%84-%EC%9D%91%EB%8B%B5%ED%95%98%EB%A9%B0-%EA%B1%B0%EA%B8%B0%EC%97%90-%EB%B0%B0%EC%97%B4stream%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-enumstream-%EB%A7%8C%EB%93%A4%EC%96%B4-%EA%B0%9D%EC%B2%B4%EC%A0%84%EC%B2%B4%EB%A5%BC-%EB%8F%8C%EB%A6%AC%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enum내에서 values()는 Enum객체배열을 응답하며 거기에 <code class="language-plaintext highlighter-rouge">배열.stream자동완성</code> 사용하여 <code class="language-plaintext highlighter-rouge">EnumStream 만들어 객체전체를 돌리기</code>
</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306223256714.png" alt="image-20220306223256714"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306223352829.png" alt="image-20220306223352829"></p>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306223432081.png" alt="image-20220306223432081"></p>

<h5 id="제한된-종류의-if분기를-valuesstream-for---filterit----input-vs-매핑field-비교-대체하기">
<a class="anchor" href="#%EC%A0%9C%ED%95%9C%EB%90%9C-%EC%A2%85%EB%A5%98%EC%9D%98-if%EB%B6%84%EA%B8%B0%EB%A5%BC-valuesstream-for---filterit----input-vs-%EB%A7%A4%ED%95%91field-%EB%B9%84%EA%B5%90-%EB%8C%80%EC%B2%B4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">제한된 종류의 if분기</code>를 <code class="language-plaintext highlighter-rouge">values().stream (for)  + filter(it -&gt;  input vs 매핑field 비교)</code> 대체하기</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                      <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">matchBonus</span> <span class="o">&amp;&amp;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="no">RANK_2</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="n">it</span><span class="o">.</span><span class="na">matchCount</span><span class="o">)</span>
        <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
        <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="no">OUT</span><span class="o">);</span>
</code></pre></div></div>

<ul>
  <li>기존 if분기들 이제 삭제
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306224423339.png" alt="image-20220306224423339">
</li>
</ul>

<h5 id="enum-sense-각-enum객체끝은-마지막도-콤마-그-다음라인----findany후-orelse-none객체-">
<a class="anchor" href="#enum-sense-%EA%B0%81-enum%EA%B0%9D%EC%B2%B4%EB%81%9D%EC%9D%80-%EB%A7%88%EC%A7%80%EB%A7%89%EB%8F%84-%EC%BD%A4%EB%A7%88-%EA%B7%B8-%EB%8B%A4%EC%9D%8C%EB%9D%BC%EC%9D%B8----findany%ED%9B%84-orelse-none%EA%B0%9D%EC%B2%B4-" aria-hidden="true"><span class="octicon octicon-link"></span></a>enum sense: 각 enum객체끝은 마지막도 콤마(,) 그 다음라인(;)  +  .findAny()후 .orElse( NONE객체 )</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>

    <span class="no">RANK_1</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span>
    <span class="no">RANK_2</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
    <span class="no">RANK_3</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
    <span class="no">RANK_4</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span>
    <span class="no">RANK_5</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
    <span class="no">OUT</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
    <span class="o">;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="n">it</span><span class="o">.</span><span class="na">matchCount</span><span class="o">)</span>
    <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
    <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="no">OUT</span><span class="o">);</span>

</code></pre></div></div>

<h4 id="bi비아이-predicate--로-input된-2개-값을-다-사용하는-1개의-람다식필드--filter속-예비-조건식testab로-실행을-만들어----enum의-1-필드-매핑에-사용되는-type을-함수형인터페이스로-사용하여---정펙매-내부-들어오는-2개값-모두-사용하는-enum-만들기">
<a class="anchor" href="#bi%EB%B9%84%EC%95%84%EC%9D%B4-predicate--%EB%A1%9C-input%EB%90%9C-2%EA%B0%9C-%EA%B0%92%EC%9D%84-%EB%8B%A4-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-1%EA%B0%9C%EC%9D%98-%EB%9E%8C%EB%8B%A4%EC%8B%9D%ED%95%84%EB%93%9C--filter%EC%86%8D-%EC%98%88%EB%B9%84-%EC%A1%B0%EA%B1%B4%EC%8B%9Dtestab%EB%A1%9C-%EC%8B%A4%ED%96%89%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4----enum%EC%9D%98-1-%ED%95%84%EB%93%9C-%EB%A7%A4%ED%95%91%EC%97%90-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-type%EC%9D%84-%ED%95%A8%EC%88%98%ED%98%95%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC---%EC%A0%95%ED%8E%99%EB%A7%A4-%EB%82%B4%EB%B6%80-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94-2%EA%B0%9C%EA%B0%92-%EB%AA%A8%EB%91%90-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-enum-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">Bi(비.아이.) Predicate&lt; , &gt;</code>로 <code class="language-plaintext highlighter-rouge">input된 2개 값을 다 사용하는 1개의 람다식필드 &amp;&amp; filter속 예비 조건식(.test(a,b)로 실행)</code>을 만들어 -&gt;  [enum의 1 필드 매핑]에 사용되는 Type을 <code class="language-plaintext highlighter-rouge">함수형인터페이스</code>로 사용하여 -&gt; 정펙매 내부 들어오는 2개값 모두 사용하는 enum 만들기</h4>

<ul>
  <li>
<strong>BiPredicate Type은  <code class="language-plaintext highlighter-rouge">1개 함수를 가진 인터페이스 = 함수형 인터페이스</code> 중 <code class="language-plaintext highlighter-rouge">2개 인자를 받아 실행대기 중인 조건식</code>을 제공해주고 -&gt; <code class="language-plaintext highlighter-rouge">.test( a, b)</code>를 통해 외부인자를 받아서 조건식을 실행한다.</strong>
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">.test(a, b)</code>에 정팩메로 들어온 input2개를 넣어주면 된다.</li>
    </ul>
  </li>
</ul>

<h5 id="아직-bipredicate-적용안한-기존-코드-상금도-매핑-안된-상태">
<a class="anchor" href="#%EC%95%84%EC%A7%81-bipredicate-%EC%A0%81%EC%9A%A9%EC%95%88%ED%95%9C-%EA%B8%B0%EC%A1%B4-%EC%BD%94%EB%93%9C-%EC%83%81%EA%B8%88%EB%8F%84-%EB%A7%A4%ED%95%91-%EC%95%88%EB%90%9C-%EC%83%81%ED%83%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>아직 BiPredicate 적용안한 기존 코드 (상금도 매핑 안된 상태)</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>

    <span class="no">RANK_1</span><span class="o">(</span><span class="mi">6</span><span class="o">),</span>
    <span class="no">RANK_2</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
    <span class="no">RANK_3</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span>
    <span class="no">RANK_4</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span>
    <span class="no">RANK_5</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span>
    <span class="no">OUT</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span>
    <span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">;</span>

    <span class="nc">Rank</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">matchCount</span> <span class="o">=</span> <span class="n">matchCount</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                          <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">matchBonus</span> <span class="o">&amp;&amp;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="no">RANK_2</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="n">it</span><span class="o">.</span><span class="na">matchCount</span><span class="o">)</span>
            <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
            <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="no">OUT</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h5 id="enum필드에-2인자-람다식인-bipredicate를-넣어서-생성하기">
<a class="anchor" href="#enum%ED%95%84%EB%93%9C%EC%97%90-2%EC%9D%B8%EC%9E%90-%EB%9E%8C%EB%8B%A4%EC%8B%9D%EC%9D%B8-bipredicate%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%84%9C-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enum필드에 2인자 람다식인 BiPredicate를 넣어서 생성하기</h5>

<ol>
  <li>이번엔 <code class="language-plaintext highlighter-rouge">Enum()</code>객체안에 input 중 1개 6,5,4.. 대신에 <strong><code class="language-plaintext highlighter-rouge">input 2필드 다 써서 1개 람다식</code>을 만들어 예제로 넣어주자.</strong>
    <ul>
      <li>이왕이면 다중커서로 한번에 다 입력해주자.
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306231741730.png" alt="image-20220306231741730">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306231807230.png" alt="image-20220306231807230">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306231833577.png" alt="image-20220306231833577">
  <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306231947811.png" alt="image-20220306231947811">
</li>
    </ul>
  </li>
</ol>

<h5 id="아쉽게도-bipredicate는-직접-필드입력---private-final-필드-변수-생성---생산자-자동완성로-가야한다-원래는-예제---생산자---빨간줄-this필드-생성">
<a class="anchor" href="#%EC%95%84%EC%89%BD%EA%B2%8C%EB%8F%84-bipredicate%EB%8A%94-%EC%A7%81%EC%A0%91-%ED%95%84%EB%93%9C%EC%9E%85%EB%A0%A5---private-final-%ED%95%84%EB%93%9C-%EB%B3%80%EC%88%98-%EC%83%9D%EC%84%B1---%EC%83%9D%EC%82%B0%EC%9E%90-%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1%EB%A1%9C-%EA%B0%80%EC%95%BC%ED%95%9C%EB%8B%A4-%EC%9B%90%EB%9E%98%EB%8A%94-%EC%98%88%EC%A0%9C---%EC%83%9D%EC%82%B0%EC%9E%90---%EB%B9%A8%EA%B0%84%EC%A4%84-this%ED%95%84%EB%93%9C-%EC%83%9D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>아쉽게도 BiPredicate는 <code class="language-plaintext highlighter-rouge">직접 필드입력 -&gt; private final 필드 변수 생성 -&gt; 생산자 자동완성</code>로 가야한다. (원래는 예제 -&gt; 생산자 -&gt; 빨간줄 this.필드 생성)</h5>

<ul>
  <li><strong>원래 객체( <code class="language-plaintext highlighter-rouge">원시값 등 쉬운 Type</code>)을 빨간줄 필드로 넣으면, 생성자에 파라미터 공짜 -&gt; this.로 필드 공짜 생성</strong></li>
</ul>

<ol>
  <li>
    <p>BiPredicate 작성</p>

    <ul>
      <li>
<strong>받은 인자 2개는 <code class="language-plaintext highlighter-rouge">if분기에 쓰였던 input값 2개</code>다.</strong> -&gt; <code class="language-plaintext highlighter-rouge">원래 Enum의 매핑 쉬운 상수 응답값 6, 5, 4...</code>와  비교해야한다.</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kd">enum</span> <span class="nc">Rank</span> <span class="o">{</span>
    
     <span class="no">RANK_1</span><span class="o">(((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">6</span><span class="o">)),</span>
     <span class="no">RANK_2</span><span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">matchBonus</span><span class="o">),</span>
     <span class="no">RANK_3</span><span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">matchBonus</span><span class="o">),</span>
     <span class="no">RANK_4</span><span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">4</span><span class="o">),</span>
     <span class="no">RANK_5</span><span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">==</span> <span class="mi">3</span><span class="o">),</span>
     <span class="no">OUT</span><span class="o">((</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">matchCount</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">),</span>
     <span class="o">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>필드 직접 입력 <code class="language-plaintext highlighter-rouge">private final</code></p>

    <ul>
      <li>제네릭 타입은 <strong>들어올 인자들의 Type(정팩메로 들어올 Type)을 Boxing한 타입 + <code class="language-plaintext highlighter-rouge">네이밍은 condition</code>으로 실행될 조건식임을 인지시킴</strong>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="kd">private</span> <span class="kd">final</span> <span class="nc">BiPredicate</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Boolean</span><span class="o">&gt;</span> <span class="n">condition</span><span class="o">;</span>
</code></pre></div>    </div>

    <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306233622030.png" alt="image-20220306233622030"></p>
  </li>
  <li>
    <p>생성자 자동완성
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306233747924.png" alt="image-20220306233747924">
 <img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220306233758792.png" alt="image-20220306233758792"></p>
  </li>
</ol>

<h5 id="valuesstream--filter분기에서-test--로-정펙매-인자를-받아-조건식-실행">
<a class="anchor" href="#valuesstream--filter%EB%B6%84%EA%B8%B0%EC%97%90%EC%84%9C-test--%EB%A1%9C-%EC%A0%95%ED%8E%99%EB%A7%A4-%EC%9D%B8%EC%9E%90%EB%A5%BC-%EB%B0%9B%EC%95%84-%EC%A1%B0%EA%B1%B4%EC%8B%9D-%EC%8B%A4%ED%96%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>values().stream + filter분기에서 <code class="language-plaintext highlighter-rouge">.test( , )로 정펙매 인자</code>를 받아 조건식 실행</h5>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Rank</span> <span class="nf">of</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span>
                      <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">values</span><span class="o">())</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">condition</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">))</span>
        <span class="o">.</span><span class="na">findAny</span><span class="o">()</span>
        <span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="no">OUT</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="응답값의-포장리팩토링이-다-끝났으면-자체-도메인testenum은-정펙매-테스트">
<a class="anchor" href="#%EC%9D%91%EB%8B%B5%EA%B0%92%EC%9D%98-%ED%8F%AC%EC%9E%A5%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EC%9D%B4-%EB%8B%A4-%EB%81%9D%EB%82%AC%EC%9C%BC%EB%A9%B4-%EC%9E%90%EC%B2%B4-%EB%8F%84%EB%A9%94%EC%9D%B8testenum%EC%9D%80-%EC%A0%95%ED%8E%99%EB%A7%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>응답값의 포장(리팩토링)이 다 끝났으면, 자체 도메인Test(Enum은 정펙매 테스트)</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">rank_1</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Rank</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">RANK_1</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kt">void</span> <span class="nf">rank_2</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Rank</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="nc">Rank</span><span class="o">.</span><span class="na">RANK_2</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@ParameterizedTest</span>
<span class="nd">@CsvSource</span><span class="o">({</span><span class="s">"5,false,RANK_3"</span><span class="o">,</span> <span class="s">"4, false, RANK_4"</span><span class="o">,</span> <span class="s">"3, false, RANK_5"</span><span class="o">})</span>
<span class="kt">void</span> <span class="nf">rank_3_5</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">matchBonus</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">Rank</span> <span class="n">expected</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Rank</span> <span class="n">rank</span> <span class="o">=</span> <span class="nc">Rank</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">matchBonus</span><span class="o">);</span>

    <span class="n">assertThat</span><span class="o">(</span><span class="n">rank</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expected</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="리팩토링가변변수-0에-조건만족시-갯수-누적">
<a class="anchor" href="#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98-0%EC%97%90-%EC%A1%B0%EA%B1%B4%EB%A7%8C%EC%A1%B1%EC%8B%9C-%EA%B0%AF%EC%88%98-%EB%88%84%EC%A0%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>리팩토링(가변변수 0에 조건만족시 갯수 누적)</h3>

<h4 id="직전까지의합-0가변변수에-조건-만족시-add-1---stream--filter--count">
<a class="anchor" href="#%EC%A7%81%EC%A0%84%EA%B9%8C%EC%A7%80%EC%9D%98%ED%95%A9-0%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98%EC%97%90-%EC%A1%B0%EA%B1%B4-%EB%A7%8C%EC%A1%B1%EC%8B%9C-add-1---stream--filter--count" aria-hidden="true"><span class="octicon octicon-link"></span></a>직전까지의합 0가변변수에 조건 만족시 add 1 -&gt; stream + filter + count</h4>

<ul>
  <li>변경 전:   0이라는 <code class="language-plaintext highlighter-rouge">int 가변변수</code>를 먼저 선언해놓고 -&gt; 돌면서  조건만족시 -&gt; <code class="language-plaintext highlighter-rouge">가변변수에 += 1;</code>하는 행위</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 일급 Lotto</span>

<span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><strong>stream의 filter + count로 원하는 조건의 갯수를 누적된 상태로 바로 뽑을 수 있다.</strong></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 미리 가변 변수 int = 0;을 선언하지말고 조건만족시를 다 count()로 갯수만 반환받는다.</span>
<span class="c1">// - long이 기본 타입이라.. 캐스팅 해야한다.</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 우항, 파라미터를 찢는 놈이라고 했으니, other.value.stream()으로 찢었다.</span>
    <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
        <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">contains</span><span class="o">(</span><span class="n">it</span><span class="o">))</span>
        <span class="o">.</span><span class="na">count</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="stream없이-forif-에서-if를-메서드분리---누적변수없이도-응답-가능갯수니까-return-1-or-0">
<a class="anchor" href="#stream%EC%97%86%EC%9D%B4-forif-%EC%97%90%EC%84%9C-if%EB%A5%BC-%EB%A9%94%EC%84%9C%EB%93%9C%EB%B6%84%EB%A6%AC---%EB%88%84%EC%A0%81%EB%B3%80%EC%88%98%EC%97%86%EC%9D%B4%EB%8F%84-%EC%9D%91%EB%8B%B5-%EA%B0%80%EB%8A%A5%EA%B0%AF%EC%88%98%EB%8B%88%EA%B9%8C-return-1-or-0" aria-hidden="true"><span class="octicon octicon-link"></span></a>stream없이 for+if 에서 if를 메서드분리 -&gt; 누적변수없이도 응답 가능=갯수니까 return 1 or 0;</h4>

<ul>
  <li>
    <p>변경 전</p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
          <span class="o">}</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="for문-내부-if는-메서드-추출로-통채로-빼기---if가-바깥쪽-가변변수-조작한다면-return--메서드추출로-받아진다">
<a class="anchor" href="#for%EB%AC%B8-%EB%82%B4%EB%B6%80-if%EB%8A%94-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%B6%94%EC%B6%9C%EB%A1%9C-%ED%86%B5%EC%B1%84%EB%A1%9C-%EB%B9%BC%EA%B8%B0---if%EA%B0%80-%EB%B0%94%EA%B9%A5%EC%AA%BD-%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98-%EC%A1%B0%EC%9E%91%ED%95%9C%EB%8B%A4%EB%A9%B4-return--%EB%A9%94%EC%84%9C%EB%93%9C%EC%B6%94%EC%B6%9C%EB%A1%9C-%EB%B0%9B%EC%95%84%EC%A7%84%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">for문 내부 if는 메서드 추출</code>로 통채로 빼기 -&gt; if가 바깥쪽 가변변수 조작한다면? return = 메서드추출()로 받아진다.</h5>

<p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220307003010553.png" alt="image-20220307003010553"></p>

<ul>
  <li>
    <p><strong>원래 if 내부에서 바깥의 가변변수를 건들였으니 <code class="language-plaintext highlighter-rouge">if가 있던 자리</code> -&gt; <code class="language-plaintext highlighter-rouge">바깥 가변변수 = 메서드추출()</code>로 return받도록 짜여졌다.</strong></p>

    <ul>
      <li>
<strong>메서드추출했는데 변수에 리턴받는다?</strong> -&gt; <strong>내부에서 바깥의 가변변수를 건들였던 것을 뱉어준 것</strong>
</li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">matchCount</span> <span class="o">=</span> <span class="n">getMatchCount</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">lottoNumber</span><span class="o">);</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
    
  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">getMatchCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">lottoNumber</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
          <span class="n">matchCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="메서드추출로-튀어나온-내부에서-사용되던-바깥선언의-가변변수는-무조건--가변--메서드형태다">
<a class="anchor" href="#%EB%A9%94%EC%84%9C%EB%93%9C%EC%B6%94%EC%B6%9C%EB%A1%9C-%ED%8A%80%EC%96%B4%EB%82%98%EC%98%A8-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8D%98-%EB%B0%94%EA%B9%A5%EC%84%A0%EC%96%B8%EC%9D%98-%EA%B0%80%EB%B3%80%EB%B3%80%EC%88%98%EB%8A%94-%EB%AC%B4%EC%A1%B0%EA%B1%B4--%EA%B0%80%EB%B3%80--%EB%A9%94%EC%84%9C%EB%93%9C%ED%98%95%ED%83%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>메서드추출로 튀어나온 (내부에서 사용되던 바깥선언의) 가변변수는 무조건  <code class="language-plaintext highlighter-rouge">가변 = 메서드()</code>형태다</h5>

<ul>
  <li>
    <p>원래 <code class="language-plaintext highlighter-rouge">if문 내부에서 가변변수++, 가변변수+=1</code>를 해줬었는데… 추출된 것은 무조건 <code class="language-plaintext highlighter-rouge">변수 = 메서드()</code>형태인 이유는</p>

    <ul>
      <li>
        <p><strong>추출된 메서드의 파라미터로 가변변수가 들어간다.</strong></p>

        <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">matchCount</span> <span class="o">=</span> <span class="n">getMatchCount</span><span class="o">(</span><span class="n">matchCount</span><span class="o">,</span> <span class="n">lottoNumber</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>가변변수가 <strong><code class="language-plaintext highlighter-rouge">파라미터에서 선언되는 이름만 똑같은 지역변수</code>가 되는데, 이름은 같아도 <code class="language-plaintext highlighter-rouge">바깥 가변변수와는 전혀 다른 것</code>이다.</strong></p>

        <p><img src="https://raw.githubusercontent.com/is3js/screenshots/main/image-20220307003630353.png" alt="image-20220307003630353"></p>
      </li>
    </ul>
  </li>
</ul>

<h5 id="갯수-증가의-가변가변1-은-메서드추출시-파라미터지역변수로-안가도-return-1-or-0만-해주면-되므로-추출메서드에서-파라미터-삭제---이후-가변--이-아닌-가변--으로-바꿔주면-된다">
<a class="anchor" href="#%EA%B0%AF%EC%88%98-%EC%A6%9D%EA%B0%80%EC%9D%98-%EA%B0%80%EB%B3%80%EA%B0%80%EB%B3%801-%EC%9D%80-%EB%A9%94%EC%84%9C%EB%93%9C%EC%B6%94%EC%B6%9C%EC%8B%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EC%A7%80%EC%97%AD%EB%B3%80%EC%88%98%EB%A1%9C-%EC%95%88%EA%B0%80%EB%8F%84-return-1-or-0%EB%A7%8C-%ED%95%B4%EC%A3%BC%EB%A9%B4-%EB%90%98%EB%AF%80%EB%A1%9C-%EC%B6%94%EC%B6%9C%EB%A9%94%EC%84%9C%EB%93%9C%EC%97%90%EC%84%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EC%82%AD%EC%A0%9C---%EC%9D%B4%ED%9B%84-%EA%B0%80%EB%B3%80--%EC%9D%B4-%EC%95%84%EB%8B%8C-%EA%B0%80%EB%B3%80--%EC%9C%BC%EB%A1%9C-%EB%B0%94%EA%BF%94%EC%A3%BC%EB%A9%B4-%EB%90%9C%EB%8B%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a><code class="language-plaintext highlighter-rouge">갯수 증가</code>의 <code class="language-plaintext highlighter-rouge">가변++/가변+=1</code> 은 메서드추출시 <code class="language-plaintext highlighter-rouge">파라미터(=지역변수)로 안가도 return 1 or 0</code>만 해주면 되므로 [추출메서드에서 파라미터 삭제] -&gt; 이후 <code class="language-plaintext highlighter-rouge">가변 =</code> 이 아닌 <code class="language-plaintext highlighter-rouge">가변 += </code>으로 바꿔주면 된다.</h5>

<ul>
  <li>
    <p>파라미터=지역변수를 없애고,  <strong><code class="language-plaintext highlighter-rouge">지역변수++</code>자리를 <code class="language-plaintext highlighter-rouge">return 1</code>로 아니면 <code class="language-plaintext highlighter-rouge">return 0;</code>으로 대체하자.</strong></p>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">getMatchCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">matchCount</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">lottoNumber</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
          <span class="n">matchCount</span><span class="o">++;</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="c1">// 지역변수 지우고, 걸리면 갯수증가용 1 , 안걸리면 0 을 반환</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">getMatchCount</span><span class="o">(</span><span class="kd">final</span> <span class="nc">LottoNumber</span> <span class="n">lottoNumber</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">))</span> <span class="o">{</span>
          <span class="c1">//matchCount++;</span>
          <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>메서드 추출 기능 자체의 문제가 <code class="language-plaintext highlighter-rouge">가변+= 메서드리턴()</code>이 안되서 -&gt; <code class="language-plaintext highlighter-rouge">가변을 파라미터로 받은 뒤, 지역변수++, 지역변수+= 후 return</code>되는 문제였다.</strong></p>

    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">가변 = 메서드 추출()</code>부분을   <code class="language-plaintext highlighter-rouge">가변 += 메서드 추출()-1or0리턴;</code>으로 바꿔주자.</strong></li>
    </ul>

    <div class="language-java highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">match</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Lotto</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">matchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">LottoNumber</span> <span class="n">lottoNumber</span> <span class="o">:</span> <span class="n">other</span><span class="o">.</span><span class="na">value</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">//matchCount = getMatchCount(matchCount, lottoNumber);</span>
          <span class="c1">//matchCount = getMatchCount(lottoNumber);</span>
          <span class="n">matchCount</span> <span class="o">+=</span> <span class="n">getMatchCount</span><span class="o">(</span><span class="n">lottoNumber</span><span class="o">);</span>
      <span class="o">}</span>
    
      <span class="k">return</span> <span class="n">matchCount</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ul>


  </div><a class="u-url" href="/java/%EB%A1%9C%EB%98%90/%EA%B0%95%EC%9D%98/%ED%94%BC%EB%93%9C%EB%B0%B1/%EC%9A%B0%ED%85%8C%EC%BD%94/2022/03/06/%EA%B0%95%EC%9D%98)-%EB%84%A4%EC%98%A4-2%EB%8B%A8%EA%B3%84-%EB%A1%9C%EB%98%90-%ED%94%BC%EB%93%9C%EB%B0%B1.html" hidden></a>
</article>


<!-- <script src="https://utteranc.es/client.js"
        repo="is2js/blog_raw"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script> -->
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://blog.chojaeseong.com/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>평범한 한의사 돌범의 엔지니어 도전기</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a href="/feed.xml" target="_blank" title="rss">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/is2js/" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/yarotheslav" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.linkedin.com/in/yshmarov/" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
